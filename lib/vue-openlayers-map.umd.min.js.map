{"version":3,"sources":["webpack://vue-openlayers-map/webpack/universalModuleDefinition","webpack://vue-openlayers-map/webpack/bootstrap","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-string-tag-support.js","webpack://vue-openlayers-map/./node_modules/ol/events/EventType.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/function-bind-context.js","webpack://vue-openlayers-map/./node_modules/ol/tilegrid/common.js","webpack://vue-openlayers-map/./node_modules/ol/extent/Relationship.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://vue-openlayers-map/./node_modules/ol/render/EventType.js","webpack://vue-openlayers-map/./node_modules/ol/Overlay.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/length-of-array-like.js","webpack://vue-openlayers-map/./node_modules/ol/tilegrid.js","webpack://vue-openlayers-map/./node_modules/ol/dom.js","webpack://vue-openlayers-map/./node_modules/ol/extent.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/canvas/common.js","webpack://vue-openlayers-map/./node_modules/ol/MapBrowserEventType.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-species-constructor.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/ie8-dom-define.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/try-to-string.js","webpack://vue-openlayers-map/./node_modules/ol/events/Target.js","webpack://vue-openlayers-map/./node_modules/ol/util.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/canvas/Layer.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-callable.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-for-each.js","webpack://vue-openlayers-map/./node_modules/ol/CollectionEventType.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/Map.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/Composite.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/has-own-property.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Layer.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/html.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/simplify.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/require-object-coercible.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-method-has-species-support.js","webpack://vue-openlayers-map/./node_modules/ol/events.js","webpack://vue-openlayers-map/./node_modules/ol/control/Attribution.js","webpack://vue-openlayers-map/./node_modules/ol/control/Rotate.js","webpack://vue-openlayers-map/./node_modules/ol/control/Zoom.js","webpack://vue-openlayers-map/./node_modules/ol/control.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-absolute-index.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/export.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://vue-openlayers-map/./node_modules/ol/proj/Projection.js","webpack://vue-openlayers-map/./node_modules/ol/proj/epsg3857.js","webpack://vue-openlayers-map/./node_modules/ol/proj/epsg4326.js","webpack://vue-openlayers-map/./node_modules/ol/proj/projections.js","webpack://vue-openlayers-map/./node_modules/ol/proj/transforms.js","webpack://vue-openlayers-map/./node_modules/ol/proj.js","webpack://vue-openlayers-map/./node_modules/rbush/rbush.min.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.regexp.to-string.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/contains.js","webpack://vue-openlayers-map/./node_modules/ol/style/TextPlacement.js","webpack://vue-openlayers-map/./node_modules/ol/tilecoord.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/engine-v8-version.js","webpack://vue-openlayers-map/./node_modules/ol/render/Event.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/engine-user-agent.js","webpack://vue-openlayers-map/./node_modules/ol/size.js","webpack://vue-openlayers-map/./node_modules/ol/Observable.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-define-properties.js","webpack://vue-openlayers-map/./node_modules/ol/extent/Corner.js","webpack://vue-openlayers-map/./node_modules/ol/obj.js","webpack://vue-openlayers-map/./node_modules/ol/control/Control.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/a-possible-prototype.js","webpack://vue-openlayers-map/./node_modules/ol/style/IconImageCache.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/Instruction.js","webpack://vue-openlayers-map/./node_modules/ol/render/VectorContext.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/Builder.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/ImageBuilder.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/LineStringBuilder.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/PolygonBuilder.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/straightchunk.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/TextBuilder.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/BuilderGroup.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/BuilderType.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/textpath.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/Executor.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/ExecutorGroup.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/Immediate.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas/hitdetect.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/vector.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/canvas/VectorLayer.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Vector.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/this-number-value.js","webpack://vue-openlayers-map/./node_modules/ol/ViewProperty.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/indexed-object.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/add-to-unscopables.js","webpack://vue-openlayers-map/./node_modules/ol/layer/TileProperty.js","webpack://vue-openlayers-map/./node_modules/ol/layer/BaseTile.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/canvas/TileLayer.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Tile.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/native-symbol.js","webpack://vue-openlayers-map/./node_modules/ol/ViewHint.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-includes.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-length.js","webpack://vue-openlayers-map/./node_modules/ol/geom/GeometryLayout.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Base.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/shared.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/own-keys.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-string.js","webpack://vue-openlayers-map/./node_modules/ol/functions.js","webpack://vue-openlayers-map/./node_modules/ol/structs/RBush.js","webpack://vue-openlayers-map/./node_modules/ol/loadingstrategy.js","webpack://vue-openlayers-map/./node_modules/ol/format/FormatType.js","webpack://vue-openlayers-map/./node_modules/ol/featureloader.js","webpack://vue-openlayers-map/./node_modules/ol/source/Vector.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/whitespaces.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/string-trim.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://vue-openlayers-map/./node_modules/ol/MapEventType.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/length.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/a-callable.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/area.js","webpack://vue-openlayers-map/./node_modules/ol/geom/LinearRing.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/interiorpoint.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/reverse.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/orient.js","webpack://vue-openlayers-map/./node_modules/ol/geom/Polygon.js","webpack://vue-openlayers-map/./node_modules/ol/color.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/create-property-descriptor.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/function-name.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/Property.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/Interaction.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/DoubleClickZoom.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/Pointer.js","webpack://vue-openlayers-map/./node_modules/ol/events/condition.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/DragPan.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/DragRotate.js","webpack://vue-openlayers-map/./node_modules/ol/render/Box.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/DragBox.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/DragZoom.js","webpack://vue-openlayers-map/./node_modules/ol/events/KeyCode.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/KeyboardPan.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/KeyboardZoom.js","webpack://vue-openlayers-map/./node_modules/ol/Kinetic.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/MouseWheelZoom.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/PinchRotate.js","webpack://vue-openlayers-map/./node_modules/ol/interaction/PinchZoom.js","webpack://vue-openlayers-map/./node_modules/ol/interaction.js","webpack://vue-openlayers-map/./node_modules/ol/Map.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-assign.js","webpack://vue-openlayers-map/./node_modules/ol/has.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-species-create.js","webpack://vue-openlayers-map/./node_modules/ol/ImageBase.js","webpack://vue-openlayers-map/./node_modules/ol/Image.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-constructor.js","webpack://vue-openlayers-map/./node_modules/ol/OverlayPositioning.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/internal-state.js","webpack://vue-openlayers-map/./node_modules/ol/style/Style.js","webpack://vue-openlayers-map/./node_modules/ol/style/IconOrigin.js","webpack://vue-openlayers-map/./node_modules/ol/style/IconImage.js","webpack://vue-openlayers-map/./node_modules/ol/style/Icon.js","webpack://vue-openlayers-map/./node_modules/ol/source/State.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/redefine.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/inherit-if-required.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/enum-bug-keys.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/dom-token-list-prototype.js","webpack://vue-openlayers-map/./node_modules/ol/tilegrid/TileGrid.js","webpack://vue-openlayers-map/./node_modules/ol/sphere.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-object.js","webpack://vue-openlayers-map/./node_modules/ol/ObjectEventType.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-create.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/native-weak-map.js","webpack://vue-openlayers-map/./node_modules/ol/math.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-fill.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/an-object.js","webpack://vue-openlayers-map/./node_modules/ol/style/Text.js","webpack://vue-openlayers-map/./node_modules/ol/style/IconAnchorUnits.js","webpack://vue-openlayers-map/./node_modules/ol/AssertionError.js","webpack://vue-openlayers-map/./node_modules/ol/style/Fill.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/descriptors.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/create-property.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-object.js","webpack://vue-openlayers-map/./node_modules/ol/style/Stroke.js","webpack://vue-openlayers-map/./node_modules/ol/ImageState.js","webpack://vue-openlayers-map/./node_modules/@soda/get-current-script/index.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/inspect-source.js","webpack://vue-openlayers-map/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://vue-openlayers-map/./node_modules/ol/rotationconstraint.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/uid.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://vue-openlayers-map/./node_modules/ol/asserts.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-forced.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/closest.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.array.concat.js","webpack://vue-openlayers-map/./node_modules/ol/geom/Geometry.js","webpack://vue-openlayers-map/./node_modules/ol/geom/SimpleGeometry.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-define-property.js","webpack://vue-openlayers-map/./node_modules/ol/array.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-property-key.js","webpack://vue-openlayers-map/./node_modules/ol/centerconstraint.js","webpack://vue-openlayers-map/./node_modules/ol/resolutionconstraint.js","webpack://vue-openlayers-map/./node_modules/ol/View.js","webpack://vue-openlayers-map/./node_modules/ol/source/VectorEventType.js","webpack://vue-openlayers-map/./node_modules/ol/coordinate.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-method-is-strict.js","webpack://vue-openlayers-map/./node_modules/ol/transform.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.number.constructor.js","webpack://vue-openlayers-map/./node_modules/ol/style/Image.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/deflate.js","webpack://vue-openlayers-map/./node_modules/ol/TileState.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/regexp-flags.js","webpack://vue-openlayers-map/./node_modules/ol/layer/BaseVector.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-to-string.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.function.name.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/well-known-symbol.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.object.keys.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/array-iteration.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/inflate.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/transform.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-primitive.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-pure.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/intersectsextent.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/function-call.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/classof-raw.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/shared-store.js","webpack://vue-openlayers-map/(webpack)/buildin/global.js","webpack://vue-openlayers-map/./node_modules/ol/easing.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-keys-internal.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.array.fill.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/document-create-element.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.object.assign.js","webpack://vue-openlayers-map/./node_modules/ol/css.js","webpack://vue-openlayers-map/./node_modules/ol/style/RegularShape.js","webpack://vue-openlayers-map/./node_modules/ol/style/Circle.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/set-global.js","webpack://vue-openlayers-map/./node_modules/ol/events/Event.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/hidden-keys.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/fails.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/get-built-in.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.object.to-string.js","webpack://vue-openlayers-map/./node_modules/core-js/modules/es.array.map.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-symbol.js","webpack://vue-openlayers-map/./node_modules/ol/Disposable.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/global.js","webpack://vue-openlayers-map/./node_modules/ol/TileRange.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/get-method.js","webpack://vue-openlayers-map/./node_modules/ol/render/canvas.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Property.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/object-keys.js","webpack://vue-openlayers-map/./node_modules/ol/Object.js","webpack://vue-openlayers-map/./node_modules/ol/Collection.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/function-uncurry-this.js","webpack://vue-openlayers-map/./node_modules/ol/control/OverviewMap.js","webpack://vue-openlayers-map/./node_modules/ol/MapProperty.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/is-array.js","webpack://vue-openlayers-map/./node_modules/ol/colorlike.js","webpack://vue-openlayers-map/./node_modules/ol/geom/Point.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/classof.js","webpack://vue-openlayers-map/./node_modules/ol/geom/GeometryType.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/shared-key.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/Layer.js","webpack://vue-openlayers-map/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://vue-openlayers-map/./packages/VMap/src/index.vue?04dc","webpack://vue-openlayers-map/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://vue-openlayers-map/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://vue-openlayers-map/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://vue-openlayers-map/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://vue-openlayers-map/./node_modules/ol/webgl.js","webpack://vue-openlayers-map/./node_modules/ol/webgl/Buffer.js","webpack://vue-openlayers-map/./node_modules/ol/webgl/ContextEventType.js","webpack://vue-openlayers-map/./node_modules/ol/webgl/PostProcessingPass.js","webpack://vue-openlayers-map/./node_modules/ol/vec/mat4.js","webpack://vue-openlayers-map/./node_modules/ol/webgl/Helper.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/webgl/Layer.js","webpack://vue-openlayers-map/./node_modules/ol/webgl/RenderTarget.js","webpack://vue-openlayers-map/./node_modules/ol/worker/webgl.js","webpack://vue-openlayers-map/./node_modules/ol/renderer/webgl/PointsLayer.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Heatmap.js","webpack://vue-openlayers-map/./node_modules/ol/Tile.js","webpack://vue-openlayers-map/./node_modules/ol/ImageTile.js","webpack://vue-openlayers-map/./node_modules/ol/reproj.js","webpack://vue-openlayers-map/./node_modules/ol/reproj/common.js","webpack://vue-openlayers-map/./node_modules/ol/reproj/Triangulation.js","webpack://vue-openlayers-map/./node_modules/ol/reproj/Tile.js","webpack://vue-openlayers-map/./node_modules/ol/structs/LRUCache.js","webpack://vue-openlayers-map/./node_modules/ol/TileCache.js","webpack://vue-openlayers-map/./node_modules/ol/source/TileEventType.js","webpack://vue-openlayers-map/./node_modules/ol/source/Tile.js","webpack://vue-openlayers-map/./node_modules/ol/tileurlfunction.js","webpack://vue-openlayers-map/./node_modules/ol/source/UrlTile.js","webpack://vue-openlayers-map/./node_modules/ol/source/TileImage.js","webpack://vue-openlayers-map/./node_modules/ol/source/XYZ.js","webpack://vue-openlayers-map/./node_modules/ol/Feature.js","webpack://vue-openlayers-map/./node_modules/ol/source/Cluster.js","webpack://vue-openlayers-map/./node_modules/ol/geom/Circle.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/interpolate.js","webpack://vue-openlayers-map/./node_modules/ol/geom/LineString.js","webpack://vue-openlayers-map/./packages/VMap/src/VMap.js","webpack://vue-openlayers-map/packages/VMap/src/index.vue","webpack://vue-openlayers-map/./packages/VMap/src/index.vue?76a4","webpack://vue-openlayers-map/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://vue-openlayers-map/./packages/VMap/src/index.vue","webpack://vue-openlayers-map/./packages/index.js","webpack://vue-openlayers-map/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/to-indexed-object.js","webpack://vue-openlayers-map/./node_modules/ol/proj/Units.js","webpack://vue-openlayers-map/./node_modules/ol/geom/flat/segments.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/dom-iterables.js","webpack://vue-openlayers-map/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://vue-openlayers-map/./node_modules/ol/layer/Group.js","webpack://vue-openlayers-map/./node_modules/ol/MapEvent.js","webpack://vue-openlayers-map/./node_modules/ol/MapBrowserEvent.js","webpack://vue-openlayers-map/./node_modules/ol/pointer/EventType.js","webpack://vue-openlayers-map/./node_modules/ol/MapBrowserEventHandler.js","webpack://vue-openlayers-map/./node_modules/ol/structs/PriorityQueue.js","webpack://vue-openlayers-map/./node_modules/ol/TileQueue.js","webpack://vue-openlayers-map/./node_modules/ol/PluggableMap.js","webpack://vue-openlayers-map/./node_modules/ol/source/Source.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__8bbf__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","wellKnownSymbol","TO_STRING_TAG","test","String","CHANGE","ERROR","BLUR","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","FOCUS","KEYDOWN","KEYPRESS","LOAD","RESIZE","TOUCHMOVE","WHEEL","uncurryThis","aCallable","fn","that","undefined","apply","arguments","DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","UNKNOWN","INTERSECTING","ABOVE","RIGHT","BELOW","LEFT","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","toIndexedObject","toPropertyKey","hasOwn","IE8_DOM_DEFINE","$getOwnPropertyDescriptor","getOwnPropertyDescriptor","f","O","P","error","PRERENDER","POSTRENDER","PRECOMPOSE","POSTCOMPOSE","RENDERCOMPLETE","__extends","extendStatics","b","setPrototypeOf","__proto__","Array","TypeError","__","constructor","Property","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay","_super","options","_this","on","once","un","id","insertFirst","stopEvent","element","document","createElement","className","style","position","pointerEvents","autoPan","animation","autoPanAnimation","margin","autoPanMargin","rendered","transform_","visible","mapPostrenderListenerKey","addChangeListener","handleElementChanged","handleMapChanged","handleOffsetChanged","handlePositionChanged","handlePositioningChanged","setElement","setOffset","offset","setPositioning","positioning","TOP_LEFT","setPosition","getElement","getId","getMap","getOffset","getPosition","getPositioning","appendChild","map","render","updatePixelPosition","container","getOverlayContainerStopEvent","getOverlayContainer","insertBefore","childNodes","performAutoPan","set","setMap","panIntoView","opt_panIntoViewOptions","getTargetElement","mapRect","getRect","getSize","overlayRect","panIntoViewOptions","myMargin","offsetLeft","offsetRight","offsetTop","offsetBottom","delta","Math","abs","center","getView","getCenterInternal","centerPx","getPixelFromCoordinateInternal","newCenterPx","panOptions","animateInternal","getCoordinateFromPixelInternal","duration","easing","size","box","getBoundingClientRect","offsetX","left","window","pageXOffset","offsetY","top","pageYOffset","setVisible","display","isRendered","pixel","getPixelFromCoordinate","mapSize","updateRenderedPosition","x","round","y","posX","posY","BOTTOM_RIGHT","CENTER_RIGHT","TOP_RIGHT","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","BOTTOM_LEFT","CENTER_LEFT","transform","msTransform","getOptions","toLength","obj","length","getForProjection","projection","tileGrid","getDefaultTileGrid","createForProjection","setDefaultTileGrid","wrapX","tileCoord","z","getTileCoordCenter","projectionExtent","extentFromProjection","worldWidth","worldsAway","ceil","getTileCoordForCoordAndZ","createForExtent","extent","opt_maxZoom","opt_tileSize","opt_corner","corner","resolutions","resolutionsFromExtent","origin","tileSize","createXYZ","opt_options","xyzOptions","getExtent","gridOptions","minZoom","maxZoom","maxResolution","opt_maxResolution","height","width","max","pow","half","DEGREES","getMetersPerUnit","createCanvasContext2D","opt_width","opt_height","opt_canvasPool","opt_Context2DSettings","canvas","shift","OffscreenCanvas","getContext","outerWidth","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","outerHeight","offsetHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","node","removeChild","removeChildren","lastChild","replaceChildren","children","oldChildren","oldChild","newChild","boundingExtent","coordinates","createEmpty","ii","extendCoordinate","_boundingExtentXYs","xs","ys","opt_extent","minX","min","minY","maxX","maxY","createOrUpdate","buffer","clone","slice","closestSquaredDistanceXY","dx","dy","containsCoordinate","coordinate","containsXY","containsExtent","extent1","extent2","coordinateRelationship","relationship","Infinity","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromFlatCoordinates","flatCoordinates","end","stride","extendFlatCoordinates","equals","extend","extendXY","forEachCorner","callback","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","getArea","area","isEmpty","getWidth","getHeight","getCenter","getCorner","getForViewAndSize","resolution","rotation","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","getIntersection","intersection","intersects","returnOrUpdate","scaleFromCenter","deltaX","deltaY","intersectsSegment","start","startRel","endRel","startX","startY","endX","endY","slope","applyTransform","transformFn","opt_stops","push","canWrapX","floor","IMAGE_SMOOTHING_DISABLED","imageSmoothingEnabled","msImageSmoothingEnabled","SINGLECLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","global","isArray","isConstructor","isObject","SPECIES","originalArray","C","fails","a","argument","Target","opt_target","eventTarget_","pendingRemovals_","dispatching_","listeners_","addEventListener","type","listener","listeners","listenersForType","indexOf","dispatchEvent","event","evt","target","propagate","dispatching","pendingRemovals","handleEvent","propagationStopped","pr","removeEventListener","disposeInternal","getListeners","hasListener","opt_type","keys","index","splice","abstract","Error","uidCounter_","getUid","ol_uid","VERSION","CanvasLayerRenderer","layer","renderedResolution","tempTransform","pixelTransform","inversePixelTransform","context","containerReused","pixelContext_","getBackground","frameState","getLayer","background","viewState","useContainer","opacity","opt_backgroundColor","layerClassName","getClassName","backgroundColor","firstElementChild","HTMLCanvasElement","transformOrigin","clipUnrotated","topLeft","topRight","bottomRight","bottomLeft","coordinateToPixelTransform","inverted","save","beginPath","moveTo","lineTo","clip","dispatchRenderEvent_","event_1","preRender","postRender","getRenderTransform","pixelRatio","dx1","dy1","sx","sy","dx2","dy2","getDataAtPixel","hitTolerance","renderPixel","layerExtent","renderCoordinate","pixelToCoordinateTransform","data","pixelContext","pixelCanvas","clearRect","drawImage","getImageData","err","Uint8Array","DOMIterables","DOMTokenListPrototype","forEach","createNonEnumerableProperty","handlePrototype","CollectionPrototype","COLLECTION_NAME","$forEach","arrayMethodIsStrict","STRICT_METHOD","callbackfn","ADD","REMOVE","MapRenderer","map_","dispatchRenderEvent","calculateMatrices2D","forEachFeatureAtCoordinate","checkWrapped","thisArg","layerFilter","thisArg2","result","managed","feature","geometry","translatedCoordinate","offsets","layerStates","layerStatesArray","numLayers","matches","tmpCoord","j","layerState","hasRenderer","layerRenderer","getRenderer","source","getSource","getWrapX","callback_1","order","distanceSq","sort","some","forEachLayerAtPixel","hasFeatureAtCoordinate","hasFeature","renderFrame","scheduleExpireIconCache","canExpireCache","postRenderFunctions","expireIconCache","Disposable","expire","Map","CompositeMapRenderer","fontChangeListenerKey_","ObjectEventType","PROPERTYCHANGE","redrawText","element_","zIndex","getViewport","firstChild","children_","renderedVisible_","declutterLayers","previousElement","layerIndex","sourceState","READY","UNDEFINED","renderDeclutter","toObject","it","Layer","baseOptions","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","SOURCE","handleSourcePropertyChange_","setSource","getLayersArray","opt_array","array","getLayerStatesArray","opt_states","states","getLayerState","getSourceState","getState","handleSourceChange_","changed","getFeatures","Promise","resolve","prepareFrame","setMapInternal","getMapInternal","renderEvent","arrayLayerState","createRenderer","dispose","inView","minResolution","zoom","getBuiltIn","douglasPeucker","squaredTolerance","simplifiedFlatCoordinates","simplifiedOffset","markers","stack","last","pop","first","maxSquaredDistance","squaredDistance_1","snap","tolerance","quantize","quantizeArray","ends","simplifiedEnds","V8_VERSION","METHOD_NAME","foo","Boolean","listen","opt_this","opt_once","originalListener_1","eventsKey","listenOnce","unlistenByKey","Attribution","ulElement_","collapsed_","collapsed","userCollapsed_","overrideCollapsible_","collapsible","collapsible_","tipLabel","expandClassName","collapseLabel","collapseClassName","collapseLabel_","textContent","label","label_","activeLabel","toggleButton_","setAttribute","title","EventType","handleClick_","cssClasses","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","getAttributions","attributions","getAttributionsCollapsible","jj","setCollapsible","updateElement_","innerHTML","preventDefault","handleToggle_","classList","toggle","getCollapsible","setCollapsed","getCollapsed","mapEvent","Control","Rotate","compassClassName","add","button","callResetNorth_","resetNorth","duration_","autoHide_","autoHide","rotation_","resetNorth_","view","getRotation","PI","animate","setRotation","contains","remove","Zoom","zoomInClassName","zoomOutClassName","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","createTextNode","outElement","zoomByDelta_","currentZoom","getZoom","newZoom","getConstrainedZoom","getAnimating","cancelAnimations","setZoom","defaults","controls","Collection","zoomControl","zoomOptions","rotateControl","rotate","rotateOptions","attributionControl","attribution","attributionOptions","toIntegerOrInfinity","integer","redefine","setGlobal","copyConstructorProperties","isForced","FORCED","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","sham","internalObjectKeys","enumBugKeys","hiddenKeys","concat","getOwnPropertyNames","Projection","code_","code","units_","extent_","worldExtent_","worldExtent","axisOrientation_","axisOrientation","global_","canWrapX_","getPointResolutionFunc_","getPointResolution","defaultTileGrid_","metersPerUnit_","metersPerUnit","getCode","getUnits","getWorldExtent","getAxisOrientation","isGlobal","setExtent","setWorldExtent","setGetPointResolution","func","getPointResolutionFunc","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","MAX_SAFE_Y","log","tan","EPSG3857Projection","units","Units","METERS","point","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","toEPSG4326","atan","exp","METERS_PER_UNIT","EPSG4326Projection","opt_axisOrientation","cache","replace","transforms","destination","sourceCode","destinationCode","cloneTransform","identityTransform","addProjection","addProjections","projections","projectionLike","opt_units","pointResolution","toEPSG4326_1","getTransformFromProjections","vertices","addEquivalentProjections","addEquivalentTransforms","projections1","projections2","forwardTransform","inverseTransform","projection1","projection2","createProjection","defaultCode","equivalent","equalUnits","transformFunc","sourceProjection","destinationProjection","getTransform","transformExtent","userProjection","getUserProjection","toUserCoordinate","fromUserCoordinate","destProjection","toUserExtent","fromUserExtent","toUserResolution","sourceUnits","userUnits","fromUserResolution","addCommon","e","h","u","sqrt","_maxEntries","_minEntries","clear","leaf","all","_all","search","toBBox","collides","load","insert","_build","_splitRoot","_insert","_condense","compareMinX","compareMinY","toJSON","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","PROPER_FUNCTION_NAME","PROPER","anObject","isPrototypeOf","$toString","regExpFlags","TO_STRING","RegExpPrototype","RegExp","n$ToString","getFlags","NOT_GENERIC","flags","INCORRECT_NAME","R","rf","unsafe","linearRingContainsExtent","outside","linearRingContainsXY","wn","linearRingsContainsXY","POINT","LINE","opt_tileCoord","getKeyZXY","getKey","fromKey","split","Number","hash","withinExtentAndZ","getMinZoom","getMaxZoom","tileRange","getFullTileRange","match","version","userAgent","process","Deno","versions","v8","RenderEvent","opt_inversePixelTransform","opt_frameState","opt_context","hasArea","scale","ratio","opt_size","toSize","Observable","revision_","getRevision","onInternal","len","onceInternal","ol_key","unInternal","unByKey","V8_PROTOTYPE_DEFINE_BUG","definePropertyModule","objectKeys","defineProperties","Properties","props","assign","var_sources","getValues","values","target_","listenerKeys","setTarget","getElementById","isCallable","IconImageCache","cache_","cacheSize_","maxCacheSize_","iconImage","src","crossOrigin","color","setSize","maxCacheSize","colorString","shared","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CIRCLE","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","beginPathInstruction","closePathInstruction","VectorContext","drawCustom","renderer","hitDetectionRenderer","drawGeometry","setStyle","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","fillStyle","strokeStyle","setImageStyle","imageStyle","opt_declutterImageWithText","setTextStyle","textStyle","CanvasBuilder","maxExtent","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","tmpCoordinate_","hitDetectionInstructions","state","applyPixelRatio","dashArray","dash","appendFlatPointCoordinates","getBufferedMaxExtent","myEnd","appendFlatLineCoordinates","closed","skipFirst","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","Relationship","drawCustomCoordinates_","builderEnds","builderEnd","beginGeometry","builderEndss","getType","getStride","builderBegin","GeometryType","MULTI_POLYGON","getOrientedFlatCoordinates","endss","getEndss","myEnds","inflate","POLYGON","MULTI_LINE_STRING","getFlatCoordinates","getEnds","LINE_STRING","MULTI_POINT","endGeometry","finish","reverseHitDetectionInstructions","reverse","instruction","begin","fillStyleColor","getColor","strokeStyleColor","strokeStyleLineCap","getLineCap","lineCap","strokeStyleLineDash","getLineDash","lineDash","strokeStyleLineDashOffset","getLineDashOffset","lineDashOffset","strokeStyleLineJoin","getLineJoin","lineJoin","strokeStyleWidth","lineWidth","strokeStyleMiterLimit","getMiterLimit","miterLimit","createFill","fillInstruction","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","CanvasImageBuilder","hitDetectionImage_","image_","imagePixelRatio_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","scale_","width_","declutterImageWithText_","myBegin","opt_sharedData","anchor","getAnchor","hitDetectionImage","getHitDetectionImage","image","getImage","getOrigin","getPixelRatio","getOpacity","getRotateWithView","getScaleArray","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","CanvasPolygonBuilder","drawFlatCoordinatess_","fill","stroke","numEnds","setFillStrokeStyles_","circleInstruction","matchingChunk","maxAngle","acos","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","TEXT_ALIGN","CanvasTextBuilder","labels_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textStates","textKey_","fillKey_","strokeKey_","fillState","strokeState","textState","geometryType","placement","TextPlacement","geometryWidths","overflow","getFlatMidpoint","getFlatMidpoints","getFlatInteriorPoint","interiorPoints","getFlatInteriorPoints","beg_1","filter","w","keep","saveTextStates_","backgroundFill","backgroundStroke","padding","p0","p1","p2","p3","pixelRatio_1","NaN","textAlign","flatOffset","flatEnd","oo","range","drawChars_","strokeKey","textKey","font","textBaseline","fillKey","baseline","text","strokeWidth","textFillStyle","getFill","textStrokeStyle","getStroke","getFont","textScale","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","getText","join","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","TextBuilder","BuilderGroup","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","builderType","zIndexKey","toString","replays","replay","Constructor","DEFAULT","IMAGE","TEXT","drawTextOnPath","startM","measureAndCacheTextWidth","segmentLength","segmentM","advance","interpolate","beginX","beginY","startOffset","startLength","endM","flat","previousAngle","singleSegment","atan2","angle","iStart","charLength","chars","substring","tmpExtent","p4","getDeclutterBox","replayImageOrLabelArgs","declutterBox","rtlRegEx","fromCharCode","horizontalTextAlign","align","Executor","overlaps","alignFill_","coordinateCache_","renderedTransform_","pixelCoordinates_","viewRotation_","widths_","createLabel","lines","numLines","widths","lineHeight","renderWidth","contextInstructions","Context","OffscreenCanvasRenderingContext2D","CanvasRenderingContext2D","setLineDash","leftRight","replayTextBackground_","strokeInstruction","fill_","setStrokeStyle_","calculateImageOrLabelDimensions_","sheetWidth","sheetHeight","centerX","centerY","anchorX","anchorY","originX","originY","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","drawImageX","drawImageY","drawImageW","drawImageH","canvasTransform","replayImageOrLabel_","contextScale","imageOrLabel","dimensions","strokePadding","origin_1","repeatSize","translate","restore","drawLabelWithPointPlacement_","execute_","opt_featureCallback","opt_hitExtent","opt_declutterTree","pixelCoordinates","dd","prevX","prevY","roundX","roundY","currentGeometry","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","viewRotationFromTransform","batchSize","getGeometry","arc","closePath","coords","rotateWithView","declutterImageWithText","labelWithAnchor","widthIndex","args","imageArgs","imageDeclutterBox","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","drawChars","cc","part","i_1","ii_1","execute","executeHitDetection","ORDER","BuilderType","ExecutorGroup","allInstructions","opt_renderBuffer","overlaps_","renderBuffer_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","flatClipCoords","getClipCoords","executors","instructionByZindex","hasExecutors","candidates","declutteredFeatures","contextSize","newContext","hitExtent","indexes","getPixelIndexArray","featureCallback","imageData","idx","result_1","executor","zs","opt_builderTypes","builderTypes","circlePixelIndexArrayCache","radius","maxDistanceSq","distances","distance","pixelIndex","CanvasImmediateRenderer","opt_squaredTolerance","opt_userTransform","context_","squaredTolerance_","userTransform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textScale_","tmpLocalTransform_","drawImages_","localTransform","alpha","globalAlpha","setTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","drawRings_","GEOMETRY_COLLECTION","getGeometryFunction","geometries","getGeometriesArray","simplifyTransformed","flatMidpoint","geometryExtent","flatMidpoints","flatInteriorPoint","flatInteriorPoints","contextFillState","contextStrokeState","contextTextState","imageSize","imageAnchor","imageOrigin","textFillStyleColor","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","textText","textTextAlign","textTextBaseline","HIT_DETECT_RESOLUTION","createHitDetectionImageData","features","styleFunction","featureCount","indexFactor","featuresByZIndex","featureStyleFunction","getStyleFunction","styles","originalStyle","setColor","setText","imgSize","getImageSize","imgContext","img","fillRect","setImage","Icon","anchorXUnits","IconAnchorUnits","PIXELS","anchorYUnits","getScale","getZIndex","byGeometryType","zIndexKeys","geomAndStyle","k","kk","hitDetect","resultFeatures","g","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","renderPointGeometry","renderLineStringGeometry","renderPolygonGeometry","renderMultiPointGeometry","renderMultiLineStringGeometry","renderMultiPolygonGeometry","renderGeometryCollectionGeometry","renderCircleGeometry","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","builderGroup","opt_declutterBuilderGroup","circleReplay","textReplay","renderFeature","replayGroup","opt_transform","loading","imageState","getImageState","ImageState","LOADED","unlistenImageChange","IDLE","listenImageChange","renderFeatureInternal","simplifiedGeometry","renderGeometry","geometryRenderer","getHitDetectionRenderer","getGeometries","lineStringReplay","polygonReplay","imageReplay","CanvasVectorLayerRenderer","vectorLayer","boundHandleStyleImageChange_","handleStyleImageChange_","animatingOrInteracting_","dirty_","hitDetectionImageData_","renderedFeatures_","renderedRevision_","renderedResolution_","renderedExtent_","wrappedRenderedExtent_","renderedRotation_","renderedCenter_","renderedProjection_","renderedRenderOrder_","replayGroup_","replayGroupChanged","declutterExecutorGroup","clipping","renderWorlds","executorGroup","vectorSource","viewHints","ViewHint","ANIMATING","INTERACTING","multiWorld","endWorld","world","declutterTree","clipped","css","lastIndexOf","executorGroups","item","handleFontsChanged","getVisible","renderIfReadyAndVisible","animating","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","getRenderBuffer","vectorLayerRenderOrder","getRenderOrder","renderedExtent","loadExtents","gutter","loadExtent","declutterBuilderGroup","getDeclutter","userTransform","extent_1","userExtent_1","loadFeatures","dirty","userExtent","getFeaturesInExtent","replayGroupInstructions","getOverlaps","VectorLayer","BaseVector","valueOf","CENTER","RESOLUTION","ROTATION","classof","propertyIsEnumerable","UNSCOPABLES","ArrayPrototype","configurable","PRELOAD","USE_INTERIM_TILES_ON_ERROR","BaseTileLayer","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","getPreload","TileProperty","getUseInterimTilesOnError","BaseTile","CanvasTileLayerRenderer","tileLayer","extentChanged","renderedPixelRatio","renderedProjection","renderedRevision","renderedTiles","newTiles_","tmpTileRange_","TileRange","isDrawableTile","tile","tileState","TileState","EMPTY","getTile","tileSource","setState","getInterimTile","loadedTileCallback","tiles","viewResolution","viewCenter","sourceRevision","getTileGridForProjection","getZForResolution","zDirection","tileResolution","getResolution","tilePixelRatio","getTilePixelRatio","canvasExtent","getTileRangeForExtentAndZ","tilesToDrawByZ","findLoadedTiles","createLoadedTileFinder","tmpTileRange","uid","inTransition","getAlpha","time","childTileRange","getTileCoordChildTileRange","covered","forEachTileCoordParentTileRange","canvasScale","getInterpolate","clips","clipZs","currentClip","getOpaque","currentZ","currentTilePixelSize","getTilePixelSize","currentResolution","currentScale","dx_1","dy_1","originTileCoord","originTileExtent","getTileCoordExtent","tileGutter","getGutterForProjection","tilesToDraw","tileCoordKey","xIndex","nextX","yIndex","nextY","transition","drawTileImage","unshift","updateUsedTiles","usedTiles","manageTilePyramid","scheduleExpireCache","getTileImage","alphaChanged","endTransition","postRenderFunction","tileSourceKey","expireCache","opt_tileCallback","wantedTiles","tileQueue","tileCount","isKeyQueued","enqueue","useTile","updateCacheSize","TileLayer","pref","getOwnPropertySymbols","symbol","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","XY","XYZ","XYM","XYZM","BaseLayer","background_","properties","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","MIN_ZOOM","MAX_ZOOM","className_","setProperties","state_","opt_managed","getMaxResolution","getMinResolution","setBackground","opt_background","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","setOpacity","setZIndex","zindex","IS_PURE","store","copyright","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","TRUE","FALSE","VOID","memoizeOne","lastResult","lastArgs","lastThis","called","nextArgs","RBush","opt_maxEntries","rbush_","items_","extents","items","update","bbox","getAll","getInExtent","forEach_","forEachInExtent","rbush","ARRAY_BUFFER","JSON","XML","withCredentials","loadFeaturesXhr","url","format","success","failure","xhr","XMLHttpRequest","open","FormatType","responseType","onload","status","responseText","responseXML","DOMParser","parseFromString","readFeatures","featureProjection","readProjection","onerror","send","dataProjection","addFeatures","VectorSourceEvent","opt_feature","opt_features","Event","VectorSource","loader_","format_","url_","loader","strategy_","strategy","collection","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","loadingExtentsCount_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","VectorEventType","ADDFEATURE","handleFeatureChange_","valid","newFeatures","geometryFeatures","length_1","length_2","length_3","modifyingCollection","REMOVEFEATURE","CollectionEventType","removeFeature","opt_fast","featureId","removeAndIgnoreReturn","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachFeatureIntersectingExtent","intersectsExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","closestPoint","minSquaredDistance","previousMinSquaredDistance","closestPointXY","minDistance","getFeatureById","getFeatureByUid","getFormat","getUrl","sid","removeFromIdIndex_","CHANGEFEATURE","loadedExtentsRtree","extentsToLoad","_loop_1","extentToLoad","alreadyLoaded","this_1","FEATURESLOADSTART","FEATURESLOADEND","FEATURESLOADERROR","refresh","removeLoadedExtent","featureChangeKeys","removed","setLoader","setUrl","Source","requireObjectCoercible","whitespaces","whitespace","ltrim","rtrim","TYPE","string","trim","number","MOVESTART","MOVEEND","lineStringLength","tryToString","twiceArea","LinearRing","opt_layout","maxDelta_","maxDeltaRevision_","setCoordinates","setFlatCoordinates","layout","getCoordinates","getSimplifiedGeometryInternal","GeometryLayout","LINEAR_RING","setLayout","deflate","SimpleGeometry","getInteriorPointOfArray","flatCenters","flatCentersOffset","opt_dest","intersections","rr","pointX","maxSegmentLength","isNaN","tmp","linearRingIsClockwise","edge","linearRingsAreOriented","opt_right","right","isClockwise","orientLinearRings","Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","polygon","applyProperties","flatCenter","getInteriorPoint","Point","getLinearRingCount","getLinearRing","getLinearRings","linearRings","fromExtent","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","fromNamed","body","rgb","fromString","MAX_CACHE_SIZE","cacheSize","fromStringInternal_","asArray","exec","hasAlpha","substr","normalize","bitmap","writable","FunctionPrototype","Function","getDescriptor","EXISTS","CONFIGURABLE","ACTIVE","Interaction","setActive","getActive","mapBrowserEvent","active","pan","opt_duration","currentCenter","getConstrainedCenter","zoomByDelta","opt_anchor","newResolution","getResolutionForZoom","DoubleClickZoom","delta_","MapBrowserEventType","browserEvent","shiftKey","PointerInteraction","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","trackedPointers_","targetPointers","getPointerCount","originalEvent","updateTrackedPointers_","handledUp","handled","isPointerDraggingEvent","pointerId","clientX","clientY","Pointer","var_args","conditions","pass","altShiftKeysOnly","altKey","metaKey","ctrlKey","targetElement","activeElement","getOwnerDocument","focusWithTabindex","hasAttribute","always","mouseActionButton","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","mouseOnly","pointerEvent","pointerType","primaryAction","isPrimary","DragPan","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition","condition_","onFocusOnly","noKinetic_","beginInteraction","centroid","adjustCenterInternal","getDistance","getAngle","centerpx","dest","endInteraction","DragRotate","lastAngle_","getConstraints","theta","adjustRotationInternal","RenderBox","geometry_","startPixel_","endPixel_","render_","startPixel","endPixel","px","setPixels","createOrUpdateGeometry","pixels","DragBoxEventType","BOXSTART","BOXDRAG","BOXEND","BOXCANCEL","DragBoxEvent","DragBox","box_","minArea_","minArea","onBoxEnd","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","completeBox","DragZoom","out_","out","rotatedExtent","rotatedExtentForGeometry","getResolutionForExtentInternal","factor","fitInternal","UP","DOWN","KeyboardPan","defaultCondition_","pixelDelta_","pixelDelta","keyEvent","keyCode","KeyCode","mapUnitsDelta","KeyboardZoom","charCode","charCodeAt","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","Date","now","lastIndex","firstIndex","Mode","TRACKPAD","MouseWheelZoom","totalDelta_","lastDelta_","maxDelta","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","constrainResolution","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","deltaPerZoom_","endInteraction_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","getConstrainResolution","clearTimeout","setTimeout","adjustZoom","timeLeft","handleWheelZoom_","setMouseAnchor","PinchRotate","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","viewportPosition","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","adjustResolutionInternal","direction","interactions","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","Composite","PluggableMap","IndexedObject","$assign","A","B","alphabet","chr","T","argumentsLength","S","ua","navigator","toLowerCase","FIREFOX","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","WORKER_OFFSCREEN_CANVAS","WorkerGlobalScope","IMAGE_DECODE","Image","decode","PASSIVE_EVENT_LISTENERS","passive","arraySpeciesConstructor","ImageBase","ImageWrapper","imageLoadFunction","src_","unlisten_","imageLoadFunction_","handleImageError_","unlistenImage_","handleImageLoad_","LOADING","listenImage","loadHandler","errorHandler","listening","decoding","loaded","then","catch","inspectSource","noop","empty","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","has","NATIVE_WEAK_MAP","sharedKey","OBJECT_ALREADY_INITIALIZED","WeakMap","enforce","getterFor","wmget","wmhas","wmset","metadata","facade","STATE","Style","geometryFunction_","defaultGeometryFunction","setGeometry","hitDetectionRenderer_","stroke_","zIndex_","setRenderer","setHitDetectionRenderer","setFill","setStroke","toFunction","styles_1","defaultStyles","createDefaultStyle","taintedTestContext","IconImage","canvas_","color_","imageState_","size_","tainted_","isTainted_","dispatchChangeEvent_","replaceColor_","getSrc","ctx","globalCompositeOperation","imgData","putImageData","displacement","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","FRACTION","anchorYUnits_","crossOrigin_","iconImage_","offset_","offsetOrigin_","offsetOrigin","origin_","getDisplacement","setAnchor","iconImageSize","InternalStateModule","CONFIGURABLE_FUNCTION_NAME","getInternalState","enforceInternalState","TEMPLATE","simple","dummy","Wrapper","NewTarget","NewTargetPrototype","documentCreateElement","tmpTileCoord","DECIMALS","TileGrid","zoomFactor","resolutions_","origins","zoomFactor_","origins_","tileSizes_","tileSizes","tileSize_","fullTileRanges_","tmpSize_","tmpExtent_","sizes","restrictedTileRange","calculateTileRanges_","forEachTileCoord","opt_tileRange","tileCoordExtent","getResolutions","getTileRangeForTileCoordAndZ","tileCoordZ","tileCoordX","tileCoordY","getTileRangeExtent","getTileSize","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getTileCoordResolution","opt_direction","fullTileRanges","DEFAULT_RADIUS","c1","c2","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","bearing","lon1","dByR","lat","asin","lon","activeXDocument","definePropertiesModule","html","GT","LT","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObjectViaActiveX","write","temp","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","contentWindow","F","NullProtoObject","ActiveXObject","domain","clamp","cosh","log2","LOG2E","squaredSegmentDistance","squaredDistance","solveLinearSystem","mat","maxRow","maxEl","absValue","coef","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","toFixed","decimals","endPos","DEFAULT_FILL_COLOR","Text","font_","scaleArray_","textAlign_","textBaseline_","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setRotateWithView","setScale","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","AssertionError","path","message","Fill","propertyKey","Stroke","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","getCurrentScript","currentScript","pageSource","inlineScriptSourceRegExp","inlineScriptSource","ieStackRegExp","ffStackRegExp","stackDetails","scriptLocation","line","currentLocation","location","href","scripts","getElementsByTagName","documentElement","outerHTML","readyState","functionToString","disable","none","createSnapToN","opt_isMoving","createSnapToZero","opt_tolerance","postfix","random","assert","assertion","errorCode","replacement","detection","POLYFILL","NATIVE","assignClosest","offset1","offset2","maxSquaredDelta","squaredDelta","arrayMaxSquaredDelta","assignClosestPoint","isRing","opt_tmpPoint","tmpPoint","assignClosestArrayPoint","$","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","proto","arg","E","tmpTransform","Geometry","extentRevision_","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometryRevision","simplifyTransformedInternal","revision","getSimplifiedGeometry","coord","getClosestPoint","opt_closestPoint","computeExtent","opt_sy","simplify","sourceProj","TILE_PIXELS","inCoordinates","outCoordinates","pixelExtent","projectedExtent","getFirstCoordinate","getLastCoordinate","getLayout","getStrideForLayout","nesting","getLayoutForStride","transformGeom2D","simpleGeometry","$defineProperty","ENUMERABLE","WRITABLE","Attributes","current","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","linearFindNearest","arr","reverseSubArray","extension","arr1","arr2","len1","isSorted","opt_func","opt_strict","compare","every","currentVal","res","toPrimitive","isSymbol","createExtent","onlyCenter","smooth","opt_centerShift","viewWidth","viewHeight","shiftX","shiftY","getViewportClampedResolution","viewportSize","showFullExtent","xResolution","yResolution","getSmoothClampedResolution","createSnapToResolutions","opt_smooth","opt_maxExtent","opt_showFullExtent","cappedMaxRes","capped","createSnapToPower","power","opt_minResolution","minZoomLevel","cappedZoomLevel","zoomLevel","createMinMaxResolution","DEFAULT_MIN_ZOOM","View","hints_","animations_","updateAnimationKey_","projection_","viewportSize_","targetCenter_","targetResolution_","targetRotation_","nextCenter_","nextResolution_","nextRotation_","cancelAnchor_","applyOptions_","ViewProperty","resolutionConstraintInfo","createResolutionConstraint","maxResolution_","minResolution_","minZoom_","centerConstraint","createCenterConstraint","resolutionConstraint","constraint","rotationConstraint","createRotationConstraint","constraints_","setCenterInternal","setResolution","oldPadding","newPadding","getUpdatedOptions_","newOptions","getProperties","isDef","resolveConstraints","getProjection","animationCount","series","complete","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","isNoopAnimation","setHint","updateAnimations_","animationCallback","getInteracting","cancelAnimationFrame","more","seriesComplete","elapsed","fraction","progress","getViewportSize_","constrainedResolution","calculateCenterZoom","applyTargetState_","constrainedRotation","calculateCenterRotate","requestAnimationFrame","opt_rotation","setViewportSize","getHints","opt_hints","calculateExtent","calculateExtentInternal","getViewportSizeMinusPadding_","getZoomForResolution","setConstrainResolution","enabled","getResolutionForExtent","getResolutionForValueFunction","opt_power","getConstrainedResolution","getValueForResolutionFunction","logPower","reducedSize","calculateCenterOn","nextCenter","nextResolution","nextRotation","nearest","baseLevel","fit","geometryOrExtent","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","rotX","rotY","centerRot","centerOn","centerOnInternal","calculateCenterShift","centerShift","shiftedCenter","adjustCenter","deltaCoordinates","setCenter","adjustResolution","isMoving","adjustRotation","newRotation","hint","opt_doNotCancelAnims","opt_forceMoving","newCenter","opt_resolutionDirection","endInteractionInternal","opt_targetResolution","targetZoom","targetRes","returnValue","smoothExtentConstraint","constrainOnlyCenter","defaultMaxZoom","defaultZoomFactor","smoothResolutionConstraint","projExtent","defaultMaxResolution","defaultMinResolution","enableRotation","constrainRotation","coordinate1","coordinate2","getWorldsAway","opt_sourceExtentWidth","sourceExtentWidth","method","transformStringDiv","tmp_","reset","multiply","transform1","transform2","a1","b1","d1","e1","f1","a2","b2","d2","e2","f2","setFromArray","makeScale","compose","makeInverse","det","determinant","transformString","inheritIfRequired","thisNumberValue","NUMBER","NativeNumber","NumberPrototype","arraySlice","toNumeric","primValue","toNumber","third","radix","maxCode","digits","NumberWrapper","ImageStyle","displacement_","setDisplacement","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","ignoreCase","multiline","dotAll","unicode","sticky","RENDER_ORDER","BaseVectorLayer","renderBuffer","declutter_","declutter","style_","styleFunction_","updateWhileAnimating_","updateWhileInteracting_","getStyle","setRenderOrder","renderOrder","opt_style","TO_STRING_TAG_SUPPORT","FUNCTION_NAME_EXISTS","nameRE","regExpExec","NAME","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","description","nativeKeys","FAILS_ON_PRIMITIVES","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","find","findIndex","filterReject","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","coordinatesss","transform2D","getMethod","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","intersectsLineString","coordinatesExtent","point1","point2","intersectsLinearRing","intersectsLinearRingArray","stringSlice","SHARED","easeIn","easeOut","inAndOut","linear","names","addToUnscopables","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_CONTROL","CLASS_COLLAPSED","fontRegEx","fontRegExMatchIndex","getFontParameters","fontSpec","weight","variant","families","family","cssOpacity","RegularShape","hitDetectionCanvas_","points","radius_","radius1","radius2_","radius2","renderOptions_","getPoints","getRadius","getRadius2","createHitDetectionCanvas_","renderOptions","draw_","calculateLineJoinSize_","r1","r2","miterRatio","maxr","bevelAdd","aa","bb","ee","innerMiterRatio","innerLength","createRenderOptions","maxRadius","createPath_","drawHitDetectionCanvas_","startAngle","step","angle0","radiusC","CircleStyle","setRadius","BaseEvent","defaultPrevented","stopPropagation","aFunction","namespace","$propertyIsEnumerable","NASHORN_BUG","1","V","aPossiblePrototype","setter","CORRECT_SETTER","$map","HAS_SPECIES_SUPPORT","$Symbol","disposed","check","globalThis","containsTileRange","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","checkedFonts","labelCache","console","warn","measureFont","measureContext","textHeights","registerFont","interval","referenceWidth","retries","referenceFonts","isAvailable","fontStyle","fontWeight","fontFamily","available","referenceFont","measureTextWidth","done","fonts","getKeys","clearInterval","setInterval","measureTextHeight","measureElement","metrics","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","minHeight","maxHeight","border","measureTextWidths","currentWidth","drawImageOrLabel","labelOrImage","executeLabelInstructions","ObjectEvent","oldValue","BaseObject","opt_values","values_","hasProperties","notify","eventType","removeChangeListener","opt_silent","unset","LENGTH","CollectionEvent","opt_element","opt_index","unique_","unique","array_","assertUnique_","updateLength_","getLength","insertAt","elem","removeAt","prev","setAt","opt_except","MAX_RATIO","MIN_RATIO","ControlledMap","OverviewMap","boundHandleRotationChanged_","handleRotationChanged_","viewExtent_","ovmapDiv_","view_","ovmap_","ovmap","layers","addLayer","boxSizing","boxOverlay_","addOverlay","scope","overlay","overlayBox","computeDesiredMousePosition","mousePosition","move","getEventCoordinateInternal","endMoving","oldMap","oldView","unbindView_","handleMapPropertyChange_","bindView_","updateSize","resetExtent_","updateBoxAfterOvmapIsRendered_","VIEW","newView","SIZE","setView","validateExtent_","ovmapSize","ovview","ovextent","topLeftPixel","bottomRightPixel","boxWidth","boxHeight","ovmapWidth","ovmapHeight","recenter_","steps","LN2","updateBox_","ovresolution","ovmapPostrenderKey_","getOverviewMap","LAYERGROUP","ownKeys","getOwnPropertyDescriptorModule","exceptions","asColorLike","classofRaw","CORRECT_ARGUMENTS","tryGet","tag","callee","LayerRenderer","boundHandleImageChange_","handleImageChange_","layer_","forEachLoadedTile","loadImage","_vm","_h","$createElement","_c","_self","ref","attrs","staticRenderFns","_classCallCheck","instance","_defineProperties","_createClass","protoProps","staticProps","_defineProperty","_typeof","iterator","ELEMENT_ARRAY_BUFFER","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","FLOAT","CONTEXT_IDS","opt_attributes","attributes","preserveDrawingBuffer","BufferUsage","WebGLArrayBuffer","opt_usage","usage","ofSize","getArrayClassForType","fromArray","arrayClass","from","fromArrayBuffer","getUsage","Float32Array","Uint32Array","LOST","RESTORED","DEFAULT_VERTEX_SHADER","DEFAULT_FRAGMENT_SHADER","WebGLPostProcessingPass","gl_","webGlContext","gl","scaleRatio_","scaleRatio","renderTargetTexture_","createTexture","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","verticesArray","bindBuffer","bufferData","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetOpacityLocation_","renderTargetTextureLocation_","uniforms_","uniforms","getGL","init","textureSize","drawingBufferWidth","drawingBufferHeight","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","level","internalFormat","RGBA","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","preCompose","postCompose","activeTexture","TEXTURE0","canvasId","renderTargets","getContextAttributes","clearColor","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","uniform2f","uniform1i","uniform1f","applyUniforms","drawArrays","TRIANGLES","textureSlot","uniform","ImageData","texture","uniform3f","uniform4f","fromTransform","mat4","DefaultUniform","PROJECTION_MATRIX","OFFSET_SCALE_MATRIX","OFFSET_ROTATION_MATRIX","TIME","ZOOM","AttributeType","canvasCache","getSharedCanvasCacheKey","uniqueCanvasCacheKeyCount","getUniqueCanvasCacheKey","getCanvas","cacheItem","users","releaseCanvas","getExtension","loseContext","WebGLHelper","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","canvasCacheKey_","canvasCacheKey","bufferCache_","extensionCache_","currentProgram_","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","setUniforms","postProcessPasses_","postProcesses","shaderCompileErrors_","name_1","canvasCacheKeyMatches","bufferKey","bufferCache","webGlBuffer","flushBufferData","deleteBuffer","buf","bufferCacheEntry","isContextLost","prepareDraw","opt_disableAlphaBlend","ZERO","applyFrameState","prepareDrawToRenderTarget","renderTarget","getFramebuffer","getTexture","drawElements","elementType","elementSize","numItems","offsetInBytes","finalizeDraw","offsetScaleMatrix","offsetRotateMatrix","setUniformMatrixValue","setUniformFloatValue","HTMLImageElement","prevValue","imageReady","program","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","getProgramParameter","LINK_STATUS","getAttributeLocation","makeProjectionTransform","uniformMatrix4fv","enableAttributeArray_","attribName","enableAttributes","computeAttributesStride","attr","getByteSizeFromType","opt_data","opt_texture","BYTES_PER_ELEMENT","Uint16Array","WebGLWorkerMessageType","GENERATE_BUFFERS","WebGLLayerRenderer","inversePixelTransform_","postProcesses_","helper","removeHelper_","dispatchPreComposeEvent","dispatchPostComposeEvent","event_2","incrementGroup","groupNumber","mapId","afterHelperCreated","prepareFrameInternal","event_3","colorEncodeId","divide","colorDecodeId","mult","tmpArray4","WebGLRenderTarget","helper_","texture_","framebuffer_","data_","dataCacheDirty_","updateSize_","clearCachedData","readAll","readPixels","readPixel","blob","Blob","URL","createObjectURL","Worker","WebGLPointsLayerRenderer","projectionMatrixTransform","sourceRevision_","verticesBuffer_","hitVerticesBuffer_","indicesBuffer_","vertexShader_","fragmentShader_","program_","hitDetectionEnabled_","hitFragmentShader","hitVertexShader","hitVertexShader_","hitFragmentShader_","hitProgram_","customAttributes","attribute","hitDetectionAttributes","previousExtent_","currentTransform_","renderTransform_","invertRenderTransform_","renderInstructions_","hitRenderInstructions_","hitRenderTarget_","worker_","received","projectionTransform","hitDetection","vertexBuffer","indexBuffer","renderInstructions","featureCache_","featureCount_","sourceListenKeys_","handleSourceFeatureAdded_","handleSourceFeatureChanged_","handleSourceFeatureDelete_","handleSourceFeatureClear_","renderCount","renderHitDetection","viewNotMoving","sourceChanged","rebuildBuffers_","featureCache","totalInstructionsCount","totalHitInstructionsCount","hitColor","tmpCoords","tmpColor","renderIndex","hitIndex","featureUid","customAttributesCount","postMessage","hitMessage","terminate","GRADIENT","DEFAULT_GRADIENT","Heatmap","gradient","blur","gradient_","handleGradientChanged_","setGradient","setBlur","weightFunction_","getBlur","getGradient","createGradient","colors","u_size","u_blurSlope","u_gradientTexture","u_opacity","createLinearGradient","addColorStop","Tile","interimTile","transition_","transitionStarts_","release","refreshInterimChain","getTileCoord","ImageTile","tileLoadFunction","tileLoadFunction_","getBlankImage","naturalWidth","naturalHeight","brokenDiagonalRendering_","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","MAX_SUBDIVISION","MAX_TRIANGLE_WIDTH","Triangulation","targetProj","targetExtent","maxSourceExtent","errorThreshold","opt_destinationResolution","sourceProj_","targetProj_","transformInvCache","transformInv","transformInv_","maxSourceExtent_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","maxSubdivision","addQuad_","leftBound_1","triangle","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","targetCoverageX","isFinite","isNotFinite","centerSrc","centerSrcEstimX","centerSrcErrorSquared","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","calculateSourceExtent","getTriangles","drawTestTriangle","u1","v1","u2","v2","verifyBrokenDiagonalRendering","isBrokenDiagonalRendering","calculateSourceResolution","targetMetersPerUnit","sourceMetersPerUnit","sourceExtent","compensationFactor","calculateSourceExtentResolution","triangulation","sources","opt_renderEdges","opt_interpolate","pixelRound","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","u0","v0","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","ud","vd","ReprojTile","sourceTileGrid","targetTileGrid","wrappedTileCoord","getTileFunction","opt_errorThreshold","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","maxTargetExtent","limitedTargetExtent","sourceProjExtent","errorThresholdInPixels","triangulation_","sourceRange","srcX","srcY","reproject_","leftToLoad_1","sourceListenKey_1","unlistenSources_","LRUCache","opt_highWaterMark","highWaterMark","count_","entries_","oldest_","newest_","getCount","containsKey","entry","value_","key_","newer","older","peekLast","peekLastKey","peekFirstKey","TileCache","pruneExceptNewestZ","TILELOADSTART","TILELOADEND","TILELOADERROR","TileSource","attributionsCollapsible","opaque_","opaque","tilePixelRatio_","tileCache","tmpSize","tileOptions","getTileCacheForProjection","setKey","getTileGrid","getTileCoordForTileUrlFunction","opt_projection","TileSourceEvent","createFromTemplate","template","zRegEx","xRegEx","yRegEx","dashYRegEx","createFromTemplates","templates","tileUrlFunctions","createFromTileUrlFunctions","expandUrl","urls","startCharCode","stopCharCode","stop_1","UrlTile","generateTileUrlFunction_","tileUrlFunction","setUrls","tileLoadingKeys_","getTileLoadFunction","getTileUrlFunction","getPrototypeOf","getUrls","handleTileChange","TileEventType","setTileLoadFunction","setTileUrlFunction","TileImage","imageSmoothing","defaultTileLoadFunction","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","reprojectionErrorThreshold","renderReprojectionEdges_","usedTileCache","getGutter","thisProj","projKey","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","proj","imageTile","Feature","opt_geometryOrProperties","id_","geometryName_","geometryChangeKey_","handleGeometryChanged_","setGeometryName","getGeometryName","handleGeometryChange_","createStyleFunction","setId","Cluster","interpolationRatio","geometryFunction","createCustomCluster_","createCluster","boundRefresh_","updateDistance","setDistance","setMinDistance","getMinDistance","cluster","mapDistance","clustered","neighbors","neighbor","geometry_1","searchCenter","Circle","setCenterAndRadius","circle","getRadiusSquared_","circleExtent","interpolatePoint","cumulativeLengths","lineStringCoordinateAtM","extrapolate","lo","hi","m0","m1","LineString","flatMidpoint_","flatMidpointRevision_","appendCoordinate","lineString","forEachSegment","getCoordinateAtM","opt_extrapolate","getCoordinateAt","validObjKey","baseTile","option","getBaseTile","getTDMap","getTDImg","getCustomerTileXYZ","XYZUrl","base","existLayer","setVectorLayer","addClusterLayer","addHeatmapLayer","layerOptions","addSource","Vector","addOverviewMapControl","overlayOption","setPointFeature","setPolygon","setPolyline","setCircle","featureStyle","optionStyle","icon","optionText","setFeature","getRadiusByUnit","setFeatures","clusterSource","styleCache","clusterOptions","styleOptions","textColor","total","average","clusterFeatureStyle","clusters","vector","styleImage","styleText","VMap","viewOption","baseTiles","visibleTile","hit","vectorLayersOption","vectorLayers","overlays","panTo","setLayer","restVisibleBaseTile","existOverlays","setOverlayPosition","default","computed","watch","handler","setLayers","deep","immediate","mounted","methods","eventListeners","zoomEnd","$emit","reloadLayer","normalizeComponent","scriptExports","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","component","Vue","components","install","RADIANS","FEET","USFEET","ret","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","GroupEvent","LAYERS","LayerGroup","layersListenerKeys_","listenerKeys_","handleLayersChanged_","handleLayerChange_","getLayers","handleLayersAdd_","handleLayersRemove_","layersArray","registerLayerListeners_","handleLayerGroupAdd_","handleLayerGroupRemove_","collectionEvent","currentLayers","pos","ownLayerState","defaultZIndex","Base","MapEvent","MapBrowserEvent","opt_dragging","pixel_","coordinate_","dragging","getEventPixel","getCoordinateFromPixel","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","activePointers_","trackedTouches_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayEvent_","boundHandleTouchMove_","handleTouchMove_","emulateClick_","newEvent","updateActivePointers_","handlePointerUp_","isMouseActionButton_","doc","handlePointerMove_","getRootNode","isMoving_","cancelable","PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","priority","siftDown_","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isQueued","count","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","TileQueue","tilePriorityFunction","tileChangeCallback","boundHandleTileChange_","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","getTilesLoading","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","getTilePriority","tileCenter","removeLayerMapProperty","setLayerMapProperty","optionsInternal","createOptionsInternal","renderComplete_","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","overlayContainer_","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","keyboardEventTarget","targetChangeHandlerKeys_","overlays_","overlayIdIndex_","postRenderFunctions_","tileQueue_","handleTileChange_","MapProperty","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","viewOptions","addOverlayInternal_","control","interaction","addControl","getControls","addInteraction","getInteractions","getLayerGroup","handleLayerAdd_","getOverlays","forEachFeatureAtPixel","getFeaturesAtPixel","getAllLayers","addLayersFrom","layerGroup","hasFeatureAtPixel","getEventCoordinate","eventPosition","changedTouches","getTarget","getOverlayById","group","getLoading","viewCoordinate","ownerDocument","handleMapBrowserEvent","rootNode","interactionsArray","cont","handlePostRender","hints","lowOnFrameBudget","defaultView","handleViewPropertyChanged_","updateViewportSize_","handleLayerRemove_","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","previousFrameState","nextExtent","moveStart","MapEventType","idle","setLayerGroup","oldLayerGroup","computedStyle","parseFloat","getClientRects","attributions_","adaptAttributions","attributionsCollapsible_","wrapX_","interpolate_","viewResolver","viewRejector","viewPromise_","reject","setAttributions","attributionLike"],"mappings":"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","file":"vue-openlayers-map.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-openlayers-map\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"vue-openlayers-map\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    BLUR: 'blur',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    FOCUS: 'focus',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    TOUCHMOVE: 'touchmove',\n    WHEEL: 'wheel',\n};\n//# sourceMappingURL=EventType.js.map","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : bind ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","/**\n * @module ol/extent/Relationship\n */\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n    UNKNOWN: 0,\n    INTERSECTING: 1,\n    ABOVE: 2,\n    RIGHT: 4,\n    BELOW: 8,\n    LEFT: 16,\n};\n//# sourceMappingURL=Relationship.js.map","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are composed.  When dispatched by the map, the event object will not have\n     * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n     * WebGL layers currently dispatch this event.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after layers are composed.  When dispatched by the map, the event object will not have\n     * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n     * WebGL layers currently dispatch this event.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete',\n};\n/**\n * @typedef {'postrender'|'precompose'|'postcompose'|'rendercomplete'} MapRenderEventTypes\n */\n/**\n * @typedef {'postrender'|'prerender'} LayerRenderEventTypes\n */\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Overlay\n */\nimport BaseObject from './Object.js';\nimport MapEventType from './MapEventType.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport { CLASS_SELECTABLE } from './css.js';\nimport { containsExtent } from './extent.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { outerHeight, outerWidth, removeChildren, removeNode } from './dom.js';\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {import(\"./OverlayPositioning.js\").default} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {PanIntoViewOptions|boolean} [autoPan=false] Pan the map when calling\n * `setPosition`, so that the overlay is entirely visible in the current viewport?\n * If `true` (deprecated), then `autoPanAnimation` and `autoPanMargin` will be\n * used to determine the panning parameters; if an object is supplied then other\n * parameters are ignored.\n * @property {PanOptions} [autoPanAnimation] The animation options used to pan\n * the overlay into view. This animation is only used when `autoPan` is enabled.\n * A `duration` and `easing` may be provided to customize the animation.\n * Deprecated and ignored if `autoPan` is supplied as an object.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning. Deprecated and ignored\n * if `autoPan` is supplied as an object.\n * @property {PanIntoViewOptions} [autoPanOptions] The options to use for the\n * autoPan. This is only used when `autoPan` is enabled and has preference over\n * the individual `autoPanMargin` and `autoPanOptions`.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing.inAndOut}.\n */\n/**\n * @typedef {Object} PanIntoViewOptions\n * @property {PanOptions} [animation={}] The animation parameters for the pan\n * @property {number} [margin=20] The margin (in pixels) between the\n * overlay and the borders of the map when panning into view.\n */\n/**\n * @enum {string}\n * @protected\n */\nvar Property = {\n    ELEMENT: 'element',\n    MAP: 'map',\n    OFFSET: 'offset',\n    POSITION: 'position',\n    POSITIONING: 'positioning',\n};\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:element'|'change:map'|'change:offset'|'change:position'|\n *   'change:positioning'} OverlayObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<OverlayObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|OverlayObjectEventTypes, Return>} OverlayOnSignature\n */\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nvar Overlay = /** @class */ (function (_super) {\n    __extends(Overlay, _super);\n    /**\n     * @param {Options} options Overlay options.\n     */\n    function Overlay(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {OverlayOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @protected\n         * @type {Options}\n         */\n        _this.options = options;\n        /**\n         * @protected\n         * @type {number|string|undefined}\n         */\n        _this.id = options.id;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.insertFirst =\n            options.insertFirst !== undefined ? options.insertFirst : true;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = document.createElement('div');\n        _this.element.className =\n            options.className !== undefined\n                ? options.className\n                : 'ol-overlay-container ' + CLASS_SELECTABLE;\n        _this.element.style.position = 'absolute';\n        _this.element.style.pointerEvents = 'auto';\n        var autoPan = options.autoPan;\n        if (autoPan && 'object' !== typeof autoPan) {\n            autoPan = {\n                animation: options.autoPanAnimation,\n                margin: options.autoPanMargin,\n            };\n        }\n        /**\n         * @protected\n         * @type {PanIntoViewOptions|false}\n         */\n        _this.autoPan = /** @type {PanIntoViewOptions} */ (autoPan) || false;\n        /**\n         * @protected\n         * @type {{transform_: string,\n         *         visible: boolean}}\n         */\n        _this.rendered = {\n            transform_: '',\n            visible: true,\n        };\n        /**\n         * @protected\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.mapPostrenderListenerKey = null;\n        _this.addChangeListener(Property.ELEMENT, _this.handleElementChanged);\n        _this.addChangeListener(Property.MAP, _this.handleMapChanged);\n        _this.addChangeListener(Property.OFFSET, _this.handleOffsetChanged);\n        _this.addChangeListener(Property.POSITION, _this.handlePositionChanged);\n        _this.addChangeListener(Property.POSITIONING, _this.handlePositioningChanged);\n        if (options.element !== undefined) {\n            _this.setElement(options.element);\n        }\n        _this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n        _this.setPositioning(options.positioning !== undefined\n            ? /** @type {import(\"./OverlayPositioning.js\").default} */ (options.positioning)\n            : OverlayPositioning.TOP_LEFT);\n        if (options.position !== undefined) {\n            _this.setPosition(options.position);\n        }\n        return _this;\n    }\n    /**\n     * Get the DOM element of this overlay.\n     * @return {HTMLElement|undefined} The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getElement = function () {\n        return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n    };\n    /**\n     * Get the overlay identifier which is set on constructor.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Overlay.prototype.getId = function () {\n        return this.id;\n    };\n    /**\n     * Get the map associated with this overlay.\n     * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getMap = function () {\n        return /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP));\n    };\n    /**\n     * Get the offset of this overlay.\n     * @return {Array<number>} The offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getOffset = function () {\n        return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n    };\n    /**\n     * Get the current position of this overlay.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n     *     anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPosition = function () {\n        return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION));\n    };\n    /**\n     * Get the current positioning of this overlay.\n     * @return {import(\"./OverlayPositioning.js\").default} How the overlay is positioned\n     *     relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPositioning = function () {\n        return /** @type {import(\"./OverlayPositioning.js\").default} */ (this.get(Property.POSITIONING));\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleElementChanged = function () {\n        removeChildren(this.element);\n        var element = this.getElement();\n        if (element) {\n            this.element.appendChild(element);\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleMapChanged = function () {\n        if (this.mapPostrenderListenerKey) {\n            removeNode(this.element);\n            unlistenByKey(this.mapPostrenderListenerKey);\n            this.mapPostrenderListenerKey = null;\n        }\n        var map = this.getMap();\n        if (map) {\n            this.mapPostrenderListenerKey = listen(map, MapEventType.POSTRENDER, this.render, this);\n            this.updatePixelPosition();\n            var container = this.stopEvent\n                ? map.getOverlayContainerStopEvent()\n                : map.getOverlayContainer();\n            if (this.insertFirst) {\n                container.insertBefore(this.element, container.childNodes[0] || null);\n            }\n            else {\n                container.appendChild(this.element);\n            }\n            this.performAutoPan();\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.render = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleOffsetChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositionChanged = function () {\n        this.updatePixelPosition();\n        this.performAutoPan();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositioningChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * Set the DOM element to be associated with this overlay.\n     * @param {HTMLElement|undefined} element The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setElement = function (element) {\n        this.set(Property.ELEMENT, element);\n    };\n    /**\n     * Set the map to be associated with this overlay.\n     * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setMap = function (map) {\n        this.set(Property.MAP, map);\n    };\n    /**\n     * Set the offset for this overlay.\n     * @param {Array<number>} offset Offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setOffset = function (offset) {\n        this.set(Property.OFFSET, offset);\n    };\n    /**\n     * Set the position for this overlay. If the position is `undefined` the\n     * overlay is hidden.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n     *     is anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPosition = function (position) {\n        this.set(Property.POSITION, position);\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary) using the configured autoPan parameters\n     * @protected\n     */\n    Overlay.prototype.performAutoPan = function () {\n        if (this.autoPan) {\n            this.panIntoView(this.autoPan);\n        }\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary).\n     * @param {PanIntoViewOptions} [opt_panIntoViewOptions] Options for the pan action\n     * @api\n     */\n    Overlay.prototype.panIntoView = function (opt_panIntoViewOptions) {\n        var map = this.getMap();\n        if (!map || !map.getTargetElement() || !this.get(Property.POSITION)) {\n            return;\n        }\n        var mapRect = this.getRect(map.getTargetElement(), map.getSize());\n        var element = this.getElement();\n        var overlayRect = this.getRect(element, [\n            outerWidth(element),\n            outerHeight(element),\n        ]);\n        var panIntoViewOptions = opt_panIntoViewOptions || {};\n        var myMargin = panIntoViewOptions.margin === undefined ? 20 : panIntoViewOptions.margin;\n        if (!containsExtent(mapRect, overlayRect)) {\n            // the overlay is not completely inside the viewport, so pan the map\n            var offsetLeft = overlayRect[0] - mapRect[0];\n            var offsetRight = mapRect[2] - overlayRect[2];\n            var offsetTop = overlayRect[1] - mapRect[1];\n            var offsetBottom = mapRect[3] - overlayRect[3];\n            var delta = [0, 0];\n            if (offsetLeft < 0) {\n                // move map to the left\n                delta[0] = offsetLeft - myMargin;\n            }\n            else if (offsetRight < 0) {\n                // move map to the right\n                delta[0] = Math.abs(offsetRight) + myMargin;\n            }\n            if (offsetTop < 0) {\n                // move map up\n                delta[1] = offsetTop - myMargin;\n            }\n            else if (offsetBottom < 0) {\n                // move map down\n                delta[1] = Math.abs(offsetBottom) + myMargin;\n            }\n            if (delta[0] !== 0 || delta[1] !== 0) {\n                var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenterInternal());\n                var centerPx = map.getPixelFromCoordinateInternal(center);\n                if (!centerPx) {\n                    return;\n                }\n                var newCenterPx = [centerPx[0] + delta[0], centerPx[1] + delta[1]];\n                var panOptions = panIntoViewOptions.animation || {};\n                map.getView().animateInternal({\n                    center: map.getCoordinateFromPixelInternal(newCenterPx),\n                    duration: panOptions.duration,\n                    easing: panOptions.easing,\n                });\n            }\n        }\n    };\n    /**\n     * Get the extent of an element relative to the document\n     * @param {HTMLElement} element The element.\n     * @param {import(\"./size.js\").Size} size The size of the element.\n     * @return {import(\"./extent.js\").Extent} The extent.\n     * @protected\n     */\n    Overlay.prototype.getRect = function (element, size) {\n        var box = element.getBoundingClientRect();\n        var offsetX = box.left + window.pageXOffset;\n        var offsetY = box.top + window.pageYOffset;\n        return [offsetX, offsetY, offsetX + size[0], offsetY + size[1]];\n    };\n    /**\n     * Set the positioning for this overlay.\n     * @param {import(\"./OverlayPositioning.js\").default} positioning how the overlay is\n     *     positioned relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPositioning = function (positioning) {\n        this.set(Property.POSITIONING, positioning);\n    };\n    /**\n     * Modify the visibility of the element.\n     * @param {boolean} visible Element visibility.\n     * @protected\n     */\n    Overlay.prototype.setVisible = function (visible) {\n        if (this.rendered.visible !== visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.rendered.visible = visible;\n        }\n    };\n    /**\n     * Update pixel position.\n     * @protected\n     */\n    Overlay.prototype.updatePixelPosition = function () {\n        var map = this.getMap();\n        var position = this.getPosition();\n        if (!map || !map.isRendered() || !position) {\n            this.setVisible(false);\n            return;\n        }\n        var pixel = map.getPixelFromCoordinate(position);\n        var mapSize = map.getSize();\n        this.updateRenderedPosition(pixel, mapSize);\n    };\n    /**\n     * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n     * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n     * @protected\n     */\n    Overlay.prototype.updateRenderedPosition = function (pixel, mapSize) {\n        var style = this.element.style;\n        var offset = this.getOffset();\n        var positioning = this.getPositioning();\n        this.setVisible(true);\n        var x = Math.round(pixel[0] + offset[0]) + 'px';\n        var y = Math.round(pixel[1] + offset[1]) + 'px';\n        var posX = '0%';\n        var posY = '0%';\n        if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n            positioning == OverlayPositioning.CENTER_RIGHT ||\n            positioning == OverlayPositioning.TOP_RIGHT) {\n            posX = '-100%';\n        }\n        else if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.TOP_CENTER) {\n            posX = '-50%';\n        }\n        if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n            positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.BOTTOM_RIGHT) {\n            posY = '-100%';\n        }\n        else if (positioning == OverlayPositioning.CENTER_LEFT ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.CENTER_RIGHT) {\n            posY = '-50%';\n        }\n        var transform = \"translate(\" + posX + \", \" + posY + \") translate(\" + x + \", \" + y + \")\";\n        if (this.rendered.transform_ != transform) {\n            this.rendered.transform_ = transform;\n            style.transform = transform;\n            // @ts-ignore IE9\n            style.msTransform = transform;\n        }\n    };\n    /**\n     * returns the options this Overlay has been created with\n     * @return {Options} overlay options\n     */\n    Overlay.prototype.getOptions = function () {\n        return this.options;\n    };\n    return Overlay;\n}(BaseObject));\nexport default Overlay;\n//# sourceMappingURL=Overlay.js.map","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","/**\n * @module ol/tilegrid\n */\nimport Corner from './extent/Corner.js';\nimport TileGrid from './tilegrid/TileGrid.js';\nimport Units from './proj/Units.js';\nimport { DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE } from './tilegrid/common.js';\nimport { METERS_PER_UNIT, get as getProjection } from './proj.js';\nimport { containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth, } from './extent.js';\nimport { toSize } from './size.js';\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n    var tileGrid = projection.getDefaultTileGrid();\n    if (!tileGrid) {\n        tileGrid = createForProjection(projection);\n        projection.setDefaultTileGrid(tileGrid);\n    }\n    return tileGrid;\n}\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n    var z = tileCoord[0];\n    var center = tileGrid.getTileCoordCenter(tileCoord);\n    var projectionExtent = extentFromProjection(projection);\n    if (!containsCoordinate(projectionExtent, center)) {\n        var worldWidth = getWidth(projectionExtent);\n        var worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n        center[0] += worldWidth * worldsAway;\n        return tileGrid.getTileCoordForCoordAndZ(center, z);\n    }\n    else {\n        return tileCoord;\n    }\n}\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} [opt_maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [opt_tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {import(\"./extent/Corner.js\").default} [opt_corner] Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n    var corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n    var resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n    return new TileGrid({\n        extent: extent,\n        origin: getCorner(extent, corner),\n        resolutions: resolutions,\n        tileSize: opt_tileSize,\n    });\n}\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. If `maxResolution` is not provided the zero level of the grid is defined by the resolution\n * at which one tile fits in the provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxResolution] Resolution at level zero.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions} [opt_options] Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n    var xyzOptions = opt_options || {};\n    var extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n    var gridOptions = {\n        extent: extent,\n        minZoom: xyzOptions.minZoom,\n        tileSize: xyzOptions.tileSize,\n        resolutions: resolutionsFromExtent(extent, xyzOptions.maxZoom, xyzOptions.tileSize, xyzOptions.maxResolution),\n    };\n    return new TileGrid(gridOptions);\n}\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} [opt_maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [opt_tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {number} [opt_maxResolution] Resolution at level zero.\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize, opt_maxResolution) {\n    var maxZoom = opt_maxZoom !== undefined ? opt_maxZoom : DEFAULT_MAX_ZOOM;\n    var height = getHeight(extent);\n    var width = getWidth(extent);\n    var tileSize = toSize(opt_tileSize !== undefined ? opt_tileSize : DEFAULT_TILE_SIZE);\n    var maxResolution = opt_maxResolution > 0\n        ? opt_maxResolution\n        : Math.max(width / tileSize[0], height / tileSize[1]);\n    var length = maxZoom + 1;\n    var resolutions = new Array(length);\n    for (var z = 0; z < length; ++z) {\n        resolutions[z] = maxResolution / Math.pow(2, z);\n    }\n    return resolutions;\n}\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number} [opt_maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [opt_tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {import(\"./extent/Corner.js\").default} [opt_corner] Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n    var extent = extentFromProjection(projection);\n    return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n    projection = getProjection(projection);\n    var extent = projection.getExtent();\n    if (!extent) {\n        var half = (180 * METERS_PER_UNIT[Units.DEGREES]) / projection.getMetersPerUnit();\n        extent = createOrUpdate(-half, -half, half, half);\n    }\n    return extent;\n}\n//# sourceMappingURL=tilegrid.js.map","import { WORKER_OFFSCREEN_CANVAS } from './has.js';\n/**\n * @module ol/dom\n */\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [opt_width] Canvas width.\n * @param {number} [opt_height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [opt_canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [opt_Context2DSettings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height, opt_canvasPool, opt_Context2DSettings) {\n    /** @type {HTMLCanvasElement|OffscreenCanvas} */\n    var canvas;\n    if (opt_canvasPool && opt_canvasPool.length) {\n        canvas = opt_canvasPool.shift();\n    }\n    else if (WORKER_OFFSCREEN_CANVAS) {\n        canvas = new OffscreenCanvas(opt_width || 300, opt_height || 300);\n    }\n    else {\n        canvas = document.createElement('canvas');\n    }\n    if (opt_width) {\n        canvas.width = opt_width;\n    }\n    if (opt_height) {\n        canvas.height = opt_height;\n    }\n    //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n    return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d', opt_Context2DSettings));\n}\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n    var width = element.offsetWidth;\n    var style = getComputedStyle(element);\n    width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n    return width;\n}\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n    var height = element.offsetHeight;\n    var style = getComputedStyle(element);\n    height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n    return height;\n}\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n/**\n * @param {Node} node The node to remove.\n * @return {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n}\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n    var oldChildren = node.childNodes;\n    for (var i = 0; true; ++i) {\n        var oldChild = oldChildren[i];\n        var newChild = children[i];\n        // check if our work is done\n        if (!oldChild && !newChild) {\n            break;\n        }\n        // check if children match\n        if (oldChild === newChild) {\n            continue;\n        }\n        // check if a new child needs to be added\n        if (!oldChild) {\n            node.appendChild(newChild);\n            continue;\n        }\n        // check if an old child needs to be removed\n        if (!newChild) {\n            node.removeChild(oldChild);\n            --i;\n            continue;\n        }\n        // reorder\n        node.insertBefore(newChild, oldChild);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @module ol/extent\n */\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\nimport { assert } from './asserts.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [opt_extent] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value,\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return (extent1[0] <= extent2[0] &&\n        extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] &&\n        extent2[3] <= extent1[3]);\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [opt_extent] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return (extent1[0] == extent2[0] &&\n        extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] &&\n        extent1[3] == extent2[3]);\n}\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n    return (Math.abs(extent1[0] - extent2[0]) < tolerance &&\n        Math.abs(extent1[2] - extent2[2]) < tolerance &&\n        Math.abs(extent1[1] - extent2[1]) < tolerance &&\n        Math.abs(extent1[3] - extent2[3]) < tolerance);\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./extent/Corner.js\").default} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === Corner.BOTTOM_LEFT) {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === Corner.BOTTOM_RIGHT) {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === Corner.TOP_LEFT) {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === Corner.TOP_RIGHT) {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [opt_extent] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var dx = (resolution * size[0]) / 2;\n    var dy = (resolution * size[1]) / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    var x0 = x - xCos + ySin;\n    var x1 = x - xCos - ySin;\n    var x2 = x + xCos - ySin;\n    var x3 = x + xCos + ySin;\n    var y0 = y - xSin - yCos;\n    var y1 = y - xSin + yCos;\n    var y2 = y + xSin + yCos;\n    var y3 = y + xSin - yCos;\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [opt_extent] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return (extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1]);\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - (endY - maxY) / slope;\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - (endX - maxX) * slope;\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - (endY - minY) / slope;\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - (endX - minX) * slope;\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [opt_extent] Destination extent.\n * @param {number} [opt_stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent, opt_stops) {\n    var coordinates = [];\n    if (opt_stops > 1) {\n        var width = extent[2] - extent[0];\n        var height = extent[3] - extent[1];\n        for (var i = 0; i < opt_stops; ++i) {\n            coordinates.push(extent[0] + (width * i) / opt_stops, extent[1], extent[2], extent[1] + (height * i) / opt_stops, extent[2] - (width * i) / opt_stops, extent[3], extent[0], extent[3] - (height * i) / opt_stops);\n        }\n    }\n    else {\n        coordinates = [\n            extent[0],\n            extent[1],\n            extent[2],\n            extent[1],\n            extent[2],\n            extent[3],\n            extent[0],\n            extent[3],\n        ];\n    }\n    transformFn(coordinates, coordinates, 2);\n    var xs = [];\n    var ys = [];\n    for (var i = 0, l = coordinates.length; i < l; i += 2) {\n        xs.push(coordinates[i]);\n        ys.push(coordinates[i + 1]);\n    }\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n    var projectionExtent = projection.getExtent();\n    var center = getCenter(extent);\n    if (projection.canWrapX() &&\n        (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])) {\n        var worldWidth = getWidth(projectionExtent);\n        var worldsAway = Math.floor((center[0] - projectionExtent[0]) / worldWidth);\n        var offset = worldsAway * worldWidth;\n        extent[0] -= offset;\n        extent[2] -= offset;\n    }\n    return extent;\n}\n//# sourceMappingURL=extent.js.map","/**\n * @module ol/renderer/canvas/common\n */\n/**\n * Context options to disable image smoothing.\n * @type {Object}\n */\nexport var IMAGE_SMOOTHING_DISABLED = {\n    imageSmoothingEnabled: false,\n    msImageSmoothingEnabled: false,\n};\n//# sourceMappingURL=common.js.map","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","var global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  try {\n    return String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport { VOID } from '../functions.js';\nimport { clear } from '../obj.js';\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nvar Target = /** @class */ (function (_super) {\n    __extends(Target, _super);\n    /**\n     * @param {*} [opt_target] Default event target for dispatched events.\n     */\n    function Target(opt_target) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.eventTarget_ = opt_target;\n        /**\n         * @private\n         * @type {Object<string, number>}\n         */\n        _this.pendingRemovals_ = null;\n        /**\n         * @private\n         * @type {Object<string, number>}\n         */\n        _this.dispatching_ = null;\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").Listener>>}\n         */\n        _this.listeners_ = null;\n        return _this;\n    }\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").Listener} listener Listener.\n     */\n    Target.prototype.addEventListener = function (type, listener) {\n        if (!type || !listener) {\n            return;\n        }\n        var listeners = this.listeners_ || (this.listeners_ = {});\n        var listenersForType = listeners[type] || (listeners[type] = []);\n        if (listenersForType.indexOf(listener) === -1) {\n            listenersForType.push(listener);\n        }\n    };\n    /**\n     * Dispatches an event and calls all listeners listening for events\n     * of this type. The event parameter can either be a string or an\n     * Object with a `type` property.\n     *\n     * @param {import(\"./Event.js\").default|string} event Event object.\n     * @return {boolean|undefined} `false` if anyone called preventDefault on the\n     *     event object or if any of the listeners returned false.\n     * @api\n     */\n    Target.prototype.dispatchEvent = function (event) {\n        /** @type {import(\"./Event.js\").default|Event} */\n        var evt = typeof event === 'string' ? new Event(event) : event;\n        var type = evt.type;\n        if (!evt.target) {\n            evt.target = this.eventTarget_ || this;\n        }\n        var listeners = this.listeners_ && this.listeners_[type];\n        var propagate;\n        if (listeners) {\n            var dispatching = this.dispatching_ || (this.dispatching_ = {});\n            var pendingRemovals = this.pendingRemovals_ || (this.pendingRemovals_ = {});\n            if (!(type in dispatching)) {\n                dispatching[type] = 0;\n                pendingRemovals[type] = 0;\n            }\n            ++dispatching[type];\n            for (var i = 0, ii = listeners.length; i < ii; ++i) {\n                if ('handleEvent' in listeners[i]) {\n                    propagate = /** @type {import(\"../events.js\").ListenerObject} */ (listeners[i]).handleEvent(evt);\n                }\n                else {\n                    propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (listeners[i]).call(this, evt);\n                }\n                if (propagate === false || evt.propagationStopped) {\n                    propagate = false;\n                    break;\n                }\n            }\n            --dispatching[type];\n            if (dispatching[type] === 0) {\n                var pr = pendingRemovals[type];\n                delete pendingRemovals[type];\n                while (pr--) {\n                    this.removeEventListener(type, VOID);\n                }\n                delete dispatching[type];\n            }\n            return propagate;\n        }\n    };\n    /**\n     * Clean up.\n     */\n    Target.prototype.disposeInternal = function () {\n        this.listeners_ && clear(this.listeners_);\n    };\n    /**\n     * Get the listeners for a specified event type. Listeners are returned in the\n     * order that they will be called in.\n     *\n     * @param {string} type Type.\n     * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n     */\n    Target.prototype.getListeners = function (type) {\n        return (this.listeners_ && this.listeners_[type]) || undefined;\n    };\n    /**\n     * @param {string} [opt_type] Type. If not provided,\n     *     `true` will be returned if this event target has any listeners.\n     * @return {boolean} Has listeners.\n     */\n    Target.prototype.hasListener = function (opt_type) {\n        if (!this.listeners_) {\n            return false;\n        }\n        return opt_type\n            ? opt_type in this.listeners_\n            : Object.keys(this.listeners_).length > 0;\n    };\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").Listener} listener Listener.\n     */\n    Target.prototype.removeEventListener = function (type, listener) {\n        var listeners = this.listeners_ && this.listeners_[type];\n        if (listeners) {\n            var index = listeners.indexOf(listener);\n            if (index !== -1) {\n                if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n                    // make listener a no-op, and remove later in #dispatchEvent()\n                    listeners[index] = VOID;\n                    ++this.pendingRemovals_[type];\n                }\n                else {\n                    listeners.splice(index, 1);\n                    if (listeners.length === 0) {\n                        delete this.listeners_[type];\n                    }\n                }\n            }\n        }\n    };\n    return Target;\n}(Disposable));\nexport default Target;\n//# sourceMappingURL=Target.js.map","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.10.0';\n//# sourceMappingURL=util.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform, } from '../../transform.js';\nimport { asArray } from '../../color.js';\nimport { containsCoordinate, getBottomLeft, getBottomRight, getTopLeft, getTopRight, } from '../../extent.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { equals } from '../../array.js';\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\nvar CanvasLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function CanvasLayerRenderer(layer) {\n        var _this = _super.call(this, layer) || this;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.container = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedResolution;\n        /**\n         * A temporary transform.  The values in this transform should only be used in a\n         * function that sets the values.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tempTransform = createTransform();\n        /**\n         * The transform for rendered pixels to viewport CSS pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.pixelTransform = createTransform();\n        /**\n         * The transform for viewport CSS pixels to rendered pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.inversePixelTransform = createTransform();\n        /**\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.context = null;\n        /**\n         * @type {boolean}\n         */\n        _this.containerReused = false;\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.pixelContext_ = null;\n        return _this;\n    }\n    /**\n     * @param {import('../../PluggableMap.js').FrameState} frameState Frame state.\n     * @return {string} Background color.\n     */\n    CanvasLayerRenderer.prototype.getBackground = function (frameState) {\n        var layer = this.getLayer();\n        var background = layer.getBackground();\n        if (typeof background === 'function') {\n            background = background(frameState.viewState.resolution);\n        }\n        return background || undefined;\n    };\n    /**\n     * Get a rendering container from an existing target, if compatible.\n     * @param {HTMLElement} target Potential render target.\n     * @param {string} transform CSS Transform.\n     * @param {number} opacity Opacity.\n     * @param {string} [opt_backgroundColor] Background color.\n     */\n    CanvasLayerRenderer.prototype.useContainer = function (target, transform, opacity, opt_backgroundColor) {\n        var layerClassName = this.getLayer().getClassName();\n        var container, context;\n        if (target &&\n            target.className === layerClassName &&\n            target.style.opacity === '' &&\n            opacity === 1 &&\n            (!opt_backgroundColor ||\n                equals(asArray(target.style.backgroundColor), asArray(opt_backgroundColor)))) {\n            var canvas = target.firstElementChild;\n            if (canvas instanceof HTMLCanvasElement) {\n                context = canvas.getContext('2d');\n            }\n        }\n        if (context && context.canvas.style.transform === transform) {\n            // Container of the previous layer renderer can be used.\n            this.container = target;\n            this.context = context;\n            this.containerReused = true;\n        }\n        else if (this.containerReused) {\n            // Previously reused container cannot be used any more.\n            this.container = null;\n            this.context = null;\n            this.containerReused = false;\n        }\n        if (!this.container) {\n            container = document.createElement('div');\n            container.className = layerClassName;\n            var style = container.style;\n            style.position = 'absolute';\n            style.width = '100%';\n            style.height = '100%';\n            if (opt_backgroundColor) {\n                style.backgroundColor = opt_backgroundColor;\n            }\n            context = createCanvasContext2D();\n            var canvas = context.canvas;\n            container.appendChild(canvas);\n            style = canvas.style;\n            style.position = 'absolute';\n            style.left = '0';\n            style.transformOrigin = 'top left';\n            this.container = container;\n            this.context = context;\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.clipUnrotated = function (context, frameState, extent) {\n        var topLeft = getTopLeft(extent);\n        var topRight = getTopRight(extent);\n        var bottomRight = getBottomRight(extent);\n        var bottomLeft = getBottomLeft(extent);\n        applyTransform(frameState.coordinateToPixelTransform, topLeft);\n        applyTransform(frameState.coordinateToPixelTransform, topRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n        var inverted = this.inversePixelTransform;\n        applyTransform(inverted, topLeft);\n        applyTransform(inverted, topRight);\n        applyTransform(inverted, bottomRight);\n        applyTransform(inverted, bottomLeft);\n        context.save();\n        context.beginPath();\n        context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n        context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n        context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n        context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n        context.clip();\n    };\n    /**\n     * @param {import(\"../../render/EventType.js\").default} type Event type.\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    CanvasLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(type)) {\n            var event_1 = new RenderEvent(type, this.inversePixelTransform, frameState, context);\n            layer.dispatchEvent(event_1);\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.preRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.postRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n    };\n    /**\n     * Creates a transform for rendering to an element that will be rotated after rendering.\n     * @param {import(\"../../coordinate.js\").Coordinate} center Center.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {number} width Width of the rendered element (in pixels).\n     * @param {number} height Height of the rendered element (in pixels).\n     * @param {number} offsetX Offset on the x-axis in view coordinates.\n     * @protected\n     * @return {!import(\"../../transform.js\").Transform} Transform.\n     */\n    CanvasLayerRenderer.prototype.getRenderTransform = function (center, resolution, rotation, pixelRatio, width, height, offsetX) {\n        var dx1 = width / 2;\n        var dy1 = height / 2;\n        var sx = pixelRatio / resolution;\n        var sy = -sx;\n        var dx2 = -center[0] + offsetX;\n        var dy2 = -center[1];\n        return composeTransform(this.tempTransform, dx1, dy1, sx, sy, -rotation, dx2, dy2);\n    };\n    /**\n     * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    CanvasLayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        var renderPixel = applyTransform(this.inversePixelTransform, pixel.slice());\n        var context = this.context;\n        var layer = this.getLayer();\n        var layerExtent = layer.getExtent();\n        if (layerExtent) {\n            var renderCoordinate = applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n            /** get only data inside of the layer extent */\n            if (!containsCoordinate(layerExtent, renderCoordinate)) {\n                return null;\n            }\n        }\n        var x = Math.round(renderPixel[0]);\n        var y = Math.round(renderPixel[1]);\n        var pixelContext = this.pixelContext_;\n        if (!pixelContext) {\n            var pixelCanvas = document.createElement('canvas');\n            pixelCanvas.width = 1;\n            pixelCanvas.height = 1;\n            pixelContext = pixelCanvas.getContext('2d');\n            this.pixelContext_ = pixelContext;\n        }\n        pixelContext.clearRect(0, 0, 1, 1);\n        var data;\n        try {\n            pixelContext.drawImage(context.canvas, x, y, 1, 1, 0, 0, 1, 1);\n            data = pixelContext.getImageData(0, 0, 1, 1).data;\n        }\n        catch (err) {\n            if (err.name === 'SecurityError') {\n                // tainted canvas, we assume there is data at the given pixel (although there might not be)\n                this.pixelContext_ = null;\n                return new Uint8Array();\n            }\n            return data;\n        }\n        if (data[3] === 0) {\n            return null;\n        }\n        return data;\n    };\n    return CanvasLayerRenderer;\n}(LayerRenderer));\nexport default CanvasLayerRenderer;\n//# sourceMappingURL=Layer.js.map","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Map\n */\nimport Disposable from '../Disposable.js';\nimport { TRUE } from '../functions.js';\nimport { abstract } from '../util.js';\nimport { compose as composeTransform, makeInverse } from '../transform.js';\nimport { getWidth } from '../extent.js';\nimport { shared as iconImageCache } from '../style/IconImageCache.js';\nimport { inView } from '../layer/Layer.js';\nimport { wrapX } from '../coordinate.js';\n/**\n * @typedef HitMatch\n * @property {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @property {import(\"../layer/Layer.js\").default} layer Layer.\n * @property {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @property {number} distanceSq Squared distance.\n * @property {import(\"./vector.js\").FeatureCallback<T>} callback Callback.\n * @template T\n */\n/**\n * @abstract\n */\nvar MapRenderer = /** @class */ (function (_super) {\n    __extends(MapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function MapRenderer(map) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = map;\n        return _this;\n    }\n    /**\n     * @abstract\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        abstract();\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @protected\n     */\n    MapRenderer.prototype.calculateMatrices2D = function (frameState) {\n        var viewState = frameState.viewState;\n        var coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n        var pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n        composeTransform(coordinateToPixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / viewState.resolution, -1 / viewState.resolution, -viewState.rotation, -viewState.center[0], -viewState.center[1]);\n        makeInverse(pixelToCoordinateTransform, coordinateToPixelTransform);\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {S} thisArg Value to use as `this` when executing `callback`.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n     * @return {T|undefined} Callback result.\n     * @template S,T,U\n     */\n    MapRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, callback, thisArg, layerFilter, thisArg2) {\n        var result;\n        var viewState = frameState.viewState;\n        /**\n         * @param {boolean} managed Managed layer.\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n         * @return {T|undefined} Callback result.\n         */\n        function forEachFeatureAtCoordinate(managed, feature, layer, geometry) {\n            return callback.call(thisArg, feature, managed ? layer : null, geometry);\n        }\n        var projection = viewState.projection;\n        var translatedCoordinate = wrapX(coordinate.slice(), projection);\n        var offsets = [[0, 0]];\n        if (projection.canWrapX() && checkWrapped) {\n            var projectionExtent = projection.getExtent();\n            var worldWidth = getWidth(projectionExtent);\n            offsets.push([-worldWidth, 0], [worldWidth, 0]);\n        }\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        var matches = /** @type {Array<HitMatch<T>>} */ ([]);\n        var tmpCoord = [];\n        for (var i = 0; i < offsets.length; i++) {\n            for (var j = numLayers - 1; j >= 0; --j) {\n                var layerState = layerStates[j];\n                var layer = layerState.layer;\n                if (layer.hasRenderer() &&\n                    inView(layerState, viewState) &&\n                    layerFilter.call(thisArg2, layer)) {\n                    var layerRenderer = layer.getRenderer();\n                    var source = layer.getSource();\n                    if (layerRenderer && source) {\n                        var coordinates = source.getWrapX()\n                            ? translatedCoordinate\n                            : coordinate;\n                        var callback_1 = forEachFeatureAtCoordinate.bind(null, layerState.managed);\n                        tmpCoord[0] = coordinates[0] + offsets[i][0];\n                        tmpCoord[1] = coordinates[1] + offsets[i][1];\n                        result = layerRenderer.forEachFeatureAtCoordinate(tmpCoord, frameState, hitTolerance, callback_1, matches);\n                    }\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        if (matches.length === 0) {\n            return undefined;\n        }\n        var order = 1 / matches.length;\n        matches.forEach(function (m, i) { return (m.distanceSq += i * order); });\n        matches.sort(function (a, b) { return a.distanceSq - b.distanceSq; });\n        matches.some(function (m) {\n            return (result = m.callback(m.feature, m.layer, m.geometry));\n        });\n        return result;\n    };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n     *     callback.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    MapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        return abstract();\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n     * @return {boolean} Is there a feature at the given coordinate?\n     * @template U\n     */\n    MapRenderer.prototype.hasFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, layerFilter, thisArg) {\n        var hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, checkWrapped, TRUE, this, layerFilter, thisArg);\n        return hasFeature !== undefined;\n    };\n    /**\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     */\n    MapRenderer.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Render.\n     * @abstract\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.renderFrame = function (frameState) {\n        abstract();\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    MapRenderer.prototype.scheduleExpireIconCache = function (frameState) {\n        if (iconImageCache.canExpireCache()) {\n            frameState.postRenderFunctions.push(expireIconCache);\n        }\n    };\n    return MapRenderer;\n}(Disposable));\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n    iconImageCache.expire();\n}\nexport default MapRenderer;\n//# sourceMappingURL=Map.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Composite\n */\nimport MapRenderer from './Map.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RenderEvent from '../render/Event.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { checkedFonts } from '../render/canvas.js';\nimport { inView } from '../layer/Layer.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { replaceChildren } from '../dom.js';\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nvar CompositeMapRenderer = /** @class */ (function (_super) {\n    __extends(CompositeMapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function CompositeMapRenderer(map) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * @type {import(\"../events.js\").EventsKey}\n         */\n        _this.fontChangeListenerKey_ = listen(checkedFonts, ObjectEventType.PROPERTYCHANGE, map.redrawText.bind(map));\n        /**\n         * @private\n         * @type {HTMLDivElement}\n         */\n        _this.element_ = document.createElement('div');\n        var style = _this.element_.style;\n        style.position = 'absolute';\n        style.width = '100%';\n        style.height = '100%';\n        style.zIndex = '0';\n        _this.element_.className = CLASS_UNSELECTABLE + ' ol-layers';\n        var container = map.getViewport();\n        container.insertBefore(_this.element_, container.firstChild || null);\n        /**\n         * @private\n         * @type {Array<HTMLElement>}\n         */\n        _this.children_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CompositeMapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        var map = this.getMap();\n        if (map.hasListener(type)) {\n            var event_1 = new RenderEvent(type, undefined, frameState);\n            map.dispatchEvent(event_1);\n        }\n    };\n    CompositeMapRenderer.prototype.disposeInternal = function () {\n        unlistenByKey(this.fontChangeListenerKey_);\n        this.element_.parentNode.removeChild(this.element_);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Render.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CompositeMapRenderer.prototype.renderFrame = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element_.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        this.calculateMatrices2D(frameState);\n        this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n        var layerStatesArray = frameState.layerStatesArray.sort(function (a, b) {\n            return a.zIndex - b.zIndex;\n        });\n        var viewState = frameState.viewState;\n        this.children_.length = 0;\n        /**\n         * @type {Array<import(\"../layer/BaseVector.js\").default>}\n         */\n        var declutterLayers = [];\n        var previousElement = null;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            frameState.layerIndex = i;\n            if (!inView(layerState, viewState) ||\n                (layerState.sourceState != SourceState.READY &&\n                    layerState.sourceState != SourceState.UNDEFINED)) {\n                continue;\n            }\n            var layer = layerState.layer;\n            var element = layer.render(frameState, previousElement);\n            if (!element) {\n                continue;\n            }\n            if (element !== previousElement) {\n                this.children_.push(element);\n                previousElement = element;\n            }\n            if ('getDeclutter' in layer) {\n                declutterLayers.push(\n                /** @type {import(\"../layer/BaseVector.js\").default} */ (layer));\n            }\n        }\n        for (var i = declutterLayers.length - 1; i >= 0; --i) {\n            declutterLayers[i].renderDeclutter(frameState);\n        }\n        replaceChildren(this.element_, this.children_);\n        this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n        if (!this.renderedVisible_) {\n            this.element_.style.display = '';\n            this.renderedVisible_ = true;\n        }\n        this.scheduleExpireIconCache(frameState);\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n     *     callback.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    CompositeMapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        var viewState = frameState.viewState;\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        for (var i = numLayers - 1; i >= 0; --i) {\n            var layerState = layerStates[i];\n            var layer = layerState.layer;\n            if (layer.hasRenderer() &&\n                inView(layerState, viewState) &&\n                layerFilter(layer)) {\n                var layerRenderer = layer.getRenderer();\n                var data = layerRenderer.getDataAtPixel(pixel, frameState, hitTolerance);\n                if (data) {\n                    var result = callback(layer, data);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    return CompositeMapRenderer;\n}(MapRenderer));\nexport default CompositeMapRenderer;\n//# sourceMappingURL=Composite.js.map","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport BaseLayer from './Base.js';\nimport EventType from '../events/EventType.js';\nimport LayerProperty from './Property.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:source'|\n *     import(\"../render/EventType\").LayerRenderEventTypes, Return>} LayerOnSignature\n */\n/**\n * @template {import(\"../source/Source.js\").default} SourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {SourceType} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer~Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Layer.js\").default} layer Layer.\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {import(\"../source/State.js\").default} sourceState SourceState.\n * @property {boolean} visible Visible.\n * @property {boolean} managed Managed.\n * @property {import(\"../extent.js\").Extent} [extent] Extent.\n * @property {number} zIndex ZIndex.\n * @property {number} maxResolution Maximum resolution.\n * @property {number} minResolution Minimum resolution.\n * @property {number} minZoom Minimum zoom.\n * @property {number} maxZoom Maximum zoom.\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}. Components\n * like {@link module:ol/interaction/Draw~Draw} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link import(\"../PluggableMap.js\").default#forEachLayerAtPixel map.forEachLayerAtPixel()} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options<SourceType>} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {LayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {RendererType}\n         */\n        _this.renderer_ = null;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addChangeListener(LayerProperty.SOURCE, _this.handleSourcePropertyChange_);\n        var source = options.source\n            ? /** @type {SourceType} */ (options.source)\n            : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? SourceState.UNDEFINED : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    Layer.prototype.getFeatures = function (pixel) {\n        if (!this.renderer_) {\n            return new Promise(function (resolve) { return resolve([]); });\n        }\n        return this.renderer_.getFeatures(pixel);\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * For use inside the library only.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Layer.prototype.setMapInternal = function (map) {\n        this.set(LayerProperty.MAP, map);\n    };\n    /**\n     * For use inside the library only.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     */\n    Layer.prototype.getMapInternal = function () {\n        return this.get(LayerProperty.MAP);\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map~Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map~Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = \n                /** @type {import(\"../render/Event.js\").default} */ (evt);\n                var layerStatesArray = renderEvent.frameState.layerStatesArray;\n                var layerState = this.getLayerState(false);\n                // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n                assert(!layerStatesArray.some(function (arrayLayerState) {\n                    return arrayLayerState.layer === layerState.layer;\n                }), 67);\n                layerStatesArray.push(layerState);\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {RendererType} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {RendererType} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    /**\n     * Clean up.\n     */\n    Layer.prototype.disposeInternal = function () {\n        if (this.renderer_) {\n            this.renderer_.dispose();\n            delete this.renderer_;\n        }\n        this.setSource(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution ||\n        resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\nimport { squaredDistance, squaredSegmentDistance } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>} [opt_simplifiedFlatCoordinates] Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end, stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n    var simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined\n        ? opt_simplifiedFlatCoordinates\n        : [];\n    if (!highQuality) {\n        end = radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        flatCoordinates = simplifiedFlatCoordinates;\n        offset = 0;\n        stride = 2;\n    }\n    simplifiedFlatCoordinates.length = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n    return simplifiedFlatCoordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    var n = (end - offset) / stride;\n    if (n < 3) {\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    /** @type {Array<number>} */\n    var markers = new Array(n);\n    markers[0] = 1;\n    markers[n - 1] = 1;\n    /** @type {Array<number>} */\n    var stack = [offset, end - stride];\n    var index = 0;\n    while (stack.length > 0) {\n        var last = stack.pop();\n        var first = stack.pop();\n        var maxSquaredDistance = 0;\n        var x1 = flatCoordinates[first];\n        var y1 = flatCoordinates[first + 1];\n        var x2 = flatCoordinates[last];\n        var y2 = flatCoordinates[last + 1];\n        for (var i = first + stride; i < last; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            var squaredDistance_1 = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n            if (squaredDistance_1 > maxSquaredDistance) {\n                index = i;\n                maxSquaredDistance = squaredDistance_1;\n            }\n        }\n        if (maxSquaredDistance > squaredTolerance) {\n            markers[(index - offset) / stride] = 1;\n            if (first + stride < index) {\n                stack.push(first, index);\n            }\n            if (index + stride < last) {\n                stack.push(index, last);\n            }\n        }\n    }\n    for (var i = 0; i < n; ++i) {\n        if (markers[i]) {\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride + 1];\n        }\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(flatCoordinates, offset, endss, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    if (end <= offset + stride) {\n        // zero or one point, no simplification possible, so copy and return\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    // copy first point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    var x2 = x1;\n    var y2 = y1;\n    for (offset += stride; offset < end; offset += stride) {\n        x2 = flatCoordinates[offset];\n        y2 = flatCoordinates[offset + 1];\n        if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n            // copy point at offset\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    if (x2 != x1 || y2 != y1) {\n        // copy last point\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n    return tolerance * Math.round(value / tolerance);\n}\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    // do nothing if the line is empty\n    if (offset == end) {\n        return simplifiedOffset;\n    }\n    // snap the first coordinate (P1)\n    var x1 = snap(flatCoordinates[offset], tolerance);\n    var y1 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // add the first coordinate to the output\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    // find the next coordinate that does not snap to the same value as the first\n    // coordinate (P2)\n    var x2, y2;\n    do {\n        x2 = snap(flatCoordinates[offset], tolerance);\n        y2 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        if (offset == end) {\n            // all coordinates snap to the same value, the line collapses to a point\n            // push the last snapped value anyway to ensure that the output contains\n            // at least two points\n            // FIXME should we really return at least two points anyway?\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            return simplifiedOffset;\n        }\n    } while (x2 == x1 && y2 == y1);\n    while (offset < end) {\n        // snap the next coordinate (P3)\n        var x3 = snap(flatCoordinates[offset], tolerance);\n        var y3 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        // skip P3 if it is equal to P2\n        if (x3 == x2 && y3 == y2) {\n            continue;\n        }\n        // calculate the delta between P1 and P2\n        var dx1 = x2 - x1;\n        var dy1 = y2 - y1;\n        // calculate the delta between P3 and P1\n        var dx2 = x3 - x1;\n        var dy2 = y3 - y1;\n        // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n        // P1 in the same direction then P2 is on the straight line between P1 and\n        // P3\n        if (dx1 * dy2 == dy1 * dx2 &&\n            ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n            ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n            // discard P2 and set P2 = P3\n            x2 = x3;\n            y2 = y3;\n            continue;\n        }\n        // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n        // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n        // and continue with P1 = P2 and P2 = P3\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n        x1 = x2;\n        y1 = y2;\n        x2 = x3;\n        y2 = y3;\n    }\n    // add the last point (P2)\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(flatCoordinates, offset, endss, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n//# sourceMappingURL=simplify.js.map","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","/**\n * @module ol/events\n */\nimport { clear } from './obj.js';\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [opt_this] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [opt_once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n    if (opt_this && opt_this !== target) {\n        listener = listener.bind(opt_this);\n    }\n    if (opt_once) {\n        var originalListener_1 = listener;\n        listener = function () {\n            target.removeEventListener(type, listener);\n            originalListener_1.apply(this, arguments);\n        };\n    }\n    var eventsKey = {\n        target: target,\n        type: type,\n        listener: listener,\n    };\n    target.addEventListener(type, listener);\n    return eventsKey;\n}\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [opt_this] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n    return listen(target, type, listener, opt_this, true);\n}\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n    if (key && key.target) {\n        key.target.removeEventListener(key.type, key.listener);\n        clear(key);\n    }\n}\n//# sourceMappingURL=events.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Attribution\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { equals } from '../array.js';\nimport { inView } from '../layer/Layer.js';\nimport { removeChildren, replaceNode } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string|HTMLElement} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [expandClassName=className + '-expand'] CSS class name for the\n * collapsed attributions button.\n * @property {string|HTMLElement} [collapseLabel='›'] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [collapseClassName=className + '-collapse'] CSS class name for the\n * expanded attributions button.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nvar Attribution = /** @class */ (function (_super) {\n    __extends(Attribution, _super);\n    /**\n     * @param {Options} [opt_options] Attribution options.\n     */\n    function Attribution(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.ulElement_ = document.createElement('ul');\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsed_ =\n            options.collapsed !== undefined ? options.collapsed : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.userCollapsed_ = _this.collapsed_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overrideCollapsible_ = options.collapsible !== undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsible_ =\n            options.collapsible !== undefined ? options.collapsible : true;\n        if (!_this.collapsible_) {\n            _this.collapsed_ = false;\n        }\n        var className = options.className !== undefined ? options.className : 'ol-attribution';\n        var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n        var expandClassName = options.expandClassName !== undefined\n            ? options.expandClassName\n            : className + '-expand';\n        var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u203A';\n        var collapseClassName = options.collapseClassName !== undefined\n            ? options.collapseClassName\n            : className + '-collpase';\n        if (typeof collapseLabel === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.collapseLabel_ = document.createElement('span');\n            _this.collapseLabel_.textContent = collapseLabel;\n            _this.collapseLabel_.className = collapseClassName;\n        }\n        else {\n            _this.collapseLabel_ = collapseLabel;\n        }\n        var label = options.label !== undefined ? options.label : 'i';\n        if (typeof label === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.label_ = document.createElement('span');\n            _this.label_.textContent = label;\n            _this.label_.className = expandClassName;\n        }\n        else {\n            _this.label_ = label;\n        }\n        var activeLabel = _this.collapsible_ && !_this.collapsed_ ? _this.collapseLabel_ : _this.label_;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.toggleButton_ = document.createElement('button');\n        _this.toggleButton_.setAttribute('type', 'button');\n        _this.toggleButton_.setAttribute('aria-expanded', String(!_this.collapsed_));\n        _this.toggleButton_.title = tipLabel;\n        _this.toggleButton_.appendChild(activeLabel);\n        _this.toggleButton_.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className +\n            ' ' +\n            CLASS_UNSELECTABLE +\n            ' ' +\n            CLASS_CONTROL +\n            (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n            (_this.collapsible_ ? '' : ' ol-uncollapsible');\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(_this.toggleButton_);\n        element.appendChild(_this.ulElement_);\n        /**\n         * A list of currently rendered resolutions.\n         * @type {Array<string>}\n         * @private\n         */\n        _this.renderedAttributions_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * Collect a list of visible attributions and set the collapsible state.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {Array<string>} Attributions.\n     * @private\n     */\n    Attribution.prototype.collectSourceAttributions_ = function (frameState) {\n        /**\n         * Used to determine if an attribution already exists.\n         * @type {!Object<string, boolean>}\n         */\n        var lookup = {};\n        /**\n         * A list of visible attributions.\n         * @type {Array<string>}\n         */\n        var visibleAttributions = [];\n        var collapsible = true;\n        var layerStatesArray = frameState.layerStatesArray;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            if (!inView(layerState, frameState.viewState)) {\n                continue;\n            }\n            var source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n            if (!source) {\n                continue;\n            }\n            var attributionGetter = source.getAttributions();\n            if (!attributionGetter) {\n                continue;\n            }\n            var attributions = attributionGetter(frameState);\n            if (!attributions) {\n                continue;\n            }\n            collapsible =\n                collapsible && source.getAttributionsCollapsible() !== false;\n            if (Array.isArray(attributions)) {\n                for (var j = 0, jj = attributions.length; j < jj; ++j) {\n                    if (!(attributions[j] in lookup)) {\n                        visibleAttributions.push(attributions[j]);\n                        lookup[attributions[j]] = true;\n                    }\n                }\n            }\n            else {\n                if (!(attributions in lookup)) {\n                    visibleAttributions.push(attributions);\n                    lookup[attributions] = true;\n                }\n            }\n        }\n        if (!this.overrideCollapsible_) {\n            this.setCollapsible(collapsible);\n        }\n        return visibleAttributions;\n    };\n    /**\n     * @private\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    Attribution.prototype.updateElement_ = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        var attributions = this.collectSourceAttributions_(frameState);\n        var visible = attributions.length > 0;\n        if (this.renderedVisible_ != visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.renderedVisible_ = visible;\n        }\n        if (equals(attributions, this.renderedAttributions_)) {\n            return;\n        }\n        removeChildren(this.ulElement_);\n        // append the attributions\n        for (var i = 0, ii = attributions.length; i < ii; ++i) {\n            var element = document.createElement('li');\n            element.innerHTML = attributions[i];\n            this.ulElement_.appendChild(element);\n        }\n        this.renderedAttributions_ = attributions;\n    };\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Attribution.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        this.handleToggle_();\n        this.userCollapsed_ = this.collapsed_;\n    };\n    /**\n     * @private\n     */\n    Attribution.prototype.handleToggle_ = function () {\n        this.element.classList.toggle(CLASS_COLLAPSED);\n        if (this.collapsed_) {\n            replaceNode(this.collapseLabel_, this.label_);\n        }\n        else {\n            replaceNode(this.label_, this.collapseLabel_);\n        }\n        this.collapsed_ = !this.collapsed_;\n        this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n    };\n    /**\n     * Return `true` if the attribution is collapsible, `false` otherwise.\n     * @return {boolean} True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.getCollapsible = function () {\n        return this.collapsible_;\n    };\n    /**\n     * Set whether the attribution should be collapsible.\n     * @param {boolean} collapsible True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.setCollapsible = function (collapsible) {\n        if (this.collapsible_ === collapsible) {\n            return;\n        }\n        this.collapsible_ = collapsible;\n        this.element.classList.toggle('ol-uncollapsible');\n        if (this.userCollapsed_) {\n            this.handleToggle_();\n        }\n    };\n    /**\n     * Collapse or expand the attribution according to the passed parameter. Will\n     * not do anything if the attribution isn't collapsible or if the current\n     * collapsed state is already the one requested.\n     * @param {boolean} collapsed True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.setCollapsed = function (collapsed) {\n        this.userCollapsed_ = collapsed;\n        if (!this.collapsible_ || this.collapsed_ === collapsed) {\n            return;\n        }\n        this.handleToggle_();\n    };\n    /**\n     * Return `true` when the attribution is currently collapsed or `false`\n     * otherwise.\n     * @return {boolean} True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.getCollapsed = function () {\n        return this.collapsed_;\n    };\n    /**\n     * Update the attribution element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    Attribution.prototype.render = function (mapEvent) {\n        this.updateElement_(mapEvent.frameState);\n    };\n    return Attribution;\n}(Control));\nexport default Attribution;\n//# sourceMappingURL=Attribution.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nvar Rotate = /** @class */ (function (_super) {\n    __extends(Rotate, _super);\n    /**\n     * @param {Options} [opt_options] Rotate options.\n     */\n    function Rotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-rotate';\n        var label = options.label !== undefined ? options.label : '\\u21E7';\n        var compassClassName = options.compassClassName !== undefined\n            ? options.compassClassName\n            : 'ol-compass';\n        /**\n         * @type {HTMLElement}\n         * @private\n         */\n        _this.label_ = null;\n        if (typeof label === 'string') {\n            _this.label_ = document.createElement('span');\n            _this.label_.className = compassClassName;\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n            _this.label_.classList.add(compassClassName);\n        }\n        var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n        var button = document.createElement('button');\n        button.className = className + '-reset';\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(_this.label_);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(button);\n        _this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        if (_this.autoHide_) {\n            _this.element.classList.add(CLASS_HIDDEN);\n        }\n        return _this;\n    }\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Rotate.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        if (this.callResetNorth_ !== undefined) {\n            this.callResetNorth_();\n        }\n        else {\n            this.resetNorth_();\n        }\n    };\n    /**\n     * @private\n     */\n    Rotate.prototype.resetNorth_ = function () {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        var rotation = view.getRotation();\n        if (rotation !== undefined) {\n            if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n                view.animate({\n                    rotation: 0,\n                    duration: this.duration_,\n                    easing: easeOut,\n                });\n            }\n            else {\n                view.setRotation(0);\n            }\n        }\n    };\n    /**\n     * Update the rotate control element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    Rotate.prototype.render = function (mapEvent) {\n        var frameState = mapEvent.frameState;\n        if (!frameState) {\n            return;\n        }\n        var rotation = frameState.viewState.rotation;\n        if (rotation != this.rotation_) {\n            var transform = 'rotate(' + rotation + 'rad)';\n            if (this.autoHide_) {\n                var contains = this.element.classList.contains(CLASS_HIDDEN);\n                if (!contains && rotation === 0) {\n                    this.element.classList.add(CLASS_HIDDEN);\n                }\n                else if (contains && rotation !== 0) {\n                    this.element.classList.remove(CLASS_HIDDEN);\n                }\n            }\n            this.label_.style.transform = transform;\n        }\n        this.rotation_ = rotation;\n    };\n    return Rotate;\n}(Control));\nexport default Rotate;\n//# sourceMappingURL=Rotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Zoom\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string} [zoomInClassName=className + '-in'] CSS class name for the zoom-in button.\n * @property {string} [zoomOutClassName=className + '-out'] CSS class name for the zoom-out button.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='–'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nvar Zoom = /** @class */ (function (_super) {\n    __extends(Zoom, _super);\n    /**\n     * @param {Options} [opt_options] Zoom options.\n     */\n    function Zoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            target: options.target,\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-zoom';\n        var delta = options.delta !== undefined ? options.delta : 1;\n        var zoomInClassName = options.zoomInClassName !== undefined\n            ? options.zoomInClassName\n            : className + '-in';\n        var zoomOutClassName = options.zoomOutClassName !== undefined\n            ? options.zoomOutClassName\n            : className + '-out';\n        var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n        var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2013';\n        var zoomInTipLabel = options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : 'Zoom in';\n        var zoomOutTipLabel = options.zoomOutTipLabel !== undefined\n            ? options.zoomOutTipLabel\n            : 'Zoom out';\n        var inElement = document.createElement('button');\n        inElement.className = zoomInClassName;\n        inElement.setAttribute('type', 'button');\n        inElement.title = zoomInTipLabel;\n        inElement.appendChild(typeof zoomInLabel === 'string'\n            ? document.createTextNode(zoomInLabel)\n            : zoomInLabel);\n        inElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, delta), false);\n        var outElement = document.createElement('button');\n        outElement.className = zoomOutClassName;\n        outElement.setAttribute('type', 'button');\n        outElement.title = zoomOutTipLabel;\n        outElement.appendChild(typeof zoomOutLabel === 'string'\n            ? document.createTextNode(zoomOutLabel)\n            : zoomOutLabel);\n        outElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, -delta), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(inElement);\n        element.appendChild(outElement);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * @param {number} delta Zoom delta.\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Zoom.prototype.handleClick_ = function (delta, event) {\n        event.preventDefault();\n        this.zoomByDelta_(delta);\n    };\n    /**\n     * @param {number} delta Zoom delta.\n     * @private\n     */\n    Zoom.prototype.zoomByDelta_ = function (delta) {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        var currentZoom = view.getZoom();\n        if (currentZoom !== undefined) {\n            var newZoom = view.getConstrainedZoom(currentZoom + delta);\n            if (this.duration_ > 0) {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.animate({\n                    zoom: newZoom,\n                    duration: this.duration_,\n                    easing: easeOut,\n                });\n            }\n            else {\n                view.setZoom(newZoom);\n            }\n        }\n    };\n    return Zoom;\n}(Control));\nexport default Zoom;\n//# sourceMappingURL=Zoom.js.map","/**\n * @module ol/control\n */\nimport Attribution from './control/Attribution.js';\nimport Collection from './Collection.js';\nimport Rotate from './control/Rotate.js';\nimport Zoom from './control/Zoom.js';\nexport { default as Attribution } from './control/Attribution.js';\nexport { default as Control } from './control/Control.js';\nexport { default as FullScreen } from './control/FullScreen.js';\nexport { default as MousePosition } from './control/MousePosition.js';\nexport { default as OverviewMap } from './control/OverviewMap.js';\nexport { default as Rotate } from './control/Rotate.js';\nexport { default as ScaleLine } from './control/ScaleLine.js';\nexport { default as Zoom } from './control/Zoom.js';\nexport { default as ZoomSlider } from './control/ZoomSlider.js';\nexport { default as ZoomToExtent } from './control/ZoomToExtent.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./control/Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./control/Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./control/Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions} [opt_options]\n * Defaults options.\n * @return {Collection<import(\"./control/Control.js\").default>}\n * Controls.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var controls = new Collection();\n    var zoomControl = options.zoom !== undefined ? options.zoom : true;\n    if (zoomControl) {\n        controls.push(new Zoom(options.zoomOptions));\n    }\n    var rotateControl = options.rotate !== undefined ? options.rotate : true;\n    if (rotateControl) {\n        controls.push(new Rotate(options.rotateOptions));\n    }\n    var attributionControl = options.attribution !== undefined ? options.attribution : true;\n    if (attributionControl) {\n        controls.push(new Attribution(options.attributionOptions));\n    }\n    return controls;\n}\n//# sourceMappingURL=control.js.map","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n  options.name        - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","/**\n * @module ol/proj/Projection\n */\nimport { METERS_PER_UNIT } from './Units.js';\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `number` view resolution and a {@link module:ol/coordinate~Coordinate Coordinate} as arguments, and returns\n * the `number` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj.getPointResolution getPointResolution()} function will be used.\n */\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4.register} function.\n *\n * @api\n */\nvar Projection = /** @class */ (function () {\n    /**\n     * @param {Options} options Projection options.\n     */\n    function Projection(options) {\n        /**\n         * @private\n         * @type {string}\n         */\n        this.code_ = options.code;\n        /**\n         * Units of projected coordinates. When set to `TILE_PIXELS`, a\n         * `this.extent_` and `this.worldExtent_` must be configured properly for each\n         * tile.\n         * @private\n         * @type {import(\"./Units.js\").default}\n         */\n        this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n        /**\n         * Validity extent of the projection in projected coordinates. For projections\n         * with `TILE_PIXELS` units, this is the extent of the tile in\n         * tile pixel space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = options.extent !== undefined ? options.extent : null;\n        /**\n         * Extent of the world in EPSG:4326. For projections with\n         * `TILE_PIXELS` units, this is the extent of the tile in\n         * projected coordinate space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.worldExtent_ =\n            options.worldExtent !== undefined ? options.worldExtent : null;\n        /**\n         * @private\n         * @type {string}\n         */\n        this.axisOrientation_ =\n            options.axisOrientation !== undefined ? options.axisOrientation : 'enu';\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.global_ = options.global !== undefined ? options.global : false;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.canWrapX_ = !!(this.global_ && this.extent_);\n        /**\n         * @private\n         * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n         */\n        this.getPointResolutionFunc_ = options.getPointResolution;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        this.defaultTileGrid_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.metersPerUnit_ = options.metersPerUnit;\n    }\n    /**\n     * @return {boolean} The projection is suitable for wrapping the x-axis\n     */\n    Projection.prototype.canWrapX = function () {\n        return this.canWrapX_;\n    };\n    /**\n     * Get the code for this projection, e.g. 'EPSG:4326'.\n     * @return {string} Code.\n     * @api\n     */\n    Projection.prototype.getCode = function () {\n        return this.code_;\n    };\n    /**\n     * Get the validity extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the units of this projection.\n     * @return {import(\"./Units.js\").default} Units.\n     * @api\n     */\n    Projection.prototype.getUnits = function () {\n        return this.units_;\n    };\n    /**\n     * Get the amount of meters per unit of this projection.  If the projection is\n     * not configured with `metersPerUnit` or a units identifier, the return is\n     * `undefined`.\n     * @return {number|undefined} Meters.\n     * @api\n     */\n    Projection.prototype.getMetersPerUnit = function () {\n        return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n    };\n    /**\n     * Get the world extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getWorldExtent = function () {\n        return this.worldExtent_;\n    };\n    /**\n     * Get the axis orientation of this projection.\n     * Example values are:\n     * enu - the default easting, northing, elevation.\n     * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n     *     or south orientated transverse mercator.\n     * wnu - westing, northing, up - some planetary coordinate systems have\n     *     \"west positive\" coordinate systems\n     * @return {string} Axis orientation.\n     * @api\n     */\n    Projection.prototype.getAxisOrientation = function () {\n        return this.axisOrientation_;\n    };\n    /**\n     * Is this projection a global projection which spans the whole world?\n     * @return {boolean} Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.isGlobal = function () {\n        return this.global_;\n    };\n    /**\n     * Set if the projection is a global projection which spans the whole world\n     * @param {boolean} global Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.setGlobal = function (global) {\n        this.global_ = global;\n        this.canWrapX_ = !!(global && this.extent_);\n    };\n    /**\n     * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n     */\n    Projection.prototype.getDefaultTileGrid = function () {\n        return this.defaultTileGrid_;\n    };\n    /**\n     * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n     */\n    Projection.prototype.setDefaultTileGrid = function (tileGrid) {\n        this.defaultTileGrid_ = tileGrid;\n    };\n    /**\n     * Set the validity extent for this projection.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Projection.prototype.setExtent = function (extent) {\n        this.extent_ = extent;\n        this.canWrapX_ = !!(this.global_ && extent);\n    };\n    /**\n     * Set the world extent for this projection.\n     * @param {import(\"../extent.js\").Extent} worldExtent World extent\n     *     [minlon, minlat, maxlon, maxlat].\n     * @api\n     */\n    Projection.prototype.setWorldExtent = function (worldExtent) {\n        this.worldExtent_ = worldExtent;\n    };\n    /**\n     * Set the getPointResolution function (see {@link module:ol/proj.getPointResolution}\n     * for this projection.\n     * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n     * @api\n     */\n    Projection.prototype.setGetPointResolution = function (func) {\n        this.getPointResolutionFunc_ = func;\n    };\n    /**\n     * Get the custom point resolution function for this projection (if set).\n     * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n     * resolution function (if set).\n     */\n    Projection.prototype.getPointResolutionFunc = function () {\n        return this.getPointResolutionFunc_;\n    };\n    return Projection;\n}());\nexport default Projection;\n//# sourceMappingURL=Projection.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg3857\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\nimport { cosh } from '../math.js';\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * @const\n * @type {number}\n */\nexport var HALF_SIZE = Math.PI * RADIUS;\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-HALF_SIZE, -HALF_SIZE, HALF_SIZE, HALF_SIZE];\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var WORLD_EXTENT = [-180, -85, 180, 85];\n/**\n * Maximum safe value in y direction\n * @const\n * @type {number}\n */\nexport var MAX_SAFE_Y = RADIUS * Math.log(Math.tan(Math.PI / 2));\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nvar EPSG3857Projection = /** @class */ (function (_super) {\n    __extends(EPSG3857Projection, _super);\n    /**\n     * @param {string} code Code.\n     */\n    function EPSG3857Projection(code) {\n        return _super.call(this, {\n            code: code,\n            units: Units.METERS,\n            extent: EXTENT,\n            global: true,\n            worldExtent: WORLD_EXTENT,\n            getPointResolution: function (resolution, point) {\n                return resolution / cosh(point[1] / RADIUS);\n            },\n        }) || this;\n    }\n    return EPSG3857Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG3857Projection('EPSG:3857'),\n    new EPSG3857Projection('EPSG:102100'),\n    new EPSG3857Projection('EPSG:102113'),\n    new EPSG3857Projection('EPSG:900913'),\n    new EPSG3857Projection('http://www.opengis.net/def/crs/EPSG/0/3857'),\n    new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857'),\n];\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = (HALF_SIZE * input[i]) / 180;\n        var y = RADIUS * Math.log(Math.tan((Math.PI * (+input[i + 1] + 90)) / 360));\n        if (y > MAX_SAFE_Y) {\n            y = MAX_SAFE_Y;\n        }\n        else if (y < -MAX_SAFE_Y) {\n            y = -MAX_SAFE_Y;\n        }\n        output[i + 1] = y;\n    }\n    return output;\n}\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = (180 * input[i]) / HALF_SIZE;\n        output[i + 1] =\n            (360 * Math.atan(Math.exp(input[i + 1] / RADIUS))) / Math.PI - 90;\n    }\n    return output;\n}\n//# sourceMappingURL=epsg3857.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-180, -90, 180, 90];\n/**\n * @const\n * @type {number}\n */\nexport var METERS_PER_UNIT = (Math.PI * RADIUS) / 180;\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nvar EPSG4326Projection = /** @class */ (function (_super) {\n    __extends(EPSG4326Projection, _super);\n    /**\n     * @param {string} code Code.\n     * @param {string} [opt_axisOrientation] Axis orientation.\n     */\n    function EPSG4326Projection(code, opt_axisOrientation) {\n        return _super.call(this, {\n            code: code,\n            units: Units.DEGREES,\n            extent: EXTENT,\n            axisOrientation: opt_axisOrientation,\n            global: true,\n            metersPerUnit: METERS_PER_UNIT,\n            worldExtent: EXTENT,\n        }) || this;\n    }\n    return EPSG4326Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG4326Projection('CRS:84'),\n    new EPSG4326Projection('EPSG:4326', 'neu'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n    new EPSG4326Projection('http://www.opengis.net/def/crs/OGC/1.3/CRS84'),\n    new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n    new EPSG4326Projection('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu'),\n];\n//# sourceMappingURL=epsg4326.js.map","/**\n * @module ol/proj/projections\n */\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nvar cache = {};\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n    cache = {};\n}\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n    return (cache[code] ||\n        cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\\w+)$/, 'EPSG:$3')] ||\n        null);\n}\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n    cache[code] = projection;\n}\n//# sourceMappingURL=projections.js.map","/**\n * @module ol/proj/transforms\n */\nimport { isEmpty } from '../obj.js';\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nvar transforms = {};\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n    transforms = {};\n}\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    if (!(sourceCode in transforms)) {\n        transforms[sourceCode] = {};\n    }\n    transforms[sourceCode][destinationCode] = transformFn;\n}\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    var transform = transforms[sourceCode][destinationCode];\n    delete transforms[sourceCode][destinationCode];\n    if (isEmpty(transforms[sourceCode])) {\n        delete transforms[sourceCode];\n    }\n    return transform;\n}\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n    var transform;\n    if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n        transform = transforms[sourceCode][destinationCode];\n    }\n    return transform;\n}\n//# sourceMappingURL=transforms.js.map","/**\n * @module ol/proj\n */\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj.addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj.addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj.addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj.addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport Projection from './proj/Projection.js';\nimport Units, { METERS_PER_UNIT } from './proj/Units.js';\nimport { PROJECTIONS as EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326, } from './proj/epsg3857.js';\nimport { PROJECTIONS as EPSG4326_PROJECTIONS } from './proj/epsg4326.js';\nimport { add as addProj, clear as clearProj, get as getProj, } from './proj/projections.js';\nimport { add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc, } from './proj/transforms.js';\nimport { applyTransform, getWidth } from './extent.js';\nimport { clamp, modulo } from './math.js';\nimport { getDistance } from './sphere.js';\nimport { getWorldsAway } from './coordinate.js';\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\nexport { METERS_PER_UNIT };\nexport { Projection };\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n    var output;\n    if (opt_output !== undefined) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        output = opt_output;\n    }\n    else {\n        output = input.slice();\n    }\n    return output;\n}\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n    if (opt_output !== undefined && input !== opt_output) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        input = opt_output;\n    }\n    return input;\n}\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n    addProj(projection.getCode(), projection);\n    addTransformFunc(projection, projection, cloneTransform);\n}\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n    projections.forEach(addProjection);\n}\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n    return typeof projectionLike === 'string'\n        ? getProj(/** @type {string} */ (projectionLike))\n        : /** @type {Projection} */ (projectionLike) || null;\n}\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {import(\"./proj/Units.js\").default} [opt_units] Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n    projection = get(projection);\n    var pointResolution;\n    var getter = projection.getPointResolutionFunc();\n    if (getter) {\n        pointResolution = getter(resolution, point);\n        if (opt_units && opt_units !== projection.getUnits()) {\n            var metersPerUnit = projection.getMetersPerUnit();\n            if (metersPerUnit) {\n                pointResolution =\n                    (pointResolution * metersPerUnit) / METERS_PER_UNIT[opt_units];\n            }\n        }\n    }\n    else {\n        var units = projection.getUnits();\n        if ((units == Units.DEGREES && !opt_units) || opt_units == Units.DEGREES) {\n            pointResolution = resolution;\n        }\n        else {\n            // Estimate point resolution by transforming the center pixel to EPSG:4326,\n            // measuring its width and height on the normal sphere, and taking the\n            // average of the width and height.\n            var toEPSG4326_1 = getTransformFromProjections(projection, get('EPSG:4326'));\n            if (toEPSG4326_1 === identityTransform && units !== Units.DEGREES) {\n                // no transform is available\n                pointResolution = resolution * projection.getMetersPerUnit();\n            }\n            else {\n                var vertices = [\n                    point[0] - resolution / 2,\n                    point[1],\n                    point[0] + resolution / 2,\n                    point[1],\n                    point[0],\n                    point[1] - resolution / 2,\n                    point[0],\n                    point[1] + resolution / 2,\n                ];\n                vertices = toEPSG4326_1(vertices, vertices, 2);\n                var width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n                var height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n                pointResolution = (width + height) / 2;\n            }\n            var metersPerUnit = opt_units\n                ? METERS_PER_UNIT[opt_units]\n                : projection.getMetersPerUnit();\n            if (metersPerUnit !== undefined) {\n                pointResolution /= metersPerUnit;\n            }\n        }\n    }\n    return pointResolution;\n}\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n    addProjections(projections);\n    projections.forEach(function (source) {\n        projections.forEach(function (destination) {\n            if (source !== destination) {\n                addTransformFunc(source, destination, cloneTransform);\n            }\n        });\n    });\n}\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n    projections1.forEach(function (projection1) {\n        projections2.forEach(function (projection2) {\n            addTransformFunc(projection1, projection2, forwardTransform);\n            addTransformFunc(projection2, projection1, inverseTransform);\n        });\n    });\n}\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n    clearProj();\n    clearTransformFuncs();\n}\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n    if (!projection) {\n        return get(defaultCode);\n    }\n    else if (typeof projection === 'string') {\n        return get(projection);\n    }\n    else {\n        return /** @type {Projection} */ (projection);\n    }\n}\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n    return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>} [opt_output] Output.\n     * @param {number} [opt_dimension] Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, opt_output, opt_dimension) {\n        var length = input.length;\n        var dimension = opt_dimension !== undefined ? opt_dimension : 2;\n        var output = opt_output !== undefined ? opt_output : new Array(length);\n        for (var i = 0; i < length; i += dimension) {\n            var point = coordTransform([input[i], input[i + 1]]);\n            output[i] = point[0];\n            output[i + 1] = point[1];\n            for (var j = dimension - 1; j >= 2; --j) {\n                output[i + j] = input[i + j];\n            }\n        }\n        return output;\n    });\n}\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n    var sourceProj = get(source);\n    var destProj = get(destination);\n    addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n    addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike} [opt_projection] Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n    return transform(coordinate, 'EPSG:4326', opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike} [opt_projection] Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n    var lonLat = transform(coordinate, opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n    var lon = lonLat[0];\n    if (lon < -180 || lon > 180) {\n        lonLat[0] = modulo(lon + 180, 360) - 180;\n    }\n    return lonLat;\n}\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n    if (projection1 === projection2) {\n        return true;\n    }\n    var equalUnits = projection1.getUnits() === projection2.getUnits();\n    if (projection1.getCode() === projection2.getCode()) {\n        return equalUnits;\n    }\n    else {\n        var transformFunc = getTransformFromProjections(projection1, projection2);\n        return transformFunc === cloneTransform && equalUnits;\n    }\n}\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n    var sourceCode = sourceProjection.getCode();\n    var destinationCode = destinationProjection.getCode();\n    var transformFunc = getTransformFunc(sourceCode, destinationCode);\n    if (!transformFunc) {\n        transformFunc = identityTransform;\n    }\n    return transformFunc;\n}\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n    var sourceProjection = get(source);\n    var destinationProjection = get(destination);\n    return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj.transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n    var transformFunc = getTransform(source, destination);\n    return transformFunc(coordinate, undefined, coordinate.length);\n}\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @param {number} [opt_stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination, opt_stops) {\n    var transformFunc = getTransform(source, destination);\n    return applyTransform(extent, transformFunc, undefined, opt_stops);\n}\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n    var transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n    return transformFunc(point);\n}\n/**\n * @type {?Projection}\n */\nvar userProjection = null;\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @param {ProjectionLike} projection The user projection.\n */\nexport function setUserProjection(projection) {\n    userProjection = get(projection);\n}\n/**\n * Clear the user projection if set.  Note that this method is not yet a part of\n * the stable API.  Support for user projections is not yet complete and should\n * be considered experimental.\n */\nexport function clearUserProjection() {\n    userProjection = null;\n}\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @return {?Projection} The user projection (or null if not set).\n */\nexport function getUserProjection() {\n    return userProjection;\n}\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.  Note that this\n * method is not yet a part of the stable API.  Support for user projections is\n * not yet complete and should be considered experimental.\n */\nexport function useGeographic() {\n    setUserProjection('EPSG:4326');\n}\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @return {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n    if (!userProjection) {\n        return coordinate;\n    }\n    return transform(coordinate, sourceProjection, userProjection);\n}\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n    if (!userProjection) {\n        return coordinate;\n    }\n    return transform(coordinate, userProjection, destProjection);\n}\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @return {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, sourceProjection, userProjection);\n}\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, userProjection, destProjection);\n}\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in input projection units per pixel.\n * @param {ProjectionLike} sourceProjection The input projection.\n * @return {number} Resolution in user projection units per pixel.\n */\nexport function toUserResolution(resolution, sourceProjection) {\n    if (!userProjection) {\n        return resolution;\n    }\n    var sourceUnits = get(sourceProjection).getUnits();\n    var userUnits = userProjection.getUnits();\n    return sourceUnits && userUnits\n        ? (resolution * METERS_PER_UNIT[sourceUnits]) / METERS_PER_UNIT[userUnits]\n        : resolution;\n}\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in user projection units per pixel.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {number} Resolution in destination projection units per pixel.\n */\nexport function fromUserResolution(resolution, destProjection) {\n    if (!userProjection) {\n        return resolution;\n    }\n    var sourceUnits = get(destProjection).getUnits();\n    var userUnits = userProjection.getUnits();\n    return sourceUnits && userUnits\n        ? (resolution * METERS_PER_UNIT[userUnits]) / METERS_PER_UNIT[sourceUnits]\n        : resolution;\n}\n/**\n * Creates a safe coordinate transform function from a coordinate transform function.\n * \"Safe\" means that it can handle wrapping of x-coordinates for global projections,\n * and that coordinates exceeding the source projection validity extent's range will be\n * clamped to the validity range.\n * @param {Projection} sourceProj Source projection.\n * @param {Projection} destProj Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} transform Transform function (source to destiation).\n * @return {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} Safe transform function (source to destiation).\n */\nexport function createSafeCoordinateTransform(sourceProj, destProj, transform) {\n    return function (coord) {\n        var sourceX = coord[0];\n        var sourceY = coord[1];\n        var transformed, worldsAway;\n        if (sourceProj.canWrapX()) {\n            var sourceExtent = sourceProj.getExtent();\n            var sourceExtentWidth = getWidth(sourceExtent);\n            worldsAway = getWorldsAway(coord, sourceProj, sourceExtentWidth);\n            if (worldsAway) {\n                // Move x to the real world\n                sourceX = sourceX - worldsAway * sourceExtentWidth;\n            }\n            sourceX = clamp(sourceX, sourceExtent[0], sourceExtent[2]);\n            sourceY = clamp(sourceY, sourceExtent[1], sourceExtent[3]);\n            transformed = transform([sourceX, sourceY]);\n        }\n        else {\n            transformed = transform(coord);\n        }\n        if (worldsAway && destProj.canWrapX()) {\n            // Move transformed coordinate back to the offset world\n            transformed[0] += worldsAway * getWidth(destProj.getExtent());\n        }\n        return transformed;\n    };\n}\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n    // Add transformations that don't alter coordinates to convert within set of\n    // projections with equal meaning.\n    addEquivalentProjections(EPSG3857_PROJECTIONS);\n    addEquivalentProjections(EPSG4326_PROJECTIONS);\n    // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n    // coordinates and back.\n    addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\naddCommon();\n//# sourceMappingURL=proj.js.map","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","/**\n * @module ol/geom/flat/contains\n */\nimport { forEachCorner } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n    var outside = forEachCorner(extent, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n        return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n    return !outside;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n    // https://geomalgorithms.com/a03-_inclusion.html\n    // Copyright 2000 softSurfer, 2012 Dan Sunday\n    // This code may be freely used and modified for any purpose\n    // providing that this copyright notice is included with it.\n    // SoftSurfer makes no warranty for this code, and cannot be held\n    // liable for any real or imagined damage resulting from its use.\n    // Users of this code must verify correctness for their application.\n    var wn = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        if (y1 <= y) {\n            if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n                wn++;\n            }\n        }\n        else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n            wn--;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return wn !== 0;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n    if (ends.length === 0) {\n        return false;\n    }\n    if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n        return false;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n    if (endss.length === 0) {\n        return false;\n    }\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=contains.js.map","/**\n * @module ol/style/TextPlacement\n */\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n    POINT: 'point',\n    LINE: 'line',\n};\n//# sourceMappingURL=TextPlacement.js.map","/**\n * @module ol/tilecoord\n */\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord} [opt_tileCoord] Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n    if (opt_tileCoord !== undefined) {\n        opt_tileCoord[0] = z;\n        opt_tileCoord[1] = x;\n        opt_tileCoord[2] = y;\n        return opt_tileCoord;\n    }\n    else {\n        return [z, x, y];\n    }\n}\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n    return z + '/' + x + '/' + y;\n}\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n    return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n/**\n * Get the tile cache key for a tile key obtained through `tile.getKey()`.\n * @param {string} tileKey The tile key.\n * @return {string} The cache key.\n */\nexport function getCacheKeyForTileKey(tileKey) {\n    var _a = tileKey\n        .substring(tileKey.lastIndexOf('/') + 1, tileKey.length)\n        .split(',')\n        .map(Number), z = _a[0], x = _a[1], y = _a[2];\n    return getKeyZXY(z, x, y);\n}\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n    return key.split('/').map(Number);\n}\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n    return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n    var z = tileCoord[0];\n    var x = tileCoord[1];\n    var y = tileCoord[2];\n    if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n        return false;\n    }\n    var tileRange = tileGrid.getFullTileRange(z);\n    if (!tileRange) {\n        return true;\n    }\n    else {\n        return tileRange.containsXY(x, y);\n    }\n}\n//# sourceMappingURL=tilecoord.js.map","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","/**\n * @module ol/render/Event\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Event from '../events/Event.js';\nvar RenderEvent = /** @class */ (function (_super) {\n    __extends(RenderEvent, _super);\n    /**\n     * @param {import(\"./EventType.js\").default} type Type.\n     * @param {import(\"../transform.js\").Transform} [opt_inversePixelTransform] Transform for\n     *     CSS pixels to rendered pixels.\n     * @param {import(\"../PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     * @param {?(CanvasRenderingContext2D|WebGLRenderingContext)} [opt_context] Context.\n     */\n    function RenderEvent(type, opt_inversePixelTransform, opt_frameState, opt_context) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n         * to rendered pixels on this event's `context`. Only available when a Canvas renderer is used, null otherwise.\n         * @type {import(\"../transform.js\").Transform|undefined}\n         * @api\n         */\n        _this.inversePixelTransform = opt_inversePixelTransform;\n        /**\n         * An object representing the current render frame state.\n         * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n         * @api\n         */\n        _this.frameState = opt_frameState;\n        /**\n         * Canvas context. Not available when the event is dispatched by the map. For Canvas 2D layers,\n         * the context will be the 2D rendering context.  For WebGL layers, the context will be the WebGL\n         * context.\n         * @type {CanvasRenderingContext2D|WebGLRenderingContext|undefined}\n         * @api\n         */\n        _this.context = opt_context;\n        return _this;\n    }\n    return RenderEvent;\n}(Event));\nexport default RenderEvent;\n//# sourceMappingURL=Event.js.map","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = size;\n            opt_size[1] = size;\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { listen, listenOnce, unlistenByKey } from './events.js';\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        _this.on =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onInternal);\n        _this.once =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onceInternal);\n        _this.un = /** @type {ObservableOnSignature<void>} */ (_this.unInternal);\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onInternal = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onceInternal = function (type, listener) {\n        var key;\n        if (Array.isArray(type)) {\n            var len = type.length;\n            key = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                key[i] = listenOnce(this, type[i], listener);\n            }\n        }\n        else {\n            key = listenOnce(this, /** @type {string} */ (type), listener);\n        }\n        /** @type {Object} */ (listener).ol_key = key;\n        return key;\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @protected\n     */\n    Observable.prototype.unInternal = function (type, listener) {\n        var key = /** @type {Object} */ (listener).ol_key;\n        if (key) {\n            unByKey(key);\n        }\n        else if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","/**\n * @module ol/extent/Corner\n */\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=Corner.js.map","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = typeof Object.assign === 'function'\n    ? Object.assign\n    : function (target, var_sources) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var output = Object(target);\n        for (var i = 1, ii = arguments.length; i < ii; ++i) {\n            var source = arguments[i];\n            if (source !== undefined && source !== null) {\n                for (var key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        output[key] = source[key];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = typeof Object.values === 'function'\n    ? Object.values\n    : function (object) {\n        var values = [];\n        for (var property in object) {\n            values.push(object[property]);\n        }\n        return values;\n    };\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Control\n */\nimport BaseObject from '../Object.js';\nimport MapEventType from '../MapEventType.js';\nimport { VOID } from '../functions.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { removeNode } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nvar Control = /** @class */ (function (_super) {\n    __extends(Control, _super);\n    /**\n     * @param {Options} options Control options.\n     */\n    function Control(options) {\n        var _this = _super.call(this) || this;\n        var element = options.element;\n        if (element && !options.target && !element.style.pointerEvents) {\n            element.style.pointerEvents = 'auto';\n        }\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = element ? element : null;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.target_ = null;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        /**\n         * @protected\n         * @type {!Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.listenerKeys = [];\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.target) {\n            _this.setTarget(options.target);\n        }\n        return _this;\n    }\n    /**\n     * Clean up.\n     */\n    Control.prototype.disposeInternal = function () {\n        removeNode(this.element);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Get the map associated with this control.\n     * @return {import(\"../PluggableMap.js\").default|undefined} Map.\n     * @api\n     */\n    Control.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} [map] Map.\n     * @api\n     */\n    Control.prototype.setMap = function (map) {\n        if (this.map_) {\n            removeNode(this.element);\n        }\n        for (var i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n            unlistenByKey(this.listenerKeys[i]);\n        }\n        this.listenerKeys.length = 0;\n        this.map_ = map;\n        if (this.map_) {\n            var target = this.target_\n                ? this.target_\n                : map.getOverlayContainerStopEvent();\n            target.appendChild(this.element);\n            if (this.render !== VOID) {\n                this.listenerKeys.push(listen(map, MapEventType.POSTRENDER, this.render, this));\n            }\n            map.render();\n        }\n    };\n    /**\n     * Renders the control.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @api\n     */\n    Control.prototype.render = function (mapEvent) { };\n    /**\n     * This function is used to set a target element for the control. It has no\n     * effect if it is called after the control has been added to the map (i.e.\n     * after `setMap` is called on the control). If no `target` is set in the\n     * options passed to the control constructor and if `setTarget` is not called\n     * then the control is added to the map's overlay container.\n     * @param {HTMLElement|string} target Target.\n     * @api\n     */\n    Control.prototype.setTarget = function (target) {\n        this.target_ =\n            typeof target === 'string' ? document.getElementById(target) : target;\n    };\n    return Control;\n}(BaseObject));\nexport default Control;\n//# sourceMappingURL=Control.js.map","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw TypeError(\"Can't set \" + String(argument) + ' as a prototype');\n};\n","/**\n * @module ol/style/IconImageCache\n */\nimport { asString } from '../color.js';\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nvar IconImageCache = /** @class */ (function () {\n    function IconImageCache() {\n        /**\n         * @type {!Object<string, import(\"./IconImage.js\").default>}\n         * @private\n         */\n        this.cache_ = {};\n        /**\n         * @type {number}\n         * @private\n         */\n        this.cacheSize_ = 0;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.maxCacheSize_ = 32;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    IconImageCache.prototype.clear = function () {\n        this.cache_ = {};\n        this.cacheSize_ = 0;\n    };\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    IconImageCache.prototype.canExpireCache = function () {\n        return this.cacheSize_ > this.maxCacheSize_;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    IconImageCache.prototype.expire = function () {\n        if (this.canExpireCache()) {\n            var i = 0;\n            for (var key in this.cache_) {\n                var iconImage = this.cache_[key];\n                if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n                    delete this.cache_[key];\n                    --this.cacheSize_;\n                }\n            }\n        }\n    };\n    /**\n     * @param {string} src Src.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../color.js\").Color} color Color.\n     * @return {import(\"./IconImage.js\").default} Icon image.\n     */\n    IconImageCache.prototype.get = function (src, crossOrigin, color) {\n        var key = getKey(src, crossOrigin, color);\n        return key in this.cache_ ? this.cache_[key] : null;\n    };\n    /**\n     * @param {string} src Src.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../color.js\").Color} color Color.\n     * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n     */\n    IconImageCache.prototype.set = function (src, crossOrigin, color, iconImage) {\n        var key = getKey(src, crossOrigin, color);\n        this.cache_[key] = iconImage;\n        ++this.cacheSize_;\n    };\n    /**\n     * Set the cache size of the icon cache. Default is `32`. Change this value when\n     * your map uses more than 32 different icon images and you are not caching icon\n     * styles on the application level.\n     * @param {number} maxCacheSize Cache max size.\n     * @api\n     */\n    IconImageCache.prototype.setSize = function (maxCacheSize) {\n        this.maxCacheSize_ = maxCacheSize;\n        this.expire();\n    };\n    return IconImageCache;\n}());\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n    var colorString = color ? asString(color) : 'null';\n    return crossOrigin + ':' + src + ':' + colorString;\n}\nexport default IconImageCache;\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport var shared = new IconImageCache();\n//# sourceMappingURL=IconImageCache.js.map","/**\n * @module ol/render/canvas/Instruction\n */\n/**\n * @enum {number}\n */\nvar Instruction = {\n    BEGIN_GEOMETRY: 0,\n    BEGIN_PATH: 1,\n    CIRCLE: 2,\n    CLOSE_PATH: 3,\n    CUSTOM: 4,\n    DRAW_CHARS: 5,\n    DRAW_IMAGE: 6,\n    END_GEOMETRY: 7,\n    FILL: 8,\n    MOVE_TO_LINE_TO: 9,\n    SET_FILL_STYLE: 10,\n    SET_STROKE_STYLE: 11,\n    STROKE: 12,\n};\n/**\n * @type {Array<Instruction>}\n */\nexport var fillInstruction = [Instruction.FILL];\n/**\n * @type {Array<Instruction>}\n */\nexport var strokeInstruction = [Instruction.STROKE];\n/**\n * @type {Array<Instruction>}\n */\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n/**\n * @type {Array<Instruction>}\n */\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\nexport default Instruction;\n//# sourceMappingURL=Instruction.js.map","/**\n * @module ol/render/VectorContext\n */\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nvar VectorContext = /** @class */ (function () {\n    function VectorContext() {\n    }\n    /**\n     * Render a geometry with a custom renderer.\n     *\n     * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {Function} renderer Renderer.\n     * @param {Function} hitDetectionRenderer Renderer.\n     */\n    VectorContext.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) { };\n    /**\n     * Render a geometry.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n     */\n    VectorContext.prototype.drawGeometry = function (geometry) { };\n    /**\n     * Set the rendering style.\n     *\n     * @param {import(\"../style/Style.js\").default} style The rendering style.\n     */\n    VectorContext.prototype.setStyle = function (style) { };\n    /**\n     * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     */\n    VectorContext.prototype.drawCircle = function (circleGeometry, feature) { };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"../style/Style.js\").default} style Style.\n     */\n    VectorContext.prototype.drawFeature = function (feature, style) { };\n    /**\n     * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     */\n    VectorContext.prototype.drawGeometryCollection = function (geometryCollectionGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawLineString = function (lineStringGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiPoint = function (multiPointGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawPoint = function (pointGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawPolygon = function (polygonGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/SimpleGeometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawText = function (geometry, feature) { };\n    /**\n     * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n     * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n     */\n    VectorContext.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) { };\n    /**\n     * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n     * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with a text style.\n     */\n    VectorContext.prototype.setImageStyle = function (imageStyle, opt_declutterImageWithText) { };\n    /**\n     * @param {import(\"../style/Text.js\").default} textStyle Text style.\n     * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with an image style.\n     */\n    VectorContext.prototype.setTextStyle = function (textStyle, opt_declutterImageWithText) { };\n    return VectorContext;\n}());\nexport default VectorContext;\n//# sourceMappingURL=VectorContext.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/Builder\n */\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport Relationship from '../../extent/Relationship.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { buffer, clone, containsCoordinate, coordinateRelationship, } from '../../extent.js';\nimport { defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, } from '../canvas.js';\nimport { equals, reverseSubArray } from '../../array.js';\nimport { inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray, } from '../../geom/flat/inflate.js';\nvar CanvasBuilder = /** @class */ (function (_super) {\n    __extends(CanvasBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.tolerance = tolerance;\n        /**\n         * @protected\n         * @const\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.maxExtent = maxExtent;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.maxLineWidth = 0;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        _this.resolution = resolution;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction1_ = null;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction2_ = null;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.bufferedMaxExtent_ = null;\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.instructions = [];\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.coordinates = [];\n        /**\n         * @private\n         * @type {import(\"../../coordinate.js\").Coordinate}\n         */\n        _this.tmpCoordinate_ = [];\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.hitDetectionInstructions = [];\n        /**\n         * @protected\n         * @type {import(\"../canvas.js\").FillStrokeState}\n         */\n        _this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n        return _this;\n    }\n    /**\n     * @protected\n     * @param {Array<number>} dashArray Dash array.\n     * @return {Array<number>} Dash array with pixel ratio applied\n     */\n    CanvasBuilder.prototype.applyPixelRatio = function (dashArray) {\n        var pixelRatio = this.pixelRatio;\n        return pixelRatio == 1\n            ? dashArray\n            : dashArray.map(function (dash) {\n                return dash * pixelRatio;\n            });\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} stride Stride.\n     * @protected\n     * @return {number} My end\n     */\n    CanvasBuilder.prototype.appendFlatPointCoordinates = function (flatCoordinates, stride) {\n        var extent = this.getBufferedMaxExtent();\n        var tmpCoord = this.tmpCoordinate_;\n        var coordinates = this.coordinates;\n        var myEnd = coordinates.length;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            tmpCoord[0] = flatCoordinates[i];\n            tmpCoord[1] = flatCoordinates[i + 1];\n            if (containsCoordinate(extent, tmpCoord)) {\n                coordinates[myEnd++] = tmpCoord[0];\n                coordinates[myEnd++] = tmpCoord[1];\n            }\n        }\n        return myEnd;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @param {boolean} closed Last input coordinate equals first.\n     * @param {boolean} skipFirst Skip first coordinate.\n     * @protected\n     * @return {number} My end.\n     */\n    CanvasBuilder.prototype.appendFlatLineCoordinates = function (flatCoordinates, offset, end, stride, closed, skipFirst) {\n        var coordinates = this.coordinates;\n        var myEnd = coordinates.length;\n        var extent = this.getBufferedMaxExtent();\n        if (skipFirst) {\n            offset += stride;\n        }\n        var lastXCoord = flatCoordinates[offset];\n        var lastYCoord = flatCoordinates[offset + 1];\n        var nextCoord = this.tmpCoordinate_;\n        var skipped = true;\n        var i, lastRel, nextRel;\n        for (i = offset + stride; i < end; i += stride) {\n            nextCoord[0] = flatCoordinates[i];\n            nextCoord[1] = flatCoordinates[i + 1];\n            nextRel = coordinateRelationship(extent, nextCoord);\n            if (nextRel !== lastRel) {\n                if (skipped) {\n                    coordinates[myEnd++] = lastXCoord;\n                    coordinates[myEnd++] = lastYCoord;\n                    skipped = false;\n                }\n                coordinates[myEnd++] = nextCoord[0];\n                coordinates[myEnd++] = nextCoord[1];\n            }\n            else if (nextRel === Relationship.INTERSECTING) {\n                coordinates[myEnd++] = nextCoord[0];\n                coordinates[myEnd++] = nextCoord[1];\n                skipped = false;\n            }\n            else {\n                skipped = true;\n            }\n            lastXCoord = nextCoord[0];\n            lastYCoord = nextCoord[1];\n            lastRel = nextRel;\n        }\n        // Last coordinate equals first or only one point to append:\n        if ((closed && skipped) || i === offset + stride) {\n            coordinates[myEnd++] = lastXCoord;\n            coordinates[myEnd++] = lastYCoord;\n        }\n        return myEnd;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @param {Array<number>} builderEnds Builder ends.\n     * @return {number} Offset.\n     */\n    CanvasBuilder.prototype.drawCustomCoordinates_ = function (flatCoordinates, offset, ends, stride, builderEnds) {\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var builderEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n            builderEnds.push(builderEnd);\n            offset = end;\n        }\n        return offset;\n    };\n    /**\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {Function} renderer Renderer.\n     * @param {Function} hitDetectionRenderer Renderer.\n     */\n    CanvasBuilder.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) {\n        this.beginGeometry(geometry, feature);\n        var type = geometry.getType();\n        var stride = geometry.getStride();\n        var builderBegin = this.coordinates.length;\n        var flatCoordinates, builderEnd, builderEnds, builderEndss;\n        var offset;\n        switch (type) {\n            case GeometryType.MULTI_POLYGON:\n                flatCoordinates =\n                    /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getOrientedFlatCoordinates();\n                builderEndss = [];\n                var endss = \n                /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getEndss();\n                offset = 0;\n                for (var i = 0, ii = endss.length; i < ii; ++i) {\n                    var myEnds = [];\n                    offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n                    builderEndss.push(myEnds);\n                }\n                this.instructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEndss,\n                    geometry,\n                    renderer,\n                    inflateMultiCoordinatesArray,\n                ]);\n                this.hitDetectionInstructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEndss,\n                    geometry,\n                    hitDetectionRenderer || renderer,\n                    inflateMultiCoordinatesArray,\n                ]);\n                break;\n            case GeometryType.POLYGON:\n            case GeometryType.MULTI_LINE_STRING:\n                builderEnds = [];\n                flatCoordinates =\n                    type == GeometryType.POLYGON\n                        ? /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates()\n                        : geometry.getFlatCoordinates();\n                offset = this.drawCustomCoordinates_(flatCoordinates, 0, \n                /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(), stride, builderEnds);\n                this.instructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnds,\n                    geometry,\n                    renderer,\n                    inflateCoordinatesArray,\n                ]);\n                this.hitDetectionInstructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnds,\n                    geometry,\n                    hitDetectionRenderer || renderer,\n                    inflateCoordinatesArray,\n                ]);\n                break;\n            case GeometryType.LINE_STRING:\n            case GeometryType.CIRCLE:\n                flatCoordinates = geometry.getFlatCoordinates();\n                builderEnd = this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n                this.instructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnd,\n                    geometry,\n                    renderer,\n                    inflateCoordinates,\n                ]);\n                this.hitDetectionInstructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnd,\n                    geometry,\n                    hitDetectionRenderer || renderer,\n                    inflateCoordinates,\n                ]);\n                break;\n            case GeometryType.MULTI_POINT:\n                flatCoordinates = geometry.getFlatCoordinates();\n                builderEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n                if (builderEnd > builderBegin) {\n                    this.instructions.push([\n                        CanvasInstruction.CUSTOM,\n                        builderBegin,\n                        builderEnd,\n                        geometry,\n                        renderer,\n                        inflateCoordinates,\n                    ]);\n                    this.hitDetectionInstructions.push([\n                        CanvasInstruction.CUSTOM,\n                        builderBegin,\n                        builderEnd,\n                        geometry,\n                        hitDetectionRenderer || renderer,\n                        inflateCoordinates,\n                    ]);\n                }\n                break;\n            case GeometryType.POINT:\n                flatCoordinates = geometry.getFlatCoordinates();\n                this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n                builderEnd = this.coordinates.length;\n                this.instructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnd,\n                    geometry,\n                    renderer,\n                ]);\n                this.hitDetectionInstructions.push([\n                    CanvasInstruction.CUSTOM,\n                    builderBegin,\n                    builderEnd,\n                    geometry,\n                    hitDetectionRenderer || renderer,\n                ]);\n                break;\n            default:\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @protected\n     * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.beginGeometry = function (geometry, feature) {\n        this.beginGeometryInstruction1_ = [\n            CanvasInstruction.BEGIN_GEOMETRY,\n            feature,\n            0,\n            geometry,\n        ];\n        this.instructions.push(this.beginGeometryInstruction1_);\n        this.beginGeometryInstruction2_ = [\n            CanvasInstruction.BEGIN_GEOMETRY,\n            feature,\n            0,\n            geometry,\n        ];\n        this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n    };\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n    CanvasBuilder.prototype.finish = function () {\n        return {\n            instructions: this.instructions,\n            hitDetectionInstructions: this.hitDetectionInstructions,\n            coordinates: this.coordinates,\n        };\n    };\n    /**\n     * Reverse the hit detection instructions.\n     */\n    CanvasBuilder.prototype.reverseHitDetectionInstructions = function () {\n        var hitDetectionInstructions = this.hitDetectionInstructions;\n        // step 1 - reverse array\n        hitDetectionInstructions.reverse();\n        // step 2 - reverse instructions within geometry blocks\n        var i;\n        var n = hitDetectionInstructions.length;\n        var instruction;\n        var type;\n        var begin = -1;\n        for (i = 0; i < n; ++i) {\n            instruction = hitDetectionInstructions[i];\n            type = /** @type {import(\"./Instruction.js\").default} */ (instruction[0]);\n            if (type == CanvasInstruction.END_GEOMETRY) {\n                begin = i;\n            }\n            else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n                instruction[2] = i;\n                reverseSubArray(this.hitDetectionInstructions, begin, i);\n                begin = -1;\n            }\n        }\n    };\n    /**\n     * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n     * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n     */\n    CanvasBuilder.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n        var state = this.state;\n        if (fillStyle) {\n            var fillStyleColor = fillStyle.getColor();\n            state.fillStyle = asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle);\n        }\n        else {\n            state.fillStyle = undefined;\n        }\n        if (strokeStyle) {\n            var strokeStyleColor = strokeStyle.getColor();\n            state.strokeStyle = asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle);\n            var strokeStyleLineCap = strokeStyle.getLineCap();\n            state.lineCap =\n                strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap;\n            var strokeStyleLineDash = strokeStyle.getLineDash();\n            state.lineDash = strokeStyleLineDash\n                ? strokeStyleLineDash.slice()\n                : defaultLineDash;\n            var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n            state.lineDashOffset = strokeStyleLineDashOffset\n                ? strokeStyleLineDashOffset\n                : defaultLineDashOffset;\n            var strokeStyleLineJoin = strokeStyle.getLineJoin();\n            state.lineJoin =\n                strokeStyleLineJoin !== undefined\n                    ? strokeStyleLineJoin\n                    : defaultLineJoin;\n            var strokeStyleWidth = strokeStyle.getWidth();\n            state.lineWidth =\n                strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth;\n            var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n            state.miterLimit =\n                strokeStyleMiterLimit !== undefined\n                    ? strokeStyleMiterLimit\n                    : defaultMiterLimit;\n            if (state.lineWidth > this.maxLineWidth) {\n                this.maxLineWidth = state.lineWidth;\n                // invalidate the buffered max extent cache\n                this.bufferedMaxExtent_ = null;\n            }\n        }\n        else {\n            state.strokeStyle = undefined;\n            state.lineCap = undefined;\n            state.lineDash = null;\n            state.lineDashOffset = undefined;\n            state.lineJoin = undefined;\n            state.lineWidth = undefined;\n            state.miterLimit = undefined;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Fill instruction.\n     */\n    CanvasBuilder.prototype.createFill = function (state) {\n        var fillStyle = state.fillStyle;\n        /** @type {Array<*>} */\n        var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n        if (typeof fillStyle !== 'string') {\n            // Fill is a pattern or gradient - align it!\n            fillInstruction.push(true);\n        }\n        return fillInstruction;\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     */\n    CanvasBuilder.prototype.applyStroke = function (state) {\n        this.instructions.push(this.createStroke(state));\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Stroke instruction.\n     */\n    CanvasBuilder.prototype.createStroke = function (state) {\n        return [\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle,\n            state.lineWidth * this.pixelRatio,\n            state.lineCap,\n            state.lineJoin,\n            state.miterLimit,\n            this.applyPixelRatio(state.lineDash),\n            state.lineDashOffset * this.pixelRatio,\n        ];\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n     */\n    CanvasBuilder.prototype.updateFillStyle = function (state, createFill) {\n        var fillStyle = state.fillStyle;\n        if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n            if (fillStyle !== undefined) {\n                this.instructions.push(createFill.call(this, state));\n            }\n            state.currentFillStyle = fillStyle;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n     */\n    CanvasBuilder.prototype.updateStrokeStyle = function (state, applyStroke) {\n        var strokeStyle = state.strokeStyle;\n        var lineCap = state.lineCap;\n        var lineDash = state.lineDash;\n        var lineDashOffset = state.lineDashOffset;\n        var lineJoin = state.lineJoin;\n        var lineWidth = state.lineWidth;\n        var miterLimit = state.miterLimit;\n        if (state.currentStrokeStyle != strokeStyle ||\n            state.currentLineCap != lineCap ||\n            (lineDash != state.currentLineDash &&\n                !equals(state.currentLineDash, lineDash)) ||\n            state.currentLineDashOffset != lineDashOffset ||\n            state.currentLineJoin != lineJoin ||\n            state.currentLineWidth != lineWidth ||\n            state.currentMiterLimit != miterLimit) {\n            if (strokeStyle !== undefined) {\n                applyStroke.call(this, state);\n            }\n            state.currentStrokeStyle = strokeStyle;\n            state.currentLineCap = lineCap;\n            state.currentLineDash = lineDash;\n            state.currentLineDashOffset = lineDashOffset;\n            state.currentLineJoin = lineJoin;\n            state.currentLineWidth = lineWidth;\n            state.currentMiterLimit = miterLimit;\n        }\n    };\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.endGeometry = function (feature) {\n        this.beginGeometryInstruction1_[2] = this.instructions.length;\n        this.beginGeometryInstruction1_ = null;\n        this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n        this.beginGeometryInstruction2_ = null;\n        var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n        this.instructions.push(endGeometryInstruction);\n        this.hitDetectionInstructions.push(endGeometryInstruction);\n    };\n    /**\n     * Get the buffered rendering extent.  Rendering will be clipped to the extent\n     * provided to the constructor.  To account for symbolizers that may intersect\n     * this extent, we calculate a buffered extent (e.g. based on stroke width).\n     * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n     * @protected\n     */\n    CanvasBuilder.prototype.getBufferedMaxExtent = function () {\n        if (!this.bufferedMaxExtent_) {\n            this.bufferedMaxExtent_ = clone(this.maxExtent);\n            if (this.maxLineWidth > 0) {\n                var width = (this.resolution * (this.maxLineWidth + 1)) / 2;\n                buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n            }\n        }\n        return this.bufferedMaxExtent_;\n    };\n    return CanvasBuilder;\n}(VectorContext));\nexport default CanvasBuilder;\n//# sourceMappingURL=Builder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nvar CanvasImageBuilder = /** @class */ (function (_super) {\n    __extends(CanvasImageBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.imagePixelRatio_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorY_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.height_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.opacity_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originY_ = undefined;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.rotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        /**\n         * @private\n         * @type {import(\"../../size.js\").Size|undefined}\n         */\n        _this.scale_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.width_ = undefined;\n        /**\n         * Data shared with a text builder for combined decluttering.\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterImageWithText}\n         */\n        _this.declutterImageWithText_ = undefined;\n        return _this;\n    }\n    /**\n     * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} pointGeometry Point geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasImageBuilder.prototype.drawPoint = function (pointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(pointGeometry, feature);\n        var flatCoordinates = pointGeometry.getFlatCoordinates();\n        var stride = pointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE,\n            myBegin,\n            myEnd,\n            this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_ * this.imagePixelRatio_,\n            this.anchorY_ * this.imagePixelRatio_,\n            Math.ceil(this.height_ * this.imagePixelRatio_),\n            this.opacity_,\n            this.originX_,\n            this.originY_,\n            this.rotateWithView_,\n            this.rotation_,\n            [\n                (this.scale_[0] * this.pixelRatio) / this.imagePixelRatio_,\n                (this.scale_[1] * this.pixelRatio) / this.imagePixelRatio_,\n            ],\n            Math.ceil(this.width_ * this.imagePixelRatio_),\n            this.declutterImageWithText_,\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE,\n            myBegin,\n            myEnd,\n            this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_,\n            this.anchorY_,\n            this.height_,\n            this.opacity_,\n            this.originX_,\n            this.originY_,\n            this.rotateWithView_,\n            this.rotation_,\n            this.scale_,\n            this.width_,\n            this.declutterImageWithText_,\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} multiPointGeometry MultiPoint geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasImageBuilder.prototype.drawMultiPoint = function (multiPointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(multiPointGeometry, feature);\n        var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n        var stride = multiPointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE,\n            myBegin,\n            myEnd,\n            this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_ * this.imagePixelRatio_,\n            this.anchorY_ * this.imagePixelRatio_,\n            Math.ceil(this.height_ * this.imagePixelRatio_),\n            this.opacity_,\n            this.originX_,\n            this.originY_,\n            this.rotateWithView_,\n            this.rotation_,\n            [\n                (this.scale_[0] * this.pixelRatio) / this.imagePixelRatio_,\n                (this.scale_[1] * this.pixelRatio) / this.imagePixelRatio_,\n            ],\n            Math.ceil(this.width_ * this.imagePixelRatio_),\n            this.declutterImageWithText_,\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE,\n            myBegin,\n            myEnd,\n            this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_,\n            this.anchorY_,\n            this.height_,\n            this.opacity_,\n            this.originX_,\n            this.originY_,\n            this.rotateWithView_,\n            this.rotation_,\n            this.scale_,\n            this.width_,\n            this.declutterImageWithText_,\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n    CanvasImageBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        // FIXME this doesn't really protect us against further calls to draw*Geometry\n        this.anchorX_ = undefined;\n        this.anchorY_ = undefined;\n        this.hitDetectionImage_ = null;\n        this.image_ = null;\n        this.imagePixelRatio_ = undefined;\n        this.height_ = undefined;\n        this.scale_ = undefined;\n        this.opacity_ = undefined;\n        this.originX_ = undefined;\n        this.originY_ = undefined;\n        this.rotateWithView_ = undefined;\n        this.rotation_ = undefined;\n        this.width_ = undefined;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n     * @param {Object} [opt_sharedData] Shared data.\n     */\n    CanvasImageBuilder.prototype.setImageStyle = function (imageStyle, opt_sharedData) {\n        var anchor = imageStyle.getAnchor();\n        var size = imageStyle.getSize();\n        var hitDetectionImage = imageStyle.getHitDetectionImage();\n        var image = imageStyle.getImage(this.pixelRatio);\n        var origin = imageStyle.getOrigin();\n        this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n        this.anchorX_ = anchor[0];\n        this.anchorY_ = anchor[1];\n        this.hitDetectionImage_ = hitDetectionImage;\n        this.image_ = image;\n        this.height_ = size[1];\n        this.opacity_ = imageStyle.getOpacity();\n        this.originX_ = origin[0] * this.imagePixelRatio_;\n        this.originY_ = origin[1] * this.imagePixelRatio_;\n        this.rotateWithView_ = imageStyle.getRotateWithView();\n        this.rotation_ = imageStyle.getRotation();\n        this.scale_ = imageStyle.getScaleArray();\n        this.width_ = size[0];\n        this.declutterImageWithText_ = opt_sharedData;\n    };\n    return CanvasImageBuilder;\n}(CanvasBuilder));\nexport default CanvasImageBuilder;\n//# sourceMappingURL=ImageBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, strokeInstruction, } from './Instruction.js';\nimport { defaultLineDash, defaultLineDashOffset } from '../canvas.js';\nvar CanvasLineStringBuilder = /** @class */ (function (_super) {\n    __extends(CanvasLineStringBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasLineStringBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} end.\n     */\n    CanvasLineStringBuilder.prototype.drawFlatCoordinates_ = function (flatCoordinates, offset, end, stride) {\n        var myBegin = this.coordinates.length;\n        var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n        var moveToLineToInstruction = [\n            CanvasInstruction.MOVE_TO_LINE_TO,\n            myBegin,\n            myEnd,\n        ];\n        this.instructions.push(moveToLineToInstruction);\n        this.hitDetectionInstructions.push(moveToLineToInstruction);\n        return end;\n    };\n    /**\n     * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasLineStringBuilder.prototype.drawLineString = function (lineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(lineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle,\n            state.lineWidth,\n            state.lineCap,\n            state.lineJoin,\n            state.miterLimit,\n            defaultLineDash,\n            defaultLineDashOffset,\n        ], beginPathInstruction);\n        var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n        var stride = lineStringGeometry.getStride();\n        this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasLineStringBuilder.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(multiLineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle,\n            state.lineWidth,\n            state.lineCap,\n            state.lineJoin,\n            state.miterLimit,\n            state.lineDash,\n            state.lineDashOffset,\n        ], beginPathInstruction);\n        var ends = multiLineStringGeometry.getEnds();\n        var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n        var stride = multiLineStringGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinates_(flatCoordinates, offset, \n            /** @type {number} */ (ends[i]), stride);\n        }\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n    CanvasLineStringBuilder.prototype.finish = function () {\n        var state = this.state;\n        if (state.lastStroke != undefined &&\n            state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n        }\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     */\n    CanvasLineStringBuilder.prototype.applyStroke = function (state) {\n        if (state.lastStroke != undefined &&\n            state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n            state.lastStroke = this.coordinates.length;\n        }\n        state.lastStroke = 0;\n        _super.prototype.applyStroke.call(this, state);\n        this.instructions.push(beginPathInstruction);\n    };\n    return CanvasLineStringBuilder;\n}(CanvasBuilder));\nexport default CanvasLineStringBuilder;\n//# sourceMappingURL=LineStringBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/PolygonBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, closePathInstruction, fillInstruction, strokeInstruction, } from './Instruction.js';\nimport { defaultFillStyle } from '../canvas.js';\nimport { snap } from '../../geom/flat/simplify.js';\nvar CanvasPolygonBuilder = /** @class */ (function (_super) {\n    __extends(CanvasPolygonBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasPolygonBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} End.\n     */\n    CanvasPolygonBuilder.prototype.drawFlatCoordinatess_ = function (flatCoordinates, offset, ends, stride) {\n        var state = this.state;\n        var fill = state.fillStyle !== undefined;\n        var stroke = state.strokeStyle !== undefined;\n        var numEnds = ends.length;\n        this.instructions.push(beginPathInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction);\n        for (var i = 0; i < numEnds; ++i) {\n            var end = ends[i];\n            var myBegin = this.coordinates.length;\n            var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n            var moveToLineToInstruction = [\n                CanvasInstruction.MOVE_TO_LINE_TO,\n                myBegin,\n                myEnd,\n            ];\n            this.instructions.push(moveToLineToInstruction);\n            this.hitDetectionInstructions.push(moveToLineToInstruction);\n            if (stroke) {\n                // Performance optimization: only call closePath() when we have a stroke.\n                // Otherwise the ring is closed already (see appendFlatLineCoordinates above).\n                this.instructions.push(closePathInstruction);\n                this.hitDetectionInstructions.push(closePathInstruction);\n            }\n            offset = end;\n        }\n        if (fill) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (stroke) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        return offset;\n    };\n    /**\n     * @param {import(\"../../geom/Circle.js\").default} circleGeometry Circle geometry.\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     */\n    CanvasPolygonBuilder.prototype.drawCircle = function (circleGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(circleGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle,\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle,\n                state.lineWidth,\n                state.lineCap,\n                state.lineJoin,\n                state.miterLimit,\n                state.lineDash,\n                state.lineDashOffset,\n            ]);\n        }\n        var flatCoordinates = circleGeometry.getFlatCoordinates();\n        var stride = circleGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n        var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n        this.instructions.push(beginPathInstruction, circleInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n        if (state.fillStyle !== undefined) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} polygonGeometry Polygon geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasPolygonBuilder.prototype.drawPolygon = function (polygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(polygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle,\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle,\n                state.lineWidth,\n                state.lineCap,\n                state.lineJoin,\n                state.miterLimit,\n                state.lineDash,\n                state.lineDashOffset,\n            ]);\n        }\n        var ends = polygonGeometry.getEnds();\n        var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n        var stride = polygonGeometry.getStride();\n        this.drawFlatCoordinatess_(flatCoordinates, 0, \n        /** @type {Array<number>} */ (ends), stride);\n        this.endGeometry(feature);\n    };\n    /**\n     * @param {import(\"../../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasPolygonBuilder.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(multiPolygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle,\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle,\n                state.lineWidth,\n                state.lineCap,\n                state.lineJoin,\n                state.miterLimit,\n                state.lineDash,\n                state.lineDashOffset,\n            ]);\n        }\n        var endss = multiPolygonGeometry.getEndss();\n        var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n        var stride = multiPolygonGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n    CanvasPolygonBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        // We want to preserve topology when drawing polygons.  Polygons are\n        // simplified using quantization and point elimination. However, we might\n        // have received a mix of quantized and non-quantized geometries, so ensure\n        // that all are quantized by quantizing all coordinates in the batch.\n        var tolerance = this.tolerance;\n        if (tolerance !== 0) {\n            var coordinates = this.coordinates;\n            for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n                coordinates[i] = snap(coordinates[i], tolerance);\n            }\n        }\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @private\n     */\n    CanvasPolygonBuilder.prototype.setFillStrokeStyles_ = function () {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        if (fillStyle !== undefined) {\n            this.updateFillStyle(state, this.createFill);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.updateStrokeStyle(state, this.applyStroke);\n        }\n    };\n    return CanvasPolygonBuilder;\n}(CanvasBuilder));\nexport default CanvasPolygonBuilder;\n//# sourceMappingURL=PolygonBuilder.js.map","/**\n * @module ol/geom/flat/straightchunk\n */\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n    var chunkStart = offset;\n    var chunkEnd = offset;\n    var chunkM = 0;\n    var m = 0;\n    var start = offset;\n    var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n    for (i = offset; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        if (x1 !== undefined) {\n            x23 = x2 - x1;\n            y23 = y2 - y1;\n            m23 = Math.sqrt(x23 * x23 + y23 * y23);\n            if (x12 !== undefined) {\n                m += m12;\n                acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n                if (acos > maxAngle) {\n                    if (m > chunkM) {\n                        chunkM = m;\n                        chunkStart = start;\n                        chunkEnd = i;\n                    }\n                    m = 0;\n                    start = i - stride;\n                }\n            }\n            m12 = m23;\n            x12 = x23;\n            y12 = y23;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    m += m23;\n    return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n//# sourceMappingURL=straightchunk.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/TextBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport TextPlacement from '../../style/TextPlacement.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultPadding, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline, registerFont, } from '../canvas.js';\nimport { getUid } from '../../util.js';\nimport { intersects } from '../../extent.js';\nimport { matchingChunk } from '../../geom/flat/straightchunk.js';\n/**\n * @const\n * @enum {number}\n */\nexport var TEXT_ALIGN = {\n    'left': 0,\n    'end': 0,\n    'center': 0.5,\n    'right': 1,\n    'start': 1,\n    'top': 0,\n    'middle': 0.5,\n    'hanging': 0.2,\n    'alphabetic': 0.8,\n    'ideographic': 0.8,\n    'bottom': 1,\n};\nvar CanvasTextBuilder = /** @class */ (function (_super) {\n    __extends(CanvasTextBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasTextBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {Array<HTMLCanvasElement>}\n         */\n        _this.labels_ = null;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.text_ = '';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetY_ = 0;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.textRotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textRotation_ = 0;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.textFillState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        _this.fillStates = {};\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.textStrokeState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        _this.strokeStates = {};\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").TextState}\n         */\n        _this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        _this.textStates = {};\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.textKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.fillKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.strokeKey_ = '';\n        /**\n         * Data shared with an image builder for combined decluttering.\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterImageWithText}\n         */\n        _this.declutterImageWithText_ = undefined;\n        return _this;\n    }\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n    CanvasTextBuilder.prototype.finish = function () {\n        var instructions = _super.prototype.finish.call(this);\n        instructions.textStates = this.textStates;\n        instructions.fillStates = this.fillStates;\n        instructions.strokeStates = this.strokeStates;\n        return instructions;\n    };\n    /**\n     * @param {import(\"../../geom/SimpleGeometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasTextBuilder.prototype.drawText = function (geometry, feature) {\n        var fillState = this.textFillState_;\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n            return;\n        }\n        var coordinates = this.coordinates;\n        var begin = coordinates.length;\n        var geometryType = geometry.getType();\n        var flatCoordinates = null;\n        var stride = geometry.getStride();\n        if (textState.placement === TextPlacement.LINE &&\n            (geometryType == GeometryType.LINE_STRING ||\n                geometryType == GeometryType.MULTI_LINE_STRING ||\n                geometryType == GeometryType.POLYGON ||\n                geometryType == GeometryType.MULTI_POLYGON)) {\n            if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n                return;\n            }\n            var ends = void 0;\n            flatCoordinates = geometry.getFlatCoordinates();\n            if (geometryType == GeometryType.LINE_STRING) {\n                ends = [flatCoordinates.length];\n            }\n            else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n                ends = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds();\n            }\n            else if (geometryType == GeometryType.POLYGON) {\n                ends = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry)\n                    .getEnds()\n                    .slice(0, 1);\n            }\n            else if (geometryType == GeometryType.MULTI_POLYGON) {\n                var endss = \n                /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getEndss();\n                ends = [];\n                for (var i = 0, ii = endss.length; i < ii; ++i) {\n                    ends.push(endss[i][0]);\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            var textAlign = textState.textAlign;\n            var flatOffset = 0;\n            var flatEnd = void 0;\n            for (var o = 0, oo = ends.length; o < oo; ++o) {\n                if (textAlign == undefined) {\n                    var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n                    flatOffset = range[0];\n                    flatEnd = range[1];\n                }\n                else {\n                    flatEnd = ends[o];\n                }\n                for (var i = flatOffset; i < flatEnd; i += stride) {\n                    coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n                }\n                var end = coordinates.length;\n                flatOffset = ends[o];\n                this.drawChars_(begin, end);\n                begin = end;\n            }\n            this.endGeometry(feature);\n        }\n        else {\n            var geometryWidths = textState.overflow ? null : [];\n            switch (geometryType) {\n                case GeometryType.POINT:\n                case GeometryType.MULTI_POINT:\n                    flatCoordinates =\n                        /** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry).getFlatCoordinates();\n                    break;\n                case GeometryType.LINE_STRING:\n                    flatCoordinates =\n                        /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n                    break;\n                case GeometryType.CIRCLE:\n                    flatCoordinates =\n                        /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n                    break;\n                case GeometryType.MULTI_LINE_STRING:\n                    flatCoordinates =\n                        /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n                    stride = 2;\n                    break;\n                case GeometryType.POLYGON:\n                    flatCoordinates =\n                        /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n                    if (!textState.overflow) {\n                        geometryWidths.push(flatCoordinates[2] / this.resolution);\n                    }\n                    stride = 3;\n                    break;\n                case GeometryType.MULTI_POLYGON:\n                    var interiorPoints = \n                    /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n                    flatCoordinates = [];\n                    for (var i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n                        if (!textState.overflow) {\n                            geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n                        }\n                        flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n                    }\n                    if (flatCoordinates.length === 0) {\n                        return;\n                    }\n                    stride = 2;\n                    break;\n                default:\n            }\n            var end = this.appendFlatPointCoordinates(flatCoordinates, stride);\n            if (end === begin) {\n                return;\n            }\n            if (geometryWidths &&\n                (end - begin) / 2 !== flatCoordinates.length / stride) {\n                var beg_1 = begin / 2;\n                geometryWidths = geometryWidths.filter(function (w, i) {\n                    var keep = coordinates[(beg_1 + i) * 2] === flatCoordinates[i * stride] &&\n                        coordinates[(beg_1 + i) * 2 + 1] === flatCoordinates[i * stride + 1];\n                    if (!keep) {\n                        --beg_1;\n                    }\n                    return keep;\n                });\n            }\n            this.saveTextStates_();\n            if (textState.backgroundFill || textState.backgroundStroke) {\n                this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n                if (textState.backgroundFill) {\n                    this.updateFillStyle(this.state, this.createFill);\n                    this.hitDetectionInstructions.push(this.createFill(this.state));\n                }\n                if (textState.backgroundStroke) {\n                    this.updateStrokeStyle(this.state, this.applyStroke);\n                    this.hitDetectionInstructions.push(this.createStroke(this.state));\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            // adjust padding for negative scale\n            var padding = textState.padding;\n            if (padding != defaultPadding &&\n                (textState.scale[0] < 0 || textState.scale[1] < 0)) {\n                var p0 = textState.padding[0];\n                var p1 = textState.padding[1];\n                var p2 = textState.padding[2];\n                var p3 = textState.padding[3];\n                if (textState.scale[0] < 0) {\n                    p1 = -p1;\n                    p3 = -p3;\n                }\n                if (textState.scale[1] < 0) {\n                    p0 = -p0;\n                    p2 = -p2;\n                }\n                padding = [p0, p1, p2, p3];\n            }\n            // The image is unknown at this stage so we pass null; it will be computed at render time.\n            // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n            // render time.\n            var pixelRatio_1 = this.pixelRatio;\n            this.instructions.push([\n                CanvasInstruction.DRAW_IMAGE,\n                begin,\n                end,\n                null,\n                NaN,\n                NaN,\n                NaN,\n                1,\n                0,\n                0,\n                this.textRotateWithView_,\n                this.textRotation_,\n                [1, 1],\n                NaN,\n                this.declutterImageWithText_,\n                padding == defaultPadding\n                    ? defaultPadding\n                    : padding.map(function (p) {\n                        return p * pixelRatio_1;\n                    }),\n                !!textState.backgroundFill,\n                !!textState.backgroundStroke,\n                this.text_,\n                this.textKey_,\n                this.strokeKey_,\n                this.fillKey_,\n                this.textOffsetX_,\n                this.textOffsetY_,\n                geometryWidths,\n            ]);\n            var scale = 1 / pixelRatio_1;\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.DRAW_IMAGE,\n                begin,\n                end,\n                null,\n                NaN,\n                NaN,\n                NaN,\n                1,\n                0,\n                0,\n                this.textRotateWithView_,\n                this.textRotation_,\n                [scale, scale],\n                NaN,\n                this.declutterImageWithText_,\n                padding,\n                !!textState.backgroundFill,\n                !!textState.backgroundStroke,\n                this.text_,\n                this.textKey_,\n                this.strokeKey_,\n                this.fillKey_,\n                this.textOffsetX_,\n                this.textOffsetY_,\n                geometryWidths,\n            ]);\n            this.endGeometry(feature);\n        }\n    };\n    /**\n     * @private\n     */\n    CanvasTextBuilder.prototype.saveTextStates_ = function () {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var fillState = this.textFillState_;\n        var strokeKey = this.strokeKey_;\n        if (strokeState) {\n            if (!(strokeKey in this.strokeStates)) {\n                this.strokeStates[strokeKey] = {\n                    strokeStyle: strokeState.strokeStyle,\n                    lineCap: strokeState.lineCap,\n                    lineDashOffset: strokeState.lineDashOffset,\n                    lineWidth: strokeState.lineWidth,\n                    lineJoin: strokeState.lineJoin,\n                    miterLimit: strokeState.miterLimit,\n                    lineDash: strokeState.lineDash,\n                };\n            }\n        }\n        var textKey = this.textKey_;\n        if (!(textKey in this.textStates)) {\n            this.textStates[textKey] = {\n                font: textState.font,\n                textAlign: textState.textAlign || defaultTextAlign,\n                textBaseline: textState.textBaseline || defaultTextBaseline,\n                scale: textState.scale,\n            };\n        }\n        var fillKey = this.fillKey_;\n        if (fillState) {\n            if (!(fillKey in this.fillStates)) {\n                this.fillStates[fillKey] = {\n                    fillStyle: fillState.fillStyle,\n                };\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {number} begin Begin.\n     * @param {number} end End.\n     */\n    CanvasTextBuilder.prototype.drawChars_ = function (begin, end) {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var strokeKey = this.strokeKey_;\n        var textKey = this.textKey_;\n        var fillKey = this.fillKey_;\n        this.saveTextStates_();\n        var pixelRatio = this.pixelRatio;\n        var baseline = TEXT_ALIGN[textState.textBaseline];\n        var offsetY = this.textOffsetY_ * pixelRatio;\n        var text = this.text_;\n        var strokeWidth = strokeState\n            ? (strokeState.lineWidth * Math.abs(textState.scale[0])) / 2\n            : 0;\n        this.instructions.push([\n            CanvasInstruction.DRAW_CHARS,\n            begin,\n            end,\n            baseline,\n            textState.overflow,\n            fillKey,\n            textState.maxAngle,\n            pixelRatio,\n            offsetY,\n            strokeKey,\n            strokeWidth * pixelRatio,\n            text,\n            textKey,\n            1,\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_CHARS,\n            begin,\n            end,\n            baseline,\n            textState.overflow,\n            fillKey,\n            textState.maxAngle,\n            1,\n            offsetY,\n            strokeKey,\n            strokeWidth,\n            text,\n            textKey,\n            1 / pixelRatio,\n        ]);\n    };\n    /**\n     * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n     * @param {Object} [opt_sharedData] Shared data.\n     */\n    CanvasTextBuilder.prototype.setTextStyle = function (textStyle, opt_sharedData) {\n        var textState, fillState, strokeState;\n        if (!textStyle) {\n            this.text_ = '';\n        }\n        else {\n            var textFillStyle = textStyle.getFill();\n            if (!textFillStyle) {\n                fillState = null;\n                this.textFillState_ = fillState;\n            }\n            else {\n                fillState = this.textFillState_;\n                if (!fillState) {\n                    fillState = /** @type {import(\"../canvas.js\").FillState} */ ({});\n                    this.textFillState_ = fillState;\n                }\n                fillState.fillStyle = asColorLike(textFillStyle.getColor() || defaultFillStyle);\n            }\n            var textStrokeStyle = textStyle.getStroke();\n            if (!textStrokeStyle) {\n                strokeState = null;\n                this.textStrokeState_ = strokeState;\n            }\n            else {\n                strokeState = this.textStrokeState_;\n                if (!strokeState) {\n                    strokeState = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n                    this.textStrokeState_ = strokeState;\n                }\n                var lineDash = textStrokeStyle.getLineDash();\n                var lineDashOffset = textStrokeStyle.getLineDashOffset();\n                var lineWidth = textStrokeStyle.getWidth();\n                var miterLimit = textStrokeStyle.getMiterLimit();\n                strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n                strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n                strokeState.lineDashOffset =\n                    lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n                strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n                strokeState.lineWidth =\n                    lineWidth === undefined ? defaultLineWidth : lineWidth;\n                strokeState.miterLimit =\n                    miterLimit === undefined ? defaultMiterLimit : miterLimit;\n                strokeState.strokeStyle = asColorLike(textStrokeStyle.getColor() || defaultStrokeStyle);\n            }\n            textState = this.textState_;\n            var font = textStyle.getFont() || defaultFont;\n            registerFont(font);\n            var textScale = textStyle.getScaleArray();\n            textState.overflow = textStyle.getOverflow();\n            textState.font = font;\n            textState.maxAngle = textStyle.getMaxAngle();\n            textState.placement = textStyle.getPlacement();\n            textState.textAlign = textStyle.getTextAlign();\n            textState.textBaseline =\n                textStyle.getTextBaseline() || defaultTextBaseline;\n            textState.backgroundFill = textStyle.getBackgroundFill();\n            textState.backgroundStroke = textStyle.getBackgroundStroke();\n            textState.padding = textStyle.getPadding() || defaultPadding;\n            textState.scale = textScale === undefined ? [1, 1] : textScale;\n            var textOffsetX = textStyle.getOffsetX();\n            var textOffsetY = textStyle.getOffsetY();\n            var textRotateWithView = textStyle.getRotateWithView();\n            var textRotation = textStyle.getRotation();\n            this.text_ = textStyle.getText() || '';\n            this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n            this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n            this.textRotateWithView_ =\n                textRotateWithView === undefined ? false : textRotateWithView;\n            this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n            this.strokeKey_ = strokeState\n                ? (typeof strokeState.strokeStyle == 'string'\n                    ? strokeState.strokeStyle\n                    : getUid(strokeState.strokeStyle)) +\n                    strokeState.lineCap +\n                    strokeState.lineDashOffset +\n                    '|' +\n                    strokeState.lineWidth +\n                    strokeState.lineJoin +\n                    strokeState.miterLimit +\n                    '[' +\n                    strokeState.lineDash.join() +\n                    ']'\n                : '';\n            this.textKey_ =\n                textState.font +\n                    textState.scale +\n                    (textState.textAlign || '?') +\n                    (textState.textBaseline || '?');\n            this.fillKey_ = fillState\n                ? typeof fillState.fillStyle == 'string'\n                    ? fillState.fillStyle\n                    : '|' + getUid(fillState.fillStyle)\n                : '';\n        }\n        this.declutterImageWithText_ = opt_sharedData;\n    };\n    return CanvasTextBuilder;\n}(CanvasBuilder));\nexport default CanvasTextBuilder;\n//# sourceMappingURL=TextBuilder.js.map","/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n    'Circle': PolygonBuilder,\n    'Default': Builder,\n    'Image': ImageBuilder,\n    'LineString': LineStringBuilder,\n    'Polygon': PolygonBuilder,\n    'Text': TextBuilder,\n};\nvar BuilderGroup = /** @class */ (function () {\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.tolerance_ = tolerance;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n         */\n        this.buildersByZIndex_ = {};\n    }\n    /**\n     * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n     */\n    BuilderGroup.prototype.finish = function () {\n        var builderInstructions = {};\n        for (var zKey in this.buildersByZIndex_) {\n            builderInstructions[zKey] = builderInstructions[zKey] || {};\n            var builders = this.buildersByZIndex_[zKey];\n            for (var builderKey in builders) {\n                var builderInstruction = builders[builderKey].finish();\n                builderInstructions[zKey][builderKey] = builderInstruction;\n            }\n        }\n        return builderInstructions;\n    };\n    /**\n     * @param {number|undefined} zIndex Z index.\n     * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n     * @return {import(\"../VectorContext.js\").default} Replay.\n     */\n    BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n        var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n        var replays = this.buildersByZIndex_[zIndexKey];\n        if (replays === undefined) {\n            replays = {};\n            this.buildersByZIndex_[zIndexKey] = replays;\n        }\n        var replay = replays[builderType];\n        if (replay === undefined) {\n            var Constructor = BATCH_CONSTRUCTORS[builderType];\n            replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n            replays[builderType] = replay;\n        }\n        return replay;\n    };\n    return BuilderGroup;\n}());\nexport default BuilderGroup;\n//# sourceMappingURL=BuilderGroup.js.map","/**\n * @module ol/render/canvas/BuilderType\n */\n/**\n * @enum {string}\n */\nexport default {\n    CIRCLE: 'Circle',\n    DEFAULT: 'Default',\n    IMAGE: 'Image',\n    LINE_STRING: 'LineString',\n    POLYGON: 'Polygon',\n    TEXT: 'Text',\n};\n//# sourceMappingURL=BuilderType.js.map","/**\n * @module ol/geom/flat/textpath\n */\nimport { lerp } from '../../math.js';\nimport { rotate } from './transform.js';\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @param {number} rotation Rotation to apply to the flatCoordinates to determine whether text needs to be reversed.\n * @return {Array<Array<*>>} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache, rotation) {\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    var x1 = 0;\n    var y1 = 0;\n    var segmentLength = 0;\n    var segmentM = 0;\n    function advance() {\n        x1 = x2;\n        y1 = y2;\n        offset += stride;\n        x2 = flatCoordinates[offset];\n        y2 = flatCoordinates[offset + 1];\n        segmentM += segmentLength;\n        segmentLength = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    do {\n        advance();\n    } while (offset < end - stride && segmentM + segmentLength < startM);\n    var interpolate = segmentLength === 0 ? 0 : (startM - segmentM) / segmentLength;\n    var beginX = lerp(x1, x2, interpolate);\n    var beginY = lerp(y1, y2, interpolate);\n    var startOffset = offset - stride;\n    var startLength = segmentM;\n    var endM = startM + scale * measureAndCacheTextWidth(font, text, cache);\n    while (offset < end - stride && segmentM + segmentLength < endM) {\n        advance();\n    }\n    interpolate = segmentLength === 0 ? 0 : (endM - segmentM) / segmentLength;\n    var endX = lerp(x1, x2, interpolate);\n    var endY = lerp(y1, y2, interpolate);\n    // Keep text upright\n    var reverse;\n    if (rotation) {\n        var flat = [beginX, beginY, endX, endY];\n        rotate(flat, 0, 4, 2, rotation, flat, flat);\n        reverse = flat[0] > flat[2];\n    }\n    else {\n        reverse = beginX > endX;\n    }\n    var PI = Math.PI;\n    var result = [];\n    var singleSegment = startOffset + stride === offset;\n    offset = startOffset;\n    segmentLength = 0;\n    segmentM = startLength;\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    var previousAngle;\n    // All on the same segment\n    if (singleSegment) {\n        advance();\n        previousAngle = Math.atan2(y2 - y1, x2 - x1);\n        if (reverse) {\n            previousAngle += previousAngle > 0 ? -PI : PI;\n        }\n        var x = (endX + beginX) / 2;\n        var y = (endY + beginY) / 2;\n        result[0] = [x, y, (endM - startM) / 2, previousAngle, text];\n        return result;\n    }\n    for (var i = 0, ii = text.length; i < ii;) {\n        advance();\n        var angle = Math.atan2(y2 - y1, x2 - x1);\n        if (reverse) {\n            angle += angle > 0 ? -PI : PI;\n        }\n        if (previousAngle !== undefined) {\n            var delta = angle - previousAngle;\n            delta += delta > PI ? -2 * PI : delta < -PI ? 2 * PI : 0;\n            if (Math.abs(delta) > maxAngle) {\n                return null;\n            }\n        }\n        previousAngle = angle;\n        var iStart = i;\n        var charLength = 0;\n        for (; i < ii; ++i) {\n            var index = reverse ? ii - i - 1 : i;\n            var len = scale * measureAndCacheTextWidth(font, text[index], cache);\n            if (offset + stride < end &&\n                segmentM + segmentLength < startM + charLength + len / 2) {\n                break;\n            }\n            charLength += len;\n        }\n        if (i === iStart) {\n            continue;\n        }\n        var chars = reverse\n            ? text.substring(ii - iStart, ii - i)\n            : text.substring(iStart, i);\n        interpolate =\n            segmentLength === 0\n                ? 0\n                : (startM + charLength / 2 - segmentM) / segmentLength;\n        var x = lerp(x1, x2, interpolate);\n        var y = lerp(y1, y2, interpolate);\n        result.push([x, y, charLength / 2, angle, chars]);\n        startM += charLength;\n    }\n    return result;\n}\n//# sourceMappingURL=textpath.js.map","/**\n * @module ol/render/canvas/Executor\n */\nimport CanvasInstruction from './Instruction.js';\nimport { TEXT_ALIGN } from './TextBuilder.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../../has.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform, setFromArray as transformSetFromArray, } from '../../transform.js';\nimport { createEmpty, createOrUpdate, intersects } from '../../extent.js';\nimport { defaultPadding, defaultTextBaseline, drawImageOrLabel, } from '../canvas.js';\nimport { defaultTextAlign, measureAndCacheTextWidth, measureTextHeight, measureTextWidths, } from '../canvas.js';\nimport { drawTextOnPath } from '../../geom/flat/textpath.js';\nimport { equals } from '../../array.js';\nimport { lineStringLength } from '../../geom/flat/length.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @typedef {Object} BBox\n * @property {number} minX Minimal x.\n * @property {number} minY Minimal y.\n * @property {number} maxX Maximal x.\n * @property {number} maxY Maximal y\n * @property {*} value Value.\n */\n/**\n * @typedef {Object} ImageOrLabelDimensions\n * @property {number} drawImageX DrawImageX.\n * @property {number} drawImageY DrawImageY.\n * @property {number} drawImageW DrawImageW.\n * @property {number} drawImageH DrawImageH.\n * @property {number} originX OriginX.\n * @property {number} originY OriginY.\n * @property {Array<number>} scale Scale.\n * @property {BBox} declutterBox DeclutterBox.\n * @property {import(\"../../transform.js\").Transform} canvasTransform CanvasTransform.\n */\n/**\n * @typedef {{0: CanvasRenderingContext2D, 1: number, 2: import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement, 3: ImageOrLabelDimensions, 4: number, 5: Array<*>, 6: Array<*>}} ReplayImageOrLabelArgs\n */\n/**\n * @template T\n * @typedef {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nvar tmpExtent = createEmpty();\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p4 = [];\n/**\n * @param {ReplayImageOrLabelArgs} replayImageOrLabelArgs Arguments to replayImageOrLabel\n * @return {BBox} Declutter bbox.\n */\nfunction getDeclutterBox(replayImageOrLabelArgs) {\n    return replayImageOrLabelArgs[3].declutterBox;\n}\nvar rtlRegEx = new RegExp(\n/* eslint-disable prettier/prettier */\n'[' +\n    String.fromCharCode(0x00591) + '-' + String.fromCharCode(0x008ff) +\n    String.fromCharCode(0x0fb1d) + '-' + String.fromCharCode(0x0fdff) +\n    String.fromCharCode(0x0fe70) + '-' + String.fromCharCode(0x0fefc) +\n    String.fromCharCode(0x10800) + '-' + String.fromCharCode(0x10fff) +\n    String.fromCharCode(0x1e800) + '-' + String.fromCharCode(0x1efff) +\n    ']'\n/* eslint-enable prettier/prettier */\n);\n/**\n * @param {string} text Text.\n * @param {string} align Alignment.\n * @return {number} Text alignment.\n */\nfunction horizontalTextAlign(text, align) {\n    if ((align === 'start' || align === 'end') && !rtlRegEx.test(text)) {\n        align = align === 'start' ? 'left' : 'right';\n    }\n    return TEXT_ALIGN[align];\n}\nvar Executor = /** @class */ (function () {\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The replay can have overlapping geometries.\n     * @param {import(\"../canvas.js\").SerializableInstructions} instructions The serializable instructions\n     */\n    function Executor(resolution, pixelRatio, overlaps, instructions) {\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        this.overlaps = overlaps;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        this.resolution = resolution;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.alignFill_;\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        this.instructions = instructions.instructions;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        this.coordinates = instructions.coordinates;\n        /**\n         * @private\n         * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n         */\n        this.coordinateCache_ = {};\n        /**\n         * @private\n         * @type {!import(\"../../transform.js\").Transform}\n         */\n        this.renderedTransform_ = createTransform();\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.pixelCoordinates_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.viewRotation_ = 0;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        this.fillStates = instructions.fillStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        this.strokeStates = instructions.strokeStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        this.textStates = instructions.textStates || {};\n        /**\n         * @private\n         * @type {Object<string, Object<string, number>>}\n         */\n        this.widths_ = {};\n        /**\n         * @private\n         * @type {Object<string, import(\"../canvas.js\").Label>}\n         */\n        this.labels_ = {};\n    }\n    /**\n     * @param {string} text Text.\n     * @param {string} textKey Text style key.\n     * @param {string} fillKey Fill style key.\n     * @param {string} strokeKey Stroke style key.\n     * @return {import(\"../canvas.js\").Label} Label.\n     */\n    Executor.prototype.createLabel = function (text, textKey, fillKey, strokeKey) {\n        var key = text + textKey + fillKey + strokeKey;\n        if (this.labels_[key]) {\n            return this.labels_[key];\n        }\n        var strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n        var fillState = fillKey ? this.fillStates[fillKey] : null;\n        var textState = this.textStates[textKey];\n        var pixelRatio = this.pixelRatio;\n        var scale = [\n            textState.scale[0] * pixelRatio,\n            textState.scale[1] * pixelRatio,\n        ];\n        var align = horizontalTextAlign(text, textState.textAlign || defaultTextAlign);\n        var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n        var lines = text.split('\\n');\n        var numLines = lines.length;\n        var widths = [];\n        var width = measureTextWidths(textState.font, lines, widths);\n        var lineHeight = measureTextHeight(textState.font);\n        var height = lineHeight * numLines;\n        var renderWidth = width + strokeWidth;\n        var contextInstructions = [];\n        // make canvas 2 pixels wider to account for italic text width measurement errors\n        var w = (renderWidth + 2) * scale[0];\n        var h = (height + strokeWidth) * scale[1];\n        /** @type {import(\"../canvas.js\").Label} */\n        var label = {\n            width: w < 0 ? Math.floor(w) : Math.ceil(w),\n            height: h < 0 ? Math.floor(h) : Math.ceil(h),\n            contextInstructions: contextInstructions,\n        };\n        if (scale[0] != 1 || scale[1] != 1) {\n            contextInstructions.push('scale', scale);\n        }\n        contextInstructions.push('font', textState.font);\n        if (strokeKey) {\n            contextInstructions.push('strokeStyle', strokeState.strokeStyle);\n            contextInstructions.push('lineWidth', strokeWidth);\n            contextInstructions.push('lineCap', strokeState.lineCap);\n            contextInstructions.push('lineJoin', strokeState.lineJoin);\n            contextInstructions.push('miterLimit', strokeState.miterLimit);\n            // eslint-disable-next-line\n            var Context = WORKER_OFFSCREEN_CANVAS ? OffscreenCanvasRenderingContext2D : CanvasRenderingContext2D;\n            if (Context.prototype.setLineDash) {\n                contextInstructions.push('setLineDash', [strokeState.lineDash]);\n                contextInstructions.push('lineDashOffset', strokeState.lineDashOffset);\n            }\n        }\n        if (fillKey) {\n            contextInstructions.push('fillStyle', fillState.fillStyle);\n        }\n        contextInstructions.push('textBaseline', 'middle');\n        contextInstructions.push('textAlign', 'center');\n        var leftRight = 0.5 - align;\n        var x = align * renderWidth + leftRight * strokeWidth;\n        var i;\n        if (strokeKey) {\n            for (i = 0; i < numLines; ++i) {\n                contextInstructions.push('strokeText', [\n                    lines[i],\n                    x + leftRight * widths[i],\n                    0.5 * (strokeWidth + lineHeight) + i * lineHeight,\n                ]);\n            }\n        }\n        if (fillKey) {\n            for (i = 0; i < numLines; ++i) {\n                contextInstructions.push('fillText', [\n                    lines[i],\n                    x + leftRight * widths[i],\n                    0.5 * (strokeWidth + lineHeight) + i * lineHeight,\n                ]);\n            }\n        }\n        this.labels_[key] = label;\n        return label;\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     */\n    Executor.prototype.replayTextBackground_ = function (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n        context.beginPath();\n        context.moveTo.apply(context, p1);\n        context.lineTo.apply(context, p2);\n        context.lineTo.apply(context, p3);\n        context.lineTo.apply(context, p4);\n        context.lineTo.apply(context, p1);\n        if (fillInstruction) {\n            this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n            this.fill_(context);\n        }\n        if (strokeInstruction) {\n            this.setStrokeStyle_(context, \n            /** @type {Array<*>} */ (strokeInstruction));\n            context.stroke();\n        }\n    };\n    /**\n     * @private\n     * @param {number} sheetWidth Width of the sprite sheet.\n     * @param {number} sheetHeight Height of the sprite sheet.\n     * @param {number} centerX X.\n     * @param {number} centerY Y.\n     * @param {number} width Width.\n     * @param {number} height Height.\n     * @param {number} anchorX Anchor X.\n     * @param {number} anchorY Anchor Y.\n     * @param {number} originX Origin X.\n     * @param {number} originY Origin Y.\n     * @param {number} rotation Rotation.\n     * @param {import(\"../../size.js\").Size} scale Scale.\n     * @param {boolean} snapToPixel Snap to pixel.\n     * @param {Array<number>} padding Padding.\n     * @param {boolean} fillStroke Background fill or stroke.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @return {ImageOrLabelDimensions} Dimensions for positioning and decluttering the image or label.\n     */\n    Executor.prototype.calculateImageOrLabelDimensions_ = function (sheetWidth, sheetHeight, centerX, centerY, width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, fillStroke, feature) {\n        anchorX *= scale[0];\n        anchorY *= scale[1];\n        var x = centerX - anchorX;\n        var y = centerY - anchorY;\n        var w = width + originX > sheetWidth ? sheetWidth - originX : width;\n        var h = height + originY > sheetHeight ? sheetHeight - originY : height;\n        var boxW = padding[3] + w * scale[0] + padding[1];\n        var boxH = padding[0] + h * scale[1] + padding[2];\n        var boxX = x - padding[3];\n        var boxY = y - padding[0];\n        if (fillStroke || rotation !== 0) {\n            p1[0] = boxX;\n            p4[0] = boxX;\n            p1[1] = boxY;\n            p2[1] = boxY;\n            p2[0] = boxX + boxW;\n            p3[0] = p2[0];\n            p3[1] = boxY + boxH;\n            p4[1] = p3[1];\n        }\n        var transform;\n        if (rotation !== 0) {\n            transform = composeTransform(createTransform(), centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n            applyTransform(transform, p1);\n            applyTransform(transform, p2);\n            applyTransform(transform, p3);\n            applyTransform(transform, p4);\n            createOrUpdate(Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1]), tmpExtent);\n        }\n        else {\n            createOrUpdate(Math.min(boxX, boxX + boxW), Math.min(boxY, boxY + boxH), Math.max(boxX, boxX + boxW), Math.max(boxY, boxY + boxH), tmpExtent);\n        }\n        if (snapToPixel) {\n            x = Math.round(x);\n            y = Math.round(y);\n        }\n        return {\n            drawImageX: x,\n            drawImageY: y,\n            drawImageW: w,\n            drawImageH: h,\n            originX: originX,\n            originY: originY,\n            declutterBox: {\n                minX: tmpExtent[0],\n                minY: tmpExtent[1],\n                maxX: tmpExtent[2],\n                maxY: tmpExtent[3],\n                value: feature,\n            },\n            canvasTransform: transform,\n            scale: scale,\n        };\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} contextScale Scale of the context.\n     * @param {import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} imageOrLabel Image.\n     * @param {ImageOrLabelDimensions} dimensions Dimensions.\n     * @param {number} opacity Opacity.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     * @return {boolean} The image or label was rendered.\n     */\n    Executor.prototype.replayImageOrLabel_ = function (context, contextScale, imageOrLabel, dimensions, opacity, fillInstruction, strokeInstruction) {\n        var fillStroke = !!(fillInstruction || strokeInstruction);\n        var box = dimensions.declutterBox;\n        var canvas = context.canvas;\n        var strokePadding = strokeInstruction\n            ? (strokeInstruction[2] * dimensions.scale[0]) / 2\n            : 0;\n        var intersects = box.minX - strokePadding <= canvas.width / contextScale &&\n            box.maxX + strokePadding >= 0 &&\n            box.minY - strokePadding <= canvas.height / contextScale &&\n            box.maxY + strokePadding >= 0;\n        if (intersects) {\n            if (fillStroke) {\n                this.replayTextBackground_(context, p1, p2, p3, p4, \n                /** @type {Array<*>} */ (fillInstruction), \n                /** @type {Array<*>} */ (strokeInstruction));\n            }\n            drawImageOrLabel(context, dimensions.canvasTransform, opacity, imageOrLabel, dimensions.originX, dimensions.originY, dimensions.drawImageW, dimensions.drawImageH, dimensions.drawImageX, dimensions.drawImageY, dimensions.scale);\n        }\n        return true;\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     */\n    Executor.prototype.fill_ = function (context) {\n        if (this.alignFill_) {\n            var origin_1 = applyTransform(this.renderedTransform_, [0, 0]);\n            var repeatSize = 512 * this.pixelRatio;\n            context.save();\n            context.translate(origin_1[0] % repeatSize, origin_1[1] % repeatSize);\n            context.rotate(this.viewRotation_);\n        }\n        context.fill();\n        if (this.alignFill_) {\n            context.restore();\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {Array<*>} instruction Instruction.\n     */\n    Executor.prototype.setStrokeStyle_ = function (context, instruction) {\n        context['strokeStyle'] =\n            /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n        context.lineWidth = /** @type {number} */ (instruction[2]);\n        context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n        context.miterLimit = /** @type {number} */ (instruction[5]);\n        if (context.setLineDash) {\n            context.lineDashOffset = /** @type {number} */ (instruction[7]);\n            context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n        }\n    };\n    /**\n     * @private\n     * @param {string} text The text to draw.\n     * @param {string} textKey The key of the text state.\n     * @param {string} strokeKey The key for the stroke state.\n     * @param {string} fillKey The key for the fill state.\n     * @return {{label: import(\"../canvas.js\").Label, anchorX: number, anchorY: number}} The text image and its anchor.\n     */\n    Executor.prototype.drawLabelWithPointPlacement_ = function (text, textKey, strokeKey, fillKey) {\n        var textState = this.textStates[textKey];\n        var label = this.createLabel(text, textKey, fillKey, strokeKey);\n        var strokeState = this.strokeStates[strokeKey];\n        var pixelRatio = this.pixelRatio;\n        var align = horizontalTextAlign(text, textState.textAlign || defaultTextAlign);\n        var baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n        var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n        // Remove the 2 pixels we added in createLabel() for the anchor\n        var width = label.width / pixelRatio - 2 * textState.scale[0];\n        var anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n        var anchorY = (baseline * label.height) / pixelRatio +\n            2 * (0.5 - baseline) * strokeWidth;\n        return {\n            label: label,\n            anchorX: anchorX,\n            anchorY: anchorY,\n        };\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} contextScale Scale of the context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {Array<*>} instructions Instructions array.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n     * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n     *     features that intersect this extent.\n     * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.execute_ = function (context, contextScale, transform, instructions, snapToPixel, opt_featureCallback, opt_hitExtent, opt_declutterTree) {\n        /** @type {Array<number>} */\n        var pixelCoordinates;\n        if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n            pixelCoordinates = this.pixelCoordinates_;\n        }\n        else {\n            if (!this.pixelCoordinates_) {\n                this.pixelCoordinates_ = [];\n            }\n            pixelCoordinates = transform2D(this.coordinates, 0, this.coordinates.length, 2, transform, this.pixelCoordinates_);\n            transformSetFromArray(this.renderedTransform_, transform);\n        }\n        var i = 0; // instruction index\n        var ii = instructions.length; // end of instructions\n        var d = 0; // data index\n        var dd; // end of per-instruction data\n        var anchorX, anchorY, prevX, prevY, roundX, roundY, image, text, textKey, strokeKey, fillKey;\n        var pendingFill = 0;\n        var pendingStroke = 0;\n        var lastFillInstruction = null;\n        var lastStrokeInstruction = null;\n        var coordinateCache = this.coordinateCache_;\n        var viewRotation = this.viewRotation_;\n        var viewRotationFromTransform = Math.round(Math.atan2(-transform[1], transform[0]) * 1e12) / 1e12;\n        var state = /** @type {import(\"../../render.js\").State} */ ({\n            context: context,\n            pixelRatio: this.pixelRatio,\n            resolution: this.resolution,\n            rotation: viewRotation,\n        });\n        // When the batch size gets too big, performance decreases. 200 is a good\n        // balance between batch size and number of fill/stroke instructions.\n        var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n        var /** @type {import(\"../../Feature.js\").FeatureLike} */ feature;\n        var x, y, currentGeometry;\n        while (i < ii) {\n            var instruction = instructions[i];\n            var type = /** @type {import(\"./Instruction.js\").default} */ (instruction[0]);\n            switch (type) {\n                case CanvasInstruction.BEGIN_GEOMETRY:\n                    feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                    currentGeometry = instruction[3];\n                    if (!feature.getGeometry()) {\n                        i = /** @type {number} */ (instruction[2]);\n                    }\n                    else if (opt_hitExtent !== undefined &&\n                        !intersects(opt_hitExtent, currentGeometry.getExtent())) {\n                        i = /** @type {number} */ (instruction[2]) + 1;\n                    }\n                    else {\n                        ++i;\n                    }\n                    break;\n                case CanvasInstruction.BEGIN_PATH:\n                    if (pendingFill > batchSize) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                    }\n                    if (pendingStroke > batchSize) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    if (!pendingFill && !pendingStroke) {\n                        context.beginPath();\n                        prevX = NaN;\n                        prevY = NaN;\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.CIRCLE:\n                    d = /** @type {number} */ (instruction[1]);\n                    var x1 = pixelCoordinates[d];\n                    var y1 = pixelCoordinates[d + 1];\n                    var x2 = pixelCoordinates[d + 2];\n                    var y2 = pixelCoordinates[d + 3];\n                    var dx = x2 - x1;\n                    var dy = y2 - y1;\n                    var r = Math.sqrt(dx * dx + dy * dy);\n                    context.moveTo(x1 + r, y1);\n                    context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n                    ++i;\n                    break;\n                case CanvasInstruction.CLOSE_PATH:\n                    context.closePath();\n                    ++i;\n                    break;\n                case CanvasInstruction.CUSTOM:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = instruction[2];\n                    var geometry = \n                    /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n                    var renderer = instruction[4];\n                    var fn = instruction.length == 6 ? instruction[5] : undefined;\n                    state.geometry = geometry;\n                    state.feature = feature;\n                    if (!(i in coordinateCache)) {\n                        coordinateCache[i] = [];\n                    }\n                    var coords = coordinateCache[i];\n                    if (fn) {\n                        fn(pixelCoordinates, d, dd, 2, coords);\n                    }\n                    else {\n                        coords[0] = pixelCoordinates[d];\n                        coords[1] = pixelCoordinates[d + 1];\n                        coords.length = 2;\n                    }\n                    renderer(coords, state);\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_IMAGE:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    image =\n                        /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */ (instruction[3]);\n                    // Remaining arguments in DRAW_IMAGE are in alphabetical order\n                    anchorX = /** @type {number} */ (instruction[4]);\n                    anchorY = /** @type {number} */ (instruction[5]);\n                    var height = /** @type {number} */ (instruction[6]);\n                    var opacity = /** @type {number} */ (instruction[7]);\n                    var originX = /** @type {number} */ (instruction[8]);\n                    var originY = /** @type {number} */ (instruction[9]);\n                    var rotateWithView = /** @type {boolean} */ (instruction[10]);\n                    var rotation = /** @type {number} */ (instruction[11]);\n                    var scale = /** @type {import(\"../../size.js\").Size} */ (instruction[12]);\n                    var width = /** @type {number} */ (instruction[13]);\n                    var declutterImageWithText = \n                    /** @type {import(\"../canvas.js\").DeclutterImageWithText} */ (instruction[14]);\n                    if (!image && instruction.length >= 19) {\n                        // create label images\n                        text = /** @type {string} */ (instruction[18]);\n                        textKey = /** @type {string} */ (instruction[19]);\n                        strokeKey = /** @type {string} */ (instruction[20]);\n                        fillKey = /** @type {string} */ (instruction[21]);\n                        var labelWithAnchor = this.drawLabelWithPointPlacement_(text, textKey, strokeKey, fillKey);\n                        image = labelWithAnchor.label;\n                        instruction[3] = image;\n                        var textOffsetX = /** @type {number} */ (instruction[22]);\n                        anchorX = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n                        instruction[4] = anchorX;\n                        var textOffsetY = /** @type {number} */ (instruction[23]);\n                        anchorY = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n                        instruction[5] = anchorY;\n                        height = image.height;\n                        instruction[6] = height;\n                        width = image.width;\n                        instruction[13] = width;\n                    }\n                    var geometryWidths = void 0;\n                    if (instruction.length > 24) {\n                        geometryWidths = /** @type {number} */ (instruction[24]);\n                    }\n                    var padding = void 0, backgroundFill = void 0, backgroundStroke = void 0;\n                    if (instruction.length > 16) {\n                        padding = /** @type {Array<number>} */ (instruction[15]);\n                        backgroundFill = /** @type {boolean} */ (instruction[16]);\n                        backgroundStroke = /** @type {boolean} */ (instruction[17]);\n                    }\n                    else {\n                        padding = defaultPadding;\n                        backgroundFill = false;\n                        backgroundStroke = false;\n                    }\n                    if (rotateWithView && viewRotationFromTransform) {\n                        // Canvas is expected to be rotated to reverse view rotation.\n                        rotation += viewRotation;\n                    }\n                    else if (!rotateWithView && !viewRotationFromTransform) {\n                        // Canvas is not rotated, images need to be rotated back to be north-up.\n                        rotation -= viewRotation;\n                    }\n                    var widthIndex = 0;\n                    for (; d < dd; d += 2) {\n                        if (geometryWidths &&\n                            geometryWidths[widthIndex++] < width / this.pixelRatio) {\n                            continue;\n                        }\n                        var dimensions = this.calculateImageOrLabelDimensions_(image.width, image.height, pixelCoordinates[d], pixelCoordinates[d + 1], width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, backgroundFill || backgroundStroke, feature);\n                        /** @type {ReplayImageOrLabelArgs} */\n                        var args = [\n                            context,\n                            contextScale,\n                            image,\n                            dimensions,\n                            opacity,\n                            backgroundFill\n                                ? /** @type {Array<*>} */ (lastFillInstruction)\n                                : null,\n                            backgroundStroke\n                                ? /** @type {Array<*>} */ (lastStrokeInstruction)\n                                : null,\n                        ];\n                        var imageArgs = void 0;\n                        var imageDeclutterBox = void 0;\n                        if (opt_declutterTree && declutterImageWithText) {\n                            var index = dd - d;\n                            if (!declutterImageWithText[index]) {\n                                // We now have the image for an image+text combination.\n                                declutterImageWithText[index] = args;\n                                // Don't render anything for now, wait for the text.\n                                continue;\n                            }\n                            imageArgs = declutterImageWithText[index];\n                            delete declutterImageWithText[index];\n                            imageDeclutterBox = getDeclutterBox(imageArgs);\n                            if (opt_declutterTree.collides(imageDeclutterBox)) {\n                                continue;\n                            }\n                        }\n                        if (opt_declutterTree &&\n                            opt_declutterTree.collides(dimensions.declutterBox)) {\n                            continue;\n                        }\n                        if (imageArgs) {\n                            // We now have image and text for an image+text combination.\n                            if (opt_declutterTree) {\n                                opt_declutterTree.insert(imageDeclutterBox);\n                            }\n                            // Render the image before we render the text.\n                            this.replayImageOrLabel_.apply(this, imageArgs);\n                        }\n                        if (opt_declutterTree) {\n                            opt_declutterTree.insert(dimensions.declutterBox);\n                        }\n                        this.replayImageOrLabel_.apply(this, args);\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_CHARS:\n                    var begin = /** @type {number} */ (instruction[1]);\n                    var end = /** @type {number} */ (instruction[2]);\n                    var baseline = /** @type {number} */ (instruction[3]);\n                    var overflow = /** @type {number} */ (instruction[4]);\n                    fillKey = /** @type {string} */ (instruction[5]);\n                    var maxAngle = /** @type {number} */ (instruction[6]);\n                    var measurePixelRatio = /** @type {number} */ (instruction[7]);\n                    var offsetY = /** @type {number} */ (instruction[8]);\n                    strokeKey = /** @type {string} */ (instruction[9]);\n                    var strokeWidth = /** @type {number} */ (instruction[10]);\n                    text = /** @type {string} */ (instruction[11]);\n                    textKey = /** @type {string} */ (instruction[12]);\n                    var pixelRatioScale = [\n                        /** @type {number} */ (instruction[13]),\n                        /** @type {number} */ (instruction[13]),\n                    ];\n                    var textState = this.textStates[textKey];\n                    var font = textState.font;\n                    var textScale = [\n                        textState.scale[0] * measurePixelRatio,\n                        textState.scale[1] * measurePixelRatio,\n                    ];\n                    var cachedWidths = void 0;\n                    if (font in this.widths_) {\n                        cachedWidths = this.widths_[font];\n                    }\n                    else {\n                        cachedWidths = {};\n                        this.widths_[font] = cachedWidths;\n                    }\n                    var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n                    var textLength = Math.abs(textScale[0]) *\n                        measureAndCacheTextWidth(font, text, cachedWidths);\n                    if (overflow || textLength <= pathLength) {\n                        var textAlign = this.textStates[textKey].textAlign;\n                        var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n                        var parts = drawTextOnPath(pixelCoordinates, begin, end, 2, text, startM, maxAngle, Math.abs(textScale[0]), measureAndCacheTextWidth, font, cachedWidths, viewRotationFromTransform ? 0 : this.viewRotation_);\n                        drawChars: if (parts) {\n                            /** @type {Array<ReplayImageOrLabelArgs>} */\n                            var replayImageOrLabelArgs = [];\n                            var c = void 0, cc = void 0, chars = void 0, label = void 0, part = void 0;\n                            if (strokeKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.createLabel(chars, textKey, '', strokeKey);\n                                    anchorX =\n                                        /** @type {number} */ (part[2]) +\n                                            (textScale[0] < 0 ? -strokeWidth : strokeWidth);\n                                    anchorY =\n                                        baseline * label.height +\n                                            ((0.5 - baseline) * 2 * strokeWidth * textScale[1]) /\n                                                textScale[0] -\n                                            offsetY;\n                                    var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n                                    if (opt_declutterTree &&\n                                        opt_declutterTree.collides(dimensions.declutterBox)) {\n                                        break drawChars;\n                                    }\n                                    replayImageOrLabelArgs.push([\n                                        context,\n                                        contextScale,\n                                        label,\n                                        dimensions,\n                                        1,\n                                        null,\n                                        null,\n                                    ]);\n                                }\n                            }\n                            if (fillKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.createLabel(chars, textKey, fillKey, '');\n                                    anchorX = /** @type {number} */ (part[2]);\n                                    anchorY = baseline * label.height - offsetY;\n                                    var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n                                    if (opt_declutterTree &&\n                                        opt_declutterTree.collides(dimensions.declutterBox)) {\n                                        break drawChars;\n                                    }\n                                    replayImageOrLabelArgs.push([\n                                        context,\n                                        contextScale,\n                                        label,\n                                        dimensions,\n                                        1,\n                                        null,\n                                        null,\n                                    ]);\n                                }\n                            }\n                            if (opt_declutterTree) {\n                                opt_declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));\n                            }\n                            for (var i_1 = 0, ii_1 = replayImageOrLabelArgs.length; i_1 < ii_1; ++i_1) {\n                                this.replayImageOrLabel_.apply(this, replayImageOrLabelArgs[i_1]);\n                            }\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.END_GEOMETRY:\n                    if (opt_featureCallback !== undefined) {\n                        feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                        var result = opt_featureCallback(feature, currentGeometry);\n                        if (result) {\n                            return result;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.FILL:\n                    if (batchSize) {\n                        pendingFill++;\n                    }\n                    else {\n                        this.fill_(context);\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.MOVE_TO_LINE_TO:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    x = pixelCoordinates[d];\n                    y = pixelCoordinates[d + 1];\n                    roundX = (x + 0.5) | 0;\n                    roundY = (y + 0.5) | 0;\n                    if (roundX !== prevX || roundY !== prevY) {\n                        context.moveTo(x, y);\n                        prevX = roundX;\n                        prevY = roundY;\n                    }\n                    for (d += 2; d < dd; d += 2) {\n                        x = pixelCoordinates[d];\n                        y = pixelCoordinates[d + 1];\n                        roundX = (x + 0.5) | 0;\n                        roundY = (y + 0.5) | 0;\n                        if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n                            context.lineTo(x, y);\n                            prevX = roundX;\n                            prevY = roundY;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_FILL_STYLE:\n                    lastFillInstruction = instruction;\n                    this.alignFill_ = instruction[2];\n                    if (pendingFill) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                        if (pendingStroke) {\n                            context.stroke();\n                            pendingStroke = 0;\n                        }\n                    }\n                    context.fillStyle =\n                        /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_STROKE_STYLE:\n                    lastStrokeInstruction = instruction;\n                    if (pendingStroke) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n                    ++i;\n                    break;\n                case CanvasInstruction.STROKE:\n                    if (batchSize) {\n                        pendingStroke++;\n                    }\n                    else {\n                        context.stroke();\n                    }\n                    ++i;\n                    break;\n                default:\n                    ++i; // consume the instruction anyway, to avoid an infinite loop\n                    break;\n            }\n        }\n        if (pendingFill) {\n            this.fill_(context);\n        }\n        if (pendingStroke) {\n            context.stroke();\n        }\n        return undefined;\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} contextScale Scale of the context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n     */\n    Executor.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree) {\n        this.viewRotation_ = viewRotation;\n        this.execute_(context, contextScale, transform, this.instructions, snapToPixel, undefined, undefined, opt_declutterTree);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n     * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n     *     features that intersect this extent.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.executeHitDetection = function (context, transform, viewRotation, opt_featureCallback, opt_hitExtent) {\n        this.viewRotation_ = viewRotation;\n        return this.execute_(context, 1, transform, this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n    };\n    return Executor;\n}());\nexport default Executor;\n//# sourceMappingURL=Executor.js.map","/**\n * @module ol/render/canvas/ExecutorGroup\n */\nimport BuilderType from './BuilderType.js';\nimport Executor from './Executor.js';\nimport { buffer, createEmpty, extendCoordinate } from '../../extent.js';\nimport { compose as composeTransform, create as createTransform, } from '../../transform.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { isEmpty } from '../../obj.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @const\n * @type {Array<import(\"./BuilderType.js\").default>}\n */\nvar ORDER = [\n    BuilderType.POLYGON,\n    BuilderType.CIRCLE,\n    BuilderType.LINE_STRING,\n    BuilderType.IMAGE,\n    BuilderType.TEXT,\n    BuilderType.DEFAULT,\n];\nvar ExecutorGroup = /** @class */ (function () {\n    /**\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n     * `maxExtent` was set on the Builder for this executor group, the same `maxExtent`\n     * should be set here, unless the target context does not exceed that extent (which\n     * can be the case when rendering to tiles).\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The executor group can have overlapping geometries.\n     * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions\n     * The serializable instructions.\n     * @param {number} [opt_renderBuffer] Optional rendering buffer.\n     */\n    function ExecutorGroup(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overlaps_ = overlaps;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.renderBuffer_ = opt_renderBuffer;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"./Executor\").default>>}\n         */\n        this.executorsByZIndex_ = {};\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        this.hitDetectionContext_ = null;\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        this.hitDetectionTransform_ = createTransform();\n        this.createExecutors_(allInstructions);\n    }\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     */\n    ExecutorGroup.prototype.clip = function (context, transform) {\n        var flatClipCoords = this.getClipCoords(transform);\n        context.beginPath();\n        context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n        context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n        context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n        context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n        context.clip();\n    };\n    /**\n     * Create executors and populate them using the provided instructions.\n     * @private\n     * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions The serializable instructions\n     */\n    ExecutorGroup.prototype.createExecutors_ = function (allInstructions) {\n        for (var zIndex in allInstructions) {\n            var executors = this.executorsByZIndex_[zIndex];\n            if (executors === undefined) {\n                executors = {};\n                this.executorsByZIndex_[zIndex] = executors;\n            }\n            var instructionByZindex = allInstructions[zIndex];\n            for (var builderType in instructionByZindex) {\n                var instructions = instructionByZindex[builderType];\n                executors[builderType] = new Executor(this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n            }\n        }\n    };\n    /**\n     * @param {Array<import(\"./BuilderType.js\").default>} executors Executors.\n     * @return {boolean} Has executors of the provided types.\n     */\n    ExecutorGroup.prototype.hasExecutors = function (executors) {\n        for (var zIndex in this.executorsByZIndex_) {\n            var candidates = this.executorsByZIndex_[zIndex];\n            for (var i = 0, ii = executors.length; i < ii; ++i) {\n                if (executors[i] in candidates) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default, number): T} callback Feature callback.\n     * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    ExecutorGroup.prototype.forEachFeatureAtCoordinate = function (coordinate, resolution, rotation, hitTolerance, callback, declutteredFeatures) {\n        hitTolerance = Math.round(hitTolerance);\n        var contextSize = hitTolerance * 2 + 1;\n        var transform = composeTransform(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);\n        var newContext = !this.hitDetectionContext_;\n        if (newContext) {\n            this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n        }\n        var context = this.hitDetectionContext_;\n        if (context.canvas.width !== contextSize ||\n            context.canvas.height !== contextSize) {\n            context.canvas.width = contextSize;\n            context.canvas.height = contextSize;\n        }\n        else if (!newContext) {\n            context.clearRect(0, 0, contextSize, contextSize);\n        }\n        /**\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        var hitExtent;\n        if (this.renderBuffer_ !== undefined) {\n            hitExtent = createEmpty();\n            extendCoordinate(hitExtent, coordinate);\n            buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n        }\n        var indexes = getPixelIndexArray(hitTolerance);\n        var builderType;\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n         * @return {T|undefined} Callback result.\n         */\n        function featureCallback(feature, geometry) {\n            var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n            for (var i_1 = 0, ii = indexes.length; i_1 < ii; i_1++) {\n                if (imageData[indexes[i_1]] > 0) {\n                    if (!declutteredFeatures ||\n                        (builderType !== BuilderType.IMAGE &&\n                            builderType !== BuilderType.TEXT) ||\n                        declutteredFeatures.indexOf(feature) !== -1) {\n                        var idx = (indexes[i_1] - 3) / 4;\n                        var x = hitTolerance - (idx % contextSize);\n                        var y = hitTolerance - ((idx / contextSize) | 0);\n                        var result_1 = callback(feature, geometry, x * x + y * y);\n                        if (result_1) {\n                            return result_1;\n                        }\n                    }\n                    context.clearRect(0, 0, contextSize, contextSize);\n                    break;\n                }\n            }\n            return undefined;\n        }\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        var i, j, executors, executor, result;\n        for (i = zs.length - 1; i >= 0; --i) {\n            var zIndexKey = zs[i].toString();\n            executors = this.executorsByZIndex_[zIndexKey];\n            for (j = ORDER.length - 1; j >= 0; --j) {\n                builderType = ORDER[j];\n                executor = executors[builderType];\n                if (executor !== undefined) {\n                    result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @return {Array<number>} Clip coordinates.\n     */\n    ExecutorGroup.prototype.getClipCoords = function (transform) {\n        var maxExtent = this.maxExtent_;\n        if (!maxExtent) {\n            return null;\n        }\n        var minX = maxExtent[0];\n        var minY = maxExtent[1];\n        var maxX = maxExtent[2];\n        var maxY = maxExtent[3];\n        var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n        transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n        return flatClipCoords;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    ExecutorGroup.prototype.isEmpty = function () {\n        return isEmpty(this.executorsByZIndex_);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} contextScale Scale of the context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n     * @param {Array<import(\"./BuilderType.js\").default>} [opt_builderTypes] Ordered replay types to replay.\n     *     Default is {@link module:ol/render/replay~ORDER}\n     * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n     */\n    ExecutorGroup.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterTree) {\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        // setup clipping so that the parts of over-simplified geometries are not\n        // visible outside the current extent when panning\n        if (this.maxExtent_) {\n            context.save();\n            this.clip(context, transform);\n        }\n        var builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n        var i, ii, j, jj, replays, replay;\n        if (opt_declutterTree) {\n            zs.reverse();\n        }\n        for (i = 0, ii = zs.length; i < ii; ++i) {\n            var zIndexKey = zs[i].toString();\n            replays = this.executorsByZIndex_[zIndexKey];\n            for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n                var builderType = builderTypes[j];\n                replay = replays[builderType];\n                if (replay !== undefined) {\n                    replay.execute(context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree);\n                }\n            }\n        }\n        if (this.maxExtent_) {\n            context.restore();\n        }\n    };\n    return ExecutorGroup;\n}());\n/**\n * This cache is used to store arrays of indexes for calculated pixel circles\n * to increase performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<number>>}\n */\nvar circlePixelIndexArrayCache = {};\n/**\n * This methods creates an array with indexes of all pixels within a circle,\n * ordered by how close they are to the center.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @return {Array<number>} An array with indexes within a circle.\n */\nexport function getPixelIndexArray(radius) {\n    if (circlePixelIndexArrayCache[radius] !== undefined) {\n        return circlePixelIndexArrayCache[radius];\n    }\n    var size = radius * 2 + 1;\n    var maxDistanceSq = radius * radius;\n    var distances = new Array(maxDistanceSq + 1);\n    for (var i = 0; i <= radius; ++i) {\n        for (var j = 0; j <= radius; ++j) {\n            var distanceSq = i * i + j * j;\n            if (distanceSq > maxDistanceSq) {\n                break;\n            }\n            var distance = distances[distanceSq];\n            if (!distance) {\n                distance = [];\n                distances[distanceSq] = distance;\n            }\n            distance.push(((radius + i) * size + (radius + j)) * 4 + 3);\n            if (i > 0) {\n                distance.push(((radius - i) * size + (radius + j)) * 4 + 3);\n            }\n            if (j > 0) {\n                distance.push(((radius + i) * size + (radius - j)) * 4 + 3);\n                if (i > 0) {\n                    distance.push(((radius - i) * size + (radius - j)) * 4 + 3);\n                }\n            }\n        }\n    }\n    var pixelIndex = [];\n    for (var i = 0, ii = distances.length; i < ii; ++i) {\n        if (distances[i]) {\n            pixelIndex.push.apply(pixelIndex, distances[i]);\n        }\n    }\n    circlePixelIndexArrayCache[radius] = pixelIndex;\n    return pixelIndex;\n}\nexport default ExecutorGroup;\n//# sourceMappingURL=ExecutorGroup.js.map","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport GeometryType from '../../geom/GeometryType.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { compose as composeTransform, create as createTransform, } from '../../transform.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline, } from '../canvas.js';\nimport { equals } from '../../array.js';\nimport { intersects } from '../../extent.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { transformGeom2D } from '../../geom/SimpleGeometry.js';\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nvar CanvasImmediateRenderer = /** @class */ (function (_super) {\n    __extends(CanvasImmediateRenderer, _super);\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../extent.js\").Extent} extent Extent.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {number} [opt_squaredTolerance] Optional squared tolerance for simplification.\n     * @param {import(\"../../proj.js\").TransformFunction} [opt_userTransform] Transform from user to view projection.\n     */\n    function CanvasImmediateRenderer(context, pixelRatio, extent, transform, viewRotation, opt_squaredTolerance, opt_userTransform) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.context_ = context;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.extent_ = extent;\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.transform_ = transform;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.viewRotation_ = viewRotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.squaredTolerance_ = opt_squaredTolerance;\n        /**\n         * @private\n         * @type {import(\"../../proj.js\").TransformFunction}\n         */\n        _this.userTransform_ = opt_userTransform;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.contextFillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.contextStrokeState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").TextState}\n         */\n        _this.contextTextState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.fillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.strokeState_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageAnchorX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageAnchorY_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageHeight_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOpacity_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOriginX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOriginY_ = 0;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.imageRotateWithView_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageRotation_ = 0;\n        /**\n         * @private\n         * @type {import(\"../../size.js\").Size}\n         */\n        _this.imageScale_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageWidth_ = 0;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.text_ = '';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetY_ = 0;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.textRotateWithView_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textRotation_ = 0;\n        /**\n         * @private\n         * @type {import(\"../../size.js\").Size}\n         */\n        _this.textScale_ = [0, 0];\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.textFillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.textStrokeState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").TextState}\n         */\n        _this.textState_ = null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.pixelCoordinates_ = [];\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tmpLocalTransform_ = createTransform();\n        return _this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.drawImages_ = function (flatCoordinates, offset, end, stride) {\n        if (!this.image_) {\n            return;\n        }\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n        var context = this.context_;\n        var localTransform = this.tmpLocalTransform_;\n        var alpha = context.globalAlpha;\n        if (this.imageOpacity_ != 1) {\n            context.globalAlpha = alpha * this.imageOpacity_;\n        }\n        var rotation = this.imageRotation_;\n        if (this.imageRotateWithView_) {\n            rotation += this.viewRotation_;\n        }\n        for (var i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n            var x = pixelCoordinates[i] - this.imageAnchorX_;\n            var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n            if (rotation !== 0 ||\n                this.imageScale_[0] != 1 ||\n                this.imageScale_[1] != 1) {\n                var centerX = x + this.imageAnchorX_;\n                var centerY = y + this.imageAnchorY_;\n                composeTransform(localTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n                context.setTransform.apply(context, localTransform);\n                context.translate(centerX, centerY);\n                context.scale(this.imageScale_[0], this.imageScale_[1]);\n                context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, -this.imageAnchorX_, -this.imageAnchorY_, this.imageWidth_, this.imageHeight_);\n                context.setTransform(1, 0, 0, 1, 0, 0);\n            }\n            else {\n                context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, x, y, this.imageWidth_, this.imageHeight_);\n            }\n        }\n        if (this.imageOpacity_ != 1) {\n            context.globalAlpha = alpha;\n        }\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.drawText_ = function (flatCoordinates, offset, end, stride) {\n        if (!this.textState_ || this.text_ === '') {\n            return;\n        }\n        if (this.textFillState_) {\n            this.setContextFillState_(this.textFillState_);\n        }\n        if (this.textStrokeState_) {\n            this.setContextStrokeState_(this.textStrokeState_);\n        }\n        this.setContextTextState_(this.textState_);\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n        var context = this.context_;\n        var rotation = this.textRotation_;\n        if (this.textRotateWithView_) {\n            rotation += this.viewRotation_;\n        }\n        for (; offset < end; offset += stride) {\n            var x = pixelCoordinates[offset] + this.textOffsetX_;\n            var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n            if (rotation !== 0 ||\n                this.textScale_[0] != 1 ||\n                this.textScale_[1] != 1) {\n                var localTransform = composeTransform(this.tmpLocalTransform_, x, y, 1, 1, rotation, -x, -y);\n                context.setTransform.apply(context, localTransform);\n                context.translate(x, y);\n                context.scale(this.textScale_[0], this.textScale_[1]);\n                if (this.textStrokeState_) {\n                    context.strokeText(this.text_, 0, 0);\n                }\n                if (this.textFillState_) {\n                    context.fillText(this.text_, 0, 0);\n                }\n                context.setTransform(1, 0, 0, 1, 0, 0);\n            }\n            else {\n                if (this.textStrokeState_) {\n                    context.strokeText(this.text_, x, y);\n                }\n                if (this.textFillState_) {\n                    context.fillText(this.text_, x, y);\n                }\n            }\n        }\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @param {boolean} close Close.\n     * @private\n     * @return {number} end End.\n     */\n    CanvasImmediateRenderer.prototype.moveToLineTo_ = function (flatCoordinates, offset, end, stride, close) {\n        var context = this.context_;\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n        context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n        var length = pixelCoordinates.length;\n        if (close) {\n            length -= 2;\n        }\n        for (var i = 2; i < length; i += 2) {\n            context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n        }\n        if (close) {\n            context.closePath();\n        }\n        return end;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} End.\n     */\n    CanvasImmediateRenderer.prototype.drawRings_ = function (flatCoordinates, offset, ends, stride) {\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n        }\n        return offset;\n    };\n    /**\n     * Render a circle geometry into the canvas.  Rendering is immediate and uses\n     * the current fill and stroke styles.\n     *\n     * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawCircle = function (geometry) {\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.fillState_ || this.strokeState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var pixelCoordinates = transformGeom2D(geometry, this.transform_, this.pixelCoordinates_);\n            var dx = pixelCoordinates[2] - pixelCoordinates[0];\n            var dy = pixelCoordinates[3] - pixelCoordinates[1];\n            var radius = Math.sqrt(dx * dx + dy * dy);\n            var context = this.context_;\n            context.beginPath();\n            context.arc(pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            this.drawText_(geometry.getCenter(), 0, 2, 2);\n        }\n    };\n    /**\n     * Set the rendering style.  Note that since this is an immediate rendering API,\n     * any `zIndex` on the provided style will be ignored.\n     *\n     * @param {import(\"../../style/Style.js\").default} style The rendering style.\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.setStyle = function (style) {\n        this.setFillStrokeStyle(style.getFill(), style.getStroke());\n        this.setImageStyle(style.getImage());\n        this.setTextStyle(style.getText());\n    };\n    /**\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     */\n    CanvasImmediateRenderer.prototype.setTransform = function (transform) {\n        this.transform_ = transform;\n    };\n    /**\n     * Render a geometry into the canvas.  Call\n     * {@link module:ol/render/canvas/Immediate~CanvasImmediateRenderer#setStyle renderer.setStyle()} first to set the rendering style.\n     *\n     * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawGeometry = function (geometry) {\n        var type = geometry.getType();\n        switch (type) {\n            case GeometryType.POINT:\n                this.drawPoint(\n                /** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n                break;\n            case GeometryType.LINE_STRING:\n                this.drawLineString(\n                /** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n                break;\n            case GeometryType.POLYGON:\n                this.drawPolygon(\n                /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_POINT:\n                this.drawMultiPoint(\n                /** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_LINE_STRING:\n                this.drawMultiLineString(\n                /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_POLYGON:\n                this.drawMultiPolygon(\n                /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n                break;\n            case GeometryType.GEOMETRY_COLLECTION:\n                this.drawGeometryCollection(\n                /** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n                break;\n            case GeometryType.CIRCLE:\n                this.drawCircle(\n                /** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n                break;\n            default:\n        }\n    };\n    /**\n     * Render a feature into the canvas.  Note that any `zIndex` on the provided\n     * style will be ignored - features are rendered immediately in the order that\n     * this method is called.  If you need `zIndex` support, you should be using an\n     * {@link module:ol/layer/Vector~VectorLayer VectorLayer} instead.\n     *\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @param {import(\"../../style/Style.js\").default} style Style.\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawFeature = function (feature, style) {\n        var geometry = style.getGeometryFunction()(feature);\n        if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        this.setStyle(style);\n        this.drawGeometry(geometry);\n    };\n    /**\n     * Render a GeometryCollection to the canvas.  Rendering is immediate and\n     * uses the current styles appropriate for each geometry in the collection.\n     *\n     * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n     */\n    CanvasImmediateRenderer.prototype.drawGeometryCollection = function (geometry) {\n        var geometries = geometry.getGeometriesArray();\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            this.drawGeometry(geometries[i]);\n        }\n    };\n    /**\n     * Render a Point geometry into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawPoint = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/Point.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var flatCoordinates = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        if (this.image_) {\n            this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n        if (this.text_ !== '') {\n            this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n    };\n    /**\n     * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n     * uses the current style.\n     *\n     * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawMultiPoint = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var flatCoordinates = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        if (this.image_) {\n            this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n        if (this.text_ !== '') {\n            this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n    };\n    /**\n     * Render a LineString into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawLineString = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_) {\n            this.setContextStrokeState_(this.strokeState_);\n            var context = this.context_;\n            var flatCoordinates = geometry.getFlatCoordinates();\n            context.beginPath();\n            this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length, geometry.getStride(), false);\n            context.stroke();\n        }\n        if (this.text_ !== '') {\n            var flatMidpoint = geometry.getFlatMidpoint();\n            this.drawText_(flatMidpoint, 0, 2, 2);\n        }\n    };\n    /**\n     * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n     * and uses the current style.\n     *\n     * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawMultiLineString = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry =\n                /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var geometryExtent = geometry.getExtent();\n        if (!intersects(this.extent_, geometryExtent)) {\n            return;\n        }\n        if (this.strokeState_) {\n            this.setContextStrokeState_(this.strokeState_);\n            var context = this.context_;\n            var flatCoordinates = geometry.getFlatCoordinates();\n            var offset = 0;\n            var ends = /** @type {Array<number>} */ (geometry.getEnds());\n            var stride = geometry.getStride();\n            context.beginPath();\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n            }\n            context.stroke();\n        }\n        if (this.text_ !== '') {\n            var flatMidpoints = geometry.getFlatMidpoints();\n            this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n        }\n    };\n    /**\n     * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawPolygon = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_ || this.fillState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var context = this.context_;\n            context.beginPath();\n            this.drawRings_(geometry.getOrientedFlatCoordinates(), 0, \n            /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            var flatInteriorPoint = geometry.getFlatInteriorPoint();\n            this.drawText_(flatInteriorPoint, 0, 2, 2);\n        }\n    };\n    /**\n     * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n     * uses the current style.\n     * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n     */\n    CanvasImmediateRenderer.prototype.drawMultiPolygon = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_ || this.fillState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var context = this.context_;\n            var flatCoordinates = geometry.getOrientedFlatCoordinates();\n            var offset = 0;\n            var endss = geometry.getEndss();\n            var stride = geometry.getStride();\n            context.beginPath();\n            for (var i = 0, ii = endss.length; i < ii; ++i) {\n                var ends = endss[i];\n                offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n            }\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            var flatInteriorPoints = geometry.getFlatInteriorPoints();\n            this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextFillState_ = function (fillState) {\n        var context = this.context_;\n        var contextFillState = this.contextFillState_;\n        if (!contextFillState) {\n            context.fillStyle = fillState.fillStyle;\n            this.contextFillState_ = {\n                fillStyle: fillState.fillStyle,\n            };\n        }\n        else {\n            if (contextFillState.fillStyle != fillState.fillStyle) {\n                contextFillState.fillStyle = fillState.fillStyle;\n                context.fillStyle = fillState.fillStyle;\n            }\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextStrokeState_ = function (strokeState) {\n        var context = this.context_;\n        var contextStrokeState = this.contextStrokeState_;\n        if (!contextStrokeState) {\n            context.lineCap = strokeState.lineCap;\n            if (context.setLineDash) {\n                context.setLineDash(strokeState.lineDash);\n                context.lineDashOffset = strokeState.lineDashOffset;\n            }\n            context.lineJoin = strokeState.lineJoin;\n            context.lineWidth = strokeState.lineWidth;\n            context.miterLimit = strokeState.miterLimit;\n            context.strokeStyle = strokeState.strokeStyle;\n            this.contextStrokeState_ = {\n                lineCap: strokeState.lineCap,\n                lineDash: strokeState.lineDash,\n                lineDashOffset: strokeState.lineDashOffset,\n                lineJoin: strokeState.lineJoin,\n                lineWidth: strokeState.lineWidth,\n                miterLimit: strokeState.miterLimit,\n                strokeStyle: strokeState.strokeStyle,\n            };\n        }\n        else {\n            if (contextStrokeState.lineCap != strokeState.lineCap) {\n                contextStrokeState.lineCap = strokeState.lineCap;\n                context.lineCap = strokeState.lineCap;\n            }\n            if (context.setLineDash) {\n                if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n                    context.setLineDash((contextStrokeState.lineDash = strokeState.lineDash));\n                }\n                if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n                    contextStrokeState.lineDashOffset = strokeState.lineDashOffset;\n                    context.lineDashOffset = strokeState.lineDashOffset;\n                }\n            }\n            if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n                contextStrokeState.lineJoin = strokeState.lineJoin;\n                context.lineJoin = strokeState.lineJoin;\n            }\n            if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n                contextStrokeState.lineWidth = strokeState.lineWidth;\n                context.lineWidth = strokeState.lineWidth;\n            }\n            if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n                contextStrokeState.miterLimit = strokeState.miterLimit;\n                context.miterLimit = strokeState.miterLimit;\n            }\n            if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n                contextStrokeState.strokeStyle = strokeState.strokeStyle;\n                context.strokeStyle = strokeState.strokeStyle;\n            }\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").TextState} textState Text state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextTextState_ = function (textState) {\n        var context = this.context_;\n        var contextTextState = this.contextTextState_;\n        var textAlign = textState.textAlign\n            ? textState.textAlign\n            : defaultTextAlign;\n        if (!contextTextState) {\n            context.font = textState.font;\n            context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n            context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n            this.contextTextState_ = {\n                font: textState.font,\n                textAlign: textAlign,\n                textBaseline: textState.textBaseline,\n            };\n        }\n        else {\n            if (contextTextState.font != textState.font) {\n                contextTextState.font = textState.font;\n                context.font = textState.font;\n            }\n            if (contextTextState.textAlign != textAlign) {\n                contextTextState.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n                context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n            }\n            if (contextTextState.textBaseline != textState.textBaseline) {\n                contextTextState.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n                context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n            }\n        }\n    };\n    /**\n     * Set the fill and stroke style for subsequent draw operations.  To clear\n     * either fill or stroke styles, pass null for the appropriate parameter.\n     *\n     * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n     * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n     */\n    CanvasImmediateRenderer.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n        var _this = this;\n        if (!fillStyle) {\n            this.fillState_ = null;\n        }\n        else {\n            var fillStyleColor = fillStyle.getColor();\n            this.fillState_ = {\n                fillStyle: asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle),\n            };\n        }\n        if (!strokeStyle) {\n            this.strokeState_ = null;\n        }\n        else {\n            var strokeStyleColor = strokeStyle.getColor();\n            var strokeStyleLineCap = strokeStyle.getLineCap();\n            var strokeStyleLineDash = strokeStyle.getLineDash();\n            var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n            var strokeStyleLineJoin = strokeStyle.getLineJoin();\n            var strokeStyleWidth = strokeStyle.getWidth();\n            var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n            var lineDash = strokeStyleLineDash\n                ? strokeStyleLineDash\n                : defaultLineDash;\n            this.strokeState_ = {\n                lineCap: strokeStyleLineCap !== undefined\n                    ? strokeStyleLineCap\n                    : defaultLineCap,\n                lineDash: this.pixelRatio_ === 1\n                    ? lineDash\n                    : lineDash.map(function (n) { return n * _this.pixelRatio_; }),\n                lineDashOffset: (strokeStyleLineDashOffset\n                    ? strokeStyleLineDashOffset\n                    : defaultLineDashOffset) * this.pixelRatio_,\n                lineJoin: strokeStyleLineJoin !== undefined\n                    ? strokeStyleLineJoin\n                    : defaultLineJoin,\n                lineWidth: (strokeStyleWidth !== undefined\n                    ? strokeStyleWidth\n                    : defaultLineWidth) * this.pixelRatio_,\n                miterLimit: strokeStyleMiterLimit !== undefined\n                    ? strokeStyleMiterLimit\n                    : defaultMiterLimit,\n                strokeStyle: asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle),\n            };\n        }\n    };\n    /**\n     * Set the image style for subsequent draw operations.  Pass null to remove\n     * the image style.\n     *\n     * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n     */\n    CanvasImmediateRenderer.prototype.setImageStyle = function (imageStyle) {\n        var imageSize;\n        if (!imageStyle || !(imageSize = imageStyle.getSize())) {\n            this.image_ = null;\n            return;\n        }\n        var imageAnchor = imageStyle.getAnchor();\n        var imageOrigin = imageStyle.getOrigin();\n        this.image_ = imageStyle.getImage(this.pixelRatio_);\n        this.imageAnchorX_ = imageAnchor[0] * this.pixelRatio_;\n        this.imageAnchorY_ = imageAnchor[1] * this.pixelRatio_;\n        this.imageHeight_ = imageSize[1] * this.pixelRatio_;\n        this.imageOpacity_ = imageStyle.getOpacity();\n        this.imageOriginX_ = imageOrigin[0];\n        this.imageOriginY_ = imageOrigin[1];\n        this.imageRotateWithView_ = imageStyle.getRotateWithView();\n        this.imageRotation_ = imageStyle.getRotation();\n        this.imageScale_ = imageStyle.getScaleArray();\n        this.imageWidth_ = imageSize[0] * this.pixelRatio_;\n    };\n    /**\n     * Set the text style for subsequent draw operations.  Pass null to\n     * remove the text style.\n     *\n     * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n     */\n    CanvasImmediateRenderer.prototype.setTextStyle = function (textStyle) {\n        if (!textStyle) {\n            this.text_ = '';\n        }\n        else {\n            var textFillStyle = textStyle.getFill();\n            if (!textFillStyle) {\n                this.textFillState_ = null;\n            }\n            else {\n                var textFillStyleColor = textFillStyle.getColor();\n                this.textFillState_ = {\n                    fillStyle: asColorLike(textFillStyleColor ? textFillStyleColor : defaultFillStyle),\n                };\n            }\n            var textStrokeStyle = textStyle.getStroke();\n            if (!textStrokeStyle) {\n                this.textStrokeState_ = null;\n            }\n            else {\n                var textStrokeStyleColor = textStrokeStyle.getColor();\n                var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n                var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n                var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n                var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n                var textStrokeStyleWidth = textStrokeStyle.getWidth();\n                var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n                this.textStrokeState_ = {\n                    lineCap: textStrokeStyleLineCap !== undefined\n                        ? textStrokeStyleLineCap\n                        : defaultLineCap,\n                    lineDash: textStrokeStyleLineDash\n                        ? textStrokeStyleLineDash\n                        : defaultLineDash,\n                    lineDashOffset: textStrokeStyleLineDashOffset\n                        ? textStrokeStyleLineDashOffset\n                        : defaultLineDashOffset,\n                    lineJoin: textStrokeStyleLineJoin !== undefined\n                        ? textStrokeStyleLineJoin\n                        : defaultLineJoin,\n                    lineWidth: textStrokeStyleWidth !== undefined\n                        ? textStrokeStyleWidth\n                        : defaultLineWidth,\n                    miterLimit: textStrokeStyleMiterLimit !== undefined\n                        ? textStrokeStyleMiterLimit\n                        : defaultMiterLimit,\n                    strokeStyle: asColorLike(textStrokeStyleColor ? textStrokeStyleColor : defaultStrokeStyle),\n                };\n            }\n            var textFont = textStyle.getFont();\n            var textOffsetX = textStyle.getOffsetX();\n            var textOffsetY = textStyle.getOffsetY();\n            var textRotateWithView = textStyle.getRotateWithView();\n            var textRotation = textStyle.getRotation();\n            var textScale = textStyle.getScaleArray();\n            var textText = textStyle.getText();\n            var textTextAlign = textStyle.getTextAlign();\n            var textTextBaseline = textStyle.getTextBaseline();\n            this.textState_ = {\n                font: textFont !== undefined ? textFont : defaultFont,\n                textAlign: textTextAlign !== undefined ? textTextAlign : defaultTextAlign,\n                textBaseline: textTextBaseline !== undefined\n                    ? textTextBaseline\n                    : defaultTextBaseline,\n            };\n            this.text_ = textText !== undefined ? textText : '';\n            this.textOffsetX_ =\n                textOffsetX !== undefined ? this.pixelRatio_ * textOffsetX : 0;\n            this.textOffsetY_ =\n                textOffsetY !== undefined ? this.pixelRatio_ * textOffsetY : 0;\n            this.textRotateWithView_ =\n                textRotateWithView !== undefined ? textRotateWithView : false;\n            this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n            this.textScale_ = [\n                this.pixelRatio_ * textScale[0],\n                this.pixelRatio_ * textScale[1],\n            ];\n        }\n    };\n    return CanvasImmediateRenderer;\n}(VectorContext));\nexport default CanvasImmediateRenderer;\n//# sourceMappingURL=Immediate.js.map","/**\n * @module ol/render/canvas/hitdetect\n */\nimport CanvasImmediateRenderer from './Immediate.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport IconAnchorUnits from '../../style/IconAnchorUnits.js';\nimport { Icon } from '../../style.js';\nimport { clamp } from '../../math.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { intersects } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nexport var HIT_DETECT_RESOLUTION = 0.5;\n/**\n * @param {import(\"../../size.js\").Size} size Canvas size in css pixels.\n * @param {Array<import(\"../../transform.js\").Transform>} transforms Transforms\n * for rendering features to all worlds of the viewport, from coordinates to css\n * pixels.\n * @param {Array<import(\"../../Feature.js\").FeatureLike>} features\n * Features to consider for hit detection.\n * @param {import(\"../../style/Style.js\").StyleFunction|undefined} styleFunction\n * Layer style function.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {ImageData} Hit detection image data.\n */\nexport function createHitDetectionImageData(size, transforms, features, styleFunction, extent, resolution, rotation) {\n    var width = size[0] * HIT_DETECT_RESOLUTION;\n    var height = size[1] * HIT_DETECT_RESOLUTION;\n    var context = createCanvasContext2D(width, height);\n    context.imageSmoothingEnabled = false;\n    var canvas = context.canvas;\n    var renderer = new CanvasImmediateRenderer(context, HIT_DETECT_RESOLUTION, extent, null, rotation);\n    var featureCount = features.length;\n    // Stretch hit detection index to use the whole available color range\n    var indexFactor = Math.floor((256 * 256 * 256 - 1) / featureCount);\n    var featuresByZIndex = {};\n    for (var i = 1; i <= featureCount; ++i) {\n        var feature = features[i - 1];\n        var featureStyleFunction = feature.getStyleFunction() || styleFunction;\n        if (!styleFunction) {\n            continue;\n        }\n        var styles = featureStyleFunction(feature, resolution);\n        if (!styles) {\n            continue;\n        }\n        if (!Array.isArray(styles)) {\n            styles = [styles];\n        }\n        var index = i * indexFactor;\n        var color = '#' + ('000000' + index.toString(16)).slice(-6);\n        for (var j = 0, jj = styles.length; j < jj; ++j) {\n            var originalStyle = styles[j];\n            var geometry = originalStyle.getGeometryFunction()(feature);\n            if (!geometry || !intersects(extent, geometry.getExtent())) {\n                continue;\n            }\n            var style = originalStyle.clone();\n            var fill = style.getFill();\n            if (fill) {\n                fill.setColor(color);\n            }\n            var stroke = style.getStroke();\n            if (stroke) {\n                stroke.setColor(color);\n                stroke.setLineDash(null);\n            }\n            style.setText(undefined);\n            var image = originalStyle.getImage();\n            if (image && image.getOpacity() !== 0) {\n                var imgSize = image.getImageSize();\n                if (!imgSize) {\n                    continue;\n                }\n                var imgContext = createCanvasContext2D(imgSize[0], imgSize[1], undefined, { alpha: false });\n                var img = imgContext.canvas;\n                imgContext.fillStyle = color;\n                imgContext.fillRect(0, 0, img.width, img.height);\n                style.setImage(new Icon({\n                    img: img,\n                    imgSize: imgSize,\n                    anchor: image.getAnchor(),\n                    anchorXUnits: IconAnchorUnits.PIXELS,\n                    anchorYUnits: IconAnchorUnits.PIXELS,\n                    offset: image.getOrigin(),\n                    opacity: 1,\n                    size: image.getSize(),\n                    scale: image.getScale(),\n                    rotation: image.getRotation(),\n                    rotateWithView: image.getRotateWithView(),\n                }));\n            }\n            var zIndex = style.getZIndex() || 0;\n            var byGeometryType = featuresByZIndex[zIndex];\n            if (!byGeometryType) {\n                byGeometryType = {};\n                featuresByZIndex[zIndex] = byGeometryType;\n                byGeometryType[GeometryType.POLYGON] = [];\n                byGeometryType[GeometryType.CIRCLE] = [];\n                byGeometryType[GeometryType.LINE_STRING] = [];\n                byGeometryType[GeometryType.POINT] = [];\n            }\n            byGeometryType[geometry.getType().replace('Multi', '')].push(geometry, style);\n        }\n    }\n    var zIndexKeys = Object.keys(featuresByZIndex)\n        .map(Number)\n        .sort(numberSafeCompareFunction);\n    for (var i = 0, ii = zIndexKeys.length; i < ii; ++i) {\n        var byGeometryType = featuresByZIndex[zIndexKeys[i]];\n        for (var type in byGeometryType) {\n            var geomAndStyle = byGeometryType[type];\n            for (var j = 0, jj = geomAndStyle.length; j < jj; j += 2) {\n                renderer.setStyle(geomAndStyle[j + 1]);\n                for (var k = 0, kk = transforms.length; k < kk; ++k) {\n                    renderer.setTransform(transforms[k]);\n                    renderer.drawGeometry(geomAndStyle[j]);\n                }\n            }\n        }\n    }\n    return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n/**\n * @param {import(\"../../pixel\").Pixel} pixel Pixel coordinate on the hit\n * detection canvas in css pixels.\n * @param {Array<import(\"../../Feature\").FeatureLike>} features Features. Has to\n * match the `features` array that was passed to `createHitDetectionImageData()`.\n * @param {ImageData} imageData Hit detection image data generated by\n * `createHitDetectionImageData()`.\n * @return {Array<import(\"../../Feature\").FeatureLike>} features Features.\n */\nexport function hitDetect(pixel, features, imageData) {\n    var resultFeatures = [];\n    if (imageData) {\n        var x = Math.floor(Math.round(pixel[0]) * HIT_DETECT_RESOLUTION);\n        var y = Math.floor(Math.round(pixel[1]) * HIT_DETECT_RESOLUTION);\n        // The pixel coordinate is clamped down to the hit-detect canvas' size to account\n        // for browsers returning coordinates slightly larger than the actual canvas size\n        // due to a non-integer pixel ratio.\n        var index = (clamp(x, 0, imageData.width - 1) +\n            clamp(y, 0, imageData.height - 1) * imageData.width) *\n            4;\n        var r = imageData.data[index];\n        var g = imageData.data[index + 1];\n        var b = imageData.data[index + 2];\n        var i = b + 256 * (g + 256 * r);\n        var indexFactor = Math.floor((256 * 256 * 256 - 1) / features.length);\n        if (i && i % indexFactor === 0) {\n            resultFeatures.push(features[i / indexFactor - 1]);\n        }\n    }\n    return resultFeatures;\n}\n//# sourceMappingURL=hitdetect.js.map","/**\n * @module ol/renderer/vector\n */\nimport BuilderType from '../render/canvas/BuilderType.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ImageState from '../ImageState.js';\nimport { getUid } from '../util.js';\n/**\n * Feature callback. The callback will be called with three arguments. The first\n * argument is one {@link module:ol/Feature feature} or {@link module:ol/render/Feature render feature}\n * at the pixel, the second is the {@link module:ol/layer/Layer layer} of the feature and will be null for\n * unmanaged layers. The third is the {@link module:ol/geom/SimpleGeometry} of the feature. For features\n * with a GeometryCollection geometry, it will be the first detected geometry from the collection.\n * @template T\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, import(\"../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nvar SIMPLIFY_TOLERANCE = 0.5;\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\nvar GEOMETRY_RENDERERS = {\n    'Point': renderPointGeometry,\n    'LineString': renderLineStringGeometry,\n    'Polygon': renderPolygonGeometry,\n    'MultiPoint': renderMultiPointGeometry,\n    'MultiLineString': renderMultiLineStringGeometry,\n    'MultiPolygon': renderMultiPolygonGeometry,\n    'GeometryCollection': renderGeometryCollectionGeometry,\n    'Circle': renderCircleGeometry,\n};\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n    return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n    var tolerance = getTolerance(resolution, pixelRatio);\n    return tolerance * tolerance;\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n    return (SIMPLIFY_TOLERANCE * resolution) / pixelRatio;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderCircleGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (fillStyle || strokeStyle) {\n        var circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n        circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        circleReplay.drawCircle(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n * @return {boolean} `true` if style is loading.\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, opt_transform, opt_declutterBuilderGroup) {\n    var loading = false;\n    var imageStyle = style.getImage();\n    if (imageStyle) {\n        var imageState = imageStyle.getImageState();\n        if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n            imageStyle.unlistenImageChange(listener);\n        }\n        else {\n            if (imageState == ImageState.IDLE) {\n                imageStyle.load();\n            }\n            imageState = imageStyle.getImageState();\n            imageStyle.listenImageChange(listener);\n            loading = true;\n        }\n    }\n    renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup);\n    return loading;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup) {\n    var geometry = style.getGeometryFunction()(feature);\n    if (!geometry) {\n        return;\n    }\n    var simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, opt_transform);\n    var renderer = style.getRenderer();\n    if (renderer) {\n        renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n    }\n    else {\n        var geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n        geometryRenderer(replayGroup, simplifiedGeometry, style, feature, opt_declutterBuilderGroup);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n    if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n        var geometries = \n        /** @type {import(\"../geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            renderGeometry(replayGroup, geometries[i], style, feature);\n        }\n        return;\n    }\n    var replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n    replay.drawCustom(\n    /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry), feature, style.getRenderer(), style.getHitDetectionRenderer());\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var geometries = geometry.getGeometriesArray();\n    var i, ii;\n    for (i = 0, ii = geometries.length; i < ii; ++i) {\n        var geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n        geometryRenderer(replayGroup, geometries[i], style, feature, opt_declutterBuilderGroup);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var strokeStyle = style.getStroke();\n    if (strokeStyle) {\n        var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n        lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n        lineStringReplay.drawLineString(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var strokeStyle = style.getStroke();\n    if (strokeStyle) {\n        var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n        lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n        lineStringReplay.drawMultiLineString(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (strokeStyle || fillStyle) {\n        var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n        polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        polygonReplay.drawMultiPolygon(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var imageStyle = style.getImage();\n    var textStyle = style.getText();\n    /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n    var declutterImageWithText;\n    if (opt_declutterBuilderGroup) {\n        builderGroup = opt_declutterBuilderGroup;\n        declutterImageWithText =\n            imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n    }\n    if (imageStyle) {\n        if (imageStyle.getImageState() != ImageState.LOADED) {\n            return;\n        }\n        var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n        imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n        imageReplay.drawPoint(geometry, feature);\n    }\n    if (textStyle && textStyle.getText()) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, declutterImageWithText);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var imageStyle = style.getImage();\n    var textStyle = style.getText();\n    /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n    var declutterImageWithText;\n    if (opt_declutterBuilderGroup) {\n        builderGroup = opt_declutterBuilderGroup;\n        declutterImageWithText =\n            imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n    }\n    if (imageStyle) {\n        if (imageStyle.getImageState() != ImageState.LOADED) {\n            return;\n        }\n        var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n        imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n        imageReplay.drawMultiPoint(geometry, feature);\n    }\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, declutterImageWithText);\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (fillStyle || strokeStyle) {\n        var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n        polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        polygonReplay.drawPolygon(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle && textStyle.getText()) {\n        var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle);\n        textReplay.drawText(geometry, feature);\n    }\n}\n//# sourceMappingURL=vector.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport ExecutorGroup from '../../render/canvas/ExecutorGroup.js';\nimport ViewHint from '../../ViewHint.js';\nimport { HIT_DETECT_RESOLUTION, createHitDetectionImageData, hitDetect, } from '../../render/canvas/hitdetect.js';\nimport { apply, makeInverse, makeScale, toString as transformToString, } from '../../transform.js';\nimport { buffer, containsExtent, createEmpty, getWidth, intersects as intersectsExtent, wrapX as wrapExtentX, } from '../../extent.js';\nimport { cssOpacity } from '../../css.js';\nimport { defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature, } from '../vector.js';\nimport { equals } from '../../array.js';\nimport { fromUserExtent, getTransformFromProjections, getUserProjection, toUserExtent, toUserResolution, } from '../../proj.js';\nimport { getUid } from '../../util.js';\nimport { wrapX as wrapCoordinateX } from '../../coordinate.js';\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nvar CanvasVectorLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasVectorLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/BaseVector.js\").default} vectorLayer Vector layer.\n     */\n    function CanvasVectorLayerRenderer(vectorLayer) {\n        var _this = _super.call(this, vectorLayer) || this;\n        /** @private */\n        _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n        /**\n         * @type {boolean}\n         */\n        _this.animatingOrInteracting_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.dirty_ = false;\n        /**\n         * @type {ImageData}\n         */\n        _this.hitDetectionImageData_ = null;\n        /**\n         * @type {Array<import(\"../../Feature.js\").default>}\n         */\n        _this.renderedFeatures_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedResolution_ = NaN;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.renderedExtent_ = createEmpty();\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.wrappedRenderedExtent_ = createEmpty();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRotation_;\n        /**\n         * @private\n         * @type {import(\"../../coordinate\").Coordinate}\n         */\n        _this.renderedCenter_ = null;\n        /**\n         * @private\n         * @type {import(\"../../proj/Projection\").default}\n         */\n        _this.renderedProjection_ = null;\n        /**\n         * @private\n         * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n         */\n        _this.renderedRenderOrder_ = null;\n        /**\n         * @private\n         * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n         */\n        _this.replayGroup_ = null;\n        /**\n         * A new replay group had to be created by `prepareFrame()`\n         * @type {boolean}\n         */\n        _this.replayGroupChanged = true;\n        /**\n         * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n         */\n        _this.declutterExecutorGroup = null;\n        /**\n         * Clipping to be performed by `renderFrame()`\n         * @type {boolean}\n         */\n        _this.clipping = true;\n        return _this;\n    }\n    /**\n     * @param {ExecutorGroup} executorGroup Executor group.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n     */\n    CanvasVectorLayerRenderer.prototype.renderWorlds = function (executorGroup, frameState, opt_declutterTree) {\n        var extent = frameState.extent;\n        var viewState = frameState.viewState;\n        var center = viewState.center;\n        var resolution = viewState.resolution;\n        var projection = viewState.projection;\n        var rotation = viewState.rotation;\n        var projectionExtent = projection.getExtent();\n        var vectorSource = this.getLayer().getSource();\n        var pixelRatio = frameState.pixelRatio;\n        var viewHints = frameState.viewHints;\n        var snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n        var context = this.context;\n        var width = Math.round(frameState.size[0] * pixelRatio);\n        var height = Math.round(frameState.size[1] * pixelRatio);\n        var multiWorld = vectorSource.getWrapX() && projection.canWrapX();\n        var worldWidth = multiWorld ? getWidth(projectionExtent) : null;\n        var endWorld = multiWorld\n            ? Math.ceil((extent[2] - projectionExtent[2]) / worldWidth) + 1\n            : 1;\n        var world = multiWorld\n            ? Math.floor((extent[0] - projectionExtent[0]) / worldWidth)\n            : 0;\n        do {\n            var transform = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, world * worldWidth);\n            executorGroup.execute(context, 1, transform, rotation, snapToPixel, undefined, opt_declutterTree);\n        } while (++world < endWorld);\n    };\n    /**\n     * Render declutter items for this layer\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CanvasVectorLayerRenderer.prototype.renderDeclutter = function (frameState) {\n        if (this.declutterExecutorGroup) {\n            this.renderWorlds(this.declutterExecutorGroup, frameState, frameState.declutterTree);\n        }\n    };\n    /**\n     * Render the layer.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    CanvasVectorLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var pixelRatio = frameState.pixelRatio;\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        // set forward and inverse pixel transforms\n        makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        var canvasTransform = transformToString(this.pixelTransform);\n        this.useContainer(target, canvasTransform, layerState.opacity);\n        var context = this.context;\n        var canvas = context.canvas;\n        var replayGroup = this.replayGroup_;\n        var declutterExecutorGroup = this.declutterExecutorGroup;\n        if ((!replayGroup || replayGroup.isEmpty()) &&\n            (!declutterExecutorGroup || declutterExecutorGroup.isEmpty())) {\n            return null;\n        }\n        // resize and clear\n        var width = Math.round(frameState.size[0] * pixelRatio);\n        var height = Math.round(frameState.size[1] * pixelRatio);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n            if (canvas.style.transform !== canvasTransform) {\n                canvas.style.transform = canvasTransform;\n            }\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        this.preRender(context, frameState);\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        // clipped rendering if layer extent is set\n        var clipped = false;\n        var render = true;\n        if (layerState.extent && this.clipping) {\n            var layerExtent = fromUserExtent(layerState.extent, projection);\n            render = intersectsExtent(layerExtent, frameState.extent);\n            clipped = render && !containsExtent(layerExtent, frameState.extent);\n            if (clipped) {\n                this.clipUnrotated(context, frameState, layerExtent);\n            }\n        }\n        if (render) {\n            this.renderWorlds(replayGroup, frameState);\n        }\n        if (clipped) {\n            context.restore();\n        }\n        this.postRender(context, frameState);\n        var opacity = cssOpacity(layerState.opacity);\n        var container = this.container;\n        if (opacity !== container.style.opacity) {\n            container.style.opacity = opacity;\n        }\n        if (this.renderedRotation_ !== viewState.rotation) {\n            this.renderedRotation_ = viewState.rotation;\n            this.hitDetectionImageData_ = null;\n        }\n        return this.container;\n    };\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n     */\n    CanvasVectorLayerRenderer.prototype.getFeatures = function (pixel) {\n        return new Promise(\n        /**\n         * @param {function(Array<import(\"../../Feature\").default|import(\"../../render/Feature\").default>): void} resolve Resolver function.\n         * @this {CanvasVectorLayerRenderer}\n         */\n        function (resolve) {\n            if (!this.hitDetectionImageData_ && !this.animatingOrInteracting_) {\n                var size = [this.context.canvas.width, this.context.canvas.height];\n                apply(this.pixelTransform, size);\n                var center = this.renderedCenter_;\n                var resolution = this.renderedResolution_;\n                var rotation = this.renderedRotation_;\n                var projection = this.renderedProjection_;\n                var extent = this.wrappedRenderedExtent_;\n                var layer = this.getLayer();\n                var transforms = [];\n                var width = size[0] * HIT_DETECT_RESOLUTION;\n                var height = size[1] * HIT_DETECT_RESOLUTION;\n                transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, 0).slice());\n                var source = layer.getSource();\n                var projectionExtent = projection.getExtent();\n                if (source.getWrapX() &&\n                    projection.canWrapX() &&\n                    !containsExtent(projectionExtent, extent)) {\n                    var startX = extent[0];\n                    var worldWidth = getWidth(projectionExtent);\n                    var world = 0;\n                    var offsetX = void 0;\n                    while (startX < projectionExtent[0]) {\n                        --world;\n                        offsetX = worldWidth * world;\n                        transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n                        startX += worldWidth;\n                    }\n                    world = 0;\n                    startX = extent[2];\n                    while (startX > projectionExtent[2]) {\n                        ++world;\n                        offsetX = worldWidth * world;\n                        transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n                        startX -= worldWidth;\n                    }\n                }\n                this.hitDetectionImageData_ = createHitDetectionImageData(size, transforms, this.renderedFeatures_, layer.getStyleFunction(), extent, resolution, rotation);\n            }\n            resolve(hitDetect(pixel, this.renderedFeatures_, this.hitDetectionImageData_));\n        }.bind(this));\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    CanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        var _this = this;\n        if (!this.replayGroup_) {\n            return undefined;\n        }\n        var resolution = frameState.viewState.resolution;\n        var rotation = frameState.viewState.rotation;\n        var layer = this.getLayer();\n        /** @type {!Object<string, import(\"../Map.js\").HitMatch<T>|true>} */\n        var features = {};\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n         * @param {number} distanceSq The squared distance to the click position\n         * @return {T|undefined} Callback result.\n         */\n        var featureCallback = function (feature, geometry, distanceSq) {\n            var key = getUid(feature);\n            var match = features[key];\n            if (!match) {\n                if (distanceSq === 0) {\n                    features[key] = true;\n                    return callback(feature, layer, geometry);\n                }\n                matches.push((features[key] = {\n                    feature: feature,\n                    layer: layer,\n                    geometry: geometry,\n                    distanceSq: distanceSq,\n                    callback: callback,\n                }));\n            }\n            else if (match !== true && distanceSq < match.distanceSq) {\n                if (distanceSq === 0) {\n                    features[key] = true;\n                    matches.splice(matches.lastIndexOf(match), 1);\n                    return callback(feature, layer, geometry);\n                }\n                match.geometry = geometry;\n                match.distanceSq = distanceSq;\n            }\n            return undefined;\n        };\n        var result;\n        var executorGroups = [this.replayGroup_];\n        if (this.declutterExecutorGroup) {\n            executorGroups.push(this.declutterExecutorGroup);\n        }\n        executorGroups.some(function (executorGroup) {\n            return (result = executorGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, featureCallback, executorGroup === _this.declutterExecutorGroup &&\n                frameState.declutterTree\n                ? frameState.declutterTree.all().map(function (item) { return item.value; })\n                : null));\n        });\n        return result;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     */\n    CanvasVectorLayerRenderer.prototype.handleFontsChanged = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && this.replayGroup_) {\n            layer.changed();\n        }\n    };\n    /**\n     * Handle changes in image style state.\n     * @param {import(\"../../events/Event.js\").default} event Image style change event.\n     * @private\n     */\n    CanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n        this.renderIfReadyAndVisible();\n    };\n    /**\n     * Determine whether render should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    CanvasVectorLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var vectorLayer = this.getLayer();\n        var vectorSource = vectorLayer.getSource();\n        if (!vectorSource) {\n            return false;\n        }\n        var animating = frameState.viewHints[ViewHint.ANIMATING];\n        var interacting = frameState.viewHints[ViewHint.INTERACTING];\n        var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n        var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n        if ((!this.dirty_ && !updateWhileAnimating && animating) ||\n            (!updateWhileInteracting && interacting)) {\n            this.animatingOrInteracting_ = true;\n            return true;\n        }\n        this.animatingOrInteracting_ = false;\n        var frameStateExtent = frameState.extent;\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var resolution = viewState.resolution;\n        var pixelRatio = frameState.pixelRatio;\n        var vectorLayerRevision = vectorLayer.getRevision();\n        var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n        var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n        if (vectorLayerRenderOrder === undefined) {\n            vectorLayerRenderOrder = defaultRenderOrder;\n        }\n        var center = viewState.center.slice();\n        var extent = buffer(frameStateExtent, vectorLayerRenderBuffer * resolution);\n        var renderedExtent = extent.slice();\n        var loadExtents = [extent.slice()];\n        var projectionExtent = projection.getExtent();\n        if (vectorSource.getWrapX() &&\n            projection.canWrapX() &&\n            !containsExtent(projectionExtent, frameState.extent)) {\n            // For the replay group, we need an extent that intersects the real world\n            // (-180° to +180°). To support geometries in a coordinate range from -540°\n            // to +540°, we add at least 1 world width on each side of the projection\n            // extent. If the viewport is wider than the world, we need to add half of\n            // the viewport width to make sure we cover the whole viewport.\n            var worldWidth = getWidth(projectionExtent);\n            var gutter = Math.max(getWidth(extent) / 2, worldWidth);\n            extent[0] = projectionExtent[0] - gutter;\n            extent[2] = projectionExtent[2] + gutter;\n            wrapCoordinateX(center, projection);\n            var loadExtent = wrapExtentX(loadExtents[0], projection);\n            // If the extent crosses the date line, we load data for both edges of the worlds\n            if (loadExtent[0] < projectionExtent[0] &&\n                loadExtent[2] < projectionExtent[2]) {\n                loadExtents.push([\n                    loadExtent[0] + worldWidth,\n                    loadExtent[1],\n                    loadExtent[2] + worldWidth,\n                    loadExtent[3],\n                ]);\n            }\n            else if (loadExtent[0] > projectionExtent[0] &&\n                loadExtent[2] > projectionExtent[2]) {\n                loadExtents.push([\n                    loadExtent[0] - worldWidth,\n                    loadExtent[1],\n                    loadExtent[2] - worldWidth,\n                    loadExtent[3],\n                ]);\n            }\n        }\n        if (!this.dirty_ &&\n            this.renderedResolution_ == resolution &&\n            this.renderedRevision_ == vectorLayerRevision &&\n            this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n            containsExtent(this.wrappedRenderedExtent_, extent)) {\n            if (!equals(this.renderedExtent_, renderedExtent)) {\n                this.hitDetectionImageData_ = null;\n                this.renderedExtent_ = renderedExtent;\n            }\n            this.renderedCenter_ = center;\n            this.replayGroupChanged = false;\n            return true;\n        }\n        this.replayGroup_ = null;\n        this.dirty_ = false;\n        var replayGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n        var declutterBuilderGroup;\n        if (this.getLayer().getDeclutter()) {\n            declutterBuilderGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n        }\n        var userProjection = getUserProjection();\n        var userTransform;\n        if (userProjection) {\n            for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n                var extent_1 = loadExtents[i];\n                var userExtent_1 = toUserExtent(extent_1, projection);\n                vectorSource.loadFeatures(userExtent_1, toUserResolution(resolution, projection), userProjection);\n            }\n            userTransform = getTransformFromProjections(userProjection, projection);\n        }\n        else {\n            for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n                vectorSource.loadFeatures(loadExtents[i], resolution, projection);\n            }\n        }\n        var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n        var render = \n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         * @this {CanvasVectorLayerRenderer}\n         */\n        function (feature) {\n            var styles;\n            var styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n            if (styleFunction) {\n                styles = styleFunction(feature, resolution);\n            }\n            if (styles) {\n                var dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, userTransform, declutterBuilderGroup);\n                this.dirty_ = this.dirty_ || dirty;\n            }\n        }.bind(this);\n        var userExtent = toUserExtent(extent, projection);\n        /** @type {Array<import(\"../../Feature.js\").default>} */\n        var features = vectorSource.getFeaturesInExtent(userExtent);\n        if (vectorLayerRenderOrder) {\n            features.sort(vectorLayerRenderOrder);\n        }\n        for (var i = 0, ii = features.length; i < ii; ++i) {\n            render(features[i]);\n        }\n        this.renderedFeatures_ = features;\n        var replayGroupInstructions = replayGroup.finish();\n        var executorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), replayGroupInstructions, vectorLayer.getRenderBuffer());\n        if (declutterBuilderGroup) {\n            this.declutterExecutorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), declutterBuilderGroup.finish(), vectorLayer.getRenderBuffer());\n        }\n        this.renderedResolution_ = resolution;\n        this.renderedRevision_ = vectorLayerRevision;\n        this.renderedRenderOrder_ = vectorLayerRenderOrder;\n        this.renderedExtent_ = renderedExtent;\n        this.wrappedRenderedExtent_ = extent;\n        this.renderedCenter_ = center;\n        this.renderedProjection_ = projection;\n        this.replayGroup_ = executorGroup;\n        this.hitDetectionImageData_ = null;\n        this.replayGroupChanged = true;\n        return true;\n    };\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @param {number} squaredTolerance Squared render tolerance.\n     * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n     * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n     * @param {import(\"../../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n     * @param {import(\"../../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n     * @return {boolean} `true` if an image is loading.\n     */\n    CanvasVectorLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, builderGroup, opt_transform, opt_declutterBuilderGroup) {\n        if (!styles) {\n            return false;\n        }\n        var loading = false;\n        if (Array.isArray(styles)) {\n            for (var i = 0, ii = styles.length; i < ii; ++i) {\n                loading =\n                    renderFeature(builderGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup) || loading;\n            }\n        }\n        else {\n            loading = renderFeature(builderGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup);\n        }\n        return loading;\n    };\n    return CanvasVectorLayerRenderer;\n}(CanvasLayerRenderer));\nexport default CanvasVectorLayerRenderer;\n//# sourceMappingURL=VectorLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default} VectorSourceType\n * @extends {BaseVectorLayer<VectorSourceType, CanvasVectorLayerRenderer>}\n * @api\n */\nvar VectorLayer = /** @class */ (function (_super) {\n    __extends(VectorLayer, _super);\n    /**\n     * @param {import(\"./BaseVector.js\").Options<VectorSourceType>} [opt_options] Options.\n     */\n    function VectorLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    VectorLayer.prototype.createRenderer = function () {\n        return new CanvasVectorLayerRenderer(this);\n    };\n    return VectorLayer;\n}(BaseVectorLayer));\nexport default VectorLayer;\n//# sourceMappingURL=Vector.js.map","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","/**\n * @module ol/ViewProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    CENTER: 'center',\n    RESOLUTION: 'resolution',\n    ROTATION: 'rotation',\n};\n//# sourceMappingURL=ViewProperty.js.map","var global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar Object = global.Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : Object(it);\n} : Object;\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","/**\n * @module ol/layer/TileProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    PRELOAD: 'preload',\n    USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError',\n};\n//# sourceMappingURL=TileProperty.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseTile\n */\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport { assign } from '../obj.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source'|'change:preload'|'change:useInterimTilesOnError', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|\n *   'change:source'|'change:preload'|'change:useInterimTilesOnError'|import(\"../render/EventType\").LayerRenderEventTypes, Return>} BaseTileLayerOnSignature\n */\n/**\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {TileSourceType} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<TileSourceType, RendererType>}\n * @api\n */\nvar BaseTileLayer = /** @class */ (function (_super) {\n    __extends(BaseTileLayer, _super);\n    /**\n     * @param {Options<TileSourceType>} [opt_options] Tile layer options.\n     */\n    function BaseTileLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.preload;\n        delete baseOptions.useInterimTilesOnError;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {BaseTileLayerOnSignature<void>}\n         */\n        _this.un;\n        _this.setPreload(options.preload !== undefined ? options.preload : 0);\n        _this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined\n            ? options.useInterimTilesOnError\n            : true);\n        return _this;\n    }\n    /**\n     * Return the level as number to which we will preload tiles up to.\n     * @return {number} The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.getPreload = function () {\n        return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n    };\n    /**\n     * Set the level as number to which we will preload tiles up to.\n     * @param {number} preload The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.setPreload = function (preload) {\n        this.set(TileProperty.PRELOAD, preload);\n    };\n    /**\n     * Whether we use interim tiles on error.\n     * @return {boolean} Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.getUseInterimTilesOnError = function () {\n        return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n    };\n    /**\n     * Set whether we use interim tiles on error.\n     * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    BaseTileLayer.prototype.setUseInterimTilesOnError = function (useInterimTilesOnError) {\n        this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n    };\n    return BaseTileLayer;\n}(Layer));\nexport default BaseTileLayer;\n//# sourceMappingURL=BaseTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport CanvasLayerRenderer from './Layer.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport { IMAGE_SMOOTHING_DISABLED } from './common.js';\nimport { apply as applyTransform, compose as composeTransform, makeInverse, } from '../../transform.js';\nimport { assign } from '../../obj.js';\nimport { createEmpty, equals, getIntersection, getTopLeft, } from '../../extent.js';\nimport { cssOpacity } from '../../css.js';\nimport { fromUserExtent } from '../../proj.js';\nimport { getUid } from '../../util.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { toString as toTransformString } from '../../transform.js';\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nvar CanvasTileLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasTileLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default} tileLayer Tile layer.\n     */\n    function CanvasTileLayerRenderer(tileLayer) {\n        var _this = _super.call(this, tileLayer) || this;\n        /**\n         * Rendered extent has changed since the previous `renderFrame()` call\n         * @type {boolean}\n         */\n        _this.extentChanged = true;\n        /**\n         * @private\n         * @type {?import(\"../../extent.js\").Extent}\n         */\n        _this.renderedExtent_ = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedPixelRatio;\n        /**\n         * @protected\n         * @type {import(\"../../proj/Projection.js\").default}\n         */\n        _this.renderedProjection = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedRevision;\n        /**\n         * @protected\n         * @type {!Array<import(\"../../Tile.js\").default>}\n         */\n        _this.renderedTiles = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.newTiles_ = false;\n        /**\n         * @protected\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.tmpExtent = createEmpty();\n        /**\n         * @private\n         * @type {import(\"../../TileRange.js\").default}\n         */\n        _this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n        return _this;\n    }\n    /**\n     * @protected\n     * @param {import(\"../../Tile.js\").default} tile Tile.\n     * @return {boolean} Tile is drawable.\n     */\n    CanvasTileLayerRenderer.prototype.isDrawableTile = function (tile) {\n        var tileLayer = this.getLayer();\n        var tileState = tile.getState();\n        var useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n        return (tileState == TileState.LOADED ||\n            tileState == TileState.EMPTY ||\n            (tileState == TileState.ERROR && !useInterimTilesOnError));\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {!import(\"../../Tile.js\").default} Tile.\n     */\n    CanvasTileLayerRenderer.prototype.getTile = function (z, x, y, frameState) {\n        var pixelRatio = frameState.pixelRatio;\n        var projection = frameState.viewState.projection;\n        var tileLayer = this.getLayer();\n        var tileSource = tileLayer.getSource();\n        var tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n        if (tile.getState() == TileState.ERROR) {\n            if (!tileLayer.getUseInterimTilesOnError()) {\n                // When useInterimTilesOnError is false, we consider the error tile as loaded.\n                tile.setState(TileState.LOADED);\n            }\n            else if (tileLayer.getPreload() > 0) {\n                // Preloaded tiles for lower resolutions might have finished loading.\n                this.newTiles_ = true;\n            }\n        }\n        if (!this.isDrawableTile(tile)) {\n            tile = tile.getInterimTile();\n        }\n        return tile;\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../../Tile.js\").default} tile Tile.\n     * @return {boolean|void} If `false`, the tile will not be considered loaded.\n     */\n    CanvasTileLayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (this.isDrawableTile(tile)) {\n            return _super.prototype.loadedTileCallback.call(this, tiles, zoom, tile);\n        }\n        return false;\n    };\n    /**\n     * Determine whether render should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    CanvasTileLayerRenderer.prototype.prepareFrame = function (frameState) {\n        return !!this.getLayer().getSource();\n    };\n    /**\n     * Render the layer.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    CanvasTileLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var viewResolution = viewState.resolution;\n        var viewCenter = viewState.center;\n        var rotation = viewState.rotation;\n        var pixelRatio = frameState.pixelRatio;\n        var tileLayer = this.getLayer();\n        var tileSource = tileLayer.getSource();\n        var sourceRevision = tileSource.getRevision();\n        var tileGrid = tileSource.getTileGridForProjection(projection);\n        var z = tileGrid.getZForResolution(viewResolution, tileSource.zDirection);\n        var tileResolution = tileGrid.getResolution(z);\n        var extent = frameState.extent;\n        var layerExtent = layerState.extent && fromUserExtent(layerState.extent, projection);\n        if (layerExtent) {\n            extent = getIntersection(extent, fromUserExtent(layerState.extent, projection));\n        }\n        var tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n        // desired dimensions of the canvas in pixels\n        var width = Math.round(frameState.size[0] * tilePixelRatio);\n        var height = Math.round(frameState.size[1] * tilePixelRatio);\n        if (rotation) {\n            var size = Math.round(Math.sqrt(width * width + height * height));\n            width = size;\n            height = size;\n        }\n        var dx = (tileResolution * width) / 2 / tilePixelRatio;\n        var dy = (tileResolution * height) / 2 / tilePixelRatio;\n        var canvasExtent = [\n            viewCenter[0] - dx,\n            viewCenter[1] - dy,\n            viewCenter[0] + dx,\n            viewCenter[1] + dy,\n        ];\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n        /**\n         * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n         */\n        var tilesToDrawByZ = {};\n        tilesToDrawByZ[z] = {};\n        var findLoadedTiles = this.createLoadedTileFinder(tileSource, projection, tilesToDrawByZ);\n        var tmpExtent = this.tmpExtent;\n        var tmpTileRange = this.tmpTileRange_;\n        this.newTiles_ = false;\n        for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n            for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                var tile = this.getTile(z, x, y, frameState);\n                if (this.isDrawableTile(tile)) {\n                    var uid = getUid(this);\n                    if (tile.getState() == TileState.LOADED) {\n                        tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n                        var inTransition = tile.inTransition(uid);\n                        if (!this.newTiles_ &&\n                            (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n                            this.newTiles_ = true;\n                        }\n                    }\n                    if (tile.getAlpha(uid, frameState.time) === 1) {\n                        // don't look for alt tiles if alpha is 1\n                        continue;\n                    }\n                }\n                var childTileRange = tileGrid.getTileCoordChildTileRange(tile.tileCoord, tmpTileRange, tmpExtent);\n                var covered = false;\n                if (childTileRange) {\n                    covered = findLoadedTiles(z + 1, childTileRange);\n                }\n                if (!covered) {\n                    tileGrid.forEachTileCoordParentTileRange(tile.tileCoord, findLoadedTiles, tmpTileRange, tmpExtent);\n                }\n            }\n        }\n        var canvasScale = tileResolution / viewResolution;\n        // set forward and inverse pixel transforms\n        composeTransform(this.pixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / tilePixelRatio, 1 / tilePixelRatio, rotation, -width / 2, -height / 2);\n        var canvasTransform = toTransformString(this.pixelTransform);\n        this.useContainer(target, canvasTransform, layerState.opacity, this.getBackground(frameState));\n        var context = this.context;\n        var canvas = context.canvas;\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        // set scale transform for calculating tile positions on the canvas\n        composeTransform(this.tempTransform, width / 2, height / 2, canvasScale, canvasScale, 0, -width / 2, -height / 2);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        if (layerExtent) {\n            this.clipUnrotated(context, frameState, layerExtent);\n        }\n        if (!tileSource.getInterpolate()) {\n            assign(context, IMAGE_SMOOTHING_DISABLED);\n        }\n        this.preRender(context, frameState);\n        this.renderedTiles.length = 0;\n        /** @type {Array<number>} */\n        var zs = Object.keys(tilesToDrawByZ).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        var clips, clipZs, currentClip;\n        if (layerState.opacity === 1 &&\n            (!this.containerReused ||\n                tileSource.getOpaque(frameState.viewState.projection))) {\n            zs = zs.reverse();\n        }\n        else {\n            clips = [];\n            clipZs = [];\n        }\n        for (var i = zs.length - 1; i >= 0; --i) {\n            var currentZ = zs[i];\n            var currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n            var currentResolution = tileGrid.getResolution(currentZ);\n            var currentScale = currentResolution / tileResolution;\n            var dx_1 = currentTilePixelSize[0] * currentScale * canvasScale;\n            var dy_1 = currentTilePixelSize[1] * currentScale * canvasScale;\n            var originTileCoord = tileGrid.getTileCoordForCoordAndZ(getTopLeft(canvasExtent), currentZ);\n            var originTileExtent = tileGrid.getTileCoordExtent(originTileCoord);\n            var origin_1 = applyTransform(this.tempTransform, [\n                (tilePixelRatio * (originTileExtent[0] - canvasExtent[0])) /\n                    tileResolution,\n                (tilePixelRatio * (canvasExtent[3] - originTileExtent[3])) /\n                    tileResolution,\n            ]);\n            var tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n            var tilesToDraw = tilesToDrawByZ[currentZ];\n            for (var tileCoordKey in tilesToDraw) {\n                var tile = /** @type {import(\"../../ImageTile.js\").default} */ (tilesToDraw[tileCoordKey]);\n                var tileCoord = tile.tileCoord;\n                // Calculate integer positions and sizes so that tiles align\n                var xIndex = originTileCoord[1] - tileCoord[1];\n                var nextX = Math.round(origin_1[0] - (xIndex - 1) * dx_1);\n                var yIndex = originTileCoord[2] - tileCoord[2];\n                var nextY = Math.round(origin_1[1] - (yIndex - 1) * dy_1);\n                var x = Math.round(origin_1[0] - xIndex * dx_1);\n                var y = Math.round(origin_1[1] - yIndex * dy_1);\n                var w = nextX - x;\n                var h = nextY - y;\n                var transition = z === currentZ;\n                var inTransition = transition && tile.getAlpha(getUid(this), frameState.time) !== 1;\n                if (!inTransition) {\n                    if (clips) {\n                        // Clip mask for regions in this tile that already filled by a higher z tile\n                        context.save();\n                        currentClip = [x, y, x + w, y, x + w, y + h, x, y + h];\n                        for (var i_1 = 0, ii = clips.length; i_1 < ii; ++i_1) {\n                            if (z !== currentZ && currentZ < clipZs[i_1]) {\n                                var clip = clips[i_1];\n                                context.beginPath();\n                                // counter-clockwise (outer ring) for current tile\n                                context.moveTo(currentClip[0], currentClip[1]);\n                                context.lineTo(currentClip[2], currentClip[3]);\n                                context.lineTo(currentClip[4], currentClip[5]);\n                                context.lineTo(currentClip[6], currentClip[7]);\n                                // clockwise (inner ring) for higher z tile\n                                context.moveTo(clip[6], clip[7]);\n                                context.lineTo(clip[4], clip[5]);\n                                context.lineTo(clip[2], clip[3]);\n                                context.lineTo(clip[0], clip[1]);\n                                context.clip();\n                            }\n                        }\n                        clips.push(currentClip);\n                        clipZs.push(currentZ);\n                    }\n                    else {\n                        context.clearRect(x, y, w, h);\n                    }\n                }\n                this.drawTileImage(tile, frameState, x, y, w, h, tileGutter, transition);\n                if (clips && !inTransition) {\n                    context.restore();\n                    this.renderedTiles.unshift(tile);\n                }\n                else {\n                    this.renderedTiles.push(tile);\n                }\n                this.updateUsedTiles(frameState.usedTiles, tileSource, tile);\n            }\n        }\n        this.renderedRevision = sourceRevision;\n        this.renderedResolution = tileResolution;\n        this.extentChanged =\n            !this.renderedExtent_ || !equals(this.renderedExtent_, canvasExtent);\n        this.renderedExtent_ = canvasExtent;\n        this.renderedPixelRatio = pixelRatio;\n        this.renderedProjection = projection;\n        this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio, projection, extent, z, tileLayer.getPreload());\n        this.scheduleExpireCache(frameState, tileSource);\n        this.postRender(context, frameState);\n        if (layerState.extent) {\n            context.restore();\n        }\n        if (canvasTransform !== canvas.style.transform) {\n            canvas.style.transform = canvasTransform;\n        }\n        var opacity = cssOpacity(layerState.opacity);\n        var container = this.container;\n        if (opacity !== container.style.opacity) {\n            container.style.opacity = opacity;\n        }\n        return this.container;\n    };\n    /**\n     * @param {import(\"../../ImageTile.js\").default} tile Tile.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} x Left of the tile.\n     * @param {number} y Top of the tile.\n     * @param {number} w Width of the tile.\n     * @param {number} h Height of the tile.\n     * @param {number} gutter Tile gutter.\n     * @param {boolean} transition Apply an alpha transition.\n     */\n    CanvasTileLayerRenderer.prototype.drawTileImage = function (tile, frameState, x, y, w, h, gutter, transition) {\n        var image = this.getTileImage(tile);\n        if (!image) {\n            return;\n        }\n        var uid = getUid(this);\n        var alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n        var alphaChanged = alpha !== this.context.globalAlpha;\n        if (alphaChanged) {\n            this.context.save();\n            this.context.globalAlpha = alpha;\n        }\n        this.context.drawImage(image, gutter, gutter, image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n        if (alphaChanged) {\n            this.context.restore();\n        }\n        if (alpha !== 1) {\n            frameState.animate = true;\n        }\n        else if (transition) {\n            tile.endTransition(uid);\n        }\n    };\n    /**\n     * @return {HTMLCanvasElement} Image\n     */\n    CanvasTileLayerRenderer.prototype.getImage = function () {\n        var context = this.context;\n        return context ? context.canvas : null;\n    };\n    /**\n     * Get the image from a tile.\n     * @param {import(\"../../ImageTile.js\").default} tile Tile.\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.getTileImage = function (tile) {\n        return tile.getImage();\n    };\n    /**\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.scheduleExpireCache = function (frameState, tileSource) {\n        if (tileSource.canExpireCache()) {\n            /**\n             * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n             * @param {import(\"../../PluggableMap.js\").default} map Map.\n             * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n             */\n            var postRenderFunction = function (tileSource, map, frameState) {\n                var tileSourceKey = getUid(tileSource);\n                if (tileSourceKey in frameState.usedTiles) {\n                    tileSource.expireCache(frameState.viewState.projection, frameState.usedTiles[tileSourceKey]);\n                }\n            }.bind(null, tileSource);\n            frameState.postRenderFunctions.push(\n            /** @type {import(\"../../PluggableMap.js\").PostRenderFunction} */ (postRenderFunction));\n        }\n    };\n    /**\n     * @param {!Object<string, !Object<string, boolean>>} usedTiles Used tiles.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @param {import('../../Tile.js').default} tile Tile.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.updateUsedTiles = function (usedTiles, tileSource, tile) {\n        // FIXME should we use tilesToDrawByZ instead?\n        var tileSourceKey = getUid(tileSource);\n        if (!(tileSourceKey in usedTiles)) {\n            usedTiles[tileSourceKey] = {};\n        }\n        usedTiles[tileSourceKey][tile.getKey()] = true;\n    };\n    /**\n     * Manage tile pyramid.\n     * This function performs a number of functions related to the tiles at the\n     * current zoom and lower zoom levels:\n     * - registers idle tiles in frameState.wantedTiles so that they are not\n     *   discarded by the tile queue\n     * - enqueues missing tiles\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n     * @param {import(\"../../extent.js\").Extent} extent Extent.\n     * @param {number} currentZ Current Z.\n     * @param {number} preload Load low resolution tiles up to 'preload' levels.\n     * @param {function(import(\"../../Tile.js\").default):void} [opt_tileCallback] Tile callback.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.manageTilePyramid = function (frameState, tileSource, tileGrid, pixelRatio, projection, extent, currentZ, preload, opt_tileCallback) {\n        var tileSourceKey = getUid(tileSource);\n        if (!(tileSourceKey in frameState.wantedTiles)) {\n            frameState.wantedTiles[tileSourceKey] = {};\n        }\n        var wantedTiles = frameState.wantedTiles[tileSourceKey];\n        var tileQueue = frameState.tileQueue;\n        var minZoom = tileGrid.getMinZoom();\n        var tileCount = 0;\n        var tile, tileRange, tileResolution, x, y, z;\n        for (z = minZoom; z <= currentZ; ++z) {\n            tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n            tileResolution = tileGrid.getResolution(z);\n            for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n                for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                    if (currentZ - z <= preload) {\n                        ++tileCount;\n                        tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n                        if (tile.getState() == TileState.IDLE) {\n                            wantedTiles[tile.getKey()] = true;\n                            if (!tileQueue.isKeyQueued(tile.getKey())) {\n                                tileQueue.enqueue([\n                                    tile,\n                                    tileSourceKey,\n                                    tileGrid.getTileCoordCenter(tile.tileCoord),\n                                    tileResolution,\n                                ]);\n                            }\n                        }\n                        if (opt_tileCallback !== undefined) {\n                            opt_tileCallback(tile);\n                        }\n                    }\n                    else {\n                        tileSource.useTile(z, x, y, projection);\n                    }\n                }\n            }\n        }\n        tileSource.updateCacheSize(tileCount, projection);\n    };\n    return CanvasTileLayerRenderer;\n}(CanvasLayerRenderer));\n/**\n * @function\n * @return {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\nexport default CanvasTileLayerRenderer;\n//# sourceMappingURL=TileLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Tile\n */\nimport BaseTileLayer from './BaseTile.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @extends BaseTileLayer<TileSourceType, CanvasTileLayerRenderer>\n * @api\n */\nvar TileLayer = /** @class */ (function (_super) {\n    __extends(TileLayer, _super);\n    /**\n     * @param {import(\"./BaseTile.js\").Options<TileSourceType>} [opt_options] Tile layer options.\n     */\n    function TileLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    TileLayer.prototype.createRenderer = function () {\n        return new CanvasTileLayerRenderer(this);\n    };\n    return TileLayer;\n}(BaseTileLayer));\nexport default TileLayer;\n//# sourceMappingURL=Tile.js.map","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar TypeError = global.TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/**\n * @module ol/ViewHint\n */\n/**\n * @enum {number}\n */\nexport default {\n    ANIMATING: 0,\n    INTERACTING: 1,\n};\n//# sourceMappingURL=ViewHint.js.map","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","/**\n * @module ol/geom/GeometryLayout\n */\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n    XY: 'XY',\n    XYZ: 'XYZ',\n    XYM: 'XYM',\n    XYZM: 'XYZM',\n};\n//# sourceMappingURL=GeometryLayout.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { abstract } from '../util.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\n/**\n * A css color, or a function called with a view resolution returning a css color.\n *\n * @typedef {string|function(number):string} BackgroundColor\n * @api\n */\n/**\n * @typedef {import(\"../ObjectEventType\").Types|'change:extent'|'change:maxResolution'|'change:maxZoom'|\n *    'change:minResolution'|'change:minZoom'|'change:opacity'|'change:visible'|'change:zIndex'} BaseLayerObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<BaseLayerObjectEventTypes, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|BaseLayerObjectEventTypes, Return>} BaseLayerOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {BaseLayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @type {BackgroundColor|false}\n         * @private\n         */\n        _this.background_ = options.background;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        if (typeof options.properties === 'object') {\n            delete properties.properties;\n            assign(properties, options.properties);\n        }\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ =\n            properties.className !== undefined ? options.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * Get the background for this layer.\n     * @return {BackgroundColor|false} Layer background.\n     */\n    BaseLayer.prototype.getBackground = function () {\n        return this.background_;\n    };\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean} [opt_managed] Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ ||\n            /** @type {?} */ ({\n                layer: this,\n                managed: opt_managed === undefined ? true : opt_managed,\n            });\n        var zIndex = this.getZIndex();\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.sourceState = this.getSourceState();\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = zIndex === undefined && !state.managed ? Infinity : zIndex;\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Sets the backgrlound color.\n     * @param {BackgroundColor} [opt_background] Background color.\n     */\n    BaseLayer.prototype.setBackground = function (opt_background) {\n        this.background_ = opt_background;\n        this.changed();\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    /**\n     * Clean up.\n     */\n    BaseLayer.prototype.disposeInternal = function () {\n        if (this.state_) {\n            this.state_.layer = null;\n            this.state_ = null;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.20.2',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2022 Denis Pushkarev (zloirock.ru)'\n});\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","/**\n * @module ol/functions\n */\nimport { equals as arrayEquals } from './array.js';\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n    return true;\n}\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n    return false;\n}\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() { }\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n    var called = false;\n    /** @type {ReturnType} */\n    var lastResult;\n    /** @type {Array<any>} */\n    var lastArgs;\n    var lastThis;\n    return function () {\n        var nextArgs = Array.prototype.slice.call(arguments);\n        if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n            called = true;\n            lastThis = this;\n            lastArgs = nextArgs;\n            lastResult = fn.apply(this, arguments);\n        }\n        return lastResult;\n    };\n}\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n    function promiseGetter() {\n        var value;\n        try {\n            value = getter();\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n        if (value instanceof Promise) {\n            return value;\n        }\n        return Promise.resolve(value);\n    }\n    return promiseGetter();\n}\n//# sourceMappingURL=functions.js.map","/**\n * @module ol/structs/RBush\n */\nimport RBush_ from 'rbush';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX MinX.\n * @property {number} minY MinY.\n * @property {number} maxX MaxX.\n * @property {number} maxY MaxY.\n * @property {Object} [value] Value.\n */\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nvar RBush = /** @class */ (function () {\n    /**\n     * @param {number} [opt_maxEntries] Max entries.\n     */\n    function RBush(opt_maxEntries) {\n        /**\n         * @private\n         */\n        this.rbush_ = new RBush_(opt_maxEntries);\n        /**\n         * A mapping between the objects added to this rbush wrapper\n         * and the objects that are actually added to the internal rbush.\n         * @private\n         * @type {Object<string, Entry>}\n         */\n        this.items_ = {};\n    }\n    /**\n     * Insert a value into the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.insert = function (extent, value) {\n        /** @type {Entry} */\n        var item = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n            value: value,\n        };\n        this.rbush_.insert(item);\n        this.items_[getUid(value)] = item;\n    };\n    /**\n     * Bulk-insert values into the RBush.\n     * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n     * @param {Array<T>} values Values.\n     */\n    RBush.prototype.load = function (extents, values) {\n        var items = new Array(values.length);\n        for (var i = 0, l = values.length; i < l; i++) {\n            var extent = extents[i];\n            var value = values[i];\n            /** @type {Entry} */\n            var item = {\n                minX: extent[0],\n                minY: extent[1],\n                maxX: extent[2],\n                maxY: extent[3],\n                value: value,\n            };\n            items[i] = item;\n            this.items_[getUid(value)] = item;\n        }\n        this.rbush_.load(items);\n    };\n    /**\n     * Remove a value from the RBush.\n     * @param {T} value Value.\n     * @return {boolean} Removed.\n     */\n    RBush.prototype.remove = function (value) {\n        var uid = getUid(value);\n        // get the object in which the value was wrapped when adding to the\n        // internal rbush. then use that object to do the removal.\n        var item = this.items_[uid];\n        delete this.items_[uid];\n        return this.rbush_.remove(item) !== null;\n    };\n    /**\n     * Update the extent of a value in the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.update = function (extent, value) {\n        var item = this.items_[getUid(value)];\n        var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n        if (!equals(bbox, extent)) {\n            this.remove(value);\n            this.insert(extent, value);\n        }\n    };\n    /**\n     * Return all values in the RBush.\n     * @return {Array<T>} All.\n     */\n    RBush.prototype.getAll = function () {\n        var items = this.rbush_.all();\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Return all values in the given extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<T>} All in extent.\n     */\n    RBush.prototype.getInExtent = function (extent) {\n        /** @type {Entry} */\n        var bbox = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n        };\n        var items = this.rbush_.search(bbox);\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Calls a callback function with each value in the tree.\n     * If the callback returns a truthy value, this value is returned without\n     * checking the rest of the tree.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach = function (callback) {\n        return this.forEach_(this.getAll(), callback);\n    };\n    /**\n     * Calls a callback function with each value in the provided extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEachInExtent = function (extent, callback) {\n        return this.forEach_(this.getInExtent(extent), callback);\n    };\n    /**\n     * @param {Array<T>} values Values.\n     * @param {function(T): *} callback Callback.\n     * @private\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach_ = function (values, callback) {\n        var result;\n        for (var i = 0, l = values.length; i < l; i++) {\n            result = callback(values[i]);\n            if (result) {\n                return result;\n            }\n        }\n        return result;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    RBush.prototype.isEmpty = function () {\n        return isEmpty(this.items_);\n    };\n    /**\n     * Remove all values from the RBush.\n     */\n    RBush.prototype.clear = function () {\n        this.rbush_.clear();\n        this.items_ = {};\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    RBush.prototype.getExtent = function (opt_extent) {\n        var data = this.rbush_.toJSON();\n        return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n    };\n    /**\n     * @param {RBush} rbush R-Tree.\n     */\n    RBush.prototype.concat = function (rbush) {\n        this.rbush_.load(rbush.rbush_.all());\n        for (var i in rbush.items_) {\n            this.items_[i] = rbush.items_[i];\n        }\n    };\n    return RBush;\n}());\nexport default RBush;\n//# sourceMappingURL=RBush.js.map","/**\n * @module ol/loadingstrategy\n */\nimport { fromUserExtent, fromUserResolution, toUserExtent } from './proj.js';\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n    return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n    return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n        var z = tileGrid.getZForResolution(fromUserResolution(resolution, projection));\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(fromUserExtent(extent, projection), z);\n        /** @type {Array<import(\"./extent.js\").Extent>} */\n        var extents = [];\n        /** @type {import(\"./tilecoord.js\").TileCoord} */\n        var tileCoord = [z, 0, 0];\n        for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n            for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n                extents.push(toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection));\n            }\n        }\n        return extents;\n    });\n}\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/format/FormatType\n */\n/**\n * @enum {string}\n */\nexport default {\n    ARRAY_BUFFER: 'arraybuffer',\n    JSON: 'json',\n    TEXT: 'text',\n    XML: 'xml',\n};\n//# sourceMappingURL=FormatType.js.map","/**\n * @module ol/featureloader\n */\nimport FormatType from './format/FormatType.js';\nimport { VOID } from './functions.js';\n/**\n *\n * @type {boolean}\n * @private\n */\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<import(\"./Feature.js\").default>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\nexport function loadFeaturesXhr(url, format, extent, resolution, projection, success, failure) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n    if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n    }\n    xhr.withCredentials = withCredentials;\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    xhr.onload = function (event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || (xhr.status >= 200 && xhr.status < 300)) {\n            var type = format.getType();\n            /** @type {Document|Node|Object|string|undefined} */\n            var source = void 0;\n            if (type == FormatType.JSON || type == FormatType.TEXT) {\n                source = xhr.responseText;\n            }\n            else if (type == FormatType.XML) {\n                source = xhr.responseXML;\n                if (!source) {\n                    source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                }\n            }\n            else if (type == FormatType.ARRAY_BUFFER) {\n                source = /** @type {ArrayBuffer} */ (xhr.response);\n            }\n            if (source) {\n                success(\n                /** @type {Array<import(\"./Feature.js\").default>} */\n                (format.readFeatures(source, {\n                    extent: extent,\n                    featureProjection: projection,\n                })), format.readProjection(source));\n            }\n            else {\n                failure();\n            }\n        }\n        else {\n            failure();\n        }\n    };\n    /**\n     * @private\n     */\n    xhr.onerror = failure;\n    xhr.send();\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @param {function(Array<import(\"./Feature.js\").default>): void} [success] Success\n     *      Function called when loading succeeded.\n     * @param {function(): void} [failure] Failure\n     *      Function called when loading failed.\n     * @this {import(\"./source/Vector\").default}\n     */\n    return function (extent, resolution, projection, success, failure) {\n        var source = /** @type {import(\"./source/Vector\").default} */ (this);\n        loadFeaturesXhr(url, format, extent, resolution, projection, \n        /**\n         * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n         * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n         * projection.\n         */\n        function (features, dataProjection) {\n            source.addFeatures(features);\n            if (success !== undefined) {\n                success(features);\n            }\n        }, \n        /* FIXME handle error */ failure ? failure : VOID);\n    };\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n    withCredentials = xhrWithCredentials;\n}\n//# sourceMappingURL=featureloader.js.map","/**\n * @module ol/source/Vector\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RBush from '../structs/RBush.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { assert } from '../asserts.js';\nimport { containsExtent, equals } from '../extent.js';\nimport { extend } from '../array.js';\nimport { getUid } from '../util.js';\nimport { getValues, isEmpty } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { xhr } from '../featureloader.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number, import(\"../proj/Projection.js\").default): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSourceEvent = /** @class */ (function (_super) {\n    __extends(VectorSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Feature.js\").default<Geometry>} [opt_feature] Feature.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} [opt_features] Features.\n     */\n    function VectorSourceEvent(type, opt_feature, opt_features) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The added or removed feature for the `ADDFEATURE` and `REMOVEFEATURE` events, `undefined` otherwise.\n         * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n         * @api\n         */\n        _this.feature = opt_feature;\n        /**\n         * The loaded features for the `FEATURESLOADED` event, `undefined` otherwise.\n         * @type {Array<import(\"../Feature.js\").default<Geometry>>|undefined}\n         * @api\n         */\n        _this.features = opt_features;\n        return _this;\n    }\n    return VectorSourceEvent;\n}(Event));\nexport { VectorSourceEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./VectorEventType\").VectorSourceEventTypes, VectorSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./VectorEventType\").VectorSourceEventTypes, Return>} VectorSourceOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader. The `'featuresloadend'` and `'featuresloaderror'` events\n * will only fire if the `success` and `failure` callbacks are used.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection, success, failure) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *        failure();\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          var features = vectorSource.getFormat().readFeatures(xhr.responseText);\n *          vectorSource.addFeatures(features);\n *          success(features);\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy.all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader.xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy.all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSource = /** @class */ (function (_super) {\n    __extends(VectorSource, _super);\n    /**\n     * @param {Options} [opt_options] Vector source options.\n     */\n    function VectorSource(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: undefined,\n            state: SourceState.READY,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n        }) || this;\n        /***\n         * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {VectorSourceOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {import(\"../featureloader.js\").FeatureLoader}\n         */\n        _this.loader_ = VOID;\n        /**\n         * @private\n         * @type {import(\"../format/Feature.js\").default|undefined}\n         */\n        _this.format_ = options.format;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n        /**\n         * @private\n         * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n         */\n        _this.url_ = options.url;\n        if (options.loader !== undefined) {\n            _this.loader_ = options.loader;\n        }\n        else if (_this.url_ !== undefined) {\n            assert(_this.format_, 7); // `format` must be set when `url` is set\n            // create a XHR feature loader for \"url\" and \"format\"\n            _this.loader_ = xhr(_this.url_, \n            /** @type {import(\"../format/Feature.js\").default} */ (_this.format_));\n        }\n        /**\n         * @private\n         * @type {LoadingStrategy}\n         */\n        _this.strategy_ =\n            options.strategy !== undefined ? options.strategy : allStrategy;\n        var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n        /**\n         * @private\n         * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n        /**\n         * @private\n         * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n         */\n        _this.loadedExtentsRtree_ = new RBush();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.loadingExtentsCount_ = 0;\n        /**\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.nullGeometryFeatures_ = {};\n        /**\n         * A lookup of features by id (the return from feature.getId()).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.idIndex_ = {};\n        /**\n         * A lookup of features by uid (using getUid(feature)).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.uidIndex_ = {};\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.featureChangeKeys_ = {};\n        /**\n         * @private\n         * @type {Collection<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresCollection_ = null;\n        var collection, features;\n        if (Array.isArray(options.features)) {\n            features = options.features;\n        }\n        else if (options.features) {\n            collection = options.features;\n            features = collection.getArray();\n        }\n        if (!useSpatialIndex && collection === undefined) {\n            collection = new Collection(features);\n        }\n        if (features !== undefined) {\n            _this.addFeaturesInternal(features);\n        }\n        if (collection !== undefined) {\n            _this.bindFeaturesCollection_(collection);\n        }\n        return _this;\n    }\n    /**\n     * Add a single feature to the source.  If you want to add a batch of features\n     * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n     * instead. A feature will not be added to the source if feature with\n     * the same id is already there. The reason for this behavior is to avoid\n     * feature duplication when using bbox or tile loading strategies.\n     * Note: this also applies if an {@link module:ol/Collection} is used for features,\n     * meaning that if a feature with a duplicate id is added in the collection, it will\n     * be removed from it right away.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n     * @api\n     */\n    VectorSource.prototype.addFeature = function (feature) {\n        this.addFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Add a feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.addFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        if (!this.addToIndex_(featureKey, feature)) {\n            if (this.featuresCollection_) {\n                this.featuresCollection_.remove(feature);\n            }\n            return;\n        }\n        this.setupChangeEvents_(featureKey, feature);\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            var extent = geometry.getExtent();\n            if (this.featuresRtree_) {\n                this.featuresRtree_.insert(extent, feature);\n            }\n        }\n        else {\n            this.nullGeometryFeatures_[featureKey] = feature;\n        }\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @private\n     */\n    VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n        this.featureChangeKeys_[featureKey] = [\n            listen(feature, EventType.CHANGE, this.handleFeatureChange_, this),\n            listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this),\n        ];\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} The feature is \"valid\", in the sense that it is also a\n     *     candidate for insertion into the Rtree.\n     * @private\n     */\n    VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n        var valid = true;\n        var id = feature.getId();\n        if (id !== undefined) {\n            if (!(id.toString() in this.idIndex_)) {\n                this.idIndex_[id.toString()] = feature;\n            }\n            else {\n                valid = false;\n            }\n        }\n        if (valid) {\n            assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n            this.uidIndex_[featureKey] = feature;\n        }\n        return valid;\n    };\n    /**\n     * Add a batch of features to the source.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n     * @api\n     */\n    VectorSource.prototype.addFeatures = function (features) {\n        this.addFeaturesInternal(features);\n        this.changed();\n    };\n    /**\n     * Add features without firing a `change` event.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n     * @protected\n     */\n    VectorSource.prototype.addFeaturesInternal = function (features) {\n        var extents = [];\n        var newFeatures = [];\n        var geometryFeatures = [];\n        for (var i = 0, length_1 = features.length; i < length_1; i++) {\n            var feature = features[i];\n            var featureKey = getUid(feature);\n            if (this.addToIndex_(featureKey, feature)) {\n                newFeatures.push(feature);\n            }\n        }\n        for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n            var feature = newFeatures[i];\n            var featureKey = getUid(feature);\n            this.setupChangeEvents_(featureKey, feature);\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                var extent = geometry.getExtent();\n                extents.push(extent);\n                geometryFeatures.push(feature);\n            }\n            else {\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.load(extents, geometryFeatures);\n        }\n        for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n            this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n        }\n    };\n    /**\n     * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n     * @private\n     */\n    VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n        var modifyingCollection = false;\n        this.addEventListener(VectorEventType.ADDFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.push(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        this.addEventListener(VectorEventType.REMOVEFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.remove(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        collection.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.addFeature(\n                /** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        collection.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.removeFeature(\n                /** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        this.featuresCollection_ = collection;\n    };\n    /**\n     * Remove all features from the source.\n     * @param {boolean} [opt_fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#event:removefeature removefeature} events.\n     * @api\n     */\n    VectorSource.prototype.clear = function (opt_fast) {\n        if (opt_fast) {\n            for (var featureId in this.featureChangeKeys_) {\n                var keys = this.featureChangeKeys_[featureId];\n                keys.forEach(unlistenByKey);\n            }\n            if (!this.featuresCollection_) {\n                this.featureChangeKeys_ = {};\n                this.idIndex_ = {};\n                this.uidIndex_ = {};\n            }\n        }\n        else {\n            if (this.featuresRtree_) {\n                var removeAndIgnoreReturn = function (feature) {\n                    this.removeFeatureInternal(feature);\n                }.bind(this);\n                this.featuresRtree_.forEach(removeAndIgnoreReturn);\n                for (var id in this.nullGeometryFeatures_) {\n                    this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n                }\n            }\n        }\n        if (this.featuresCollection_) {\n            this.featuresCollection_.clear();\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.clear();\n        }\n        this.nullGeometryFeatures_ = {};\n        var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n        this.dispatchEvent(clearEvent);\n        this.changed();\n    };\n    /**\n     * Iterate through all features on the source, calling the provided callback\n     * with each one.  If the callback returns any \"truthy\" value, iteration will\n     * stop and the function will return the same value.\n     * Note: this function only iterate through the feature that have a defined geometry.\n     *\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     on the source.  Return a truthy value to stop iteration.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeature = function (callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEach(callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometries contain the provided\n     * coordinate, calling the callback with each feature.  If the callback returns\n     * a \"truthy\" value, iteration will stop and the function will return the same\n     * value.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose goemetry contains the provided coordinate.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     */\n    VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n        var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n        return this.forEachFeatureInExtent(extent, function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsCoordinate(coordinate)) {\n                return callback(feature);\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    /**\n     * Iterate through all features whose bounding box intersects the provided\n     * extent (note that the feature's geometry may not intersect the extent),\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you are interested in features whose geometry intersects an extent, call\n     * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n     *\n     * When `useSpatialIndex` is set to false, this method will loop through all\n     * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose bounding box intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEachInExtent(extent, callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometry intersects the provided extent,\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you only want to test for bounding box intersection, call the\n     * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose geometry intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n        return this.forEachFeatureInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         * @return {T|undefined} The return value from the last call to the callback.\n         */\n        function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsExtent(extent)) {\n                var result = callback(feature);\n                if (result) {\n                    return result;\n                }\n            }\n        });\n    };\n    /**\n     * Get the features collection associated with this source. Will be `null`\n     * unless the source was configured with `useSpatialIndex` set to `false`, or\n     * with an {@link module:ol/Collection} as `features`.\n     * @return {Collection<import(\"../Feature.js\").default<Geometry>>} The collection of features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesCollection = function () {\n        return this.featuresCollection_;\n    };\n    /**\n     * Get a snapshot of the features currently on the source in random order. The returned array\n     * is a copy, the features are references to the features in the source.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeatures = function () {\n        var features;\n        if (this.featuresCollection_) {\n            features = this.featuresCollection_.getArray().slice(0);\n        }\n        else if (this.featuresRtree_) {\n            features = this.featuresRtree_.getAll();\n            if (!isEmpty(this.nullGeometryFeatures_)) {\n                extend(features, getValues(this.nullGeometryFeatures_));\n            }\n        }\n        return /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (features);\n    };\n    /**\n     * Get all features whose geometry intersects the provided coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n        var features = [];\n        this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n            features.push(feature);\n        });\n        return features;\n    };\n    /**\n     * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n     * all features intersecting the given extent in random order (so it may include\n     * features whose geometries do not intersect the extent).\n     *\n     * When `useSpatialIndex` is set to false, this method will return all\n     * features.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesInExtent = function (extent) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.getInExtent(extent);\n        }\n        else if (this.featuresCollection_) {\n            return this.featuresCollection_.getArray().slice(0);\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * Get the closest feature to the provided coordinate.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>):boolean} [opt_filter] Feature filter function.\n     *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n     *     and it should return a boolean value. By default, no filtering is made.\n     * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n     * @api\n     */\n    VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n        // Find the closest feature using branch and bound.  We start searching an\n        // infinite extent, and find the distance from the first feature found.  This\n        // becomes the closest feature.  We then compute a smaller extent which any\n        // closer feature must intersect.  We continue searching with this smaller\n        // extent, trying to find a closer feature.  Every time we find a closer\n        // feature, we update the extent being searched so that any even closer\n        // feature must intersect it.  We continue until we run out of features.\n        var x = coordinate[0];\n        var y = coordinate[1];\n        var closestFeature = null;\n        var closestPoint = [NaN, NaN];\n        var minSquaredDistance = Infinity;\n        var extent = [-Infinity, -Infinity, Infinity, Infinity];\n        var filter = opt_filter ? opt_filter : TRUE;\n        this.featuresRtree_.forEachInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         */\n        function (feature) {\n            if (filter(feature)) {\n                var geometry = feature.getGeometry();\n                var previousMinSquaredDistance = minSquaredDistance;\n                minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n                if (minSquaredDistance < previousMinSquaredDistance) {\n                    closestFeature = feature;\n                    // This is sneaky.  Reduce the extent that it is currently being\n                    // searched while the R-Tree traversal using this same extent object\n                    // is still in progress.  This is safe because the new extent is\n                    // strictly contained by the old extent.\n                    var minDistance = Math.sqrt(minSquaredDistance);\n                    extent[0] = x - minDistance;\n                    extent[1] = y - minDistance;\n                    extent[2] = x + minDistance;\n                    extent[3] = y + minDistance;\n                }\n            }\n        });\n        return closestFeature;\n    };\n    /**\n     * Get the extent of the features currently in the source.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Destination extent. If provided, no new extent\n     *     will be created. Instead, that extent's coordinates will be overwritten.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    VectorSource.prototype.getExtent = function (opt_extent) {\n        return this.featuresRtree_.getExtent(opt_extent);\n    };\n    /**\n     * Get a feature by its identifier (the value returned by feature.getId()).\n     * Note that the index treats string and numeric identifiers as the same.  So\n     * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n     *\n     * @param {string|number} id Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     * @api\n     */\n    VectorSource.prototype.getFeatureById = function (id) {\n        var feature = this.idIndex_[id.toString()];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get a feature by its internal unique identifier (using `getUid`).\n     *\n     * @param {string} uid Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     */\n    VectorSource.prototype.getFeatureByUid = function (uid) {\n        var feature = this.uidIndex_[uid];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get the format associated with this source.\n     *\n     * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n     * @api\n     */\n    VectorSource.prototype.getFormat = function () {\n        return this.format_;\n    };\n    /**\n     * @return {boolean} The source can have overlapping geometries.\n     */\n    VectorSource.prototype.getOverlaps = function () {\n        return this.overlaps_;\n    };\n    /**\n     * Get the url associated with this source.\n     *\n     * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n     * @api\n     */\n    VectorSource.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    VectorSource.prototype.handleFeatureChange_ = function (event) {\n        var feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (event.target);\n        var featureKey = getUid(feature);\n        var geometry = feature.getGeometry();\n        if (!geometry) {\n            if (!(featureKey in this.nullGeometryFeatures_)) {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.remove(feature);\n                }\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        else {\n            var extent = geometry.getExtent();\n            if (featureKey in this.nullGeometryFeatures_) {\n                delete this.nullGeometryFeatures_[featureKey];\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.insert(extent, feature);\n                }\n            }\n            else {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.update(extent, feature);\n                }\n            }\n        }\n        var id = feature.getId();\n        if (id !== undefined) {\n            var sid = id.toString();\n            if (this.idIndex_[sid] !== feature) {\n                this.removeFromIdIndex_(feature);\n                this.idIndex_[sid] = feature;\n            }\n        }\n        else {\n            this.removeFromIdIndex_(feature);\n            this.uidIndex_[featureKey] = feature;\n        }\n        this.changed();\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n    };\n    /**\n     * Returns true if the feature is contained within the source.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {boolean} Has feature.\n     * @api\n     */\n    VectorSource.prototype.hasFeature = function (feature) {\n        var id = feature.getId();\n        if (id !== undefined) {\n            return id in this.idIndex_;\n        }\n        else {\n            return getUid(feature) in this.uidIndex_;\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    VectorSource.prototype.isEmpty = function () {\n        return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var extentsToLoad = this.strategy_(extent, resolution, projection);\n        var _loop_1 = function (i, ii) {\n            var extentToLoad = extentsToLoad[i];\n            var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad, \n            /**\n             * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n             * @return {boolean} Contains.\n             */\n            function (object) {\n                return containsExtent(object.extent, extentToLoad);\n            });\n            if (!alreadyLoaded) {\n                ++this_1.loadingExtentsCount_;\n                this_1.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART));\n                this_1.loader_.call(this_1, extentToLoad, resolution, projection, function (features) {\n                    --this.loadingExtentsCount_;\n                    this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND, undefined, features));\n                }.bind(this_1), function () {\n                    --this.loadingExtentsCount_;\n                    this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR));\n                }.bind(this_1));\n                loadedExtentsRtree.insert(extentToLoad, { extent: extentToLoad.slice() });\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n            _loop_1(i, ii);\n        }\n        this.loading =\n            this.loader_.length < 4 ? false : this.loadingExtentsCount_ > 0;\n    };\n    VectorSource.prototype.refresh = function () {\n        this.clear(true);\n        this.loadedExtentsRtree_.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Remove an extent from the list of loaded extents.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    VectorSource.prototype.removeLoadedExtent = function (extent) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var obj;\n        loadedExtentsRtree.forEachInExtent(extent, function (object) {\n            if (equals(object.extent, extent)) {\n                obj = object;\n                return true;\n            }\n        });\n        if (obj) {\n            loadedExtentsRtree.remove(obj);\n        }\n    };\n    /**\n     * Remove a single feature from the source.  If you want to remove all features\n     * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n     * instead.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n     * @api\n     */\n    VectorSource.prototype.removeFeature = function (feature) {\n        if (!feature) {\n            return;\n        }\n        var featureKey = getUid(feature);\n        if (featureKey in this.nullGeometryFeatures_) {\n            delete this.nullGeometryFeatures_[featureKey];\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.remove(feature);\n            }\n        }\n        var result = this.removeFeatureInternal(feature);\n        if (result) {\n            this.changed();\n        }\n    };\n    /**\n     * Remove feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {import(\"../Feature.js\").default<Geometry>|undefined} The removed feature\n     *     (or undefined if the feature was not found).\n     * @protected\n     */\n    VectorSource.prototype.removeFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        var featureChangeKeys = this.featureChangeKeys_[featureKey];\n        if (!featureChangeKeys) {\n            return;\n        }\n        featureChangeKeys.forEach(unlistenByKey);\n        delete this.featureChangeKeys_[featureKey];\n        var id = feature.getId();\n        if (id !== undefined) {\n            delete this.idIndex_[id.toString()];\n        }\n        delete this.uidIndex_[featureKey];\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n        return feature;\n    };\n    /**\n     * Remove a feature from the id index.  Called internally when the feature id\n     * may have changed.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} Removed the feature from the index.\n     * @private\n     */\n    VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n        var removed = false;\n        for (var id in this.idIndex_) {\n            if (this.idIndex_[id] === feature) {\n                delete this.idIndex_[id];\n                removed = true;\n                break;\n            }\n        }\n        return removed;\n    };\n    /**\n     * Set the new loader of the source. The next render cycle will use the\n     * new loader.\n     * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n     * @api\n     */\n    VectorSource.prototype.setLoader = function (loader) {\n        this.loader_ = loader;\n    };\n    /**\n     * Points the source to a new url. The next render cycle will use the new url.\n     * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n     * @api\n     */\n    VectorSource.prototype.setUrl = function (url) {\n        assert(this.format_, 7); // `format` must be set when `url` is set\n        this.url_ = url;\n        this.setLoader(xhr(url, this.format_));\n    };\n    return VectorSource;\n}(Source));\nexport default VectorSource;\n//# sourceMappingURL=Vector.js.map","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- safe\n  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);\n};\n","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/geom/flat/length\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length = 0;\n    for (var i = offset + stride; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n        x1 = x2;\n        y1 = y2;\n    }\n    return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n    var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n    var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n    var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n    perimeter += Math.sqrt(dx * dx + dy * dy);\n    return perimeter;\n}\n//# sourceMappingURL=length.js.map","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a function');\n};\n","/**\n * @module ol/geom/flat/area\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n    var twiceArea = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        twiceArea += y1 * x2 - x1 * y2;\n        x1 = x2;\n        y1 = y2;\n    }\n    return twiceArea / 2;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n    var area = 0;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        area += linearRing(flatCoordinates, offset, end, stride);\n        offset = end;\n    }\n    return area;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var area = 0;\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        area += linearRings(flatCoordinates, offset, ends, stride);\n        offset = ends[ends.length - 1];\n    }\n    return area;\n}\n//# sourceMappingURL=area.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LinearRing\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { linearRing as linearRingArea } from './flat/area.js';\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nvar LinearRing = /** @class */ (function (_super) {\n    __extends(LinearRing, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function LinearRing(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LinearRing} Clone.\n     * @api\n     */\n    LinearRing.prototype.clone = function () {\n        return new LinearRing(this.flatCoordinates.slice(), this.layout);\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    LinearRing.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Return the area of the linear ring on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    LinearRing.prototype.getArea = function () {\n        return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinates of the linear ring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @api\n     */\n    LinearRing.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {LinearRing} Simplified LinearRing.\n     * @protected\n     */\n    LinearRing.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     * @api\n     */\n    LinearRing.prototype.getType = function () {\n        return GeometryType.LINEAR_RING;\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    LinearRing.prototype.intersectsExtent = function (extent) {\n        return false;\n    };\n    /**\n     * Set the coordinates of the linear ring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    LinearRing.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LinearRing;\n}(SimpleGeometry));\nexport default LinearRing;\n//# sourceMappingURL=LinearRing.js.map","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport { linearRingsContainsXY } from './contains.js';\nimport { numberSafeCompareFunction } from '../../array.js';\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n    var i, ii, x, x1, x2, y1, y2;\n    var y = flatCenters[flatCentersOffset + 1];\n    /** @type {Array<number>} */\n    var intersections = [];\n    // Calculate intersections with the horizontal line\n    for (var r = 0, rr = ends.length; r < rr; ++r) {\n        var end = ends[r];\n        x1 = flatCoordinates[end - stride];\n        y1 = flatCoordinates[end - stride + 1];\n        for (i = offset; i < end; i += stride) {\n            x2 = flatCoordinates[i];\n            y2 = flatCoordinates[i + 1];\n            if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n                x = ((y - y1) / (y2 - y1)) * (x2 - x1) + x1;\n                intersections.push(x);\n            }\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    // Find the longest segment of the horizontal line that has its center point\n    // inside the linear ring.\n    var pointX = NaN;\n    var maxSegmentLength = -Infinity;\n    intersections.sort(numberSafeCompareFunction);\n    x1 = intersections[0];\n    for (i = 1, ii = intersections.length; i < ii; ++i) {\n        x2 = intersections[i];\n        var segmentLength = Math.abs(x2 - x1);\n        if (segmentLength > maxSegmentLength) {\n            x = (x1 + x2) / 2;\n            if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n                pointX = x;\n                maxSegmentLength = segmentLength;\n            }\n        }\n        x1 = x2;\n    }\n    if (isNaN(pointX)) {\n        // There is no horizontal line that has its center point inside the linear\n        // ring.  Use the center of the the linear ring's extent.\n        pointX = flatCenters[flatCentersOffset];\n    }\n    if (opt_dest) {\n        opt_dest.push(pointX, y, maxSegmentLength);\n        return opt_dest;\n    }\n    else {\n        return [pointX, y, maxSegmentLength];\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n    var interiorPoints = [];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        interiorPoints = getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n        offset = ends[ends.length - 1];\n    }\n    return interiorPoints;\n}\n//# sourceMappingURL=interiorpoint.js.map","/**\n * @module ol/geom/flat/reverse\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n    while (offset < end - stride) {\n        for (var i = 0; i < stride; ++i) {\n            var tmp = flatCoordinates[offset + i];\n            flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n            flatCoordinates[end - stride + i] = tmp;\n        }\n        offset += stride;\n        end -= stride;\n    }\n}\n//# sourceMappingURL=reverse.js.map","/**\n * @module ol/geom/flat/orient\n */\nimport { coordinates as reverseCoordinates } from './reverse.js';\n/**\n * Is the linear ring oriented clockwise in a coordinate system with a bottom-left\n * coordinate origin? For a coordinate system with a top-left coordinate origin,\n * the ring's orientation is clockwise when this function returns false.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n    // https://stackoverflow.com/q/1165647/clockwise-method#1165943\n    // https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrlinearring.cpp\n    var edge = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        edge += (x2 - x1) * (y2 + y1);\n        x1 = x2;\n        y1 = y2;\n    }\n    return edge === 0 ? undefined : edge > 0;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        if (i === 0) {\n            if ((right && isClockwise) || (!right && !isClockwise)) {\n                return false;\n            }\n        }\n        else {\n            if ((right && !isClockwise) || (!right && isClockwise)) {\n                return false;\n            }\n        }\n        offset = end;\n    }\n    return true;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right)) {\n            return false;\n        }\n        if (ends.length) {\n            offset = ends[ends.length - 1];\n        }\n    }\n    return true;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        var reverse = i === 0\n            ? (right && isClockwise) || (!right && !isClockwise)\n            : (right && !isClockwise) || (!right && isClockwise);\n        if (reverse) {\n            reverseCoordinates(flatCoordinates, offset, end, stride);\n        }\n        offset = end;\n    }\n    return offset;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        offset = orientLinearRings(flatCoordinates, offset, endss[i], stride, opt_right);\n    }\n    return offset;\n}\n//# sourceMappingURL=orient.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Polygon\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { arrayMaxSquaredDelta, assignClosestArrayPoint } from './flat/closest.js';\nimport { closestSquaredDistanceXY, getCenter } from '../extent.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { getInteriorPointOfArray } from './flat/interiorpoint.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { intersectsLinearRingArray } from './flat/intersectsextent.js';\nimport { linearRingsAreOriented, orientLinearRings } from './flat/orient.js';\nimport { linearRings as linearRingsArea } from './flat/area.js';\nimport { linearRingsContainsXY } from './flat/contains.js';\nimport { modulo } from '../math.js';\nimport { quantizeArray } from './flat/simplify.js';\nimport { offset as sphereOffset } from '../sphere.js';\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    /**\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n     *     Array of linear rings that define the polygon. The first linear ring of the\n     *     array defines the outer-boundary or surface of the polygon. Each subsequent\n     *     linear ring defines a hole in the surface of the polygon. A linear ring is\n     *     an array of vertices' coordinates where the first coordinate and the last are\n     *     equivalent. (For internal use, flat coordinates in combination with\n     *     `opt_layout` and `opt_ends` are also accepted.)\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @param {Array<number>} [opt_ends] Ends (for internal use with flat coordinates).\n     */\n    function Polygon(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointRevision_ = -1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatInteriorPoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linear ring to this polygon.\n     * @param {LinearRing} linearRing Linear ring.\n     * @api\n     */\n    Polygon.prototype.appendLinearRing = function (linearRing) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Polygon} Clone.\n     * @api\n     */\n    Polygon.prototype.clone = function () {\n        var polygon = new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n        polygon.applyProperties(this);\n        return polygon;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Polygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Polygon.prototype.containsXY = function (x, y) {\n        return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the polygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    Polygon.prototype.getArea = function () {\n        return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for polygons.\n     *\n     * @param {boolean} [opt_right] Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @api\n     */\n    Polygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRings(flatCoordinates, 0, this.ends_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateCoordinatesArray(flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    Polygon.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * @return {Array<number>} Interior point.\n     */\n    Polygon.prototype.getFlatInteriorPoint = function () {\n        if (this.flatInteriorPointRevision_ != this.getRevision()) {\n            var flatCenter = getCenter(this.getExtent());\n            this.flatInteriorPoint_ = getInteriorPointOfArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, flatCenter, 0);\n            this.flatInteriorPointRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoint_;\n    };\n    /**\n     * Return an interior point of the polygon.\n     * @return {Point} Interior point as XYM coordinate, where M is the\n     * length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    Polygon.prototype.getInteriorPoint = function () {\n        return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n    };\n    /**\n     * Return the number of rings of the polygon,  this includes the exterior\n     * ring and any interior rings.\n     *\n     * @return {number} Number of rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRingCount = function () {\n        return this.ends_.length;\n    };\n    /**\n     * Return the Nth linear ring of the polygon geometry. Return `null` if the\n     * given index is out of range.\n     * The exterior linear ring is available at index `0` and the interior rings\n     * at index `1` and beyond.\n     *\n     * @param {number} index Index.\n     * @return {LinearRing} Linear ring.\n     * @api\n     */\n    Polygon.prototype.getLinearRing = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LinearRing(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linear rings of the polygon.\n     * @return {Array<LinearRing>} Linear rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRings = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var linearRings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n            linearRings.push(linearRing);\n            offset = end;\n        }\n        return linearRings;\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    Polygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingsAreOriented(flatCoordinates, 0, this.ends_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length = orientLinearRings(this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {Polygon} Simplified Polygon.\n     * @protected\n     */\n    Polygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = quantizeArray(this.flatCoordinates, 0, this.ends_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     * @api\n     */\n    Polygon.prototype.getType = function () {\n        return GeometryType.POLYGON;\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    Polygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the polygon.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    Polygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return Polygon;\n}(SimpleGeometry));\nexport default Polygon;\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices in meters.\n * @param {number} [opt_n] Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number} [opt_sphereRadius] Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n    var n = opt_n ? opt_n : 32;\n    /** @type {Array<number>} */\n    var flatCoordinates = [];\n    for (var i = 0; i < n; ++i) {\n        extend(flatCoordinates, sphereOffset(center, radius, (2 * Math.PI * i) / n, opt_sphereRadius));\n    }\n    flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [\n        flatCoordinates.length,\n    ]);\n}\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var flatCoordinates = [\n        minX,\n        minY,\n        minX,\n        maxY,\n        maxX,\n        maxY,\n        maxX,\n        minY,\n        minX,\n        minY,\n    ];\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [\n        flatCoordinates.length,\n    ]);\n}\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number} [opt_sides] Number of sides of the polygon. Default is 32.\n * @param {number} [opt_angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n    var sides = opt_sides ? opt_sides : 32;\n    var stride = circle.getStride();\n    var layout = circle.getLayout();\n    var center = circle.getCenter();\n    var arrayLength = stride * (sides + 1);\n    var flatCoordinates = new Array(arrayLength);\n    for (var i = 0; i < arrayLength; i += stride) {\n        flatCoordinates[i] = 0;\n        flatCoordinates[i + 1] = 0;\n        for (var j = 2; j < stride; j++) {\n            flatCoordinates[i + j] = center[j];\n        }\n    }\n    var ends = [flatCoordinates.length];\n    var polygon = new Polygon(flatCoordinates, layout, ends);\n    makeRegular(polygon, center, circle.getRadius(), opt_angle);\n    return polygon;\n}\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number} [opt_angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n    var flatCoordinates = polygon.getFlatCoordinates();\n    var stride = polygon.getStride();\n    var sides = flatCoordinates.length / stride - 1;\n    var startAngle = opt_angle ? opt_angle : 0;\n    for (var i = 0; i <= sides; ++i) {\n        var offset = i * stride;\n        var angle = startAngle + (modulo(i, sides) * 2 * Math.PI) / sides;\n        flatCoordinates[offset] = center[0] + radius * Math.cos(angle);\n        flatCoordinates[offset + 1] = center[1] + radius * Math.sin(angle);\n    }\n    polygon.changed();\n}\n//# sourceMappingURL=Polygon.js.map","/**\n * @module ol/color\n */\nimport { assert } from './asserts.js';\nimport { clamp } from './math.js';\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nvar HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nvar NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n    if (typeof color === 'string') {\n        return color;\n    }\n    else {\n        return toString(color);\n    }\n}\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n    var el = document.createElement('div');\n    el.style.color = color;\n    if (el.style.color !== '') {\n        document.body.appendChild(el);\n        var rgb = getComputedStyle(el).color;\n        document.body.removeChild(el);\n        return rgb;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport var fromString = (function () {\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n    /**\n     * @type {Object<string, Color>}\n     */\n    var cache = {};\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n    return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n            color = cache[s];\n        }\n        else {\n            if (cacheSize >= MAX_CACHE_SIZE) {\n                var i = 0;\n                for (var key in cache) {\n                    if ((i++ & 3) === 0) {\n                        delete cache[key];\n                        --cacheSize;\n                    }\n                }\n            }\n            color = fromStringInternal_(s);\n            cache[s] = color;\n            ++cacheSize;\n        }\n        return color;\n    });\n})();\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    else {\n        return fromString(color);\n    }\n}\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n    var r, g, b, a, color;\n    if (NAMED_COLOR_RE_.exec(s)) {\n        s = fromNamed(s);\n    }\n    if (HEX_COLOR_RE_.exec(s)) {\n        // hex\n        var n = s.length - 1; // number of hex digits\n        var d = // number of digits per channel\n         void 0; // number of digits per channel\n        if (n <= 4) {\n            d = 1;\n        }\n        else {\n            d = 2;\n        }\n        var hasAlpha = n === 4 || n === 8;\n        r = parseInt(s.substr(1 + 0 * d, d), 16);\n        g = parseInt(s.substr(1 + 1 * d, d), 16);\n        b = parseInt(s.substr(1 + 2 * d, d), 16);\n        if (hasAlpha) {\n            a = parseInt(s.substr(1 + 3 * d, d), 16);\n        }\n        else {\n            a = 255;\n        }\n        if (d == 1) {\n            r = (r << 4) + r;\n            g = (g << 4) + g;\n            b = (b << 4) + b;\n            if (hasAlpha) {\n                a = (a << 4) + a;\n            }\n        }\n        color = [r, g, b, a / 255];\n    }\n    else if (s.indexOf('rgba(') == 0) {\n        // rgba()\n        color = s.slice(5, -1).split(',').map(Number);\n        normalize(color);\n    }\n    else if (s.indexOf('rgb(') == 0) {\n        // rgb()\n        color = s.slice(4, -1).split(',').map(Number);\n        color.push(1);\n        normalize(color);\n    }\n    else {\n        assert(false, 14); // Invalid color\n    }\n    return color;\n}\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n    color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n    color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n    color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n    color[3] = clamp(color[3], 0, 1);\n    return color;\n}\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n    var r = color[0];\n    if (r != (r | 0)) {\n        r = (r + 0.5) | 0;\n    }\n    var g = color[1];\n    if (g != (g | 0)) {\n        g = (g + 0.5) | 0;\n    }\n    var b = color[2];\n    if (b != (b | 0)) {\n        b = (b + 0.5) | 0;\n    }\n    var a = color[3] === undefined ? 1 : Math.round(color[3] * 100) / 100;\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n    if (NAMED_COLOR_RE_.test(s)) {\n        s = fromNamed(s);\n    }\n    return (HEX_COLOR_RE_.test(s) || s.indexOf('rgba(') === 0 || s.indexOf('rgb(') === 0);\n}\n//# sourceMappingURL=color.js.map","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","/**\n * @module ol/interaction/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    ACTIVE: 'active',\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport InteractionProperty from './Property.js';\nimport { easeOut, linear } from '../easing.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active', Return>} InteractionOnSignature\n */\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nvar Interaction = /** @class */ (function (_super) {\n    __extends(Interaction, _super);\n    /**\n     * @param {InteractionOptions} [opt_options] Options.\n     */\n    function Interaction(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {InteractionOnSignature<void>}\n         */\n        _this.un;\n        if (opt_options && opt_options.handleEvent) {\n            _this.handleEvent = opt_options.handleEvent;\n        }\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        _this.setActive(true);\n        return _this;\n    }\n    /**\n     * Return whether the interaction is currently active.\n     * @return {boolean} `true` if the interaction is active, `false` otherwise.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.getActive = function () {\n        return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n    };\n    /**\n     * Get the map associated with this interaction.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     * @api\n     */\n    Interaction.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    Interaction.prototype.handleEvent = function (mapBrowserEvent) {\n        return true;\n    };\n    /**\n     * Activate or deactivate the interaction.\n     * @param {boolean} active Active.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.setActive = function (active) {\n        this.set(InteractionProperty.ACTIVE, active);\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Interaction.prototype.setMap = function (map) {\n        this.map_ = map;\n    };\n    return Interaction;\n}(BaseObject));\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number} [opt_duration] Duration.\n */\nexport function pan(view, delta, opt_duration) {\n    var currentCenter = view.getCenterInternal();\n    if (currentCenter) {\n        var center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n        view.animateInternal({\n            duration: opt_duration !== undefined ? opt_duration : 250,\n            easing: linear,\n            center: view.getConstrainedCenter(center),\n        });\n    }\n}\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] Anchor coordinate in the user projection.\n * @param {number} [opt_duration] Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n    var currentZoom = view.getZoom();\n    if (currentZoom === undefined) {\n        return;\n    }\n    var newZoom = view.getConstrainedZoom(currentZoom + delta);\n    var newResolution = view.getResolutionForZoom(newZoom);\n    if (view.getAnimating()) {\n        view.cancelAnimations();\n    }\n    view.animate({\n        resolution: newResolution,\n        anchor: opt_anchor,\n        duration: opt_duration !== undefined ? opt_duration : 250,\n        easing: easeOut,\n    });\n}\nexport default Interaction;\n//# sourceMappingURL=Interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nvar DoubleClickZoom = /** @class */ (function (_super) {\n    __extends(DoubleClickZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DoubleClickZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n     * doubleclick) and eventually zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    DoubleClickZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n            var browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n            var map = mapBrowserEvent.map;\n            var anchor = mapBrowserEvent.coordinate;\n            var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n            var view = map.getView();\n            zoomByDelta(view, delta, anchor, this.duration_);\n            browserEvent.preventDefault();\n            stopEvent = true;\n        }\n        return !stopEvent;\n    };\n    return DoubleClickZoom;\n}(Interaction));\nexport default DoubleClickZoom;\n//# sourceMappingURL=DoubleClickZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Pointer\n */\nimport Interaction from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport { getValues } from '../obj.js';\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events.\n * This functions is also called during a drag sequence, so during a drag\n * sequence both the `handleDragEvent` function and this function are called.\n * If `handleDownEvent` is defined and it returns true this function will not\n * be called during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nvar PointerInteraction = /** @class */ (function (_super) {\n    __extends(PointerInteraction, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PointerInteraction(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        if (options.handleDownEvent) {\n            _this.handleDownEvent = options.handleDownEvent;\n        }\n        if (options.handleDragEvent) {\n            _this.handleDragEvent = options.handleDragEvent;\n        }\n        if (options.handleMoveEvent) {\n            _this.handleMoveEvent = options.handleMoveEvent;\n        }\n        if (options.handleUpEvent) {\n            _this.handleUpEvent = options.handleUpEvent;\n        }\n        if (options.stopDown) {\n            _this.stopDown = options.stopDown;\n        }\n        /**\n         * @type {boolean}\n         * @protected\n         */\n        _this.handlingDownUpSequence = false;\n        /**\n         * @type {!Object<string, PointerEvent>}\n         * @private\n         */\n        _this.trackedPointers_ = {};\n        /**\n         * @type {Array<PointerEvent>}\n         * @protected\n         */\n        _this.targetPointers = [];\n        return _this;\n    }\n    /**\n     * Returns the current number of pointers involved in the interaction,\n     * e.g. `2` when two fingers are used.\n     * @return {number} The number of pointers.\n     * @api\n     */\n    PointerInteraction.prototype.getPointerCount = function () {\n        return this.targetPointers.length;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDownEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDragEvent = function (mapBrowserEvent) { };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n     * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n     * detected.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    PointerInteraction.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!mapBrowserEvent.originalEvent) {\n            return true;\n        }\n        var stopEvent = false;\n        this.updateTrackedPointers_(mapBrowserEvent);\n        if (this.handlingDownUpSequence) {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n                this.handleDragEvent(mapBrowserEvent);\n                // prevent page scrolling during dragging\n                mapBrowserEvent.originalEvent.preventDefault();\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                var handledUp = this.handleUpEvent(mapBrowserEvent);\n                this.handlingDownUpSequence =\n                    handledUp && this.targetPointers.length > 0;\n            }\n        }\n        else {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                var handled = this.handleDownEvent(mapBrowserEvent);\n                this.handlingDownUpSequence = handled;\n                stopEvent = this.stopDown(handled);\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n                this.handleMoveEvent(mapBrowserEvent);\n            }\n        }\n        return !stopEvent;\n    };\n    /**\n     * Handle pointer move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleMoveEvent = function (mapBrowserEvent) { };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleUpEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * This function is used to determine if \"down\" events should be propagated\n     * to other interactions or should be stopped.\n     * @param {boolean} handled Was the event handled by the interaction?\n     * @return {boolean} Should the `down` event be stopped?\n     */\n    PointerInteraction.prototype.stopDown = function (handled) {\n        return handled;\n    };\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @private\n     */\n    PointerInteraction.prototype.updateTrackedPointers_ = function (mapBrowserEvent) {\n        if (isPointerDraggingEvent(mapBrowserEvent)) {\n            var event_1 = mapBrowserEvent.originalEvent;\n            var id = event_1.pointerId.toString();\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                delete this.trackedPointers_[id];\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                this.trackedPointers_[id] = event_1;\n            }\n            else if (id in this.trackedPointers_) {\n                // update only when there was a pointerdown event for this pointer\n                this.trackedPointers_[id] = event_1;\n            }\n            this.targetPointers = getValues(this.trackedPointers_);\n        }\n    };\n    return PointerInteraction;\n}(Interaction));\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n    var length = pointerEvents.length;\n    var clientX = 0;\n    var clientY = 0;\n    for (var i = 0; i < length; i++) {\n        clientX += pointerEvents[i].clientX;\n        clientY += pointerEvents[i].clientY;\n    }\n    return [clientX / length, clientY / length];\n}\n/**\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n    var type = mapBrowserEvent.type;\n    return (type === MapBrowserEventType.POINTERDOWN ||\n        type === MapBrowserEventType.POINTERDRAG ||\n        type === MapBrowserEventType.POINTERUP);\n}\nexport default PointerInteraction;\n//# sourceMappingURL=Pointer.js.map","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport { FALSE, TRUE } from '../functions.js';\nimport { MAC, WEBKIT } from '../has.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n/**\n * Creates a condition function that passes when all provided conditions pass.\n * @param {...Condition} var_args Conditions to check.\n * @return {Condition} Condition function.\n */\nexport function all(var_args) {\n    var conditions = arguments;\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} All conditions passed.\n     */\n    return function (event) {\n        var pass = true;\n        for (var i = 0, ii = conditions.length; i < ii; ++i) {\n            pass = pass && conditions[i](event);\n            if (!pass) {\n                break;\n            }\n        }\n        return pass;\n    };\n}\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport var altKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport var altShiftKeysOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport var focus = function (event) {\n    var targetElement = event.map.getTargetElement();\n    var activeElement = event.map.getOwnerDocument().activeElement;\n    return targetElement.contains(activeElement);\n};\n/**\n * Return `true` if the map has the focus or no 'tabindex' attribute set.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map container has the focus or no 'tabindex' attribute.\n */\nexport var focusWithTabindex = function (event) {\n    return event.map.getTargetElement().hasAttribute('tabindex')\n        ? focus(event)\n        : true;\n};\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport var always = TRUE;\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport var click = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport var mouseActionButton = function (mapBrowserEvent) {\n    var originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport var never = FALSE;\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport var pointerMove = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == 'pointermove';\n};\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport var singleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport var doubleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport var noModifierKeys = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport var platformModifierKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport var shiftKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport var targetNotEditable = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    var tagName = /** @type {Element} */ (originalEvent.target).tagName;\n    return tagName !== 'INPUT' && tagName !== 'SELECT' && tagName !== 'TEXTAREA';\n};\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport var mouseOnly = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvent.pointerType == 'mouse';\n};\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport var touchOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'touch';\n};\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport var penOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'pen';\n};\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See https://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport var primaryAction = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n//# sourceMappingURL=condition.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragPan\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { all, focusWithTabindex, noModifierKeys, primaryAction, } from '../events/condition.js';\nimport { easeOut } from '../easing.js';\nimport { rotate as rotateCoordinate, scale as scaleCoordinate, } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.noModifierKeys} and {@link module:ol/events/condition.primaryAction}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nvar DragPan = /** @class */ (function (_super) {\n    __extends(DragPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragPan(opt_options) {\n        var _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../Kinetic.js\").default|undefined}\n         */\n        _this.kinetic_ = options.kinetic;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.lastCentroid = null;\n        /**\n         * @type {number}\n         */\n        _this.lastPointersCount_;\n        /**\n         * @type {boolean}\n         */\n        _this.panning_ = false;\n        var condition = options.condition\n            ? options.condition\n            : all(noModifierKeys, primaryAction);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.noKinetic_ = false;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragPan.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!this.panning_) {\n            this.panning_ = true;\n            this.getMap().getView().beginInteraction();\n        }\n        var targetPointers = this.targetPointers;\n        var centroid = centroidFromPointers(targetPointers);\n        if (targetPointers.length == this.lastPointersCount_) {\n            if (this.kinetic_) {\n                this.kinetic_.update(centroid[0], centroid[1]);\n            }\n            if (this.lastCentroid) {\n                var delta = [\n                    this.lastCentroid[0] - centroid[0],\n                    centroid[1] - this.lastCentroid[1],\n                ];\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                scaleCoordinate(delta, view.getResolution());\n                rotateCoordinate(delta, view.getRotation());\n                view.adjustCenterInternal(delta);\n            }\n        }\n        else if (this.kinetic_) {\n            // reset so we don't overestimate the kinetic energy after\n            // after one finger down, tiny drag, second finger down\n            this.kinetic_.begin();\n        }\n        this.lastCentroid = centroid;\n        this.lastPointersCount_ = targetPointers.length;\n        mapBrowserEvent.originalEvent.preventDefault();\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleUpEvent = function (mapBrowserEvent) {\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (this.targetPointers.length === 0) {\n            if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n                var distance = this.kinetic_.getDistance();\n                var angle = this.kinetic_.getAngle();\n                var center = view.getCenterInternal();\n                var centerpx = map.getPixelFromCoordinateInternal(center);\n                var dest = map.getCoordinateFromPixelInternal([\n                    centerpx[0] - distance * Math.cos(angle),\n                    centerpx[1] - distance * Math.sin(angle),\n                ]);\n                view.animateInternal({\n                    center: view.getConstrainedCenter(dest),\n                    duration: 500,\n                    easing: easeOut,\n                });\n            }\n            if (this.panning_) {\n                this.panning_ = false;\n                view.endInteraction();\n            }\n            return false;\n        }\n        else {\n            if (this.kinetic_) {\n                // reset so we don't overestimate the kinetic energy after\n                // after one finger up, tiny drag, second finger up\n                this.kinetic_.begin();\n            }\n            this.lastCentroid = null;\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            this.lastCentroid = null;\n            // stop any current animation\n            if (view.getAnimating()) {\n                view.cancelAnimations();\n            }\n            if (this.kinetic_) {\n                this.kinetic_.begin();\n            }\n            // No kinetic as soon as more than one pointer on the screen is\n            // detected. This is to prevent nasty pans after pinch.\n            this.noKinetic_ = this.targetPointers.length > 1;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragPan;\n}(PointerInteraction));\nexport default DragPan;\n//# sourceMappingURL=DragPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragRotate\n */\nimport PointerInteraction from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { altShiftKeysOnly, mouseActionButton, mouseOnly, } from '../events/condition.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nvar DragRotate = /** @class */ (function (_super) {\n    __extends(DragRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        var size = map.getSize();\n        var offset = mapBrowserEvent.pixel;\n        var theta = Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n        if (this.lastAngle_ !== undefined) {\n            var delta = theta - this.lastAngle_;\n            view.adjustRotationInternal(-delta);\n        }\n        this.lastAngle_ = theta;\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        view.endInteraction(this.duration_);\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return false;\n        }\n        if (mouseActionButton(mapBrowserEvent) &&\n            this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            map.getView().beginInteraction();\n            this.lastAngle_ = undefined;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragRotate;\n}(PointerInteraction));\nexport default DragRotate;\n//# sourceMappingURL=DragRotate.js.map","/**\n * @module ol/render/Box\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\nvar RenderBox = /** @class */ (function (_super) {\n    __extends(RenderBox, _super);\n    /**\n     * @param {string} className CSS class name.\n     */\n    function RenderBox(className) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {import(\"../geom/Polygon.js\").default}\n         * @private\n         */\n        _this.geometry_ = null;\n        /**\n         * @type {HTMLDivElement}\n         * @private\n         */\n        _this.element_ = document.createElement('div');\n        _this.element_.style.position = 'absolute';\n        _this.element_.style.pointerEvents = 'auto';\n        _this.element_.className = 'ol-box ' + className;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.endPixel_ = null;\n        return _this;\n    }\n    /**\n     * Clean up.\n     */\n    RenderBox.prototype.disposeInternal = function () {\n        this.setMap(null);\n    };\n    /**\n     * @private\n     */\n    RenderBox.prototype.render_ = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var px = 'px';\n        var style = this.element_.style;\n        style.left = Math.min(startPixel[0], endPixel[0]) + px;\n        style.top = Math.min(startPixel[1], endPixel[1]) + px;\n        style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n        style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    RenderBox.prototype.setMap = function (map) {\n        if (this.map_) {\n            this.map_.getOverlayContainer().removeChild(this.element_);\n            var style = this.element_.style;\n            style.left = 'inherit';\n            style.top = 'inherit';\n            style.width = 'inherit';\n            style.height = 'inherit';\n        }\n        this.map_ = map;\n        if (this.map_) {\n            this.map_.getOverlayContainer().appendChild(this.element_);\n        }\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n     * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n     */\n    RenderBox.prototype.setPixels = function (startPixel, endPixel) {\n        this.startPixel_ = startPixel;\n        this.endPixel_ = endPixel;\n        this.createOrUpdateGeometry();\n        this.render_();\n    };\n    /**\n     * Creates or updates the cached geometry.\n     */\n    RenderBox.prototype.createOrUpdateGeometry = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var pixels = [\n            startPixel,\n            [startPixel[0], endPixel[1]],\n            endPixel,\n            [endPixel[0], startPixel[1]],\n        ];\n        var coordinates = pixels.map(this.map_.getCoordinateFromPixelInternal, this.map_);\n        // close the polygon\n        coordinates[4] = coordinates[0].slice();\n        if (!this.geometry_) {\n            this.geometry_ = new Polygon([coordinates]);\n        }\n        else {\n            this.geometry_.setCoordinates([coordinates]);\n        }\n    };\n    /**\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     */\n    RenderBox.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    return RenderBox;\n}(Disposable));\nexport default RenderBox;\n//# sourceMappingURL=Box.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\nimport { mouseActionButton } from '../events/condition.js';\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~mouseActionButton}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default):void} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n/**\n * @enum {string}\n */\nvar DragBoxEventType = {\n    /**\n     * Triggered upon drag box start.\n     * @event DragBoxEvent#boxstart\n     * @api\n     */\n    BOXSTART: 'boxstart',\n    /**\n     * Triggered on drag when box is active.\n     * @event DragBoxEvent#boxdrag\n     * @api\n     */\n    BOXDRAG: 'boxdrag',\n    /**\n     * Triggered upon drag box end.\n     * @event DragBoxEvent#boxend\n     * @api\n     */\n    BOXEND: 'boxend',\n    /**\n     * Triggered upon drag box canceled.\n     * @event DragBoxEvent#boxcancel\n     * @api\n     */\n    BOXCANCEL: 'boxcancel',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nvar DragBoxEvent = /** @class */ (function (_super) {\n    __extends(DragBoxEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n     */\n    function DragBoxEvent(type, coordinate, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The coordinate of the drag event.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.coordinate = coordinate;\n        /**\n         * @const\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return DragBoxEvent;\n}(Event));\nexport { DragBoxEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'boxcancel'|'boxdrag'|'boxend'|'boxstart', DragBoxEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'boxcancel'|'boxdrag'|'boxend', Return>} DragBoxOnSignature\n */\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * @fires DragBoxEvent\n * @api\n */\nvar DragBox = /** @class */ (function (_super) {\n    __extends(DragBox, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragBox(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {DragBoxOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"../render/Box.js\").default}\n         * @private\n         */\n        _this.box_ = new RenderBox(options.className || 'ol-dragbox');\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n        if (options.onBoxEnd) {\n            _this.onBoxEnd = options.onBoxEnd;\n        }\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : mouseActionButton;\n        /**\n         * @private\n         * @type {EndCondition}\n         */\n        _this.boxEndCondition_ = options.boxEndCondition\n            ? options.boxEndCondition\n            : _this.defaultBoxEndCondition;\n        return _this;\n    }\n    /**\n     * The default condition for determining whether the boxend event\n     * should fire.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n     *     leading to the box end.\n     * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n     * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n     * @return {boolean} Whether or not the boxend condition should be fired.\n     */\n    DragBox.prototype.defaultBoxEndCondition = function (mapBrowserEvent, startPixel, endPixel) {\n        var width = endPixel[0] - startPixel[0];\n        var height = endPixel[1] - startPixel[1];\n        return width * width + height * height >= this.minArea_;\n    };\n    /**\n     * Returns geometry of last drawn box.\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     * @api\n     */\n    DragBox.prototype.getGeometry = function () {\n        return this.box_.getGeometry();\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragBox.prototype.handleDragEvent = function (mapBrowserEvent) {\n        this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n        this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG, mapBrowserEvent.coordinate, mapBrowserEvent));\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleUpEvent = function (mapBrowserEvent) {\n        this.box_.setMap(null);\n        var completeBox = this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel);\n        if (completeBox) {\n            this.onBoxEnd(mapBrowserEvent);\n        }\n        this.dispatchEvent(new DragBoxEvent(completeBox ? DragBoxEventType.BOXEND : DragBoxEventType.BOXCANCEL, mapBrowserEvent.coordinate, mapBrowserEvent));\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.condition_(mapBrowserEvent)) {\n            this.startPixel_ = mapBrowserEvent.pixel;\n            this.box_.setMap(mapBrowserEvent.map);\n            this.box_.setPixels(this.startPixel_, this.startPixel_);\n            this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART, mapBrowserEvent.coordinate, mapBrowserEvent));\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragBox.prototype.onBoxEnd = function (event) { };\n    return DragBox;\n}(PointerInteraction));\nexport default DragBox;\n//# sourceMappingURL=DragBox.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragZoom\n */\nimport DragBox from './DragBox.js';\nimport { easeOut } from '../easing.js';\nimport { shiftKeyOnly } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nvar DragZoom = /** @class */ (function (_super) {\n    __extends(DragZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var condition = options.condition ? options.condition : shiftKeyOnly;\n        _this = _super.call(this, {\n            condition: condition,\n            className: options.className || 'ol-dragzoom',\n            minArea: options.minArea,\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 200;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.out_ = options.out !== undefined ? options.out : false;\n        return _this;\n    }\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragZoom.prototype.onBoxEnd = function (event) {\n        var map = this.getMap();\n        var view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n        var geometry = this.getGeometry();\n        if (this.out_) {\n            var rotatedExtent = view.rotatedExtentForGeometry(geometry);\n            var resolution = view.getResolutionForExtentInternal(rotatedExtent);\n            var factor = view.getResolution() / resolution;\n            geometry = geometry.clone();\n            geometry.scale(factor * factor);\n        }\n        view.fitInternal(geometry, {\n            duration: this.duration_,\n            easing: easeOut,\n        });\n    };\n    return DragZoom;\n}(DragBox));\nexport default DragZoom;\n//# sourceMappingURL=DragZoom.js.map","/**\n * @module ol/events/KeyCode\n */\n/**\n * @enum {number}\n * @const\n */\nexport default {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n};\n//# sourceMappingURL=KeyCode.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardPan\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { pan } from './Interaction.js';\nimport KeyCode from '../events/KeyCode.js';\nimport { noModifierKeys, targetNotEditable } from '../events/condition.js';\nimport { rotate as rotateCoordinate } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.noModifierKeys} and\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nvar KeyboardPan = /** @class */ (function (_super) {\n    __extends(KeyboardPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardPan(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n         * @return {boolean} Combined condition result.\n         */\n        _this.defaultCondition_ = function (mapBrowserEvent) {\n            return (noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent));\n        };\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ =\n            options.condition !== undefined\n                ? options.condition\n                : _this.defaultCondition_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelDelta_ =\n            options.pixelDelta !== undefined ? options.pixelDelta : 128;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n     * pressed).\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardPan}\n     */\n    KeyboardPan.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var keyCode = keyEvent.keyCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (keyCode == KeyCode.DOWN ||\n                    keyCode == KeyCode.LEFT ||\n                    keyCode == KeyCode.RIGHT ||\n                    keyCode == KeyCode.UP)) {\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n                var deltaX = 0, deltaY = 0;\n                if (keyCode == KeyCode.DOWN) {\n                    deltaY = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.LEFT) {\n                    deltaX = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.RIGHT) {\n                    deltaX = mapUnitsDelta;\n                }\n                else {\n                    deltaY = mapUnitsDelta;\n                }\n                var delta = [deltaX, deltaY];\n                rotateCoordinate(delta, view.getRotation());\n                pan(view, delta, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardPan;\n}(Interaction));\nexport default KeyboardPan;\n//# sourceMappingURL=KeyboardPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { targetNotEditable } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nvar KeyboardZoom = /** @class */ (function (_super) {\n    __extends(KeyboardZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : targetNotEditable;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n     * key pressed was '+' or '-').\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardZoom}\n     */\n    KeyboardZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN ||\n            mapBrowserEvent.type == EventType.KEYPRESS) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var charCode = keyEvent.charCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n                var map = mapBrowserEvent.map;\n                var delta = charCode == '+'.charCodeAt(0) ? this.delta_ : -this.delta_;\n                var view = map.getView();\n                zoomByDelta(view, delta, undefined, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardZoom;\n}(Interaction));\nexport default KeyboardZoom;\n//# sourceMappingURL=KeyboardZoom.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport { all, always, focusWithTabindex } from '../events/condition.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\nexport var Mode = {\n    TRACKPAD: 'trackpad',\n    WHEEL: 'wheel',\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.always}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n * @property {boolean} [constrainResolution=false] If true, the mouse wheel zoom\n * event will always animate to the closest zoom level after an interaction;\n * false means intermediary zoom levels are allowed.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /** @class */ (function (_super) {\n    __extends(MouseWheelZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function MouseWheelZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.totalDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.useAnchor_ =\n            options.useAnchor !== undefined ? options.useAnchor : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.constrainResolution_ =\n            options.constrainResolution !== undefined\n                ? options.constrainResolution\n                : false;\n        var condition = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {?import(\"../coordinate.js\").Coordinate}\n         */\n        _this.lastAnchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.startTime_ = undefined;\n        /**\n         * @private\n         * @type {?}\n         */\n        _this.timeoutId_;\n        /**\n         * @private\n         * @type {Mode|undefined}\n         */\n        _this.mode_ = undefined;\n        /**\n         * Trackpad events separated by this delay will be considered separate\n         * interactions.\n         * @type {number}\n         */\n        _this.trackpadEventGap_ = 400;\n        /**\n         * @type {?}\n         */\n        _this.trackpadTimeoutId_;\n        /**\n         * The number of delta values per zoom level\n         * @private\n         * @type {number}\n         */\n        _this.deltaPerZoom_ = 300;\n        return _this;\n    }\n    /**\n     * @private\n     */\n    MouseWheelZoom.prototype.endInteraction_ = function () {\n        this.trackpadTimeoutId_ = undefined;\n        var view = this.getMap().getView();\n        view.endInteraction(undefined, this.lastDelta_ ? (this.lastDelta_ > 0 ? 1 : -1) : 0, this.lastAnchor_);\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n     * zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var type = mapBrowserEvent.type;\n        if (type !== EventType.WHEEL) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n        wheelEvent.preventDefault();\n        if (this.useAnchor_) {\n            this.lastAnchor_ = mapBrowserEvent.coordinate;\n        }\n        // Delta normalisation inspired by\n        // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n        var delta;\n        if (mapBrowserEvent.type == EventType.WHEEL) {\n            delta = wheelEvent.deltaY;\n            if (FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n                delta /= DEVICE_PIXEL_RATIO;\n            }\n            if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n                delta *= 40;\n            }\n        }\n        if (delta === 0) {\n            return false;\n        }\n        else {\n            this.lastDelta_ = delta;\n        }\n        var now = Date.now();\n        if (this.startTime_ === undefined) {\n            this.startTime_ = now;\n        }\n        if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n            this.mode_ = Math.abs(delta) < 4 ? Mode.TRACKPAD : Mode.WHEEL;\n        }\n        var view = map.getView();\n        if (this.mode_ === Mode.TRACKPAD &&\n            !(view.getConstrainResolution() || this.constrainResolution_)) {\n            if (this.trackpadTimeoutId_) {\n                clearTimeout(this.trackpadTimeoutId_);\n            }\n            else {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.beginInteraction();\n            }\n            this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.timeout_);\n            view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n            this.startTime_ = now;\n            return false;\n        }\n        this.totalDelta_ += delta;\n        var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n        clearTimeout(this.timeoutId_);\n        this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n        return false;\n    };\n    /**\n     * @private\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n        var view = map.getView();\n        if (view.getAnimating()) {\n            view.cancelAnimations();\n        }\n        var delta = -clamp(this.totalDelta_, -this.maxDelta_ * this.deltaPerZoom_, this.maxDelta_ * this.deltaPerZoom_) / this.deltaPerZoom_;\n        if (view.getConstrainResolution() || this.constrainResolution_) {\n            // view has a zoom constraint, zoom by 1\n            delta = delta ? (delta > 0 ? 1 : -1) : 0;\n        }\n        zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n        this.mode_ = undefined;\n        this.totalDelta_ = 0;\n        this.lastAnchor_ = null;\n        this.startTime_ = undefined;\n        this.timeoutId_ = undefined;\n    };\n    /**\n     * Enable or disable using the mouse's location as an anchor when zooming\n     * @param {boolean} useAnchor true to zoom to the mouse's location, false\n     * to zoom to the center of the map\n     * @api\n     */\n    MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n        this.useAnchor_ = useAnchor;\n        if (!useAnchor) {\n            this.lastAnchor_ = null;\n        }\n    };\n    return MouseWheelZoom;\n}(Interaction));\nexport default MouseWheelZoom;\n//# sourceMappingURL=MouseWheelZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchRotate\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchRotate = /** @class */ (function (_super) {\n    __extends(PinchRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotating_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.rotationDelta_ = 0.0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var rotationDelta = 0.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        // angle between touches\n        var angle = Math.atan2(touch1.clientY - touch0.clientY, touch1.clientX - touch0.clientX);\n        if (this.lastAngle_ !== undefined) {\n            var delta = angle - this.lastAngle_;\n            this.rotationDelta_ += delta;\n            if (!this.rotating_ && Math.abs(this.rotationDelta_) > this.threshold_) {\n                this.rotating_ = true;\n            }\n            rotationDelta = delta;\n        }\n        this.lastAngle_ = angle;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        // rotate anchor point.\n        // FIXME: should be the intersection point between the lines:\n        //     touch0,touch1 and previousTouch0,previousTouch1\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // rotate\n        if (this.rotating_) {\n            map.render();\n            view.adjustRotationInternal(rotationDelta, this.anchor_);\n        }\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            view.endInteraction(this.duration_);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastAngle_ = undefined;\n            this.rotating_ = false;\n            this.rotationDelta_ = 0.0;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchRotate;\n}(PointerInteraction));\nexport default PinchRotate;\n//# sourceMappingURL=PinchRotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchZoom\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 400;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastDistance_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastScaleDelta_ = 1;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchZoom.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var scaleDelta = 1.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        var dx = touch0.clientX - touch1.clientX;\n        var dy = touch0.clientY - touch1.clientY;\n        // distance between touches\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        if (this.lastDistance_ !== undefined) {\n            scaleDelta = this.lastDistance_ / distance;\n        }\n        this.lastDistance_ = distance;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (scaleDelta != 1.0) {\n            this.lastScaleDelta_ = scaleDelta;\n        }\n        // scale anchor point.\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // scale, bypass the resolution constraint\n        map.render();\n        view.adjustResolutionInternal(scaleDelta, this.anchor_);\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            var direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n            view.endInteraction(this.duration_, direction);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastDistance_ = undefined;\n            this.lastScaleDelta_ = 1;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchZoom;\n}(PointerInteraction));\nexport default PinchZoom;\n//# sourceMappingURL=PinchZoom.js.map","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport Kinetic from './Kinetic.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nexport { default as DoubleClickZoom } from './interaction/DoubleClickZoom.js';\nexport { default as DragAndDrop } from './interaction/DragAndDrop.js';\nexport { default as DragBox } from './interaction/DragBox.js';\nexport { default as DragPan } from './interaction/DragPan.js';\nexport { default as DragRotate } from './interaction/DragRotate.js';\nexport { default as DragRotateAndZoom } from './interaction/DragRotateAndZoom.js';\nexport { default as DragZoom } from './interaction/DragZoom.js';\nexport { default as Draw } from './interaction/Draw.js';\nexport { default as Extent } from './interaction/Extent.js';\nexport { default as Interaction } from './interaction/Interaction.js';\nexport { default as KeyboardPan } from './interaction/KeyboardPan.js';\nexport { default as KeyboardZoom } from './interaction/KeyboardZoom.js';\nexport { default as Modify } from './interaction/Modify.js';\nexport { default as MouseWheelZoom } from './interaction/MouseWheelZoom.js';\nexport { default as PinchRotate } from './interaction/PinchRotate.js';\nexport { default as PinchZoom } from './interaction/PinchZoom.js';\nexport { default as Pointer } from './interaction/Pointer.js';\nexport { default as Select } from './interaction/Select.js';\nexport { default as Snap } from './interaction/Snap.js';\nexport { default as Translate } from './interaction/Translate.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions} [opt_options] Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var interactions = new Collection();\n    var kinetic = new Kinetic(-0.005, 0.05, 100);\n    var altShiftDragRotate = options.altShiftDragRotate !== undefined\n        ? options.altShiftDragRotate\n        : true;\n    if (altShiftDragRotate) {\n        interactions.push(new DragRotate());\n    }\n    var doubleClickZoom = options.doubleClickZoom !== undefined ? options.doubleClickZoom : true;\n    if (doubleClickZoom) {\n        interactions.push(new DoubleClickZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n    if (dragPan) {\n        interactions.push(new DragPan({\n            onFocusOnly: options.onFocusOnly,\n            kinetic: kinetic,\n        }));\n    }\n    var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate : true;\n    if (pinchRotate) {\n        interactions.push(new PinchRotate());\n    }\n    var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n    if (pinchZoom) {\n        interactions.push(new PinchZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n    if (keyboard) {\n        interactions.push(new KeyboardPan());\n        interactions.push(new KeyboardZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var mouseWheelZoom = options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n    if (mouseWheelZoom) {\n        interactions.push(new MouseWheelZoom({\n            onFocusOnly: options.onFocusOnly,\n            duration: options.zoomDuration,\n        }));\n    }\n    var shiftDragZoom = options.shiftDragZoom !== undefined ? options.shiftDragZoom : true;\n    if (shiftDragZoom) {\n        interactions.push(new DragZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    return interactions;\n}\n//# sourceMappingURL=interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport PluggableMap from './PluggableMap.js';\nimport { assign } from './obj.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        var _this = this;\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions({\n                onFocusOnly: true,\n            });\n        }\n        _this = _super.call(this, options) || this;\n        return _this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","/**\n * @module ol/has\n */\nvar ua = typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport var FIREFOX = ua.indexOf('firefox') !== -1;\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport var SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport var WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport var MAC = ua.indexOf('macintosh') !== -1;\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport var DEVICE_PIXEL_RATIO = typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport var WORKER_OFFSCREEN_CANVAS = typeof WorkerGlobalScope !== 'undefined' &&\n    typeof OffscreenCanvas !== 'undefined' &&\n    self instanceof WorkerGlobalScope; //eslint-disable-line\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport var IMAGE_DECODE = typeof Image !== 'undefined' && Image.prototype.decode;\n/**\n * @type {boolean}\n */\nexport var PASSIVE_EVENT_LISTENERS = (function () {\n    var passive = false;\n    try {\n        var options = Object.defineProperty({}, 'passive', {\n            get: function () {\n                passive = true;\n            },\n        });\n        window.addEventListener('_', null, options);\n        window.removeEventListener('_', null, options);\n    }\n    catch (error) {\n        // passive not supported\n    }\n    return passive;\n})();\n//# sourceMappingURL=has.js.map","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    var listening = true;\n    var decoding = false;\n    var loaded = false;\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, function () {\n            loaded = true;\n            if (!decoding) {\n                loadHandler();\n            }\n        }),\n    ];\n    if (img.src && IMAGE_DECODE) {\n        decoding = true;\n        img\n            .decode()\n            .then(function () {\n            if (listening) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening) {\n                if (loaded) {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n    }\n    else {\n        listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n    }\n    return function unlisten() {\n        listening = false;\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","/**\n * @module ol/OverlayPositioning\n */\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_CENTER: 'bottom-center',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER_LEFT: 'center-left',\n    CENTER_CENTER: 'center-center',\n    CENTER_RIGHT: 'center-right',\n    TOP_LEFT: 'top-left',\n    TOP_CENTER: 'top-center',\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=OverlayPositioning.js.map","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis(store.get);\n  var wmhas = uncurryThis(store.has);\n  var wmset = uncurryThis(store.set);\n  set = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","/**\n * @module ol/style/Style\n */\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Stroke from './Stroke.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import GeometryType from 'ol/geom/GeometryType';\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n *\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n *\n *  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(\n *    styles[GeometryType.LINE_STRING]\n *  );\n *\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n *\n *  styles[GeometryType.GEOMETRY_COLLECTION] = styles[\n *    GeometryType.POLYGON\n *  ].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {import(\"./Image.js\").default}\n         */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.hitDetectionRenderer_ =\n            options.hitDetectionRenderer !== undefined\n                ? options.hitDetectionRenderer\n                : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            renderer: this.getRenderer(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex(),\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Sets a custom renderer function for this style used\n     * in hit detection.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setHitDetectionRenderer = function (renderer) {\n        this.hitDetectionRenderer_ = renderer;\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getHitDetectionRenderer = function () {\n        return this.hitDetectionRenderer_;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return /** @type {import(\"../geom/Geometry.js\").default} */ (geometry);\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)',\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25,\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5,\n                }),\n                fill: fill,\n                stroke: stroke,\n            }),\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles[GeometryType.POLYGON] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5],\n            }),\n        }),\n    ];\n    styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n    styles[GeometryType.LINE_STRING] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2,\n            }),\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width,\n            }),\n        }),\n    ];\n    styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n    styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n    styles[GeometryType.POINT] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue,\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2,\n                }),\n            }),\n            zIndex: Infinity,\n        }),\n    ];\n    styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n    styles[GeometryType.GEOMETRY_COLLECTION] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","/**\n * @module ol/style/IconOrigin\n */\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Origin is at bottom left\n     * @api\n     */\n    BOTTOM_LEFT: 'bottom-left',\n    /**\n     * Origin is at bottom right\n     * @api\n     */\n    BOTTOM_RIGHT: 'bottom-right',\n    /**\n     * Origin is at top left\n     * @api\n     */\n    TOP_LEFT: 'top-left',\n    /**\n     * Origin is at top right\n     * @api\n     */\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=IconOrigin.js.map","/**\n * @module ol/style/IconImage\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar taintedTestContext = null;\nvar IconImage = /** @class */ (function (_super) {\n    __extends(IconImage, _super);\n    /**\n     * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n     * @param {string|undefined} src Src.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../ImageState.js\").default} imageState Image state.\n     * @param {import(\"../color.js\").Color} color Color.\n     */\n    function IconImage(image, src, size, crossOrigin, imageState, color) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = !image ? new Image() : image;\n        if (crossOrigin !== null) {\n            /** @type {HTMLImageElement} */ (_this.image_).crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {Object<number, HTMLCanvasElement>}\n         */\n        _this.canvas_ = {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = color;\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"../ImageState.js\").default}\n         */\n        _this.imageState_ = imageState;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = size;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         */\n        _this.tainted_;\n        return _this;\n    }\n    /**\n     * @private\n     * @return {boolean} The image canvas is tainted.\n     */\n    IconImage.prototype.isTainted_ = function () {\n        if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n            if (!taintedTestContext) {\n                taintedTestContext = createCanvasContext2D(1, 1);\n            }\n            taintedTestContext.drawImage(this.image_, 0, 0);\n            try {\n                taintedTestContext.getImageData(0, 0, 1, 1);\n                this.tainted_ = false;\n            }\n            catch (e) {\n                taintedTestContext = null;\n                this.tainted_ = true;\n            }\n        }\n        return this.tainted_ === true;\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.dispatchChangeEvent_ = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageError_ = function () {\n        this.imageState_ = ImageState.ERROR;\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageLoad_ = function () {\n        this.imageState_ = ImageState.LOADED;\n        if (this.size_) {\n            this.image_.width = this.size_[0];\n            this.image_.height = this.size_[1];\n        }\n        else {\n            this.size_ = [this.image_.width, this.image_.height];\n        }\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     */\n    IconImage.prototype.getImage = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Image or Canvas element.\n     */\n    IconImage.prototype.getPixelRatio = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? pixelRatio : 1;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    IconImage.prototype.getImageState = function () {\n        return this.imageState_;\n    };\n    /**\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    IconImage.prototype.getHitDetectionImage = function () {\n        if (!this.hitDetectionImage_) {\n            if (this.isTainted_()) {\n                var width = this.size_[0];\n                var height = this.size_[1];\n                var context = createCanvasContext2D(width, height);\n                context.fillRect(0, 0, width, height);\n                this.hitDetectionImage_ = context.canvas;\n            }\n            else {\n                this.hitDetectionImage_ = this.image_;\n            }\n        }\n        return this.hitDetectionImage_;\n    };\n    /**\n     * Get the size of the icon (in pixels).\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    IconImage.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {string|undefined} Image src.\n     */\n    IconImage.prototype.getSrc = function () {\n        return this.src_;\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    IconImage.prototype.load = function () {\n        if (this.imageState_ == ImageState.IDLE) {\n            this.imageState_ = ImageState.LOADING;\n            try {\n                /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n            }\n            catch (e) {\n                this.handleImageError_();\n            }\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @private\n     */\n    IconImage.prototype.replaceColor_ = function (pixelRatio) {\n        if (!this.color_ ||\n            this.canvas_[pixelRatio] ||\n            this.imageState_ !== ImageState.LOADED) {\n            return;\n        }\n        var canvas = document.createElement('canvas');\n        this.canvas_[pixelRatio] = canvas;\n        canvas.width = Math.ceil(this.image_.width * pixelRatio);\n        canvas.height = Math.ceil(this.image_.height * pixelRatio);\n        var ctx = canvas.getContext('2d');\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.drawImage(this.image_, 0, 0);\n        ctx.globalCompositeOperation = 'multiply';\n        // Internet Explorer 11 does not support the multiply operation.\n        // If the canvas is tainted in Internet Explorer this still produces\n        // a solid color image with the shape of the icon.\n        if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n            ctx.fillStyle = asString(this.color_);\n            ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(this.image_, 0, 0);\n        }\n        else {\n            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            var data = imgData.data;\n            var r = this.color_[0] / 255.0;\n            var g = this.color_[1] / 255.0;\n            var b = this.color_[2] / 255.0;\n            var a = this.color_[3];\n            for (var i = 0, ii = data.length; i < ii; i += 4) {\n                data[i] *= r;\n                data[i + 1] *= g;\n                data[i + 2] *= b;\n                data[i + 3] *= a;\n            }\n            ctx.putImageData(imgData, 0, 0);\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    IconImage.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return IconImage;\n}(EventTarget));\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n    var iconImage = iconImageCache.get(src, crossOrigin, color);\n    if (!iconImage) {\n        iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n        iconImageCache.set(src, crossOrigin, color, iconImage);\n    }\n    return iconImage;\n}\nexport default IconImage;\n//# sourceMappingURL=IconImage.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/style/Icon\n */\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { get as getIconImage } from './IconImage.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nvar Icon = /** @class */ (function (_super) {\n    __extends(Icon, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Icon(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        /**\n         * @type {number}\n         */\n        var opacity = options.opacity !== undefined ? options.opacity : 1;\n        /**\n         * @type {number}\n         */\n        var rotation = options.rotation !== undefined ? options.rotation : 0;\n        /**\n         * @type {number|import(\"../size.js\").Size}\n         */\n        var scale = options.scale !== undefined ? options.scale : 1;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: opacity,\n            rotation: rotation,\n            scale: scale,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n            rotateWithView: rotateWithView,\n        }) || this;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.normalizedAnchor_ = null;\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.anchorOrigin_ =\n            options.anchorOrigin !== undefined\n                ? options.anchorOrigin\n                : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorXUnits_ =\n            options.anchorXUnits !== undefined\n                ? options.anchorXUnits\n                : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorYUnits_ =\n            options.anchorYUnits !== undefined\n                ? options.anchorYUnits\n                : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        var image = options.img !== undefined ? options.img : null;\n        /**\n         * @type {import(\"../size.js\").Size}\n         */\n        var imgSize = options.imgSize !== undefined ? options.imgSize : null;\n        /**\n         * @type {string|undefined}\n         */\n        var src = options.src;\n        assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n        assert(!image || (image && imgSize), 5); // `imgSize` must be set when `image` is provided\n        if ((src === undefined || src.length === 0) && image) {\n            src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n        }\n        assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n        /**\n         * @type {import(\"../ImageState.js\").default}\n         */\n        var imageState = options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n        /**\n         * @private\n         * @type {import(\"./IconImage.js\").default}\n         */\n        _this.iconImage_ = getIconImage(image, \n        /** @type {string} */ (src), imgSize, _this.crossOrigin_, imageState, _this.color_);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.offsetOrigin_ =\n            options.offsetOrigin !== undefined\n                ? options.offsetOrigin\n                : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = options.size !== undefined ? options.size : null;\n        return _this;\n    }\n    /**\n     * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n     * @return {Icon} The cloned style.\n     * @api\n     */\n    Icon.prototype.clone = function () {\n        var scale = this.getScale();\n        return new Icon({\n            anchor: this.anchor_.slice(),\n            anchorOrigin: this.anchorOrigin_,\n            anchorXUnits: this.anchorXUnits_,\n            anchorYUnits: this.anchorYUnits_,\n            crossOrigin: this.crossOrigin_,\n            color: this.color_ && this.color_.slice\n                ? this.color_.slice()\n                : this.color_ || undefined,\n            src: this.getSrc(),\n            offset: this.offset_.slice(),\n            offsetOrigin: this.offsetOrigin_,\n            size: this.size_ !== null ? this.size_.slice() : undefined,\n            opacity: this.getOpacity(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n        });\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @return {Array<number>} Anchor.\n     * @api\n     */\n    Icon.prototype.getAnchor = function () {\n        var anchor = this.normalizedAnchor_;\n        if (!anchor) {\n            anchor = this.anchor_;\n            var size = this.getSize();\n            if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n                this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                if (!size) {\n                    return null;\n                }\n                anchor = this.anchor_.slice();\n                if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n                    anchor[0] *= size[0];\n                }\n                if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                    anchor[1] *= size[1];\n                }\n            }\n            if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n                if (!size) {\n                    return null;\n                }\n                if (anchor === this.anchor_) {\n                    anchor = this.anchor_.slice();\n                }\n                if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n                    this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                    anchor[0] = -anchor[0] + size[0];\n                }\n                if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                    this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                    anchor[1] = -anchor[1] + size[1];\n                }\n            }\n            this.normalizedAnchor_ = anchor;\n        }\n        var displacement = this.getDisplacement();\n        return [anchor[0] - displacement[0], anchor[1] + displacement[1]];\n    };\n    /**\n     * Set the anchor point. The anchor determines the center point for the\n     * symbolizer.\n     *\n     * @param {Array<number>} anchor Anchor.\n     * @api\n     */\n    Icon.prototype.setAnchor = function (anchor) {\n        this.anchor_ = anchor;\n        this.normalizedAnchor_ = null;\n    };\n    /**\n     * Get the icon color.\n     * @return {import(\"../color.js\").Color} Color.\n     * @api\n     */\n    Icon.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     * @api\n     */\n    Icon.prototype.getImage = function (pixelRatio) {\n        return this.iconImage_.getImage(pixelRatio);\n    };\n    /**\n     * Get the pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} The pixel ratio of the image.\n     * @api\n     */\n    Icon.prototype.getPixelRatio = function (pixelRatio) {\n        return this.iconImage_.getPixelRatio(pixelRatio);\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    Icon.prototype.getImageSize = function () {\n        return this.iconImage_.getSize();\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    Icon.prototype.getImageState = function () {\n        return this.iconImage_.getImageState();\n    };\n    /**\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    Icon.prototype.getHitDetectionImage = function () {\n        return this.iconImage_.getHitDetectionImage();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @return {Array<number>} Origin.\n     * @api\n     */\n    Icon.prototype.getOrigin = function () {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        var offset = this.offset_;\n        if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n            var size = this.getSize();\n            var iconImageSize = this.iconImage_.getSize();\n            if (!size || !iconImageSize) {\n                return null;\n            }\n            offset = offset.slice();\n            if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[0] = iconImageSize[0] - size[0] - offset[0];\n            }\n            if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[1] = iconImageSize[1] - size[1] - offset[1];\n            }\n        }\n        this.origin_ = offset;\n        return this.origin_;\n    };\n    /**\n     * Get the image URL.\n     * @return {string|undefined} Image src.\n     * @api\n     */\n    Icon.prototype.getSrc = function () {\n        return this.iconImage_.getSrc();\n    };\n    /**\n     * Get the size of the icon (in pixels).\n     * @return {import(\"../size.js\").Size} Image size.\n     * @api\n     */\n    Icon.prototype.getSize = function () {\n        return !this.size_ ? this.iconImage_.getSize() : this.size_;\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    Icon.prototype.listenImageChange = function (listener) {\n        this.iconImage_.addEventListener(EventType.CHANGE, listener);\n    };\n    /**\n     * Load not yet loaded URI.\n     * When rendering a feature with an icon style, the vector renderer will\n     * automatically call this method. However, you might want to call this\n     * method yourself for preloading or other purposes.\n     * @api\n     */\n    Icon.prototype.load = function () {\n        this.iconImage_.load();\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    Icon.prototype.unlistenImageChange = function (listener) {\n        this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n    };\n    return Icon;\n}(ImageStyle));\nexport default Icon;\n//# sourceMappingURL=Icon.js.map","/**\n * @module ol/source/State\n */\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n    UNDEFINED: 'undefined',\n    LOADING: 'loading',\n    READY: 'ready',\n    ERROR: 'error',\n};\n//# sourceMappingURL=State.js.map","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var name = options && options.name !== undefined ? options.name : key;\n  var state;\n  if (isCallable(value)) {\n    if (String(name).slice(0, 7) === 'Symbol(') {\n      name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n    }\n    if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n      createNonEnumerableProperty(value, 'name', name);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n});\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`\nvar documentCreateElement = require('../internals/document-create-element');\n\nvar classList = documentCreateElement('span').classList;\nvar DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;\n\nmodule.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport TileRange, { createOrUpdate as createOrUpdateTileRange, } from '../TileRange.js';\nimport { DEFAULT_TILE_SIZE } from './common.js';\nimport { assert } from '../asserts.js';\nimport { ceil, clamp, floor } from '../math.js';\nimport { createOrUpdate, getTopLeft } from '../extent.js';\nimport { createOrUpdate as createOrUpdateTileCoord } from '../tilecoord.js';\nimport { isSorted, linearFindNearest } from '../array.js';\nimport { toSize } from '../size.js';\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nvar tmpTileCoord = [0, 0, 0];\n/**\n * Number of decimal digits to consider in integer values when rounding.\n * @type {number}\n */\nvar DECIMALS = 5;\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and downwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and downwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. If specified the values\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent\n * for which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nvar TileGrid = /** @class */ (function () {\n    /**\n     * @param {Options} options Tile grid options.\n     */\n    function TileGrid(options) {\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n        /**\n         * @private\n         * @type {!Array<number>}\n         */\n        this.resolutions_ = options.resolutions;\n        assert(isSorted(this.resolutions_, function (a, b) {\n            return b - a;\n        }, true), 17); // `resolutions` must be sorted in descending order\n        // check if we've got a consistent zoom factor and origin\n        var zoomFactor;\n        if (!options.origins) {\n            for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n                if (!zoomFactor) {\n                    zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n                }\n                else {\n                    if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n                        zoomFactor = undefined;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zoomFactor_ = zoomFactor;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.maxZoom = this.resolutions_.length - 1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        this.origin_ = options.origin !== undefined ? options.origin : null;\n        /**\n         * @private\n         * @type {Array<import(\"../coordinate.js\").Coordinate>}\n         */\n        this.origins_ = null;\n        if (options.origins !== undefined) {\n            this.origins_ = options.origins;\n            assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n        }\n        var extent = options.extent;\n        if (extent !== undefined && !this.origin_ && !this.origins_) {\n            this.origin_ = getTopLeft(extent);\n        }\n        assert((!this.origin_ && this.origins_) || (this.origin_ && !this.origins_), 18); // Either `origin` or `origins` must be configured, never both\n        /**\n         * @private\n         * @type {Array<number|import(\"../size.js\").Size>}\n         */\n        this.tileSizes_ = null;\n        if (options.tileSizes !== undefined) {\n            this.tileSizes_ = options.tileSizes;\n            assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n        }\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.tileSize_ =\n            options.tileSize !== undefined\n                ? options.tileSize\n                : !this.tileSizes_\n                    ? DEFAULT_TILE_SIZE\n                    : null;\n        assert((!this.tileSize_ && this.tileSizes_) ||\n            (this.tileSize_ && !this.tileSizes_), 22); // Either `tileSize` or `tileSizes` must be configured, never both\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = extent !== undefined ? extent : null;\n        /**\n         * @private\n         * @type {Array<import(\"../TileRange.js\").default>}\n         */\n        this.fullTileRanges_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.tmpSize_ = [0, 0];\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.tmpExtent_ = [0, 0, 0, 0];\n        if (options.sizes !== undefined) {\n            this.fullTileRanges_ = options.sizes.map(function (size, z) {\n                var tileRange = new TileRange(Math.min(0, size[0]), Math.max(size[0] - 1, -1), Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n                if (extent) {\n                    var restrictedTileRange = this.getTileRangeForExtentAndZ(extent, z);\n                    tileRange.minX = Math.max(restrictedTileRange.minX, tileRange.minX);\n                    tileRange.maxX = Math.min(restrictedTileRange.maxX, tileRange.maxX);\n                    tileRange.minY = Math.max(restrictedTileRange.minY, tileRange.minY);\n                    tileRange.maxY = Math.min(restrictedTileRange.maxY, tileRange.maxY);\n                }\n                return tileRange;\n            }, this);\n        }\n        else if (extent) {\n            this.calculateTileRanges_(extent);\n        }\n    }\n    /**\n     * Call a function with each tile coordinate for a given extent and zoom level.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} zoom Integer zoom level.\n     * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.forEachTileCoord = function (extent, zoom, callback) {\n        var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n        for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n            for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n                callback([zoom, i, j]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n     * @param {import(\"../TileRange.js\").default} [opt_tileRange] Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Temporary import(\"../extent.js\").Extent object.\n     * @return {boolean} Callback succeeded.\n     */\n    TileGrid.prototype.forEachTileCoordParentTileRange = function (tileCoord, callback, opt_tileRange, opt_extent) {\n        var tileRange, x, y;\n        var tileCoordExtent = null;\n        var z = tileCoord[0] - 1;\n        if (this.zoomFactor_ === 2) {\n            x = tileCoord[1];\n            y = tileCoord[2];\n        }\n        else {\n            tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n        }\n        while (z >= this.minZoom) {\n            if (this.zoomFactor_ === 2) {\n                x = Math.floor(x / 2);\n                y = Math.floor(y / 2);\n                tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n            }\n            else {\n                tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n            }\n            if (callback(z, tileRange)) {\n                return true;\n            }\n            --z;\n        }\n        return false;\n    };\n    /**\n     * Get the extent for this tile grid, if it was configured.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the maximum zoom level for the grid.\n     * @return {number} Max zoom.\n     * @api\n     */\n    TileGrid.prototype.getMaxZoom = function () {\n        return this.maxZoom;\n    };\n    /**\n     * Get the minimum zoom level for the grid.\n     * @return {number} Min zoom.\n     * @api\n     */\n    TileGrid.prototype.getMinZoom = function () {\n        return this.minZoom;\n    };\n    /**\n     * Get the origin for the grid at the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {import(\"../coordinate.js\").Coordinate} Origin.\n     * @api\n     */\n    TileGrid.prototype.getOrigin = function (z) {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        else {\n            return this.origins_[z];\n        }\n    };\n    /**\n     * Get the resolution for the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {number} Resolution.\n     * @api\n     */\n    TileGrid.prototype.getResolution = function (z) {\n        return this.resolutions_[z];\n    };\n    /**\n     * Get the list of resolutions for the tile grid.\n     * @return {Array<number>} Resolutions.\n     * @api\n     */\n    TileGrid.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../TileRange.js\").default} [opt_tileRange] Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileCoordChildTileRange = function (tileCoord, opt_tileRange, opt_extent) {\n        if (tileCoord[0] < this.maxZoom) {\n            if (this.zoomFactor_ === 2) {\n                var minX = tileCoord[1] * 2;\n                var minY = tileCoord[2] * 2;\n                return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n            }\n            var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent || this.tmpExtent_);\n            return this.getTileRangeForExtentAndZ(tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n        }\n        return null;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} [opt_tileRange] Temporary import(\"../TileRange.js\").default object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForTileCoordAndZ = function (tileCoord, z, opt_tileRange) {\n        if (z > this.maxZoom || z < this.minZoom) {\n            return null;\n        }\n        var tileCoordZ = tileCoord[0];\n        var tileCoordX = tileCoord[1];\n        var tileCoordY = tileCoord[2];\n        if (z === tileCoordZ) {\n            return createOrUpdateTileRange(tileCoordX, tileCoordY, tileCoordX, tileCoordY, opt_tileRange);\n        }\n        if (this.zoomFactor_) {\n            var factor = Math.pow(this.zoomFactor_, z - tileCoordZ);\n            var minX = Math.floor(tileCoordX * factor);\n            var minY = Math.floor(tileCoordY * factor);\n            if (z < tileCoordZ) {\n                return createOrUpdateTileRange(minX, minX, minY, minY, opt_tileRange);\n            }\n            var maxX = Math.floor(factor * (tileCoordX + 1)) - 1;\n            var maxY = Math.floor(factor * (tileCoordY + 1)) - 1;\n            return createOrUpdateTileRange(minX, maxX, minY, maxY, opt_tileRange);\n        }\n        var tileCoordExtent = this.getTileCoordExtent(tileCoord, this.tmpExtent_);\n        return this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n    };\n    /**\n     * Get the extent for a tile range.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    TileGrid.prototype.getTileRangeExtent = function (z, tileRange, opt_extent) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n        var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n        var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n        var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get a tile range for the given extent and integer zoom level.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} [opt_tileRange] Temporary tile range object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForExtentAndZ = function (extent, z, opt_tileRange) {\n        var tileCoord = tmpTileCoord;\n        this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n        var minX = tileCoord[1];\n        var minY = tileCoord[2];\n        this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n        return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n     */\n    TileGrid.prototype.getTileCoordCenter = function (tileCoord) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        return [\n            origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n            origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution,\n        ];\n    };\n    /**\n     * Get the extent of a tile coordinate.\n     *\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Temporary extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordExtent = function (tileCoord, opt_extent) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n        var minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n        var maxX = minX + tileSize[0] * resolution;\n        var maxY = minY + tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get the tile coordinate for the given map coordinate and resolution.  This\n     * method considers that coordinates that intersect tile boundaries should be\n     * assigned the higher tile coordinate.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndResolution = function (coordinate, resolution, opt_tileCoord) {\n        return this.getTileCoordForXYAndResolution_(coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n    };\n    /**\n     * Note that this method should not be called for resolutions that correspond\n     * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {number} resolution Resolution (for a non-integer zoom level).\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndResolution_ = function (x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n        var z = this.getZForResolution(resolution);\n        var scale = resolution / this.getResolution(z);\n        var origin = this.getOrigin(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var tileCoordX = (scale * (x - origin[0])) / resolution / tileSize[0];\n        var tileCoordY = (scale * (origin[1] - y)) / resolution / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = ceil(tileCoordX, DECIMALS) - 1;\n            tileCoordY = ceil(tileCoordY, DECIMALS) - 1;\n        }\n        else {\n            tileCoordX = floor(tileCoordX, DECIMALS);\n            tileCoordY = floor(tileCoordY, DECIMALS);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n     * they should have separate implementations.  This method is for integer zoom\n     * levels.  The other method should only be called for resolutions corresponding\n     * to non-integer zoom levels.\n     * @param {number} x Map x coordinate.\n     * @param {number} y Map y coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndZ_ = function (x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var tileCoordX = (x - origin[0]) / resolution / tileSize[0];\n        var tileCoordY = (origin[1] - y) / resolution / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = ceil(tileCoordX, DECIMALS) - 1;\n            tileCoordY = ceil(tileCoordY, DECIMALS) - 1;\n        }\n        else {\n            tileCoordX = floor(tileCoordX, DECIMALS);\n            tileCoordY = floor(tileCoordY, DECIMALS);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Get a tile coordinate given a map coordinate and zoom level.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} z Zoom level.\n     * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndZ = function (coordinate, z, opt_tileCoord) {\n        return this.getTileCoordForXYAndZ_(coordinate[0], coordinate[1], z, false, opt_tileCoord);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {number} Tile resolution.\n     */\n    TileGrid.prototype.getTileCoordResolution = function (tileCoord) {\n        return this.resolutions_[tileCoord[0]];\n    };\n    /**\n     * Get the tile size for a zoom level. The type of the return value matches the\n     * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n     * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n     * @param {number} z Z.\n     * @return {number|import(\"../size.js\").Size} Tile size.\n     * @api\n     */\n    TileGrid.prototype.getTileSize = function (z) {\n        if (this.tileSize_) {\n            return this.tileSize_;\n        }\n        else {\n            return this.tileSizes_[z];\n        }\n    };\n    /**\n     * @param {number} z Zoom level.\n     * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n     */\n    TileGrid.prototype.getFullTileRange = function (z) {\n        if (!this.fullTileRanges_) {\n            return this.extent_\n                ? this.getTileRangeForExtentAndZ(this.extent_, z)\n                : null;\n        }\n        else {\n            return this.fullTileRanges_[z];\n        }\n    };\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number|import(\"../array.js\").NearestDirectionFunction} [opt_direction]\n     *     If 0, the nearest resolution will be used.\n     *     If 1, the nearest higher resolution (lower Z) will be used. If -1, the\n     *     nearest lower resolution (higher Z) will be used. Default is 0.\n     *     Use a {@link module:ol/array~NearestDirectionFunction} for more precise control.\n     *\n     * For example to change tile Z at the midpoint of zoom levels\n     * ```js\n     * function(value, high, low) {\n     *   return value - low * Math.sqrt(high / low);\n     * }\n     * ```\n     * @return {number} Z.\n     * @api\n     */\n    TileGrid.prototype.getZForResolution = function (resolution, opt_direction) {\n        var z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n        return clamp(z, this.minZoom, this.maxZoom);\n    };\n    /**\n     * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n     * @private\n     */\n    TileGrid.prototype.calculateTileRanges_ = function (extent) {\n        var length = this.resolutions_.length;\n        var fullTileRanges = new Array(length);\n        for (var z = this.minZoom; z < length; ++z) {\n            fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n        }\n        this.fullTileRanges_ = fullTileRanges;\n    };\n    return TileGrid;\n}());\nexport default TileGrid;\n//# sourceMappingURL=TileGrid.js.map","/**\n * @module ol/sphere\n */\nimport GeometryType from './geom/GeometryType.js';\nimport { toDegrees, toRadians } from './math.js';\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the\n * [mean Earth radius](https://en.wikipedia.org/wiki/Earth_radius#Mean_radius)\n * for the WGS84 ellipsoid is used.\n */\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport var DEFAULT_RADIUS = 6371008.8;\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number} [opt_radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lat2 = toRadians(c2[1]);\n    var deltaLatBy2 = (lat2 - lat1) / 2;\n    var deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n    var a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n        Math.sin(deltaLonBy2) *\n            Math.sin(deltaLonBy2) *\n            Math.cos(lat1) *\n            Math.cos(lat2);\n    return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n    var length = 0;\n    for (var i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n        length += getDistance(coordinates[i], coordinates[i + 1], radius);\n    }\n    return length;\n}\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [opt_options] Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== GeometryType.GEOMETRY_COLLECTION) {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var length = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT: {\n            break;\n        }\n        case GeometryType.LINE_STRING:\n        case GeometryType.LINEAR_RING: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            length = getLengthInternal(coordinates, radius);\n            break;\n        }\n        case GeometryType.MULTI_LINE_STRING:\n        case GeometryType.POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                length += getLengthInternal(coordinates[i], radius);\n            }\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                for (j = 0, jj = coords.length; j < jj; ++j) {\n                    length += getLengthInternal(coords[j], radius);\n                }\n            }\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            var geometries = \n            /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                length += getLength(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return length;\n}\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n    var area = 0;\n    var len = coordinates.length;\n    var x1 = coordinates[len - 1][0];\n    var y1 = coordinates[len - 1][1];\n    for (var i = 0; i < len; i++) {\n        var x2 = coordinates[i][0];\n        var y2 = coordinates[i][1];\n        area +=\n            toRadians(x2 - x1) *\n                (2 + Math.sin(toRadians(y1)) + Math.sin(toRadians(y2)));\n        x1 = x2;\n        y1 = y2;\n    }\n    return (area * radius * radius) / 2.0;\n}\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [opt_options] Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== GeometryType.GEOMETRY_COLLECTION) {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var area = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n        case GeometryType.LINE_STRING:\n        case GeometryType.MULTI_LINE_STRING:\n        case GeometryType.LINEAR_RING: {\n            break;\n        }\n        case GeometryType.POLYGON: {\n            coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n            area = Math.abs(getAreaInternal(coordinates[0], radius));\n            for (i = 1, ii = coordinates.length; i < ii; ++i) {\n                area -= Math.abs(getAreaInternal(coordinates[i], radius));\n            }\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                area += Math.abs(getAreaInternal(coords[0], radius));\n                for (j = 1, jj = coords.length; j < jj; ++j) {\n                    area -= Math.abs(getAreaInternal(coords[j], radius));\n                }\n            }\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            var geometries = \n            /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                area += getArea(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return area;\n}\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number} [opt_radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lon1 = toRadians(c1[0]);\n    var dByR = distance / radius;\n    var lat = Math.asin(Math.sin(lat1) * Math.cos(dByR) +\n        Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n    var lon = lon1 +\n        Math.atan2(Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1), Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n    return [toDegrees(lon), toDegrees(lat)];\n}\n//# sourceMappingURL=sphere.js.map","var global = require('../internals/global');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar Object = global.Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n/**\n * @typedef {'propertychange'} Types\n */\n//# sourceMappingURL=ObjectEventType.js.map","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));\n","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it…\n        cosh = Math.cosh;\n    }\n    else {\n        // … else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n})();\n/**\n * Return the base 2 logarithm of a given number. The method will use the\n * native `Math.log2` function if it is available, otherwise the base 2\n * logarithm will be calculated via the reference implementation of the\n * Mozilla developer network.\n *\n * @param {number} x X.\n * @return {number} Base 2 logarithm of x.\n */\nexport var log2 = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var log2;\n    if ('log2' in Math) {\n        // The environment supports the native Math.log2 function, use it…\n        log2 = Math.log2;\n    }\n    else {\n        // … else, use the reference implementation of MDN:\n        log2 = function (x) {\n            return Math.log(x) * Math.LOG2E;\n        };\n    }\n    return log2;\n})();\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return (angleInRadians * 180) / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return (angleInDegrees * Math.PI) / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n    var factor = Math.pow(10, decimals);\n    return Math.round(n * factor) / factor;\n}\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n    return Math.round(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n    return Math.floor(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n    return Math.ceil(toFixed(n, decimals));\n}\n//# sourceMappingURL=math.js.map","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw TypeError(String(argument) + ' is not an object');\n};\n","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\nimport { toSize } from '../size.js';\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nvar DEFAULT_FILL_COLOR = '#333';\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement='point'] Text placement.\n * @property {number|import(\"../size.js\").Size} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nvar Text = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Text(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.font_ = options.font;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size|undefined}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.scaleArray_ = toSize(options.scale !== undefined ? options.scale : 1);\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.text_ = options.text;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textAlign_ = options.textAlign;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textBaseline_ = options.textBaseline;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ =\n            options.fill !== undefined\n                ? options.fill\n                : new Fill({ color: DEFAULT_FILL_COLOR });\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxAngle_ =\n            options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n        /**\n         * @private\n         * @type {import(\"./TextPlacement.js\").default|string}\n         */\n        this.placement_ =\n            options.placement !== undefined ? options.placement : TextPlacement.POINT;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overflow_ = !!options.overflow;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.backgroundFill_ = options.backgroundFill\n            ? options.backgroundFill\n            : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.backgroundStroke_ = options.backgroundStroke\n            ? options.backgroundStroke\n            : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.padding_ = options.padding === undefined ? null : options.padding;\n    }\n    /**\n     * Clones the style.\n     * @return {Text} The cloned style.\n     * @api\n     */\n    Text.prototype.clone = function () {\n        var scale = this.getScale();\n        return new Text({\n            font: this.getFont(),\n            placement: this.getPlacement(),\n            maxAngle: this.getMaxAngle(),\n            overflow: this.getOverflow(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            text: this.getText(),\n            textAlign: this.getTextAlign(),\n            textBaseline: this.getTextBaseline(),\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            offsetX: this.getOffsetX(),\n            offsetY: this.getOffsetY(),\n            backgroundFill: this.getBackgroundFill()\n                ? this.getBackgroundFill().clone()\n                : undefined,\n            backgroundStroke: this.getBackgroundStroke()\n                ? this.getBackgroundStroke().clone()\n                : undefined,\n            padding: this.getPadding(),\n        });\n    };\n    /**\n     * Get the `overflow` configuration.\n     * @return {boolean} Let text overflow the length of the path they follow.\n     * @api\n     */\n    Text.prototype.getOverflow = function () {\n        return this.overflow_;\n    };\n    /**\n     * Get the font name.\n     * @return {string|undefined} Font.\n     * @api\n     */\n    Text.prototype.getFont = function () {\n        return this.font_;\n    };\n    /**\n     * Get the maximum angle between adjacent characters.\n     * @return {number} Angle in radians.\n     * @api\n     */\n    Text.prototype.getMaxAngle = function () {\n        return this.maxAngle_;\n    };\n    /**\n     * Get the label placement.\n     * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n     * @api\n     */\n    Text.prototype.getPlacement = function () {\n        return this.placement_;\n    };\n    /**\n     * Get the x-offset for the text.\n     * @return {number} Horizontal text offset.\n     * @api\n     */\n    Text.prototype.getOffsetX = function () {\n        return this.offsetX_;\n    };\n    /**\n     * Get the y-offset for the text.\n     * @return {number} Vertical text offset.\n     * @api\n     */\n    Text.prototype.getOffsetY = function () {\n        return this.offsetY_;\n    };\n    /**\n     * Get the fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Determine whether the text rotates with the map.\n     * @return {boolean|undefined} Rotate with map.\n     * @api\n     */\n    Text.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the text rotation.\n     * @return {number|undefined} Rotation.\n     * @api\n     */\n    Text.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the text scale.\n     * @return {number|import(\"../size.js\").Size|undefined} Scale.\n     * @api\n     */\n    Text.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the symbolizer scale array.\n     * @return {import(\"../size.js\").Size} Scale array.\n     */\n    Text.prototype.getScaleArray = function () {\n        return this.scaleArray_;\n    };\n    /**\n     * Get the stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Get the text to be rendered.\n     * @return {string|undefined} Text.\n     * @api\n     */\n    Text.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Get the text alignment.\n     * @return {string|undefined} Text align.\n     * @api\n     */\n    Text.prototype.getTextAlign = function () {\n        return this.textAlign_;\n    };\n    /**\n     * Get the text baseline.\n     * @return {string|undefined} Text baseline.\n     * @api\n     */\n    Text.prototype.getTextBaseline = function () {\n        return this.textBaseline_;\n    };\n    /**\n     * Get the background fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getBackgroundFill = function () {\n        return this.backgroundFill_;\n    };\n    /**\n     * Get the background stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getBackgroundStroke = function () {\n        return this.backgroundStroke_;\n    };\n    /**\n     * Get the padding for the text.\n     * @return {Array<number>} Padding.\n     * @api\n     */\n    Text.prototype.getPadding = function () {\n        return this.padding_;\n    };\n    /**\n     * Set the `overflow` property.\n     *\n     * @param {boolean} overflow Let text overflow the path that it follows.\n     * @api\n     */\n    Text.prototype.setOverflow = function (overflow) {\n        this.overflow_ = overflow;\n    };\n    /**\n     * Set the font.\n     *\n     * @param {string|undefined} font Font.\n     * @api\n     */\n    Text.prototype.setFont = function (font) {\n        this.font_ = font;\n    };\n    /**\n     * Set the maximum angle between adjacent characters.\n     *\n     * @param {number} maxAngle Angle in radians.\n     * @api\n     */\n    Text.prototype.setMaxAngle = function (maxAngle) {\n        this.maxAngle_ = maxAngle;\n    };\n    /**\n     * Set the x offset.\n     *\n     * @param {number} offsetX Horizontal text offset.\n     * @api\n     */\n    Text.prototype.setOffsetX = function (offsetX) {\n        this.offsetX_ = offsetX;\n    };\n    /**\n     * Set the y offset.\n     *\n     * @param {number} offsetY Vertical text offset.\n     * @api\n     */\n    Text.prototype.setOffsetY = function (offsetY) {\n        this.offsetY_ = offsetY;\n    };\n    /**\n     * Set the text placement.\n     *\n     * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n     * @api\n     */\n    Text.prototype.setPlacement = function (placement) {\n        this.placement_ = placement;\n    };\n    /**\n     * Set whether to rotate the text with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    Text.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number|undefined} rotation Rotation.\n     * @api\n     */\n    Text.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|import(\"../size.js\").Size|undefined} scale Scale.\n     * @api\n     */\n    Text.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n        this.scaleArray_ = toSize(scale !== undefined ? scale : 1);\n    };\n    /**\n     * Set the stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Set the text.\n     *\n     * @param {string|undefined} text Text.\n     * @api\n     */\n    Text.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Set the text alignment.\n     *\n     * @param {string|undefined} textAlign Text align.\n     * @api\n     */\n    Text.prototype.setTextAlign = function (textAlign) {\n        this.textAlign_ = textAlign;\n    };\n    /**\n     * Set the text baseline.\n     *\n     * @param {string|undefined} textBaseline Text baseline.\n     * @api\n     */\n    Text.prototype.setTextBaseline = function (textBaseline) {\n        this.textBaseline_ = textBaseline;\n    };\n    /**\n     * Set the background fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setBackgroundFill = function (fill) {\n        this.backgroundFill_ = fill;\n    };\n    /**\n     * Set the background stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setBackgroundStroke = function (stroke) {\n        this.backgroundStroke_ = stroke;\n    };\n    /**\n     * Set the padding (`[top, right, bottom, left]`).\n     *\n     * @param {!Array<number>} padding Padding.\n     * @api\n     */\n    Text.prototype.setPadding = function (padding) {\n        this.padding_ = padding;\n    };\n    return Text;\n}());\nexport default Text;\n//# sourceMappingURL=Text.js.map","/**\n * @module ol/style/IconAnchorUnits\n */\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Anchor is a fraction\n     * @api\n     */\n    FRACTION: 'fraction',\n    /**\n     * Anchor is in pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n};\n//# sourceMappingURL=IconAnchorUnits.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' +\n            path +\n            '/doc/errors/#' +\n            code +\n            ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth(),\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","// addapted from the document.currentScript polyfill by Adam Miller\n// MIT license\n// source: https://github.com/amiller-gh/currentScript-polyfill\n\n// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    root.getCurrentScript = factory();\n  }\n}(typeof self !== 'undefined' ? self : this, function () {\n  function getCurrentScript () {\n    var descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')\n    // for chrome\n    if (!descriptor && 'currentScript' in document && document.currentScript) {\n      return document.currentScript\n    }\n\n    // for other browsers with native support for currentScript\n    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {\n      return document.currentScript\n    }\n  \n    // IE 8-10 support script readyState\n    // IE 11+ & Firefox support stack trace\n    try {\n      throw new Error();\n    }\n    catch (err) {\n      // Find the second match for the \"at\" string to get file src url from stack.\n      var ieStackRegExp = /.*at [^(]*\\((.*):(.+):(.+)\\)$/ig,\n        ffStackRegExp = /@([^@]*):(\\d+):(\\d+)\\s*$/ig,\n        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),\n        scriptLocation = (stackDetails && stackDetails[1]) || false,\n        line = (stackDetails && stackDetails[2]) || false,\n        currentLocation = document.location.href.replace(document.location.hash, ''),\n        pageSource,\n        inlineScriptSourceRegExp,\n        inlineScriptSource,\n        scripts = document.getElementsByTagName('script'); // Live NodeList collection\n  \n      if (scriptLocation === currentLocation) {\n        pageSource = document.documentElement.outerHTML;\n        inlineScriptSourceRegExp = new RegExp('(?:[^\\\\n]+?\\\\n){0,' + (line - 2) + '}[^<]*<script>([\\\\d\\\\D]*?)<\\\\/script>[\\\\d\\\\D]*', 'i');\n        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();\n      }\n  \n      for (var i = 0; i < scripts.length; i++) {\n        // If ready state is interactive, return the script tag\n        if (scripts[i].readyState === 'interactive') {\n          return scripts[i];\n        }\n  \n        // If src matches, return the script tag\n        if (scripts[i].src === scriptLocation) {\n          return scripts[i];\n        }\n  \n        // If inline source matches, return the script tag\n        if (\n          scriptLocation === currentLocation &&\n          scripts[i].innerHTML &&\n          scripts[i].innerHTML.trim() === inlineScriptSource\n        ) {\n          return scripts[i];\n        }\n      }\n  \n      // If no match, return null\n      return null;\n    }\n  };\n\n  return getCurrentScript\n}));\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","/**\n * @module ol/rotationconstraint\n */\nimport { toRadians } from './math.js';\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n    if (rotation !== undefined) {\n        return 0;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n    if (rotation !== undefined) {\n        return rotation;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n    var theta = (2 * Math.PI) / n;\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            rotation = Math.floor(rotation / theta + 0.5) * theta;\n            return rotation;\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} [opt_tolerance] Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n    var tolerance = opt_tolerance || toRadians(5);\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            if (Math.abs(rotation) <= tolerance) {\n                return 0;\n            }\n            else {\n                return rotation;\n            }\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=rotationconstraint.js.map","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","/**\n * @module ol/geom/flat/closest\n */\nimport { lerp, squaredDistance as squaredDx } from '../../math.js';\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n    var x1 = flatCoordinates[offset1];\n    var y1 = flatCoordinates[offset1 + 1];\n    var dx = flatCoordinates[offset2] - x1;\n    var dy = flatCoordinates[offset2 + 1] - y1;\n    var offset;\n    if (dx === 0 && dy === 0) {\n        offset = offset1;\n    }\n    else {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            offset = offset2;\n        }\n        else if (t > 0) {\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = lerp(flatCoordinates[offset1 + i], flatCoordinates[offset2 + i], t);\n            }\n            closestPoint.length = stride;\n            return;\n        }\n        else {\n            offset = offset1;\n        }\n    }\n    for (var i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n    }\n    closestPoint.length = stride;\n}\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    for (offset += stride; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        var squaredDelta = squaredDx(x1, y1, x2, y2);\n        if (squaredDelta > max) {\n            max = squaredDelta;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        max = maxSquaredDelta(flatCoordinates, offset, end, stride, max);\n        offset = end;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        max = arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max);\n        offset = ends[ends.length - 1];\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    if (offset == end) {\n        return minSquaredDistance;\n    }\n    var i, squaredDistance;\n    if (maxDelta === 0) {\n        // All points are identical, so just test the first point.\n        squaredDistance = squaredDx(x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n        if (squaredDistance < minSquaredDistance) {\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[offset + i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    }\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    var index = offset + stride;\n    while (index < end) {\n        assignClosest(flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n            index += stride;\n        }\n        else {\n            // Skip ahead multiple points, because we know that all the skipped\n            // points cannot be any closer than the closest point we have found so\n            // far.  We know this because we know how close the current point is, how\n            // close the closest point we have found so far is, and the maximum\n            // distance between consecutive points.  For example, if we're currently\n            // at distance 10, the best we've found so far is 3, and that the maximum\n            // distance between consecutive points is 2, then we'll need to skip at\n            // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n            // finding a closer point.  We use Math.max(..., 1) to ensure that we\n            // always advance at least one point, to avoid an infinite loop.\n            index +=\n                stride *\n                    Math.max(((Math.sqrt(squaredDistance) - Math.sqrt(minSquaredDistance)) /\n                        maxDelta) |\n                        0, 1);\n        }\n    }\n    if (isRing) {\n        // Check the closing segment.\n        assignClosest(flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n        }\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        minSquaredDistance = assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = end;\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset, endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        minSquaredDistance = assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = ends[ends.length - 1];\n    }\n    return minSquaredDistance;\n}\n//# sourceMappingURL=closest.js.map","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Geometry\n */\nimport BaseObject from '../Object.js';\nimport Units from '../proj/Units.js';\nimport { abstract } from '../util.js';\nimport { compose as composeTransform, create as createTransform, } from '../transform.js';\nimport { createEmpty, createOrUpdateEmpty, getHeight, returnOrUpdate, } from '../extent.js';\nimport { get as getProjection, getTransform } from '../proj.js';\nimport { memoizeOne } from '../functions.js';\nimport { transform2D } from './flat/transform.js';\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nvar Geometry = /** @class */ (function (_super) {\n    __extends(Geometry, _super);\n    function Geometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.extent_ = createEmpty();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.extentRevision_ = -1;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryRevision = 0;\n        /**\n         * Get a transformed and simplified version of the geometry.\n         * @abstract\n         * @param {number} revision The geometry revision.\n         * @param {number} squaredTolerance Squared tolerance.\n         * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n         * @return {Geometry} Simplified geometry.\n         */\n        _this.simplifyTransformedInternal = memoizeOne(function (revision, squaredTolerance, opt_transform) {\n            if (!opt_transform) {\n                return this.getSimplifiedGeometry(squaredTolerance);\n            }\n            var clone = this.clone();\n            clone.applyTransform(opt_transform);\n            return clone.getSimplifiedGeometry(squaredTolerance);\n        });\n        return _this;\n    }\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.simplifyTransformed = function (squaredTolerance, opt_transform) {\n        return this.simplifyTransformedInternal(this.getRevision(), squaredTolerance, opt_transform);\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @abstract\n     * @return {!Geometry} Clone.\n     */\n    Geometry.prototype.clone = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Geometry.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        return abstract();\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Geometry.prototype.containsXY = function (x, y) {\n        var coord = this.getClosestPoint([x, y]);\n        return coord[0] === x && coord[1] === y;\n    };\n    /**\n     * Return the closest point of the geometry to the passed point as\n     * {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} point Point.\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_closestPoint] Closest point.\n     * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n     * @api\n     */\n    Geometry.prototype.getClosestPoint = function (point, opt_closestPoint) {\n        var closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n        this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n        return closestPoint;\n    };\n    /**\n     * Returns true if this geometry includes the specified coordinate. If the\n     * coordinate is on the boundary of the geometry, returns false.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains coordinate.\n     * @api\n     */\n    Geometry.prototype.intersectsCoordinate = function (coordinate) {\n        return this.containsXY(coordinate[0], coordinate[1]);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Geometry.prototype.computeExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Get the extent of the geometry.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Geometry.prototype.getExtent = function (opt_extent) {\n        if (this.extentRevision_ != this.getRevision()) {\n            var extent = this.computeExtent(this.extent_);\n            if (isNaN(extent[0]) || isNaN(extent[1])) {\n                createOrUpdateEmpty(extent);\n            }\n            this.extentRevision_ = this.getRevision();\n        }\n        return returnOrUpdate(this.extent_, opt_extent);\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} angle Rotation angle in radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    Geometry.prototype.rotate = function (angle, anchor) {\n        abstract();\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    Geometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        abstract();\n    };\n    /**\n     * Create a simplified version of this geometry.  For linestrings, this uses\n     * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n     * algorithm.  For polygons, a quantization-based\n     * simplification is used to preserve topology.\n     * @param {number} tolerance The tolerance distance for simplification.\n     * @return {Geometry} A new, simplified version of the original geometry.\n     * @api\n     */\n    Geometry.prototype.simplify = function (tolerance) {\n        return this.getSimplifiedGeometry(tolerance * tolerance);\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker\n     * algorithm.\n     * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        return abstract();\n    };\n    /**\n     * Get the type of this geometry.\n     * @abstract\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     */\n    Geometry.prototype.getType = function () {\n        return abstract();\n    };\n    /**\n     * Apply a transform function to the coordinates of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @abstract\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n     * Called with a flat array of geometry coordinates.\n     */\n    Geometry.prototype.applyTransform = function (transformFn) {\n        abstract();\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     */\n    Geometry.prototype.intersectsExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @abstract\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    Geometry.prototype.translate = function (deltaX, deltaY) {\n        abstract();\n    };\n    /**\n     * Transform each coordinate of the geometry from one coordinate reference\n     * system to another. The geometry is modified in place.\n     * For example, a line will be transformed to a line and a circle to a circle.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     *\n     * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @return {Geometry} This geometry.  Note that original geometry is\n     *     modified in place.\n     * @api\n     */\n    Geometry.prototype.transform = function (source, destination) {\n        /** @type {import(\"../proj/Projection.js\").default} */\n        var sourceProj = getProjection(source);\n        var transformFn = sourceProj.getUnits() == Units.TILE_PIXELS\n            ? function (inCoordinates, outCoordinates, stride) {\n                var pixelExtent = sourceProj.getExtent();\n                var projectedExtent = sourceProj.getWorldExtent();\n                var scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n                composeTransform(tmpTransform, projectedExtent[0], projectedExtent[3], scale, -scale, 0, 0, 0);\n                transform2D(inCoordinates, 0, inCoordinates.length, stride, tmpTransform, outCoordinates);\n                return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n            }\n            : getTransform(sourceProj, destination);\n        this.applyTransform(transformFn);\n        return this;\n    };\n    return Geometry;\n}(BaseObject));\nexport default Geometry;\n//# sourceMappingURL=Geometry.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/SimpleGeometry\n */\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport { abstract } from '../util.js';\nimport { createOrUpdateFromFlatCoordinates, getCenter } from '../extent.js';\nimport { rotate, scale, transform2D, translate } from './flat/transform.js';\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nvar SimpleGeometry = /** @class */ (function (_super) {\n    __extends(SimpleGeometry, _super);\n    function SimpleGeometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./GeometryLayout.js\").default}\n         */\n        _this.layout = GeometryLayout.XY;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.stride = 2;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.flatCoordinates = null;\n        return _this;\n    }\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    SimpleGeometry.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromFlatCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * @abstract\n     * @return {Array<*>} Coordinates.\n     */\n    SimpleGeometry.prototype.getCoordinates = function () {\n        return abstract();\n    };\n    /**\n     * Return the first coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n     * @api\n     */\n    SimpleGeometry.prototype.getFirstCoordinate = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat coordinates.\n     */\n    SimpleGeometry.prototype.getFlatCoordinates = function () {\n        return this.flatCoordinates;\n    };\n    /**\n     * Return the last coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} Last point.\n     * @api\n     */\n    SimpleGeometry.prototype.getLastCoordinate = function () {\n        return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n    };\n    /**\n     * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n     * @return {import(\"./GeometryLayout.js\").default} Layout.\n     * @api\n     */\n    SimpleGeometry.prototype.getLayout = function () {\n        return this.layout;\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {SimpleGeometry} Simplified geometry.\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        if (this.simplifiedGeometryRevision !== this.getRevision()) {\n            this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n            this.simplifiedGeometryRevision = this.getRevision();\n        }\n        // If squaredTolerance is negative or if we know that simplification will not\n        // have any effect then just return this.\n        if (squaredTolerance < 0 ||\n            (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n                squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n            return this;\n        }\n        var simplifiedGeometry = this.getSimplifiedGeometryInternal(squaredTolerance);\n        var simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n        if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n            return simplifiedGeometry;\n        }\n        else {\n            // Simplification did not actually remove any coordinates.  We now know\n            // that any calls to getSimplifiedGeometry with a squaredTolerance less\n            // than or equal to the current squaredTolerance will also not have any\n            // effect.  This allows us to short circuit simplification (saving CPU\n            // cycles) and prevents the cache of simplified geometries from filling\n            // up with useless identical copies of this geometry (saving memory).\n            this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n            return this;\n        }\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {SimpleGeometry} Simplified geometry.\n     * @protected\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        return this;\n    };\n    /**\n     * @return {number} Stride.\n     */\n    SimpleGeometry.prototype.getStride = function () {\n        return this.stride;\n    };\n    /**\n     * @param {import(\"./GeometryLayout.js\").default} layout Layout.\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     */\n    SimpleGeometry.prototype.setFlatCoordinates = function (layout, flatCoordinates) {\n        this.stride = getStrideForLayout(layout);\n        this.layout = layout;\n        this.flatCoordinates = flatCoordinates;\n    };\n    /**\n     * @abstract\n     * @param {!Array<*>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    SimpleGeometry.prototype.setCoordinates = function (coordinates, opt_layout) {\n        abstract();\n    };\n    /**\n     * @param {import(\"./GeometryLayout.js\").default|undefined} layout Layout.\n     * @param {Array<*>} coordinates Coordinates.\n     * @param {number} nesting Nesting.\n     * @protected\n     */\n    SimpleGeometry.prototype.setLayout = function (layout, coordinates, nesting) {\n        /** @type {number} */\n        var stride;\n        if (layout) {\n            stride = getStrideForLayout(layout);\n        }\n        else {\n            for (var i = 0; i < nesting; ++i) {\n                if (coordinates.length === 0) {\n                    this.layout = GeometryLayout.XY;\n                    this.stride = 2;\n                    return;\n                }\n                else {\n                    coordinates = /** @type {Array} */ (coordinates[0]);\n                }\n            }\n            stride = coordinates.length;\n            layout = getLayoutForStride(stride);\n        }\n        this.layout = layout;\n        this.stride = stride;\n    };\n    /**\n     * Apply a transform function to the coordinates of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n     * Called with a flat array of geometry coordinates.\n     * @api\n     */\n    SimpleGeometry.prototype.applyTransform = function (transformFn) {\n        if (this.flatCoordinates) {\n            transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n            this.changed();\n        }\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @param {number} angle Rotation angle in counter-clockwise radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    SimpleGeometry.prototype.rotate = function (angle, anchor) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            rotate(flatCoordinates, 0, flatCoordinates.length, stride, angle, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    SimpleGeometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        var sy = opt_sy;\n        if (sy === undefined) {\n            sy = sx;\n        }\n        var anchor = opt_anchor;\n        if (!anchor) {\n            anchor = getCenter(this.getExtent());\n        }\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            scale(flatCoordinates, 0, flatCoordinates.length, stride, sx, sy, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    SimpleGeometry.prototype.translate = function (deltaX, deltaY) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            translate(flatCoordinates, 0, flatCoordinates.length, stride, deltaX, deltaY, flatCoordinates);\n            this.changed();\n        }\n    };\n    return SimpleGeometry;\n}(Geometry));\n/**\n * @param {number} stride Stride.\n * @return {import(\"./GeometryLayout.js\").default} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n    var layout;\n    if (stride == 2) {\n        layout = GeometryLayout.XY;\n    }\n    else if (stride == 3) {\n        layout = GeometryLayout.XYZ;\n    }\n    else if (stride == 4) {\n        layout = GeometryLayout.XYZM;\n    }\n    return /** @type {import(\"./GeometryLayout.js\").default} */ (layout);\n}\n/**\n * @param {import(\"./GeometryLayout.js\").default} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n    var stride;\n    if (layout == GeometryLayout.XY) {\n        stride = 2;\n    }\n    else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n        stride = 3;\n    }\n    else if (layout == GeometryLayout.XYZM) {\n        stride = 4;\n    }\n    return /** @type {number} */ (stride);\n}\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n    var flatCoordinates = simpleGeometry.getFlatCoordinates();\n    if (!flatCoordinates) {\n        return null;\n    }\n    else {\n        var stride = simpleGeometry.getStride();\n        return transform2D(flatCoordinates, 0, flatCoordinates.length, stride, transform, opt_dest);\n    }\n}\nexport default SimpleGeometry;\n//# sourceMappingURL=SimpleGeometry.js.map","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar TypeError = global.TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [opt_comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + ((high - low) >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) {\n            /* Too low. */\n            low = mid + 1;\n        }\n        else {\n            /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (typeof direction === 'function') {\n                        if (direction(target, arr[i - 1], arr[i]) > 0) {\n                            return i - 1;\n                        }\n                        else {\n                            return i;\n                        }\n                    }\n                    else if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [opt_func] Comparison function.\n * @param {boolean} [opt_strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || (opt_strict && res === 0));\n    });\n}\n//# sourceMappingURL=array.js.map","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","/**\n * @module ol/centerconstraint\n */\nimport { clamp } from './math.js';\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=, Array<number>=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n    return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @param {Array<number>} [opt_centerShift] Shift between map center and viewport center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, opt_isMoving, opt_centerShift) {\n        if (center) {\n            var viewWidth = onlyCenter ? 0 : size[0] * resolution;\n            var viewHeight = onlyCenter ? 0 : size[1] * resolution;\n            var shiftX = opt_centerShift ? opt_centerShift[0] : 0;\n            var shiftY = opt_centerShift ? opt_centerShift[1] : 0;\n            var minX = extent[0] + viewWidth / 2 + shiftX;\n            var maxX = extent[2] - viewWidth / 2 + shiftX;\n            var minY = extent[1] + viewHeight / 2 + shiftY;\n            var maxY = extent[3] - viewHeight / 2 + shiftY;\n            // note: when zooming out of bounds, min and max values for x and y may\n            // end up inverted (min > max); this has to be accounted for\n            if (minX > maxX) {\n                minX = (maxX + minX) / 2;\n                maxX = minX;\n            }\n            if (minY > maxY) {\n                minY = (maxY + minY) / 2;\n                maxY = minY;\n            }\n            var x = clamp(center[0], minX, maxX);\n            var y = clamp(center[1], minY, maxY);\n            var ratio = 30 * resolution;\n            // during an interaction, allow some overscroll\n            if (opt_isMoving && smooth) {\n                x +=\n                    -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n                        ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n                y +=\n                    -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n                        ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n            }\n            return [x, y];\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} [center] Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n    return center;\n}\n//# sourceMappingURL=centerconstraint.js.map","/**\n * @module ol/resolutionconstraint\n */\nimport { clamp } from './math.js';\nimport { getHeight, getWidth } from './extent.js';\nimport { linearFindNearest } from './array.js';\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n/**\n * Returns a modified resolution taking into account the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @param {boolean} showFullExtent Whether to show the full extent.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(resolution, maxExtent, viewportSize, showFullExtent) {\n    var xResolution = getWidth(maxExtent) / viewportSize[0];\n    var yResolution = getHeight(maxExtent) / viewportSize[1];\n    if (showFullExtent) {\n        return Math.min(resolution, Math.max(xResolution, yResolution));\n    }\n    return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n    var result = Math.min(resolution, maxResolution);\n    var ratio = 50;\n    result *=\n        Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio +\n            1;\n    if (minResolution) {\n        result = Math.max(result, minResolution);\n        result /=\n            Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) /\n                ratio +\n                1;\n    }\n    return clamp(result, minResolution / 2, maxResolution * 2);\n}\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var maxResolution = resolutions[0];\n            var minResolution = resolutions[resolutions.length - 1];\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var capped = Math.min(cappedMaxRes, resolution);\n            var z = Math.floor(linearFindNearest(resolutions, capped, direction));\n            if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n                return resolutions[z + 1];\n            }\n            return resolutions[z];\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number} [opt_minResolution] Minimum resolution.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_minResolution, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            var minResolution = opt_minResolution !== undefined ? opt_minResolution : 0;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var tolerance = 1e-9;\n            var minZoomLevel = Math.ceil(Math.log(maxResolution / cappedMaxRes) / Math.log(power) - tolerance);\n            var offset = -direction * (0.5 - tolerance) + 0.5;\n            var capped = Math.min(cappedMaxRes, resolution);\n            var cappedZoomLevel = Math.floor(Math.log(maxResolution / capped) / Math.log(power) + offset);\n            var zoomLevel = Math.max(minZoomLevel, cappedZoomLevel);\n            var newResolution = maxResolution / Math.pow(power, zoomLevel);\n            return clamp(newResolution, minResolution, cappedMaxRes);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(maxResolution, minResolution, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            var smooth = opt_smooth !== undefined ? opt_smooth : true;\n            if (!smooth || !opt_isMoving) {\n                return clamp(resolution, minResolution, cappedMaxRes);\n            }\n            return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=resolutionconstraint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/View\n */\nimport BaseObject from './Object.js';\nimport GeometryType from './geom/GeometryType.js';\nimport Units from './proj/Units.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport { DEFAULT_TILE_SIZE } from './tilegrid/common.js';\nimport { METERS_PER_UNIT, createProjection, fromUserCoordinate, fromUserExtent, getUserProjection, toUserCoordinate, toUserExtent, } from './proj.js';\nimport { VOID } from './functions.js';\nimport { add as addCoordinate, equals as coordinatesEqual, rotate as rotateCoordinate, } from './coordinate.js';\nimport { assert } from './asserts.js';\nimport { assign } from './obj.js';\nimport { none as centerNone, createExtent } from './centerconstraint.js';\nimport { clamp, modulo } from './math.js';\nimport { createMinMaxResolution } from './resolutionconstraint.js';\nimport { createSnapToN, createSnapToZero, disable, none as rotationNone, } from './rotationconstraint.js';\nimport { createSnapToPower, createSnapToResolutions, } from './resolutionconstraint.js';\nimport { easeOut } from './easing.js';\nimport { equals } from './coordinate.js';\nimport { getCenter, getForViewAndSize, getHeight, getWidth, isEmpty, } from './extent.js';\nimport { inAndOut } from './easing.js';\nimport { linearFindNearest } from './array.js';\nimport { fromExtent as polygonFromExtent } from './geom/Polygon.js';\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter] Source center.\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter] Target center.\n * @property {number} [sourceResolution] Source resolution.\n * @property {number} [targetResolution] Target resolution.\n * @property {number} [sourceRotation] Source rotation.\n * @property {number} [targetRotation] Target rotation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Anchor.\n * @property {number} start Start.\n * @property {number} duration Duration.\n * @property {boolean} complete Complete.\n * @property {function(number):number} easing Easing.\n * @property {function(boolean):void} callback Callback.\n */\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center Center.\n * @property {import(\"./resolutionconstraint.js\").Type} resolution Resolution.\n * @property {import(\"./rotationconstraint.js\").Type} rotation Rotation.\n */\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean):void} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {boolean} [showFullExtent=false] Allow the view to be zoomed out to\n * show the full configured extent. By default, when a view is configured with an\n * extent, users will not be able to zoom out so the viewport exceeds the extent in\n * either dimension. This means the full extent may not be visible if the viewport\n * is taller or wider than the aspect ratio of the configured extent. If\n * showFullExtent is true, the user will be able to zoom out so that the viewport\n * exceeds the height or width of the configured extent, but not both, allowing the\n * full extent to be shown.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions that determine the\n * zoom levels if specified. The index in the array corresponds to the zoom level,\n * therefore the resolution values have to be in descending order. It also constrains\n * the resolution by the minimum and maximum value. If set the `maxResolution`,\n * `minResolution`, `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in css pixels).\n * If the map viewport is partially covered with other content (overlays) along\n * its edges, this setting allows to shift the center of the viewport away from\n * that content. The order of the values is top, right, bottom, left.\n */\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center Center.\n * @property {import(\"./proj/Projection.js\").default} projection Projection.\n * @property {number} resolution Resolution.\n * @property {import(\"./coordinate.js\").Coordinate} [nextCenter] The next center during an animation series.\n * @property {number} [nextResolution] The next resolution during an animation series.\n * @property {number} [nextRotation] The next rotation during an animation series.\n * @property {number} rotation Rotation.\n * @property {number} zoom Zoom.\n */\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nvar DEFAULT_MIN_ZOOM = 0;\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:center'|'change:resolution'|'change:rotation'} ViewObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<ViewObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|ViewObjectEventTypes, Return>} ViewOnSignature\n */\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `opt_anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    /**\n     * @param {ViewOptions} [opt_options] View options.\n     */\n    function View(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ViewOnSignature<void>}\n         */\n        _this.un;\n        var options = assign({}, opt_options);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.hints_ = [0, 0];\n        /**\n         * @private\n         * @type {Array<Array<Animation>>}\n         */\n        _this.animations_ = [];\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.updateAnimationKey_;\n        /**\n         * @private\n         * @const\n         * @type {import(\"./proj/Projection.js\").default}\n         */\n        _this.projection_ = createProjection(options.projection, 'EPSG:3857');\n        /**\n         * @private\n         * @type {import(\"./size.js\").Size}\n         */\n        _this.viewportSize_ = [100, 100];\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate|undefined}\n         */\n        _this.targetCenter_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetResolution_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetRotation_;\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate}\n         */\n        _this.nextCenter_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.nextResolution_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.nextRotation_;\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate|undefined}\n         */\n        _this.cancelAnchor_ = undefined;\n        if (options.center) {\n            options.center = fromUserCoordinate(options.center, _this.projection_);\n        }\n        if (options.extent) {\n            options.extent = fromUserExtent(options.extent, _this.projection_);\n        }\n        _this.applyOptions_(options);\n        return _this;\n    }\n    /**\n     * Set up the view with the given options.\n     * @param {ViewOptions} options View options.\n     */\n    View.prototype.applyOptions_ = function (options) {\n        var properties = assign({}, options);\n        for (var key in ViewProperty) {\n            delete properties[key];\n        }\n        this.setProperties(properties, true);\n        var resolutionConstraintInfo = createResolutionConstraint(options);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minResolution_ = resolutionConstraintInfo.minResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n        /**\n         * @private\n         * @type {Array<number>|undefined}\n         */\n        this.resolutions_ = options.resolutions;\n        /**\n         * @type {Array<number>|undefined}\n         * @private\n         */\n        this.padding_ = options.padding;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minZoom_ = resolutionConstraintInfo.minZoom;\n        var centerConstraint = createCenterConstraint(options);\n        var resolutionConstraint = resolutionConstraintInfo.constraint;\n        var rotationConstraint = createRotationConstraint(options);\n        /**\n         * @private\n         * @type {Constraints}\n         */\n        this.constraints_ = {\n            center: centerConstraint,\n            resolution: resolutionConstraint,\n            rotation: rotationConstraint,\n        };\n        this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n        this.setCenterInternal(options.center !== undefined ? options.center : null);\n        if (options.resolution !== undefined) {\n            this.setResolution(options.resolution);\n        }\n        else if (options.zoom !== undefined) {\n            this.setZoom(options.zoom);\n        }\n    };\n    Object.defineProperty(View.prototype, \"padding\", {\n        /**\n         * Padding (in css pixels).\n         * If the map viewport is partially covered with other content (overlays) along\n         * its edges, this setting allows to shift the center of the viewport away from that\n         * content. The order of the values in the array is top, right, bottom, left.\n         * The default is no padding, which is equivalent to `[0, 0, 0, 0]`.\n         * @type {Array<number>|undefined}\n         * @api\n         */\n        get: function () {\n            return this.padding_;\n        },\n        set: function (padding) {\n            var oldPadding = this.padding_;\n            this.padding_ = padding;\n            var center = this.getCenter();\n            if (center) {\n                var newPadding = padding || [0, 0, 0, 0];\n                oldPadding = oldPadding || [0, 0, 0, 0];\n                var resolution = this.getResolution();\n                var offsetX = (resolution / 2) *\n                    (newPadding[3] - oldPadding[3] + oldPadding[1] - newPadding[1]);\n                var offsetY = (resolution / 2) *\n                    (newPadding[0] - oldPadding[0] + oldPadding[2] - newPadding[2]);\n                this.setCenterInternal([center[0] + offsetX, center[1] - offsetY]);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Get an updated version of the view options used to construct the view.  The\n     * current resolution (or zoom), center, and rotation are applied to any stored\n     * options.  The provided options can be used to apply new min/max zoom or\n     * resolution limits.\n     * @param {ViewOptions} newOptions New options to be applied.\n     * @return {ViewOptions} New options updated with the current view state.\n     */\n    View.prototype.getUpdatedOptions_ = function (newOptions) {\n        var options = this.getProperties();\n        // preserve resolution (or zoom)\n        if (options.resolution !== undefined) {\n            options.resolution = this.getResolution();\n        }\n        else {\n            options.zoom = this.getZoom();\n        }\n        // preserve center\n        options.center = this.getCenterInternal();\n        // preserve rotation\n        options.rotation = this.getRotation();\n        return assign({}, options, newOptions);\n    };\n    /**\n     * Animate the view.  The view's center, zoom (or resolution), and rotation\n     * can be animated for smooth transitions between view states.  For example,\n     * to animate the view to a new zoom level:\n     *\n     *     view.animate({zoom: view.getZoom() + 1});\n     *\n     * By default, the animation lasts one second and uses in-and-out easing.  You\n     * can customize this behavior by including `duration` (in milliseconds) and\n     * `easing` options (see {@link module:ol/easing}).\n     *\n     * To chain together multiple animations, call the method with multiple\n     * animation objects.  For example, to first zoom and then pan:\n     *\n     *     view.animate({zoom: 10}, {center: [0, 0]});\n     *\n     * If you provide a function as the last argument to the animate method, it\n     * will get called at the end of an animation series.  The callback will be\n     * called with `true` if the animation series completed on its own or `false`\n     * if it was cancelled.\n     *\n     * Animations are cancelled by user interactions (e.g. dragging the map) or by\n     * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n     * (or another method that calls one of these).\n     *\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n     *     options.  Multiple animations can be run in series by passing multiple\n     *     options objects.  To run multiple animations in parallel, call the method\n     *     multiple times.  An optional callback can be provided as a final\n     *     argument.  The callback will be called with a boolean indicating whether\n     *     the animation completed without being cancelled.\n     * @api\n     */\n    View.prototype.animate = function (var_args) {\n        if (this.isDef() && !this.getAnimating()) {\n            this.resolveConstraints(0);\n        }\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n            var options = arguments[i];\n            if (options.center) {\n                options = assign({}, options);\n                options.center = fromUserCoordinate(options.center, this.getProjection());\n            }\n            if (options.anchor) {\n                options = assign({}, options);\n                options.anchor = fromUserCoordinate(options.anchor, this.getProjection());\n            }\n            args[i] = options;\n        }\n        this.animateInternal.apply(this, args);\n    };\n    /**\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n     */\n    View.prototype.animateInternal = function (var_args) {\n        var animationCount = arguments.length;\n        var callback;\n        if (animationCount > 1 &&\n            typeof arguments[animationCount - 1] === 'function') {\n            callback = arguments[animationCount - 1];\n            --animationCount;\n        }\n        var i = 0;\n        for (; i < animationCount && !this.isDef(); ++i) {\n            // if view properties are not yet set, shortcut to the final state\n            var state = arguments[i];\n            if (state.center) {\n                this.setCenterInternal(state.center);\n            }\n            if (state.zoom !== undefined) {\n                this.setZoom(state.zoom);\n            }\n            else if (state.resolution) {\n                this.setResolution(state.resolution);\n            }\n            if (state.rotation !== undefined) {\n                this.setRotation(state.rotation);\n            }\n        }\n        if (i === animationCount) {\n            if (callback) {\n                animationCallback(callback, true);\n            }\n            return;\n        }\n        var start = Date.now();\n        var center = this.targetCenter_.slice();\n        var resolution = this.targetResolution_;\n        var rotation = this.targetRotation_;\n        var series = [];\n        for (; i < animationCount; ++i) {\n            var options = /** @type {AnimationOptions} */ (arguments[i]);\n            var animation = {\n                start: start,\n                complete: false,\n                anchor: options.anchor,\n                duration: options.duration !== undefined ? options.duration : 1000,\n                easing: options.easing || inAndOut,\n                callback: callback,\n            };\n            if (options.center) {\n                animation.sourceCenter = center;\n                animation.targetCenter = options.center.slice();\n                center = animation.targetCenter;\n            }\n            if (options.zoom !== undefined) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = this.getResolutionForZoom(options.zoom);\n                resolution = animation.targetResolution;\n            }\n            else if (options.resolution) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = options.resolution;\n                resolution = animation.targetResolution;\n            }\n            if (options.rotation !== undefined) {\n                animation.sourceRotation = rotation;\n                var delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n                animation.targetRotation = rotation + delta;\n                rotation = animation.targetRotation;\n            }\n            // check if animation is a no-op\n            if (isNoopAnimation(animation)) {\n                animation.complete = true;\n                // we still push it onto the series for callback handling\n            }\n            else {\n                start += animation.duration;\n            }\n            series.push(animation);\n        }\n        this.animations_.push(series);\n        this.setHint(ViewHint.ANIMATING, 1);\n        this.updateAnimations_();\n    };\n    /**\n     * Determine if the view is being animated.\n     * @return {boolean} The view is being animated.\n     * @api\n     */\n    View.prototype.getAnimating = function () {\n        return this.hints_[ViewHint.ANIMATING] > 0;\n    };\n    /**\n     * Determine if the user is interacting with the view, such as panning or zooming.\n     * @return {boolean} The view is being interacted with.\n     * @api\n     */\n    View.prototype.getInteracting = function () {\n        return this.hints_[ViewHint.INTERACTING] > 0;\n    };\n    /**\n     * Cancel any ongoing animations.\n     * @api\n     */\n    View.prototype.cancelAnimations = function () {\n        this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n        var anchor;\n        for (var i = 0, ii = this.animations_.length; i < ii; ++i) {\n            var series = this.animations_[i];\n            if (series[0].callback) {\n                animationCallback(series[0].callback, false);\n            }\n            if (!anchor) {\n                for (var j = 0, jj = series.length; j < jj; ++j) {\n                    var animation = series[j];\n                    if (!animation.complete) {\n                        anchor = animation.anchor;\n                        break;\n                    }\n                }\n            }\n        }\n        this.animations_.length = 0;\n        this.cancelAnchor_ = anchor;\n        this.nextCenter_ = null;\n        this.nextResolution_ = NaN;\n        this.nextRotation_ = NaN;\n    };\n    /**\n     * Update all animations.\n     */\n    View.prototype.updateAnimations_ = function () {\n        if (this.updateAnimationKey_ !== undefined) {\n            cancelAnimationFrame(this.updateAnimationKey_);\n            this.updateAnimationKey_ = undefined;\n        }\n        if (!this.getAnimating()) {\n            return;\n        }\n        var now = Date.now();\n        var more = false;\n        for (var i = this.animations_.length - 1; i >= 0; --i) {\n            var series = this.animations_[i];\n            var seriesComplete = true;\n            for (var j = 0, jj = series.length; j < jj; ++j) {\n                var animation = series[j];\n                if (animation.complete) {\n                    continue;\n                }\n                var elapsed = now - animation.start;\n                var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n                if (fraction >= 1) {\n                    animation.complete = true;\n                    fraction = 1;\n                }\n                else {\n                    seriesComplete = false;\n                }\n                var progress = animation.easing(fraction);\n                if (animation.sourceCenter) {\n                    var x0 = animation.sourceCenter[0];\n                    var y0 = animation.sourceCenter[1];\n                    var x1 = animation.targetCenter[0];\n                    var y1 = animation.targetCenter[1];\n                    this.nextCenter_ = animation.targetCenter;\n                    var x = x0 + progress * (x1 - x0);\n                    var y = y0 + progress * (y1 - y0);\n                    this.targetCenter_ = [x, y];\n                }\n                if (animation.sourceResolution && animation.targetResolution) {\n                    var resolution = progress === 1\n                        ? animation.targetResolution\n                        : animation.sourceResolution +\n                            progress *\n                                (animation.targetResolution - animation.sourceResolution);\n                    if (animation.anchor) {\n                        var size = this.getViewportSize_(this.getRotation());\n                        var constrainedResolution = this.constraints_.resolution(resolution, 0, size, true);\n                        this.targetCenter_ = this.calculateCenterZoom(constrainedResolution, animation.anchor);\n                    }\n                    this.nextResolution_ = animation.targetResolution;\n                    this.targetResolution_ = resolution;\n                    this.applyTargetState_(true);\n                }\n                if (animation.sourceRotation !== undefined &&\n                    animation.targetRotation !== undefined) {\n                    var rotation = progress === 1\n                        ? modulo(animation.targetRotation + Math.PI, 2 * Math.PI) -\n                            Math.PI\n                        : animation.sourceRotation +\n                            progress *\n                                (animation.targetRotation - animation.sourceRotation);\n                    if (animation.anchor) {\n                        var constrainedRotation = this.constraints_.rotation(rotation, true);\n                        this.targetCenter_ = this.calculateCenterRotate(constrainedRotation, animation.anchor);\n                    }\n                    this.nextRotation_ = animation.targetRotation;\n                    this.targetRotation_ = rotation;\n                }\n                this.applyTargetState_(true);\n                more = true;\n                if (!animation.complete) {\n                    break;\n                }\n            }\n            if (seriesComplete) {\n                this.animations_[i] = null;\n                this.setHint(ViewHint.ANIMATING, -1);\n                this.nextCenter_ = null;\n                this.nextResolution_ = NaN;\n                this.nextRotation_ = NaN;\n                var callback = series[0].callback;\n                if (callback) {\n                    animationCallback(callback, true);\n                }\n            }\n        }\n        // prune completed series\n        this.animations_ = this.animations_.filter(Boolean);\n        if (more && this.updateAnimationKey_ === undefined) {\n            this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_.bind(this));\n        }\n    };\n    /**\n     * @param {number} rotation Target rotation.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n     */\n    View.prototype.calculateCenterRotate = function (rotation, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        if (currentCenter !== undefined) {\n            center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n            rotateCoordinate(center, rotation - this.getRotation());\n            addCoordinate(center, anchor);\n        }\n        return center;\n    };\n    /**\n     * @param {number} resolution Target resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n     */\n    View.prototype.calculateCenterZoom = function (resolution, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        var currentResolution = this.getResolution();\n        if (currentCenter !== undefined && currentResolution !== undefined) {\n            var x = anchor[0] -\n                (resolution * (anchor[0] - currentCenter[0])) / currentResolution;\n            var y = anchor[1] -\n                (resolution * (anchor[1] - currentCenter[1])) / currentResolution;\n            center = [x, y];\n        }\n        return center;\n    };\n    /**\n     * Returns the current viewport size.\n     * @private\n     * @param {number} [opt_rotation] Take into account the rotation of the viewport when giving the size\n     * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n     */\n    View.prototype.getViewportSize_ = function (opt_rotation) {\n        var size = this.viewportSize_;\n        if (opt_rotation) {\n            var w = size[0];\n            var h = size[1];\n            return [\n                Math.abs(w * Math.cos(opt_rotation)) +\n                    Math.abs(h * Math.sin(opt_rotation)),\n                Math.abs(w * Math.sin(opt_rotation)) +\n                    Math.abs(h * Math.cos(opt_rotation)),\n            ];\n        }\n        else {\n            return size;\n        }\n    };\n    /**\n     * Stores the viewport size on the view. The viewport size is not read every time from the DOM\n     * to avoid performance hit and layout reflow.\n     * This should be done on map size change.\n     * Note: the constraints are not resolved during an animation to avoid stopping it\n     * @param {import(\"./size.js\").Size} [opt_size] Viewport size; if undefined, [100, 100] is assumed\n     */\n    View.prototype.setViewportSize = function (opt_size) {\n        this.viewportSize_ = Array.isArray(opt_size)\n            ? opt_size.slice()\n            : [100, 100];\n        if (!this.getAnimating()) {\n            this.resolveConstraints(0);\n        }\n    };\n    /**\n     * Get the view center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getCenter = function () {\n        var center = this.getCenterInternal();\n        if (!center) {\n            return center;\n        }\n        return toUserCoordinate(center, this.getProjection());\n    };\n    /**\n     * Get the view center without transforming to user projection.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     */\n    View.prototype.getCenterInternal = function () {\n        return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER));\n    };\n    /**\n     * @return {Constraints} Constraints.\n     */\n    View.prototype.getConstraints = function () {\n        return this.constraints_;\n    };\n    /**\n     * @return {boolean} Resolution constraint is set\n     */\n    View.prototype.getConstrainResolution = function () {\n        return this.get('constrainResolution');\n    };\n    /**\n     * @param {Array<number>} [opt_hints] Destination array.\n     * @return {Array<number>} Hint.\n     */\n    View.prototype.getHints = function (opt_hints) {\n        if (opt_hints !== undefined) {\n            opt_hints[0] = this.hints_[0];\n            opt_hints[1] = this.hints_[1];\n            return opt_hints;\n        }\n        else {\n            return this.hints_.slice();\n        }\n    };\n    /**\n     * Calculate the extent for the current view state and the passed size.\n     * The size is the pixel dimensions of the box into which the calculated extent\n     * should fit. In most cases you want to get the extent of the entire map,\n     * that is `map.getSize()`.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size. If not provided, the size\n     * of the map that uses this view will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     * @api\n     */\n    View.prototype.calculateExtent = function (opt_size) {\n        var extent = this.calculateExtentInternal(opt_size);\n        return toUserExtent(extent, this.getProjection());\n    };\n    /**\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size. If not provided,\n     * the map's last known viewport size will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    View.prototype.calculateExtentInternal = function (opt_size) {\n        var size = opt_size || this.getViewportSizeMinusPadding_();\n        var center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        assert(center, 1); // The view center is not defined\n        var resolution = /** @type {!number} */ (this.getResolution());\n        assert(resolution !== undefined, 2); // The view resolution is not defined\n        var rotation = /** @type {!number} */ (this.getRotation());\n        assert(rotation !== undefined, 3); // The view rotation is not defined\n        return getForViewAndSize(center, resolution, rotation, size);\n    };\n    /**\n     * Get the maximum resolution of the view.\n     * @return {number} The maximum resolution of the view.\n     * @api\n     */\n    View.prototype.getMaxResolution = function () {\n        return this.maxResolution_;\n    };\n    /**\n     * Get the minimum resolution of the view.\n     * @return {number} The minimum resolution of the view.\n     * @api\n     */\n    View.prototype.getMinResolution = function () {\n        return this.minResolution_;\n    };\n    /**\n     * Get the maximum zoom level for the view.\n     * @return {number} The maximum zoom level.\n     * @api\n     */\n    View.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n    };\n    /**\n     * Set a new maximum zoom level for the view.\n     * @param {number} zoom The maximum zoom level.\n     * @api\n     */\n    View.prototype.setMaxZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ maxZoom: zoom }));\n    };\n    /**\n     * Get the minimum zoom level for the view.\n     * @return {number} The minimum zoom level.\n     * @api\n     */\n    View.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n    };\n    /**\n     * Set a new minimum zoom level for the view.\n     * @param {number} zoom The minimum zoom level.\n     * @api\n     */\n    View.prototype.setMinZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ minZoom: zoom }));\n    };\n    /**\n     * Set whether the view should allow intermediary zoom levels.\n     * @param {boolean} enabled Whether the resolution is constrained.\n     * @api\n     */\n    View.prototype.setConstrainResolution = function (enabled) {\n        this.applyOptions_(this.getUpdatedOptions_({ constrainResolution: enabled }));\n    };\n    /**\n     * Get the view projection.\n     * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n     * @api\n     */\n    View.prototype.getProjection = function () {\n        return this.projection_;\n    };\n    /**\n     * Get the view resolution.\n     * @return {number|undefined} The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getResolution = function () {\n        return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n    };\n    /**\n     * Get the resolutions for the view. This returns the array of resolutions\n     * passed to the constructor of the View, or undefined if none were given.\n     * @return {Array<number>|undefined} The resolutions of the view.\n     * @api\n     */\n    View.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     * @api\n     */\n    View.prototype.getResolutionForExtent = function (extent, opt_size) {\n        return this.getResolutionForExtentInternal(fromUserExtent(extent, this.getProjection()), opt_size);\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     */\n    View.prototype.getResolutionForExtentInternal = function (extent, opt_size) {\n        var size = opt_size || this.getViewportSizeMinusPadding_();\n        var xResolution = getWidth(extent) / size[0];\n        var yResolution = getHeight(extent) / size[1];\n        return Math.max(xResolution, yResolution);\n    };\n    /**\n     * Return a function that returns a value between 0 and 1 for a\n     * resolution. Exponential scaling is assumed.\n     * @param {number} [opt_power] Power.\n     * @return {function(number): number} Resolution for value function.\n     */\n    View.prototype.getResolutionForValueFunction = function (opt_power) {\n        var power = opt_power || 2;\n        var maxResolution = this.getConstrainedResolution(this.maxResolution_);\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / Math.log(power);\n        return (\n        /**\n         * @param {number} value Value.\n         * @return {number} Resolution.\n         */\n        function (value) {\n            var resolution = maxResolution / Math.pow(power, value * max);\n            return resolution;\n        });\n    };\n    /**\n     * Get the view rotation.\n     * @return {number} The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.getRotation = function () {\n        return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n    };\n    /**\n     * Return a function that returns a resolution for a value between\n     * 0 and 1. Exponential scaling is assumed.\n     * @param {number} [opt_power] Power.\n     * @return {function(number): number} Value for resolution function.\n     */\n    View.prototype.getValueForResolutionFunction = function (opt_power) {\n        var logPower = Math.log(opt_power || 2);\n        var maxResolution = this.getConstrainedResolution(this.maxResolution_);\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / logPower;\n        return (\n        /**\n         * @param {number} resolution Resolution.\n         * @return {number} Value.\n         */\n        function (resolution) {\n            var value = Math.log(maxResolution / resolution) / logPower / max;\n            return value;\n        });\n    };\n    /**\n     * Returns the size of the viewport minus padding.\n     * @private\n     * @param {number} [opt_rotation] Take into account the rotation of the viewport when giving the size\n     * @return {import(\"./size.js\").Size} Viewport size reduced by the padding.\n     */\n    View.prototype.getViewportSizeMinusPadding_ = function (opt_rotation) {\n        var size = this.getViewportSize_(opt_rotation);\n        var padding = this.padding_;\n        if (padding) {\n            size = [\n                size[0] - padding[1] - padding[3],\n                size[1] - padding[0] - padding[2],\n            ];\n        }\n        return size;\n    };\n    /**\n     * @return {State} View state.\n     */\n    View.prototype.getState = function () {\n        var projection = this.getProjection();\n        var resolution = this.getResolution();\n        var rotation = this.getRotation();\n        var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        var padding = this.padding_;\n        if (padding) {\n            var reducedSize = this.getViewportSizeMinusPadding_();\n            center = calculateCenterOn(center, this.getViewportSize_(), [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]], resolution, rotation);\n        }\n        return {\n            center: center.slice(0),\n            projection: projection !== undefined ? projection : null,\n            resolution: resolution,\n            nextCenter: this.nextCenter_,\n            nextResolution: this.nextResolution_,\n            nextRotation: this.nextRotation_,\n            rotation: rotation,\n            zoom: this.getZoom(),\n        };\n    };\n    /**\n     * Get the current zoom level. This method may return non-integer zoom levels\n     * if the view does not constrain the resolution, or if an interaction or\n     * animation is underway.\n     * @return {number|undefined} Zoom.\n     * @api\n     */\n    View.prototype.getZoom = function () {\n        var zoom;\n        var resolution = this.getResolution();\n        if (resolution !== undefined) {\n            zoom = this.getZoomForResolution(resolution);\n        }\n        return zoom;\n    };\n    /**\n     * Get the zoom level for a resolution.\n     * @param {number} resolution The resolution.\n     * @return {number|undefined} The zoom level for the provided resolution.\n     * @api\n     */\n    View.prototype.getZoomForResolution = function (resolution) {\n        var offset = this.minZoom_ || 0;\n        var max, zoomFactor;\n        if (this.resolutions_) {\n            var nearest = linearFindNearest(this.resolutions_, resolution, 1);\n            offset = nearest;\n            max = this.resolutions_[nearest];\n            if (nearest == this.resolutions_.length - 1) {\n                zoomFactor = 2;\n            }\n            else {\n                zoomFactor = max / this.resolutions_[nearest + 1];\n            }\n        }\n        else {\n            max = this.maxResolution_;\n            zoomFactor = this.zoomFactor_;\n        }\n        return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n    };\n    /**\n     * Get the resolution for a zoom level.\n     * @param {number} zoom Zoom level.\n     * @return {number} The view resolution for the provided zoom level.\n     * @api\n     */\n    View.prototype.getResolutionForZoom = function (zoom) {\n        if (this.resolutions_) {\n            if (this.resolutions_.length <= 1) {\n                return 0;\n            }\n            var baseLevel = clamp(Math.floor(zoom), 0, this.resolutions_.length - 2);\n            var zoomFactor = this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n            return (this.resolutions_[baseLevel] /\n                Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1)));\n        }\n        else {\n            return (this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_));\n        }\n    };\n    /**\n     * Fit the given geometry or extent based on the given map size and border.\n     * The size is pixel dimensions of the box to fit the extent into.\n     * In most cases you will want to use the map size, that is `map.getSize()`.\n     * Takes care of the map angle.\n     * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n     *     extent to fit the view to.\n     * @param {FitOptions} [opt_options] Options.\n     * @api\n     */\n    View.prototype.fit = function (geometryOrExtent, opt_options) {\n        /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n        var geometry;\n        assert(Array.isArray(geometryOrExtent) ||\n            typeof ( /** @type {?} */(geometryOrExtent).getSimplifiedGeometry) ===\n                'function', 24); // Invalid extent or geometry provided as `geometry`\n        if (Array.isArray(geometryOrExtent)) {\n            assert(!isEmpty(geometryOrExtent), 25); // Cannot fit empty extent provided as `geometry`\n            var extent = fromUserExtent(geometryOrExtent, this.getProjection());\n            geometry = polygonFromExtent(extent);\n        }\n        else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n            var extent = fromUserExtent(geometryOrExtent.getExtent(), this.getProjection());\n            geometry = polygonFromExtent(extent);\n            geometry.rotate(this.getRotation(), getCenter(extent));\n        }\n        else {\n            var userProjection = getUserProjection();\n            if (userProjection) {\n                geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometryOrExtent\n                    .clone()\n                    .transform(userProjection, this.getProjection()));\n            }\n            else {\n                geometry = geometryOrExtent;\n            }\n        }\n        this.fitInternal(geometry, opt_options);\n    };\n    /**\n     * Calculate rotated extent\n     * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n     * @return {import(\"./extent\").Extent} The rotated extent for the geometry.\n     */\n    View.prototype.rotatedExtentForGeometry = function (geometry) {\n        var rotation = this.getRotation();\n        var cosAngle = Math.cos(rotation);\n        var sinAngle = Math.sin(-rotation);\n        var coords = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        var minRotX = +Infinity;\n        var minRotY = +Infinity;\n        var maxRotX = -Infinity;\n        var maxRotY = -Infinity;\n        for (var i = 0, ii = coords.length; i < ii; i += stride) {\n            var rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n            var rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n            minRotX = Math.min(minRotX, rotX);\n            minRotY = Math.min(minRotY, rotY);\n            maxRotX = Math.max(maxRotX, rotX);\n            maxRotY = Math.max(maxRotY, rotY);\n        }\n        return [minRotX, minRotY, maxRotX, maxRotY];\n    };\n    /**\n     * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n     * @param {FitOptions} [opt_options] Options.\n     */\n    View.prototype.fitInternal = function (geometry, opt_options) {\n        var options = opt_options || {};\n        var size = options.size;\n        if (!size) {\n            size = this.getViewportSizeMinusPadding_();\n        }\n        var padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n        var nearest = options.nearest !== undefined ? options.nearest : false;\n        var minResolution;\n        if (options.minResolution !== undefined) {\n            minResolution = options.minResolution;\n        }\n        else if (options.maxZoom !== undefined) {\n            minResolution = this.getResolutionForZoom(options.maxZoom);\n        }\n        else {\n            minResolution = 0;\n        }\n        var rotatedExtent = this.rotatedExtentForGeometry(geometry);\n        // calculate resolution\n        var resolution = this.getResolutionForExtentInternal(rotatedExtent, [\n            size[0] - padding[1] - padding[3],\n            size[1] - padding[0] - padding[2],\n        ]);\n        resolution = isNaN(resolution)\n            ? minResolution\n            : Math.max(resolution, minResolution);\n        resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n        // calculate center\n        var rotation = this.getRotation();\n        var sinAngle = Math.sin(rotation);\n        var cosAngle = Math.cos(rotation);\n        var centerRot = getCenter(rotatedExtent);\n        centerRot[0] += ((padding[1] - padding[3]) / 2) * resolution;\n        centerRot[1] += ((padding[0] - padding[2]) / 2) * resolution;\n        var centerX = centerRot[0] * cosAngle - centerRot[1] * sinAngle;\n        var centerY = centerRot[1] * cosAngle + centerRot[0] * sinAngle;\n        var center = this.getConstrainedCenter([centerX, centerY], resolution);\n        var callback = options.callback ? options.callback : VOID;\n        if (options.duration !== undefined) {\n            this.animateInternal({\n                resolution: resolution,\n                center: center,\n                duration: options.duration,\n                easing: options.easing,\n            }, callback);\n        }\n        else {\n            this.targetResolution_ = resolution;\n            this.targetCenter_ = center;\n            this.applyTargetState_(false, true);\n            animationCallback(callback, true);\n        }\n    };\n    /**\n     * Center on coordinate and view position.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     * @api\n     */\n    View.prototype.centerOn = function (coordinate, size, position) {\n        this.centerOnInternal(fromUserCoordinate(coordinate, this.getProjection()), size, position);\n    };\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     */\n    View.prototype.centerOnInternal = function (coordinate, size, position) {\n        this.setCenterInternal(calculateCenterOn(coordinate, size, position, this.getResolution(), this.getRotation()));\n    };\n    /**\n     * Calculates the shift between map and viewport center.\n     * @param {import(\"./coordinate.js\").Coordinate} center Center.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {import(\"./size.js\").Size} size Size.\n     * @return {Array<number>|undefined} Center shift.\n     */\n    View.prototype.calculateCenterShift = function (center, resolution, rotation, size) {\n        var centerShift;\n        var padding = this.padding_;\n        if (padding && center) {\n            var reducedSize = this.getViewportSizeMinusPadding_(-rotation);\n            var shiftedCenter = calculateCenterOn(center, size, [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]], resolution, rotation);\n            centerShift = [\n                center[0] - shiftedCenter[0],\n                center[1] - shiftedCenter[1],\n            ];\n        }\n        return centerShift;\n    };\n    /**\n     * @return {boolean} Is defined.\n     */\n    View.prototype.isDef = function () {\n        return !!this.getCenterInternal() && this.getResolution() !== undefined;\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     * @api\n     */\n    View.prototype.adjustCenter = function (deltaCoordinates) {\n        var center = toUserCoordinate(this.targetCenter_, this.getProjection());\n        this.setCenter([\n            center[0] + deltaCoordinates[0],\n            center[1] + deltaCoordinates[1],\n        ]);\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     */\n    View.prototype.adjustCenterInternal = function (deltaCoordinates) {\n        var center = this.targetCenter_;\n        this.setCenterInternal([\n            center[0] + deltaCoordinates[0],\n            center[1] + deltaCoordinates[1],\n        ]);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustResolution = function (ratio, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.adjustResolutionInternal(ratio, anchor);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.adjustResolutionInternal = function (ratio, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var size = this.getViewportSize_(this.getRotation());\n        var newResolution = this.constraints_.resolution(this.targetResolution_ * ratio, 0, size, isMoving);\n        if (opt_anchor) {\n            this.targetCenter_ = this.calculateCenterZoom(newResolution, opt_anchor);\n        }\n        this.targetResolution_ *= ratio;\n        this.applyTargetState_();\n    };\n    /**\n     * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom level.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustZoom = function (delta, opt_anchor) {\n        this.adjustResolution(Math.pow(this.zoomFactor_, -delta), opt_anchor);\n    };\n    /**\n     * Adds a value to the view rotation, optionally using an anchor. Any rotation\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The rotation center.\n     * @api\n     */\n    View.prototype.adjustRotation = function (delta, opt_anchor) {\n        if (opt_anchor) {\n            opt_anchor = fromUserCoordinate(opt_anchor, this.getProjection());\n        }\n        this.adjustRotationInternal(delta, opt_anchor);\n    };\n    /**\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The rotation center.\n     */\n    View.prototype.adjustRotationInternal = function (delta, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var newRotation = this.constraints_.rotation(this.targetRotation_ + delta, isMoving);\n        if (opt_anchor) {\n            this.targetCenter_ = this.calculateCenterRotate(newRotation, opt_anchor);\n        }\n        this.targetRotation_ += delta;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the center of the current view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setCenter = function (center) {\n        this.setCenterInternal(fromUserCoordinate(center, this.getProjection()));\n    };\n    /**\n     * Set the center using the view projection (not the user projection).\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     */\n    View.prototype.setCenterInternal = function (center) {\n        this.targetCenter_ = center;\n        this.applyTargetState_();\n    };\n    /**\n     * @param {import(\"./ViewHint.js\").default} hint Hint.\n     * @param {number} delta Delta.\n     * @return {number} New value.\n     */\n    View.prototype.setHint = function (hint, delta) {\n        this.hints_[hint] += delta;\n        this.changed();\n        return this.hints_[hint];\n    };\n    /**\n     * Set the resolution for this view. Any resolution constraint will apply.\n     * @param {number|undefined} resolution The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setResolution = function (resolution) {\n        this.targetResolution_ = resolution;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the rotation for this view. Any rotation constraint will apply.\n     * @param {number} rotation The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.setRotation = function (rotation) {\n        this.targetRotation_ = rotation;\n        this.applyTargetState_();\n    };\n    /**\n     * Zoom to a specific zoom level. Any resolution constrain will apply.\n     * @param {number} zoom Zoom level.\n     * @api\n     */\n    View.prototype.setZoom = function (zoom) {\n        this.setResolution(this.getResolutionForZoom(zoom));\n    };\n    /**\n     * Recompute rotation/resolution/center based on target values.\n     * Note: we have to compute rotation first, then resolution and center considering that\n     * parameters can influence one another in case a view extent constraint is present.\n     * @param {boolean} [opt_doNotCancelAnims] Do not cancel animations.\n     * @param {boolean} [opt_forceMoving] Apply constraints as if the view is moving.\n     * @private\n     */\n    View.prototype.applyTargetState_ = function (opt_doNotCancelAnims, opt_forceMoving) {\n        var isMoving = this.getAnimating() || this.getInteracting() || opt_forceMoving;\n        // compute rotation\n        var newRotation = this.constraints_.rotation(this.targetRotation_, isMoving);\n        var size = this.getViewportSize_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, 0, size, isMoving);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, isMoving, this.calculateCenterShift(this.targetCenter_, newResolution, newRotation, size));\n        if (this.get(ViewProperty.ROTATION) !== newRotation) {\n            this.set(ViewProperty.ROTATION, newRotation);\n        }\n        if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n            this.set(ViewProperty.RESOLUTION, newResolution);\n            this.set('zoom', this.getZoom(), true);\n        }\n        if (!newCenter ||\n            !this.get(ViewProperty.CENTER) ||\n            !equals(this.get(ViewProperty.CENTER), newCenter)) {\n            this.set(ViewProperty.CENTER, newCenter);\n        }\n        if (this.getAnimating() && !opt_doNotCancelAnims) {\n            this.cancelAnimations();\n        }\n        this.cancelAnchor_ = undefined;\n    };\n    /**\n     * If any constraints need to be applied, an animation will be triggered.\n     * This is typically done on interaction end.\n     * Note: calling this with a duration of 0 will apply the constrained values straight away,\n     * without animation.\n     * @param {number} [opt_duration] The animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.resolveConstraints = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var duration = opt_duration !== undefined ? opt_duration : 200;\n        var direction = opt_resolutionDirection || 0;\n        var newRotation = this.constraints_.rotation(this.targetRotation_);\n        var size = this.getViewportSize_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, direction, size);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, false, this.calculateCenterShift(this.targetCenter_, newResolution, newRotation, size));\n        if (duration === 0 && !this.cancelAnchor_) {\n            this.targetResolution_ = newResolution;\n            this.targetRotation_ = newRotation;\n            this.targetCenter_ = newCenter;\n            this.applyTargetState_();\n            return;\n        }\n        var anchor = opt_anchor || (duration === 0 ? this.cancelAnchor_ : undefined);\n        this.cancelAnchor_ = undefined;\n        if (this.getResolution() !== newResolution ||\n            this.getRotation() !== newRotation ||\n            !this.getCenterInternal() ||\n            !equals(this.getCenterInternal(), newCenter)) {\n            if (this.getAnimating()) {\n                this.cancelAnimations();\n            }\n            this.animateInternal({\n                rotation: newRotation,\n                center: newCenter,\n                resolution: newResolution,\n                duration: duration,\n                easing: easeOut,\n                anchor: anchor,\n            });\n        }\n    };\n    /**\n     * Notify the View that an interaction has started.\n     * The view state will be resolved to a stable one if needed\n     * (depending on its constraints).\n     * @api\n     */\n    View.prototype.beginInteraction = function () {\n        this.resolveConstraints(0);\n        this.setHint(ViewHint.INTERACTING, 1);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number} [opt_duration] Animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.endInteraction = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.endInteractionInternal(opt_duration, opt_resolutionDirection, anchor);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number} [opt_duration] Animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.endInteractionInternal = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        this.setHint(ViewHint.INTERACTING, -1);\n        this.resolveConstraints(opt_duration, opt_resolutionDirection, opt_anchor);\n    };\n    /**\n     * Get a valid position for the view center according to the current constraints.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n     * @param {number} [opt_targetResolution] Target resolution. If not supplied, the current one will be used.\n     * This is useful to guess a valid center position at a different zoom level.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n     */\n    View.prototype.getConstrainedCenter = function (targetCenter, opt_targetResolution) {\n        var size = this.getViewportSize_(this.getRotation());\n        return this.constraints_.center(targetCenter, opt_targetResolution || this.getResolution(), size);\n    };\n    /**\n     * Get a valid zoom level according to the current view constraints.\n     * @param {number|undefined} targetZoom Target zoom.\n     * @param {number} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid zoom level.\n     */\n    View.prototype.getConstrainedZoom = function (targetZoom, opt_direction) {\n        var targetRes = this.getResolutionForZoom(targetZoom);\n        return this.getZoomForResolution(this.getConstrainedResolution(targetRes, opt_direction));\n    };\n    /**\n     * Get a valid resolution according to the current view constraints.\n     * @param {number|undefined} targetResolution Target resolution.\n     * @param {number} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid resolution.\n     */\n    View.prototype.getConstrainedResolution = function (targetResolution, opt_direction) {\n        var direction = opt_direction || 0;\n        var size = this.getViewportSize_(this.getRotation());\n        return this.constraints_.resolution(targetResolution, direction, size);\n    };\n    return View;\n}(BaseObject));\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n    setTimeout(function () {\n        callback(returnValue);\n    }, 0);\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n    if (options.extent !== undefined) {\n        var smooth = options.smoothExtentConstraint !== undefined\n            ? options.smoothExtentConstraint\n            : true;\n        return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n    }\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    if (options.multiWorld !== true && projection.isGlobal()) {\n        var extent = projection.getExtent().slice();\n        extent[0] = -Infinity;\n        extent[2] = Infinity;\n        return createExtent(extent, false, false);\n    }\n    return centerNone;\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n    var resolutionConstraint;\n    var maxResolution;\n    var minResolution;\n    // TODO: move these to be ol constants\n    // see https://github.com/openlayers/openlayers/issues/2076\n    var defaultMaxZoom = 28;\n    var defaultZoomFactor = 2;\n    var minZoom = options.minZoom !== undefined ? options.minZoom : DEFAULT_MIN_ZOOM;\n    var maxZoom = options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n    var zoomFactor = options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n    var multiWorld = options.multiWorld !== undefined ? options.multiWorld : false;\n    var smooth = options.smoothResolutionConstraint !== undefined\n        ? options.smoothResolutionConstraint\n        : true;\n    var showFullExtent = options.showFullExtent !== undefined ? options.showFullExtent : false;\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    var projExtent = projection.getExtent();\n    var constrainOnlyCenter = options.constrainOnlyCenter;\n    var extent = options.extent;\n    if (!multiWorld && !extent && projection.isGlobal()) {\n        constrainOnlyCenter = false;\n        extent = projExtent;\n    }\n    if (options.resolutions !== undefined) {\n        var resolutions = options.resolutions;\n        maxResolution = resolutions[minZoom];\n        minResolution =\n            resolutions[maxZoom] !== undefined\n                ? resolutions[maxZoom]\n                : resolutions[resolutions.length - 1];\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToResolutions(resolutions, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n    }\n    else {\n        // calculate the default min and max resolution\n        var size = !projExtent\n            ? // use an extent that can fit the whole world if need be\n                (360 * METERS_PER_UNIT[Units.DEGREES]) / projection.getMetersPerUnit()\n            : Math.max(getWidth(projExtent), getHeight(projExtent));\n        var defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(defaultZoomFactor, DEFAULT_MIN_ZOOM);\n        var defaultMinResolution = defaultMaxResolution /\n            Math.pow(defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n        // user provided maxResolution takes precedence\n        maxResolution = options.maxResolution;\n        if (maxResolution !== undefined) {\n            minZoom = 0;\n        }\n        else {\n            maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n        }\n        // user provided minResolution takes precedence\n        minResolution = options.minResolution;\n        if (minResolution === undefined) {\n            if (options.maxZoom !== undefined) {\n                if (options.maxResolution !== undefined) {\n                    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n                else {\n                    minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n            }\n            else {\n                minResolution = defaultMinResolution;\n            }\n        }\n        // given discrete zoom levels, minResolution may be different than provided\n        maxZoom =\n            minZoom +\n                Math.floor(Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n        minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToPower(zoomFactor, maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n    }\n    return {\n        constraint: resolutionConstraint,\n        maxResolution: maxResolution,\n        minResolution: minResolution,\n        minZoom: minZoom,\n        zoomFactor: zoomFactor,\n    };\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n    var enableRotation = options.enableRotation !== undefined ? options.enableRotation : true;\n    if (enableRotation) {\n        var constrainRotation = options.constrainRotation;\n        if (constrainRotation === undefined || constrainRotation === true) {\n            return createSnapToZero();\n        }\n        else if (constrainRotation === false) {\n            return rotationNone;\n        }\n        else if (typeof constrainRotation === 'number') {\n            return createSnapToN(constrainRotation);\n        }\n        else {\n            return rotationNone;\n        }\n    }\n    else {\n        return disable;\n    }\n}\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n    if (animation.sourceCenter && animation.targetCenter) {\n        if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n            return false;\n        }\n    }\n    if (animation.sourceResolution !== animation.targetResolution) {\n        return false;\n    }\n    if (animation.sourceRotation !== animation.targetRotation) {\n        return false;\n    }\n    return true;\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {import(\"./size.js\").Size} size Box pixel size.\n * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {import(\"./coordinate.js\").Coordinate} Shifted center.\n */\nfunction calculateCenterOn(coordinate, size, position, resolution, rotation) {\n    // calculate rotated position\n    var cosAngle = Math.cos(-rotation);\n    var sinAngle = Math.sin(-rotation);\n    var rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    var centerX = rotX * cosAngle - rotY * sinAngle;\n    var centerY = rotY * cosAngle + rotX * sinAngle;\n    return [centerX, centerY];\n}\nexport default View;\n//# sourceMappingURL=View.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector~VectorSource#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature',\n    /**\n     * Triggered when features starts loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n     * @api\n     */\n    FEATURESLOADSTART: 'featuresloadstart',\n    /**\n     * Triggered when features finishes loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n     * @api\n     */\n    FEATURESLOADEND: 'featuresloadend',\n    /**\n     * Triggered if feature loading results in an error.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n     * @api\n     */\n    FEATURESLOADERROR: 'featuresloaderror',\n};\n/**\n * @typedef {'addfeature'|'changefeature'|'clear'|'removefeature'|'featuresloadstart'|'featuresloadend'|'featuresloaderror'} VectorSourceEventTypes\n */\n//# sourceMappingURL=VectorEventType.js.map","/**\n * @module ol/coordinate\n */\nimport { getWidth } from './extent.js';\nimport { modulo } from './math.js';\nimport { padNumber } from './string.js';\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n    coordinate[0] += +delta[0];\n    coordinate[1] += +delta[1];\n    return coordinate;\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n    var r = circle.getRadius();\n    var center = circle.getCenter();\n    var x0 = center[0];\n    var y0 = center[1];\n    var x1 = coordinate[0];\n    var y1 = coordinate[1];\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    if (dx === 0 && dy === 0) {\n        dx = 1;\n    }\n    var d = Math.sqrt(dx * dx + dy * dy);\n    var x = x0 + (r * dx) / d;\n    var y = y0 + (r * dy) / d;\n    return [x, y];\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n    var x0 = coordinate[0];\n    var y0 = coordinate[1];\n    var start = segment[0];\n    var end = segment[1];\n    var x1 = start[0];\n    var y1 = start[1];\n    var x2 = end[0];\n    var y2 = end[1];\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var along = dx === 0 && dy === 0\n        ? 0\n        : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n    var x, y;\n    if (along <= 0) {\n        x = x1;\n        y = y1;\n    }\n    else if (along >= 1) {\n        x = x2;\n        y = y2;\n    }\n    else {\n        x = x1 + along * dx;\n        y = y1 + along * dy;\n    }\n    return [x, y];\n}\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n    return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function (coordinate) {\n        return toStringXY(coordinate, opt_fractionDigits);\n    });\n}\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n    var normalizedDegrees = modulo(degrees + 180, 360) - 180;\n    var x = Math.abs(3600 * normalizedDegrees);\n    var dflPrecision = opt_fractionDigits || 0;\n    var precision = Math.pow(10, dflPrecision);\n    var deg = Math.floor(x / 3600);\n    var min = Math.floor((x - deg * 3600) / 60);\n    var sec = x - deg * 3600 - min * 60;\n    sec = Math.ceil(sec * precision) / precision;\n    if (sec >= 60) {\n        sec = 0;\n        min += 1;\n    }\n    if (min >= 60) {\n        min = 0;\n        deg += 1;\n    }\n    return (deg +\n        '\\u00b0 ' +\n        padNumber(min, 2) +\n        '\\u2032 ' +\n        padNumber(sec, 2, dflPrecision) +\n        '\\u2033' +\n        (normalizedDegrees == 0\n            ? ''\n            : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0)));\n}\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n    if (coordinate) {\n        return template\n            .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n            .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n    var equals = true;\n    for (var i = coordinate1.length - 1; i >= 0; --i) {\n        if (coordinate1[i] != coordinate2[i]) {\n            equals = false;\n            break;\n        }\n    }\n    return equals;\n}\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n    var cosAngle = Math.cos(angle);\n    var sinAngle = Math.sin(angle);\n    var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    coordinate[0] = x;\n    coordinate[1] = y;\n    return coordinate;\n}\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n    coordinate[0] *= scale;\n    coordinate[1] *= scale;\n    return coordinate;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n    var dx = coord1[0] - coord2[0];\n    var dy = coord1[1] - coord2[1];\n    return dx * dx + dy * dy;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n    return Math.sqrt(squaredDistance(coord1, coord2));\n}\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n    return squaredDistance(coordinate, closestOnSegment(coordinate, segment));\n}\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47° 58′ 60″ N 7° 50′ 60″ E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47° 58′ 60.0″ N 7° 50′ 60.0″ E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n    if (coordinate) {\n        return (degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) +\n            ' ' +\n            degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits));\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n    return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n/**\n * Modifies the provided coordinate in-place to be within the real world\n * extent. The lower projection extent boundary is inclusive, the upper one\n * exclusive.\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {Coordinate} The coordinate within the real world extent.\n */\nexport function wrapX(coordinate, projection) {\n    if (projection.canWrapX()) {\n        var worldWidth = getWidth(projection.getExtent());\n        var worldsAway = getWorldsAway(coordinate, projection, worldWidth);\n        if (worldsAway) {\n            coordinate[0] -= worldsAway * worldWidth;\n        }\n    }\n    return coordinate;\n}\n/**\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {number} [opt_sourceExtentWidth] Width of the source extent.\n * @return {number} Offset in world widths.\n */\nexport function getWorldsAway(coordinate, projection, opt_sourceExtentWidth) {\n    var projectionExtent = projection.getExtent();\n    var worldsAway = 0;\n    if (projection.canWrapX() &&\n        (coordinate[0] < projectionExtent[0] || coordinate[0] > projectionExtent[2])) {\n        var sourceExtentWidth = opt_sourceExtentWidth || getWidth(projectionExtent);\n        worldsAway = Math.floor((coordinate[0] - projectionExtent[0]) / sourceExtentWidth);\n    }\n    return worldsAway;\n}\n//# sourceMappingURL=coordinate.js.map","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","/**\n * @module ol/transform\n */\nimport { WORKER_OFFSCREEN_CANVAS } from './has.js';\nimport { assert } from './asserts.js';\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n/**\n * @private\n * @type {Transform}\n */\nvar tmp_ = new Array(6);\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n    return set(transform, 1, 0, 0, 1, 0, 0);\n}\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n    var a1 = transform1[0];\n    var b1 = transform1[1];\n    var c1 = transform1[2];\n    var d1 = transform1[3];\n    var e1 = transform1[4];\n    var f1 = transform1[5];\n    var a2 = transform2[0];\n    var b2 = transform2[1];\n    var c2 = transform2[2];\n    var d2 = transform2[3];\n    var e2 = transform2[4];\n    var f2 = transform2[5];\n    transform1[0] = a1 * a2 + c1 * b2;\n    transform1[1] = b1 * a2 + d1 * b2;\n    transform1[2] = a1 * c2 + c1 * d2;\n    transform1[3] = b1 * c2 + d1 * d2;\n    transform1[4] = a1 * e2 + c1 * f2 + e1;\n    transform1[5] = b1 * e2 + d1 * f2 + f1;\n    return transform1;\n}\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n    transform[0] = a;\n    transform[1] = b;\n    transform[2] = c;\n    transform[3] = d;\n    transform[4] = e;\n    transform[5] = f;\n    return transform;\n}\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n    transform1[0] = transform2[0];\n    transform1[1] = transform2[1];\n    transform1[2] = transform2[2];\n    transform1[3] = transform2[3];\n    transform1[4] = transform2[4];\n    transform1[5] = transform2[5];\n    return transform1;\n}\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n    return coordinate;\n}\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n    return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n    return set(target, x, 0, 0, y, 0, 0);\n}\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n    return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    transform[0] = sx * cos;\n    transform[1] = sy * sin;\n    transform[2] = -sx * sin;\n    transform[3] = sy * cos;\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n    return transform;\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` property of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n    return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n    return makeInverse(source, source);\n}\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n    var det = determinant(source);\n    assert(det !== 0, 32); // Transformation matrix cannot be inverted\n    var a = source[0];\n    var b = source[1];\n    var c = source[2];\n    var d = source[3];\n    var e = source[4];\n    var f = source[5];\n    target[0] = d / det;\n    target[1] = -b / det;\n    target[2] = -c / det;\n    target[3] = a / det;\n    target[4] = (c * f - d * e) / det;\n    target[5] = -(a * f - b * e) / det;\n    return target;\n}\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2];\n}\n/**\n * @type {HTMLElement}\n * @private\n */\nvar transformStringDiv;\n/**\n * A rounded string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n    var transformString = 'matrix(' + mat.join(', ') + ')';\n    if (WORKER_OFFSCREEN_CANVAS) {\n        return transformString;\n    }\n    var node = transformStringDiv || (transformStringDiv = document.createElement('div'));\n    node.style.transform = transformString;\n    return node.style.transform;\n}\n//# sourceMappingURL=transform.js.map","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = global.TypeError;\nvar arraySlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = arraySlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\nimport { toSize } from '../size.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.scaleArray_ = toSize(options.scale);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.displacement_ = options.displacement;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        var scale = this.getScale();\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice(),\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number|import(\"../size.js\").Size} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the symbolizer scale array.\n     * @return {import(\"../size.js\").Size} Scale array.\n     */\n    ImageStyle.prototype.getScaleArray = function () {\n        return this.scaleArray_;\n    };\n    /**\n     * Get the displacement of the shape\n     * @return {Array<number>} Shape's center displacement\n     * @api\n     */\n    ImageStyle.prototype.getDisplacement = function () {\n        return this.displacement_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function () {\n        return abstract();\n    };\n    /**\n     * Get the image pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Pixel ratio.\n     */\n    ImageStyle.prototype.getPixelRatio = function (pixelRatio) {\n        return 1;\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the displacement.\n     *\n     * @param {Array<number>} displacement Displacement.\n     * @api\n     */\n    ImageStyle.prototype.setDisplacement = function (displacement) {\n        this.displacement_ = displacement;\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|import(\"../size.js\").Size} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n        this.scaleArray_ = toSize(scale);\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/geom/flat/deflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n    for (var i = 0, ii = coordinate.length; i < ii; ++i) {\n        flatCoordinates[offset++] = coordinate[i];\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        var coordinate = coordinates[i];\n        for (var j = 0; j < stride; ++j) {\n            flatCoordinates[offset++] = coordinate[j];\n        }\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>} [opt_ends] Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n    var ends = opt_ends ? opt_ends : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatess.length; j < jj; ++j) {\n        var end = deflateCoordinates(flatCoordinates, offset, coordinatess[j], stride);\n        ends[i++] = end;\n        offset = end;\n    }\n    ends.length = i;\n    return ends;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>} [opt_endss] Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n    var endss = opt_endss ? opt_endss : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatesss.length; j < jj; ++j) {\n        var ends = deflateCoordinatesArray(flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n        endss[i++] = ends;\n        offset = ends[ends.length - 1];\n    }\n    endss.length = i;\n    return endss;\n}\n//# sourceMappingURL=deflate.js.map","/**\n * @module ol/TileState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    /**\n     * Indicates that tile loading failed\n     * @type {number}\n     */\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=TileState.js.map","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction, } from '../style/Style.js';\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder',\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options<VectorSourceType>} [opt_options] Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ =\n            options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ =\n            options.renderBuffer !== undefined ? options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ =\n            options.updateWhileAnimating !== undefined\n                ? options.updateWhileAnimating\n                : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ =\n            options.updateWhileInteracting !== undefined\n                ? options.updateWhileInteracting\n                : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * Render declutter items for this layer\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    BaseVectorLayer.prototype.renderDeclutter = function (frameState) {\n        if (!frameState.declutterTree) {\n            frameState.declutterTree = new RBush(9);\n        }\n        /** @type {*} */ (this.getRenderer()).renderDeclutter(frameState);\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If set to `null`, the layer has no style (a `null` style),\n     * so only features that have their own styles will be rendered in the layer. Call\n     * `setStyle()` without arguments to reset to the default style. See\n     * {@link module:ol/style/Style~Style} for information on the default style.\n     * @param {import(\"../style/Style.js\").StyleLike|null} [opt_style] Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style !== undefined ? opt_style : createDefaultStyle;\n        this.styleFunction_ =\n            opt_style === null ? undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","/**\n * @module ol/geom/flat/inflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} [opt_coordinates] Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n    var coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        coordinates[i++] = flatCoordinates.slice(j, j + stride);\n    }\n    coordinates.length = i;\n    return coordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} [opt_coordinatess] Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n    var coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n    var i = 0;\n    for (var j = 0, jj = ends.length; j < jj; ++j) {\n        var end = ends[j];\n        coordinatess[i++] = inflateCoordinates(flatCoordinates, offset, end, stride, coordinatess[i]);\n        offset = end;\n    }\n    coordinatess.length = i;\n    return coordinatess;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} [opt_coordinatesss]\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n    var coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n    var i = 0;\n    for (var j = 0, jj = endss.length; j < jj; ++j) {\n        var ends = endss[j];\n        coordinatesss[i++] = inflateCoordinatesArray(flatCoordinates, offset, ends, stride, coordinatesss[i]);\n        offset = ends[ends.length - 1];\n    }\n    coordinatesss.length = i;\n    return coordinatesss;\n}\n//# sourceMappingURL=inflate.js.map","/**\n * @module ol/geom/flat/transform\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var x = flatCoordinates[j];\n        var y = flatCoordinates[j + 1];\n        dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n        dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n        dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + sx * deltaX;\n        dest[i++] = anchorY + sy * deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        dest[i++] = flatCoordinates[j] + deltaX;\n        dest[i++] = flatCoordinates[j + 1] + deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n//# sourceMappingURL=transform.js.map","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TypeError = global.TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","module.exports = false;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport { containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment, } from '../../extent.js';\nimport { forEach as forEachSegment } from './segments.js';\nimport { linearRingContainsExtent, linearRingContainsXY } from './contains.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n    var coordinatesExtent = extendFlatCoordinates(createEmpty(), flatCoordinates, offset, end, stride);\n    if (!intersects(extent, coordinatesExtent)) {\n        return false;\n    }\n    if (containsExtent(extent, coordinatesExtent)) {\n        return true;\n    }\n    if (coordinatesExtent[0] >= extent[0] && coordinatesExtent[2] <= extent[2]) {\n        return true;\n    }\n    if (coordinatesExtent[1] >= extent[1] && coordinatesExtent[3] <= extent[3]) {\n        return true;\n    }\n    return forEachSegment(flatCoordinates, offset, end, stride, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function (point1, point2) {\n        return intersectsSegment(extent, point1, point2);\n    });\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        if (intersectsLineString(flatCoordinates, offset, ends[i], stride, extent)) {\n            return true;\n        }\n        offset = ends[i];\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n    if (intersectsLineString(flatCoordinates, offset, end, stride, extent)) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n        return true;\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n    if (!intersectsLinearRing(flatCoordinates, offset, ends[0], stride, extent)) {\n        return false;\n    }\n    if (ends.length === 1) {\n        return true;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n            if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=intersectsextent.js.map","var call = Function.prototype.call;\n\nmodule.exports = call.bind ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * @module ol/easing\n */\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n    return Math.pow(t, 3);\n}\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n    return 1 - easeIn(1 - t);\n}\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n}\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n    return t;\n}\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing.inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n    if (t < 0.5) {\n        return inAndOut(2 * t);\n    }\n    else {\n        return 1 - inAndOut(2 * (t - 0.5));\n    }\n}\n//# sourceMappingURL=easing.js.map","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","/**\n * @module ol/css\n */\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_HIDDEN = 'ol-hidden';\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_SELECTABLE = 'ol-selectable';\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSELECTABLE = 'ol-unselectable';\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSUPPORTED = 'ol-unsupported';\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_CONTROL = 'ol-control';\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_COLLAPSED = 'ol-collapsed';\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nvar fontRegEx = new RegExp([\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n].join(''), 'i');\nvar fontRegExMatchIndex = [\n    'style',\n    'variant',\n    'weight',\n    'size',\n    'lineHeight',\n    'family',\n];\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters} The font parameters (or null if the input spec is invalid).\n */\nexport var getFontParameters = function (fontSpec) {\n    var match = fontSpec.match(fontRegEx);\n    if (!match) {\n        return null;\n    }\n    var style = /** @type {FontParameters} */ ({\n        lineHeight: 'normal',\n        size: '1.2em',\n        style: 'normal',\n        weight: 'normal',\n        variant: 'normal',\n    });\n    for (var i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n        var value = match[i + 1];\n        if (value !== undefined) {\n            style[fontRegExMatchIndex[i]] = value;\n        }\n    }\n    style.families = style.family.split(/,\\s?/);\n    return style;\n};\n/**\n * @param {number} opacity Opacity (0..1).\n * @return {string} CSS opacity.\n */\nexport function cssOpacity(opacity) {\n    return opacity === 1 ? '' : String(Math.round(opacity * 100) / 100);\n}\n//# sourceMappingURL=css.js.map","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { defaultFillStyle, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, } from '../render/canvas.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: options.scale !== undefined ? options.scale : 1,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n        }) || this;\n        /**\n         * @private\n         * @type {Object<number, HTMLCanvasElement>}\n         */\n        _this.canvas_ = undefined;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ =\n            options.radius !== undefined ? options.radius : options.radius1;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {RenderOptions}\n         */\n        _this.renderOptions_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var scale = this.getScale();\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            displacement: this.getDisplacement().slice(),\n        });\n        style.setOpacity(this.getOpacity());\n        return style;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @return {Array<number>} Anchor.\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        var size = this.size_;\n        if (!size) {\n            return null;\n        }\n        var displacement = this.getDisplacement();\n        return [size[0] / 2 - displacement[0], size[1] / 2 + displacement[1]];\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * @return {HTMLCanvasElement} Image element.\n     */\n    RegularShape.prototype.getHitDetectionImage = function () {\n        if (!this.hitDetectionCanvas_) {\n            this.createHitDetectionCanvas_(this.renderOptions_);\n        }\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement} Image or Canvas element.\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        var image = this.canvas_[pixelRatio];\n        if (!image) {\n            var renderOptions = this.renderOptions_;\n            var context = createCanvasContext2D(renderOptions.size * pixelRatio, renderOptions.size * pixelRatio);\n            this.draw_(renderOptions, context, pixelRatio);\n            image = context.canvas;\n            this.canvas_[pixelRatio] = image;\n        }\n        return image;\n    };\n    /**\n     * Get the image pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Pixel ratio.\n     */\n    RegularShape.prototype.getPixelRatio = function (pixelRatio) {\n        return pixelRatio;\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @return {Array<number>} Origin.\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @return {import(\"../size.js\").Size} Size.\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * Load not yet loaded URI.\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * Calculate additional canvas size needed for the miter.\n     * @param {string} lineJoin Line join\n     * @param {number} strokeWidth Stroke width\n     * @param {number} miterLimit Miter limit\n     * @return {number} Additional canvas size needed\n     * @private\n     */\n    RegularShape.prototype.calculateLineJoinSize_ = function (lineJoin, strokeWidth, miterLimit) {\n        if (strokeWidth === 0 ||\n            this.points_ === Infinity ||\n            (lineJoin !== 'bevel' && lineJoin !== 'miter')) {\n            return strokeWidth;\n        }\n        // m  | ^\n        // i  | |\\                  .\n        // t >|  #\\\n        // e  | |\\ \\              .\n        // r      \\s\\\n        //      |  \\t\\          .                 .\n        //          \\r\\                      .   .\n        //      |    \\o\\      .          .  . . .\n        //          e \\k\\            .  .    . .\n        //      |      \\e\\  .    .  .       . .\n        //       d      \\ \\  .  .          . .\n        //      | _ _a_ _\\#  .            . .\n        //   r1          / `             . .\n        //      |                       . .\n        //       b     /               . .\n        //      |                     . .\n        //           / r2            . .\n        //      |                        .   .\n        //         /                           .   .\n        //      |α                                   .   .\n        //       /                                         .   .\n        //      ° center\n        var r1 = this.radius_;\n        var r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n        if (r1 < r2) {\n            var tmp = r1;\n            r1 = r2;\n            r2 = tmp;\n        }\n        var points = this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n        var alpha = (2 * Math.PI) / points;\n        var a = r2 * Math.sin(alpha);\n        var b = Math.sqrt(r2 * r2 - a * a);\n        var d = r1 - b;\n        var e = Math.sqrt(a * a + d * d);\n        var miterRatio = e / a;\n        if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n            return miterRatio * strokeWidth;\n        }\n        // Calculate the distnce from center to the stroke corner where\n        // it was cut short because of the miter limit.\n        //              l\n        //        ----+---- <= distance from center to here is maxr\n        //       /####|k ##\\\n        //      /#####^#####\\\n        //     /#### /+\\# s #\\\n        //    /### h/+++\\# t #\\\n        //   /### t/+++++\\# r #\\\n        //  /### a/+++++++\\# o #\\\n        // /### p/++ fill +\\# k #\\\n        ///#### /+++++^+++++\\# e #\\\n        //#####/+++++/+\\+++++\\#####\\\n        var k = strokeWidth / 2 / miterRatio;\n        var l = (strokeWidth / 2) * (d / e);\n        var maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n        var bevelAdd = maxr - r1;\n        if (this.radius2_ === undefined || lineJoin === 'bevel') {\n            return bevelAdd * 2;\n        }\n        // If outer miter is over the miter limit the inner miter may reach through the\n        // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n        var aa = r1 * Math.sin(alpha);\n        var bb = Math.sqrt(r1 * r1 - aa * aa);\n        var dd = r2 - bb;\n        var ee = Math.sqrt(aa * aa + dd * dd);\n        var innerMiterRatio = ee / aa;\n        if (innerMiterRatio <= miterLimit) {\n            var innerLength = (innerMiterRatio * strokeWidth) / 2 - r2 - r1;\n            return 2 * Math.max(bevelAdd, innerLength);\n        }\n        return bevelAdd * 2;\n    };\n    /**\n     * @return {RenderOptions}  The render options\n     * @protected\n     */\n    RegularShape.prototype.createRenderOptions = function () {\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n        var maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n        var size = Math.ceil(2 * maxRadius + add);\n        return {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit,\n        };\n    };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        this.renderOptions_ = this.createRenderOptions();\n        var size = this.renderOptions_.size;\n        this.canvas_ = {};\n        this.size_ = [size, size];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} pixelRatio The pixel ratio.\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, pixelRatio) {\n        context.scale(pixelRatio, pixelRatio);\n        // set origin to canvas center\n        context.translate(renderOptions.size / 2, renderOptions.size / 2);\n        this.createPath_(context);\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context);\n            }\n        }\n        if (!this.hitDetectionCanvas_) {\n            this.hitDetectionCanvas_ = this.getImage(1);\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context The context to draw in.\n     */\n    RegularShape.prototype.createPath_ = function (context) {\n        var points = this.points_;\n        var radius = this.radius_;\n        if (points === Infinity) {\n            context.arc(0, 0, radius, 0, 2 * Math.PI);\n        }\n        else {\n            var radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n            if (this.radius2_ !== undefined) {\n                points *= 2;\n            }\n            var startAngle = this.angle_ - Math.PI / 2;\n            var step = (2 * Math.PI) / points;\n            for (var i = 0; i < points; i++) {\n                var angle0 = startAngle + i * step;\n                var radiusC = i % 2 === 0 ? radius : radius2;\n                context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n            }\n            context.closePath();\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context) {\n        // set origin to canvas center\n        context.translate(renderOptions.size / 2, renderOptions.size / 2);\n        this.createPath_(context);\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function CircleStyle(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke,\n            scale: options.scale !== undefined ? options.scale : 1,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            rotateWithView: options.rotateWithView !== undefined ? options.rotateWithView : false,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n        }) || this;\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {CircleStyle} The cloned style.\n     * @api\n     */\n    CircleStyle.prototype.clone = function () {\n        var scale = this.getScale();\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice(),\n        });\n        style.setOpacity(this.getOpacity());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nvar BaseEvent = /** @class */ (function () {\n    /**\n     * @param {string} type Type.\n     */\n    function BaseEvent(type) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped;\n        /**\n         * @type {boolean}\n         */\n        this.defaultPrevented;\n        /**\n         * The event type.\n         * @type {string}\n         * @api\n         */\n        this.type = type;\n        /**\n         * The event target.\n         * @type {Object}\n         * @api\n         */\n        this.target = null;\n    }\n    /**\n     * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n     * will be fired.\n     * @api\n     */\n    BaseEvent.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n    };\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    return BaseEvent;\n}());\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n    evt.stopPropagation();\n}\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n    evt.preventDefault();\n}\nexport default BaseEvent;\n//# sourceMappingURL=Event.js.map","module.exports = {};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Object = global.Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));\n};\n","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = /** @class */ (function () {\n    /**\n     * @param {number} minX Minimum X.\n     * @param {number} maxX Maximum X.\n     * @param {number} minY Minimum Y.\n     * @param {number} maxY Maximum Y.\n     */\n    function TileRange(minX, maxX, minY, maxY) {\n        /**\n         * @type {number}\n         */\n        this.minX = minX;\n        /**\n         * @type {number}\n         */\n        this.maxX = maxX;\n        /**\n         * @type {number}\n         */\n        this.minY = minY;\n        /**\n         * @type {number}\n         */\n        this.maxY = maxY;\n    }\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {boolean} Contains tile coordinate.\n     */\n    TileRange.prototype.contains = function (tileCoord) {\n        return this.containsXY(tileCoord[1], tileCoord[2]);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Contains.\n     */\n    TileRange.prototype.containsTileRange = function (tileRange) {\n        return (this.minX <= tileRange.minX &&\n            tileRange.maxX <= this.maxX &&\n            this.minY <= tileRange.minY &&\n            tileRange.maxY <= this.maxY);\n    };\n    /**\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @return {boolean} Contains coordinate.\n     */\n    TileRange.prototype.containsXY = function (x, y) {\n        return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Equals.\n     */\n    TileRange.prototype.equals = function (tileRange) {\n        return (this.minX == tileRange.minX &&\n            this.minY == tileRange.minY &&\n            this.maxX == tileRange.maxX &&\n            this.maxY == tileRange.maxY);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     */\n    TileRange.prototype.extend = function (tileRange) {\n        if (tileRange.minX < this.minX) {\n            this.minX = tileRange.minX;\n        }\n        if (tileRange.maxX > this.maxX) {\n            this.maxX = tileRange.maxX;\n        }\n        if (tileRange.minY < this.minY) {\n            this.minY = tileRange.minY;\n        }\n        if (tileRange.maxY > this.maxY) {\n            this.maxY = tileRange.maxY;\n        }\n    };\n    /**\n     * @return {number} Height.\n     */\n    TileRange.prototype.getHeight = function () {\n        return this.maxY - this.minY + 1;\n    };\n    /**\n     * @return {import(\"./size.js\").Size} Size.\n     */\n    TileRange.prototype.getSize = function () {\n        return [this.getWidth(), this.getHeight()];\n    };\n    /**\n     * @return {number} Width.\n     */\n    TileRange.prototype.getWidth = function () {\n        return this.maxX - this.minX + 1;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Intersects.\n     */\n    TileRange.prototype.intersects = function (tileRange) {\n        return (this.minX <= tileRange.maxX &&\n            this.maxX >= tileRange.minX &&\n            this.minY <= tileRange.maxY &&\n            this.maxY >= tileRange.minY);\n    };\n    return TileRange;\n}());\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange} [tileRange] TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n    if (tileRange !== undefined) {\n        tileRange.minX = minX;\n        tileRange.maxX = maxX;\n        tileRange.minY = minY;\n        tileRange.maxY = maxY;\n        return tileRange;\n    }\n    else {\n        return new TileRange(minX, maxX, minY, maxY);\n    }\n}\nexport default TileRange;\n//# sourceMappingURL=TileRange.js.map","var aCallable = require('../internals/a-callable');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable(func);\n};\n","/**\n * @module ol/render/canvas\n */\nimport BaseObject from '../Object.js';\nimport EventTarget from '../events/Target.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../has.js';\nimport { clear } from '../obj.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { getFontParameters } from '../css.js';\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle FillStyle.\n */\n/**\n * @typedef Label\n * @property {number} width Width.\n * @property {number} height Height.\n * @property {Array<string|number>} contextInstructions ContextInstructions.\n */\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle] Current FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle] Current StrokeStyle.\n * @property {CanvasLineCap} [currentLineCap] Current LineCap.\n * @property {Array<number>} currentLineDash Current LineDash.\n * @property {number} [currentLineDashOffset] Current LineDashOffset.\n * @property {CanvasLineJoin} [currentLineJoin] Current LineJoin.\n * @property {number} [currentLineWidth] Current LineWidth.\n * @property {number} [currentMiterLimit] Current MiterLimit.\n * @property {number} [lastStroke] Last stroke.\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle] FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {CanvasLineCap} [lineCap] LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} [lineDashOffset] LineDashOffset.\n * @property {CanvasLineJoin} [lineJoin] LineJoin.\n * @property {number} [lineWidth] LineWidth.\n * @property {number} [miterLimit] MiterLimit.\n */\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} lineWidth LineWidth.\n * @property {number} miterLimit MiterLimit.\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle StrokeStyle.\n */\n/**\n * @typedef {Object} TextState\n * @property {string} font Font.\n * @property {string} [textAlign] TextAlign.\n * @property {string} textBaseline TextBaseline.\n * @property {string} [placement] Placement.\n * @property {number} [maxAngle] MaxAngle.\n * @property {boolean} [overflow] Overflow.\n * @property {import(\"../style/Fill.js\").default} [backgroundFill] BackgroundFill.\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke] BackgroundStroke.\n * @property {import(\"../size.js\").Size} [scale] Scale.\n * @property {Array<number>} [padding] Padding.\n */\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, StrokeState>} [strokeStates] The stroke states (decluttering).\n */\n/**\n * @typedef {Object<number, import(\"./canvas/Executor.js\").ReplayImageOrLabelArgs>} DeclutterImageWithText\n */\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultFillStyle = '#000';\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport var defaultLineCap = 'round';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport var defaultLineJoin = 'round';\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultStrokeStyle = '#000';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n/**\n * @type {BaseObject}\n */\nexport var checkedFonts = new BaseObject();\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache~LRUCache#setSize cache.setSize()}.\n * Deprecated - there is no label cache any more.\n * @type {?}\n * @api\n * @deprecated\n */\nexport var labelCache = new EventTarget();\nlabelCache.setSize = function () {\n    console.warn('labelCache is deprecated.'); //eslint-disable-line\n};\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n/**\n * @type {string}\n */\nvar measureFont;\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var registerFont = (function () {\n    var retries = 100;\n    var size = '32px ';\n    var referenceFonts = ['monospace', 'serif'];\n    var len = referenceFonts.length;\n    var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n    var interval, referenceWidth;\n    /**\n     * @param {string} fontStyle Css font-style\n     * @param {string} fontWeight Css font-weight\n     * @param {*} fontFamily Css font-family\n     * @return {boolean} Font with style and weight is available\n     */\n    function isAvailable(fontStyle, fontWeight, fontFamily) {\n        var available = true;\n        for (var i = 0; i < len; ++i) {\n            var referenceFont = referenceFonts[i];\n            referenceWidth = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + referenceFont, text);\n            if (fontFamily != referenceFont) {\n                var width = measureTextWidth(fontStyle +\n                    ' ' +\n                    fontWeight +\n                    ' ' +\n                    size +\n                    fontFamily +\n                    ',' +\n                    referenceFont, text);\n                // If width and referenceWidth are the same, then the fallback was used\n                // instead of the font we wanted, so the font is not available.\n                available = available && width != referenceWidth;\n            }\n        }\n        if (available) {\n            return true;\n        }\n        return false;\n    }\n    function check() {\n        var done = true;\n        var fonts = checkedFonts.getKeys();\n        for (var i = 0, ii = fonts.length; i < ii; ++i) {\n            var font = fonts[i];\n            if (checkedFonts.get(font) < retries) {\n                if (isAvailable.apply(this, font.split('\\n'))) {\n                    clear(textHeights);\n                    // Make sure that loaded fonts are picked up by Safari\n                    measureContext = null;\n                    measureFont = undefined;\n                    checkedFonts.set(font, retries);\n                }\n                else {\n                    checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n                    done = false;\n                }\n            }\n        }\n        if (done) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n    return function (fontSpec) {\n        var font = getFontParameters(fontSpec);\n        if (!font) {\n            return;\n        }\n        var families = font.families;\n        for (var i = 0, ii = families.length; i < ii; ++i) {\n            var family = families[i];\n            var key = font.style + '\\n' + font.weight + '\\n' + family;\n            if (checkedFonts.get(key) === undefined) {\n                checkedFonts.set(key, retries, true);\n                if (!isAvailable(font.style, font.weight, family)) {\n                    checkedFonts.set(key, 0, true);\n                    if (interval === undefined) {\n                        interval = setInterval(check, 32);\n                    }\n                }\n            }\n        }\n    };\n})();\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function () {\n    /**\n     * @type {HTMLDivElement}\n     */\n    var measureElement;\n    return function (fontSpec) {\n        var height = textHeights[fontSpec];\n        if (height == undefined) {\n            if (WORKER_OFFSCREEN_CANVAS) {\n                var font = getFontParameters(fontSpec);\n                var metrics = measureText(fontSpec, 'Žg');\n                var lineHeight = isNaN(Number(font.lineHeight))\n                    ? 1.2\n                    : Number(font.lineHeight);\n                height =\n                    lineHeight *\n                        (metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n            }\n            else {\n                if (!measureElement) {\n                    measureElement = document.createElement('div');\n                    measureElement.innerHTML = 'M';\n                    measureElement.style.minHeight = '0';\n                    measureElement.style.maxHeight = 'none';\n                    measureElement.style.height = 'auto';\n                    measureElement.style.padding = '0';\n                    measureElement.style.border = 'none';\n                    measureElement.style.position = 'absolute';\n                    measureElement.style.display = 'block';\n                    measureElement.style.left = '-99999px';\n                }\n                measureElement.style.font = fontSpec;\n                document.body.appendChild(measureElement);\n                height = measureElement.offsetHeight;\n                document.body.removeChild(measureElement);\n            }\n            textHeights[fontSpec] = height;\n        }\n        return height;\n    };\n})();\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {TextMetrics} Text metrics.\n */\nfunction measureText(font, text) {\n    if (!measureContext) {\n        measureContext = createCanvasContext2D(1, 1);\n    }\n    if (font != measureFont) {\n        measureContext.font = font;\n        measureFont = measureContext.font;\n    }\n    return measureContext.measureText(text);\n}\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n    return measureText(font, text).width;\n}\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @return {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n    if (text in cache) {\n        return cache[text];\n    }\n    var width = measureTextWidth(font, text);\n    cache[text] = width;\n    return width;\n}\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n    var numLines = lines.length;\n    var width = 0;\n    for (var i = 0; i < numLines; ++i) {\n        var currentWidth = measureTextWidth(font, lines[i]);\n        width = Math.max(width, currentWidth);\n        widths.push(currentWidth);\n    }\n    return width;\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n    if (rotation !== 0) {\n        context.translate(offsetX, offsetY);\n        context.rotate(rotation);\n        context.translate(-offsetX, -offsetY);\n    }\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {import(\"../size.js\").Size} scale Scale.\n */\nexport function drawImageOrLabel(context, transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {\n    context.save();\n    if (opacity !== 1) {\n        context.globalAlpha *= opacity;\n    }\n    if (transform) {\n        context.setTransform.apply(context, transform);\n    }\n    if ( /** @type {*} */(labelOrImage).contextInstructions) {\n        // label\n        context.translate(x, y);\n        context.scale(scale[0], scale[1]);\n        executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n    }\n    else if (scale[0] < 0 || scale[1] < 0) {\n        // flipped image\n        context.translate(x, y);\n        context.scale(scale[0], scale[1]);\n        context.drawImage(\n        /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, 0, 0, w, h);\n    }\n    else {\n        // if image not flipped translate and scale can be avoided\n        context.drawImage(\n        /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale[0], h * scale[1]);\n    }\n    context.restore();\n}\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n    var contextInstructions = label.contextInstructions;\n    for (var i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n        if (Array.isArray(contextInstructions[i + 1])) {\n            context[contextInstructions[i]].apply(context, contextInstructions[i + 1]);\n        }\n        else {\n            context[contextInstructions[i]] = contextInstructions[i + 1];\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source',\n    MAP: 'map',\n};\n//# sourceMappingURL=Property.js.map","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport { assign, isEmpty } from './obj.js';\nimport { getUid } from './util.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>} [opt_values] An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ObjectOnSignature<void>}\n         */\n        _this.un;\n        // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {Object<string, *>}\n         */\n        _this.values_ = null;\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_ && this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return (this.values_ && Object.keys(this.values_)) || [];\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return (this.values_ && assign({}, this.values_)) || {};\n    };\n    /**\n     * @return {boolean} The object has properties.\n     */\n    BaseObject.prototype.hasProperties = function () {\n        return !!this.values_;\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = \"change:\" + key;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.addChangeListener = function (key, listener) {\n        this.addEventListener(\"change:\" + key, listener);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.removeChangeListener = function (key, listener) {\n        this.removeEventListener(\"change:\" + key, listener);\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        var values = this.values_ || (this.values_ = {});\n        if (opt_silent) {\n            values[key] = value;\n        }\n        else {\n            var oldValue = values[key];\n            values[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Apply any properties from another object without triggering events.\n     * @param {BaseObject} source The source object.\n     * @protected\n     */\n    BaseObject.prototype.applyProperties = function (source) {\n        if (!source.values_) {\n            return;\n        }\n        assign(this.values_ || (this.values_ = {}), source.values_);\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean} [opt_silent] Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (this.values_ && key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (isEmpty(this.values_)) {\n                this.values_ = null;\n            }\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","var FunctionPrototype = Function.prototype;\nvar bind = FunctionPrototype.bind;\nvar call = FunctionPrototype.call;\nvar uncurryThis = bind && bind.bind(call, call);\n\nmodule.exports = bind ? function (fn) {\n  return fn && uncurryThis(fn);\n} : function (fn) {\n  return fn && function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/OverviewMap\n */\nimport CompositeMapRenderer from '../renderer/Composite.js';\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport MapEventType from '../MapEventType.js';\nimport MapProperty from '../MapProperty.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport Overlay from '../Overlay.js';\nimport OverlayPositioning from '../OverlayPositioning.js';\nimport PluggableMap from '../PluggableMap.js';\nimport View from '../View.js';\nimport ViewProperty from '../ViewProperty.js';\nimport { CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { containsExtent, equals as equalsExtent, getBottomRight, getTopLeft, scaleFromCenter, } from '../extent.js';\nimport { listen, listenOnce } from '../events.js';\nimport { fromExtent as polygonFromExtent } from '../geom/Polygon.js';\nimport { replaceNode } from '../dom.js';\n/**\n * Maximum width and/or height extent ratio that determines when the overview\n * map should be zoomed out.\n * @type {number}\n */\nvar MAX_RATIO = 0.75;\n/**\n * Minimum width and/or height extent ratio that determines when the overview\n * map should be zoomed in.\n * @type {number}\n */\nvar MIN_RATIO = 0.1;\nvar ControlledMap = /** @class */ (function (_super) {\n    __extends(ControlledMap, _super);\n    function ControlledMap() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ControlledMap.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return ControlledMap;\n}(PluggableMap));\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-overviewmap'] CSS class name.\n * @property {boolean} [collapsed=true] Whether the control should start collapsed or not (expanded).\n * @property {string|HTMLElement} [collapseLabel='‹'] Text label to use for the\n * expanded overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {boolean} [collapsible=true] Whether the control can be collapsed or not.\n * @property {string|HTMLElement} [label='›'] Text label to use for the collapsed\n * overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {Array<import(\"../layer/Base.js\").default>|import(\"../Collection.js\").default<import(\"../layer/Base.js\").default>} [layers]\n * Layers for the overview map.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {boolean} [rotateWithView=false] Whether the control view should rotate with the main map view.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {string} [tipLabel='Overview map'] Text label to use for the button tip.\n * @property {View} [view] Custom view for the overview map (should use same projection as main map). If not provided,\n * a default view with the same projection as the main map will be used.\n */\n/**\n * Create a new control with a map acting as an overview map for another\n * defined map.\n *\n * @api\n */\nvar OverviewMap = /** @class */ (function (_super) {\n    __extends(OverviewMap, _super);\n    /**\n     * @param {Options} [opt_options] OverviewMap options.\n     */\n    function OverviewMap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /**\n         * @private\n         */\n        _this.boundHandleRotationChanged_ = _this.handleRotationChanged_.bind(_this);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.collapsed_ =\n            options.collapsed !== undefined ? options.collapsed : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsible_ =\n            options.collapsible !== undefined ? options.collapsible : true;\n        if (!_this.collapsible_) {\n            _this.collapsed_ = false;\n        }\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotateWithView_ =\n            options.rotateWithView !== undefined ? options.rotateWithView : false;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent|undefined}\n         */\n        _this.viewExtent_ = undefined;\n        var className = options.className !== undefined ? options.className : 'ol-overviewmap';\n        var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Overview map';\n        var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u2039';\n        if (typeof collapseLabel === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.collapseLabel_ = document.createElement('span');\n            _this.collapseLabel_.textContent = collapseLabel;\n        }\n        else {\n            _this.collapseLabel_ = collapseLabel;\n        }\n        var label = options.label !== undefined ? options.label : '\\u203A';\n        if (typeof label === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.label_ = document.createElement('span');\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n        }\n        var activeLabel = _this.collapsible_ && !_this.collapsed_ ? _this.collapseLabel_ : _this.label_;\n        var button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(activeLabel);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        /**\n         * @type {HTMLElement}\n         * @private\n         */\n        _this.ovmapDiv_ = document.createElement('div');\n        _this.ovmapDiv_.className = 'ol-overviewmap-map';\n        /**\n         * Explicitly given view to be used instead of a view derived from the main map.\n         * @type {View}\n         * @private\n         */\n        _this.view_ = options.view;\n        /**\n         * @type {ControlledMap}\n         * @private\n         */\n        _this.ovmap_ = new ControlledMap({\n            view: options.view,\n        });\n        var ovmap = _this.ovmap_;\n        if (options.layers) {\n            options.layers.forEach(function (layer) {\n                ovmap.addLayer(layer);\n            });\n        }\n        var box = document.createElement('div');\n        box.className = 'ol-overviewmap-box';\n        box.style.boxSizing = 'border-box';\n        /**\n         * @type {import(\"../Overlay.js\").default}\n         * @private\n         */\n        _this.boxOverlay_ = new Overlay({\n            position: [0, 0],\n            positioning: OverlayPositioning.CENTER_CENTER,\n            element: box,\n        });\n        _this.ovmap_.addOverlay(_this.boxOverlay_);\n        var cssClasses = className +\n            ' ' +\n            CLASS_UNSELECTABLE +\n            ' ' +\n            CLASS_CONTROL +\n            (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n            (_this.collapsible_ ? '' : ' ol-uncollapsible');\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(_this.ovmapDiv_);\n        element.appendChild(button);\n        /* Interactive map */\n        var scope = _this;\n        var overlay = _this.boxOverlay_;\n        var overlayBox = _this.boxOverlay_.getElement();\n        /* Functions definition */\n        var computeDesiredMousePosition = function (mousePosition) {\n            return {\n                clientX: mousePosition.clientX,\n                clientY: mousePosition.clientY,\n            };\n        };\n        var move = function (event) {\n            var position = /** @type {?} */ (computeDesiredMousePosition(event));\n            var coordinates = ovmap.getEventCoordinateInternal(\n            /** @type {MouseEvent} */ (position));\n            overlay.setPosition(coordinates);\n        };\n        var endMoving = function (event) {\n            var coordinates = ovmap.getEventCoordinateInternal(event);\n            scope.getMap().getView().setCenterInternal(coordinates);\n            window.removeEventListener('mousemove', move);\n            window.removeEventListener('mouseup', endMoving);\n        };\n        /* Binding */\n        overlayBox.addEventListener('mousedown', function () {\n            window.addEventListener('mousemove', move);\n            window.addEventListener('mouseup', endMoving);\n        });\n        return _this;\n    }\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    OverviewMap.prototype.setMap = function (map) {\n        var oldMap = this.getMap();\n        if (map === oldMap) {\n            return;\n        }\n        if (oldMap) {\n            var oldView = oldMap.getView();\n            if (oldView) {\n                this.unbindView_(oldView);\n            }\n            this.ovmap_.setTarget(null);\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            this.ovmap_.setTarget(this.ovmapDiv_);\n            this.listenerKeys.push(listen(map, ObjectEventType.PROPERTYCHANGE, this.handleMapPropertyChange_, this));\n            var view = map.getView();\n            if (view) {\n                this.bindView_(view);\n                if (view.isDef()) {\n                    this.ovmap_.updateSize();\n                    this.resetExtent_();\n                }\n            }\n            if (!this.ovmap_.isRendered()) {\n                this.updateBoxAfterOvmapIsRendered_();\n            }\n        }\n    };\n    /**\n     * Handle map property changes.  This only deals with changes to the map's view.\n     * @param {import(\"../Object.js\").ObjectEvent} event The propertychange event.\n     * @private\n     */\n    OverviewMap.prototype.handleMapPropertyChange_ = function (event) {\n        if (event.key === MapProperty.VIEW) {\n            var oldView = /** @type {import(\"../View.js\").default} */ (event.oldValue);\n            if (oldView) {\n                this.unbindView_(oldView);\n            }\n            var newView = this.getMap().getView();\n            this.bindView_(newView);\n        }\n        else if (!this.ovmap_.isRendered() &&\n            (event.key === MapProperty.TARGET || event.key === MapProperty.SIZE)) {\n            this.ovmap_.updateSize();\n        }\n    };\n    /**\n     * Register listeners for view property changes.\n     * @param {import(\"../View.js\").default} view The view.\n     * @private\n     */\n    OverviewMap.prototype.bindView_ = function (view) {\n        if (!this.view_) {\n            // Unless an explicit view definition was given, derive default from whatever main map uses.\n            var newView = new View({\n                projection: view.getProjection(),\n            });\n            this.ovmap_.setView(newView);\n        }\n        view.addChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_);\n        // Sync once with the new view\n        this.handleRotationChanged_();\n    };\n    /**\n     * Unregister listeners for view property changes.\n     * @param {import(\"../View.js\").default} view The view.\n     * @private\n     */\n    OverviewMap.prototype.unbindView_ = function (view) {\n        view.removeChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_);\n    };\n    /**\n     * Handle rotation changes to the main map.\n     * @private\n     */\n    OverviewMap.prototype.handleRotationChanged_ = function () {\n        if (this.rotateWithView_) {\n            this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());\n        }\n    };\n    /**\n     * Reset the overview map extent if the box size (width or\n     * height) is less than the size of the overview map size times minRatio\n     * or is greater than the size of the overview size times maxRatio.\n     *\n     * If the map extent was not reset, the box size can fits in the defined\n     * ratio sizes. This method then checks if is contained inside the overview\n     * map current extent. If not, recenter the overview map to the current\n     * main map center location.\n     * @private\n     */\n    OverviewMap.prototype.validateExtent_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        if (!map.isRendered() || !ovmap.isRendered()) {\n            return;\n        }\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var extent = view.calculateExtentInternal(mapSize);\n        if (this.viewExtent_ && equalsExtent(extent, this.viewExtent_)) {\n            // repeats of the same extent may indicate constraint conflicts leading to an endless cycle\n            return;\n        }\n        this.viewExtent_ = extent;\n        var ovmapSize = /** @type {import(\"../size.js\").Size} */ (ovmap.getSize());\n        var ovview = ovmap.getView();\n        var ovextent = ovview.calculateExtentInternal(ovmapSize);\n        var topLeftPixel = ovmap.getPixelFromCoordinateInternal(getTopLeft(extent));\n        var bottomRightPixel = ovmap.getPixelFromCoordinateInternal(getBottomRight(extent));\n        var boxWidth = Math.abs(topLeftPixel[0] - bottomRightPixel[0]);\n        var boxHeight = Math.abs(topLeftPixel[1] - bottomRightPixel[1]);\n        var ovmapWidth = ovmapSize[0];\n        var ovmapHeight = ovmapSize[1];\n        if (boxWidth < ovmapWidth * MIN_RATIO ||\n            boxHeight < ovmapHeight * MIN_RATIO ||\n            boxWidth > ovmapWidth * MAX_RATIO ||\n            boxHeight > ovmapHeight * MAX_RATIO) {\n            this.resetExtent_();\n        }\n        else if (!containsExtent(ovextent, extent)) {\n            this.recenter_();\n        }\n    };\n    /**\n     * Reset the overview map extent to half calculated min and max ratio times\n     * the extent of the main map.\n     * @private\n     */\n    OverviewMap.prototype.resetExtent_ = function () {\n        if (MAX_RATIO === 0 || MIN_RATIO === 0) {\n            return;\n        }\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var extent = view.calculateExtentInternal(mapSize);\n        var ovview = ovmap.getView();\n        // get how many times the current map overview could hold different\n        // box sizes using the min and max ratio, pick the step in the middle used\n        // to calculate the extent from the main map to set it to the overview map,\n        var steps = Math.log(MAX_RATIO / MIN_RATIO) / Math.LN2;\n        var ratio = 1 / (Math.pow(2, steps / 2) * MIN_RATIO);\n        scaleFromCenter(extent, ratio);\n        ovview.fitInternal(polygonFromExtent(extent));\n    };\n    /**\n     * Set the center of the overview map to the map center without changing its\n     * resolution.\n     * @private\n     */\n    OverviewMap.prototype.recenter_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        var view = map.getView();\n        var ovview = ovmap.getView();\n        ovview.setCenterInternal(view.getCenterInternal());\n    };\n    /**\n     * Update the box using the main map extent\n     * @private\n     */\n    OverviewMap.prototype.updateBox_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        if (!map.isRendered() || !ovmap.isRendered()) {\n            return;\n        }\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var ovview = ovmap.getView();\n        var rotation = this.rotateWithView_ ? 0 : -view.getRotation();\n        var overlay = this.boxOverlay_;\n        var box = this.boxOverlay_.getElement();\n        var center = view.getCenterInternal();\n        var resolution = view.getResolution();\n        var ovresolution = ovview.getResolution();\n        var width = (mapSize[0] * resolution) / ovresolution;\n        var height = (mapSize[1] * resolution) / ovresolution;\n        // set position using center coordinates\n        overlay.setPosition(center);\n        // set box size calculated from map extent size and overview map resolution\n        if (box) {\n            box.style.width = width + 'px';\n            box.style.height = height + 'px';\n            var transform = 'rotate(' + rotation + 'rad)';\n            box.style.transform = transform;\n        }\n    };\n    /**\n     * @private\n     */\n    OverviewMap.prototype.updateBoxAfterOvmapIsRendered_ = function () {\n        if (this.ovmapPostrenderKey_) {\n            return;\n        }\n        this.ovmapPostrenderKey_ = listenOnce(this.ovmap_, MapEventType.POSTRENDER, function (event) {\n            delete this.ovmapPostrenderKey_;\n            this.updateBox_();\n        }, this);\n    };\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    OverviewMap.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        this.handleToggle_();\n    };\n    /**\n     * @private\n     */\n    OverviewMap.prototype.handleToggle_ = function () {\n        this.element.classList.toggle(CLASS_COLLAPSED);\n        if (this.collapsed_) {\n            replaceNode(this.collapseLabel_, this.label_);\n        }\n        else {\n            replaceNode(this.label_, this.collapseLabel_);\n        }\n        this.collapsed_ = !this.collapsed_;\n        // manage overview map if it had not been rendered before and control\n        // is expanded\n        var ovmap = this.ovmap_;\n        if (!this.collapsed_) {\n            if (ovmap.isRendered()) {\n                this.viewExtent_ = undefined;\n                ovmap.render();\n                return;\n            }\n            ovmap.updateSize();\n            this.resetExtent_();\n            this.updateBoxAfterOvmapIsRendered_();\n        }\n    };\n    /**\n     * Return `true` if the overview map is collapsible, `false` otherwise.\n     * @return {boolean} True if the widget is collapsible.\n     * @api\n     */\n    OverviewMap.prototype.getCollapsible = function () {\n        return this.collapsible_;\n    };\n    /**\n     * Set whether the overview map should be collapsible.\n     * @param {boolean} collapsible True if the widget is collapsible.\n     * @api\n     */\n    OverviewMap.prototype.setCollapsible = function (collapsible) {\n        if (this.collapsible_ === collapsible) {\n            return;\n        }\n        this.collapsible_ = collapsible;\n        this.element.classList.toggle('ol-uncollapsible');\n        if (!collapsible && this.collapsed_) {\n            this.handleToggle_();\n        }\n    };\n    /**\n     * Collapse or expand the overview map according to the passed parameter. Will\n     * not do anything if the overview map isn't collapsible or if the current\n     * collapsed state is already the one requested.\n     * @param {boolean} collapsed True if the widget is collapsed.\n     * @api\n     */\n    OverviewMap.prototype.setCollapsed = function (collapsed) {\n        if (!this.collapsible_ || this.collapsed_ === collapsed) {\n            return;\n        }\n        this.handleToggle_();\n    };\n    /**\n     * Determine if the overview map is collapsed.\n     * @return {boolean} The overview map is collapsed.\n     * @api\n     */\n    OverviewMap.prototype.getCollapsed = function () {\n        return this.collapsed_;\n    };\n    /**\n     * Return `true` if the overview map view can rotate, `false` otherwise.\n     * @return {boolean} True if the control view can rotate.\n     * @api\n     */\n    OverviewMap.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Set whether the overview map view should rotate with the main map view.\n     * @param {boolean} rotateWithView True if the control view should rotate.\n     * @api\n     */\n    OverviewMap.prototype.setRotateWithView = function (rotateWithView) {\n        if (this.rotateWithView_ === rotateWithView) {\n            return;\n        }\n        this.rotateWithView_ = rotateWithView;\n        if (this.getMap().getView().getRotation() !== 0) {\n            if (this.rotateWithView_) {\n                this.handleRotationChanged_();\n            }\n            else {\n                this.ovmap_.getView().setRotation(0);\n            }\n            this.viewExtent_ = undefined;\n            this.validateExtent_();\n            this.updateBox_();\n        }\n    };\n    /**\n     * Return the overview map.\n     * @return {import(\"../PluggableMap.js\").default} Overview map.\n     * @api\n     */\n    OverviewMap.prototype.getOverviewMap = function () {\n        return this.ovmap_;\n    };\n    /**\n     * Update the overview map element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    OverviewMap.prototype.render = function (mapEvent) {\n        this.validateExtent_();\n        this.updateBox_();\n    };\n    return OverviewMap;\n}(Control));\nexport default OverviewMap;\n//# sourceMappingURL=OverviewMap.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n    if (Array.isArray(color)) {\n        return toString(color);\n    }\n    else {\n        return color;\n    }\n}\n//# sourceMappingURL=colorlike.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Point\n */\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { containsXY, createOrUpdateFromCoordinate } from '../extent.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function Point(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        _this.setCoordinates(coordinates, opt_layout);\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Point} Clone.\n     * @api\n     */\n    Point.prototype.clone = function () {\n        var point = new Point(this.flatCoordinates.slice(), this.layout);\n        point.applyProperties(this);\n        return point;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Point.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n        if (squaredDistance < minSquaredDistance) {\n            var stride = this.stride;\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * Return the coordinate of the point.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n     * @api\n     */\n    Point.prototype.getCoordinates = function () {\n        return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Point.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     * @api\n     */\n    Point.prototype.getType = function () {\n        return GeometryType.POINT;\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    Point.prototype.intersectsExtent = function (extent) {\n        return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n    };\n    /**\n     * @param {!Array<*>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    Point.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinate(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return Point;\n}(SimpleGeometry));\nexport default Point;\n//# sourceMappingURL=Point.js.map","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","/**\n * @module ol/geom/GeometryType\n */\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    LINEAR_RING: 'LinearRing',\n    POLYGON: 'Polygon',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon',\n    GEOMETRY_COLLECTION: 'GeometryCollection',\n    CIRCLE: 'Circle',\n};\n//# sourceMappingURL=GeometryType.js.map","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Layer\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport SourceState from '../source/State.js';\nimport { abstract } from '../util.js';\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nvar LayerRenderer = /** @class */ (function (_super) {\n    __extends(LayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function LayerRenderer(layer) {\n        var _this = _super.call(this) || this;\n        /** @private */\n        _this.boundHandleImageChange_ = _this.handleImageChange_.bind(_this);\n        /**\n         * @protected\n         * @type {LayerType}\n         */\n        _this.layer_ = layer;\n        /**\n         * @type {import(\"../render/canvas/ExecutorGroup\").default}\n         */\n        _this.declutterExecutorGroup = null;\n        return _this;\n    }\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    LayerRenderer.prototype.getFeatures = function (pixel) {\n        return abstract();\n    };\n    /**\n     * Determine whether render should be called.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    LayerRenderer.prototype.prepareFrame = function (frameState) {\n        return abstract();\n    };\n    /**\n     * Render the layer.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    LayerRenderer.prototype.renderFrame = function (frameState, target) {\n        return abstract();\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../Tile.js\").default} tile Tile.\n     * @return {boolean|void} If `false`, the tile will not be considered loaded.\n     */\n    LayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (!tiles[zoom]) {\n            tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n        return undefined;\n    };\n    /**\n     * Create a function that adds loaded tiles to the tile lookup.\n     * @param {import(\"../source/Tile.js\").default} source Tile source.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n     *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n     * @protected\n     */\n    LayerRenderer.prototype.createLoadedTileFinder = function (source, projection, tiles) {\n        return (\n        /**\n         * @param {number} zoom Zoom level.\n         * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n         * @return {boolean} The tile range is fully loaded.\n         * @this {LayerRenderer}\n         */\n        function (zoom, tileRange) {\n            var callback = this.loadedTileCallback.bind(this, tiles, zoom);\n            return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n        }.bind(this));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"./Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    LayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        return undefined;\n    };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    LayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        return null;\n    };\n    /**\n     * @return {LayerType} Layer.\n     */\n    LayerRenderer.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     * @abstract\n     */\n    LayerRenderer.prototype.handleFontsChanged = function () { };\n    /**\n     * Handle changes in image state.\n     * @param {import(\"../events/Event.js\").default} event Image change event.\n     * @private\n     */\n    LayerRenderer.prototype.handleImageChange_ = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        if (image.getState() === ImageState.LOADED) {\n            this.renderIfReadyAndVisible();\n        }\n    };\n    /**\n     * Load the image if not already loaded, and register the image change\n     * listener if needed.\n     * @param {import(\"../ImageBase.js\").default} image Image.\n     * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n     * @protected\n     */\n    LayerRenderer.prototype.loadImage = function (image) {\n        var imageState = image.getState();\n        if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n            image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n        }\n        if (imageState == ImageState.IDLE) {\n            image.load();\n            imageState = image.getState();\n        }\n        return imageState == ImageState.LOADED;\n    };\n    /**\n     * @protected\n     */\n    LayerRenderer.prototype.renderIfReadyAndVisible = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n            layer.changed();\n        }\n    };\n    return LayerRenderer;\n}(Observable));\nexport default LayerRenderer;\n//# sourceMappingURL=Layer.js.map","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"map\",style:({'width':_vm.width,'height':_vm.height}),attrs:{\"id\":\"map\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","/**\n * @module ol/webgl\n */\nimport { assign } from './obj.js';\n/**\n * Constants taken from goog.webgl\n */\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STREAM_DRAW = 0x88e0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STATIC_DRAW = 0x88e4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var DYNAMIC_DRAW = 0x88e8;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n/**\n * @const\n * @type {Array<string>}\n */\nvar CONTEXT_IDS = ['experimental-webgl', 'webgl', 'webkit-3d', 'moz-webgl'];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object} [opt_attributes] Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n    var attributes = assign({ preserveDrawingBuffer: true }, opt_attributes);\n    var ii = CONTEXT_IDS.length;\n    for (var i = 0; i < ii; ++i) {\n        try {\n            var context = canvas.getContext(CONTEXT_IDS[i], attributes);\n            if (context) {\n                return /** @type {!WebGLRenderingContext} */ (context);\n            }\n        }\n        catch (e) {\n            // pass\n        }\n    }\n    return null;\n}\n/**\n * @type {Array<string>}\n */\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\nexport function getSupportedExtensions() {\n    if (!supportedExtensions) {\n        var canvas = document.createElement('canvas');\n        var gl = getContext(canvas);\n        if (gl) {\n            supportedExtensions = gl.getSupportedExtensions();\n        }\n    }\n    return supportedExtensions;\n}\n//# sourceMappingURL=webgl.js.map","/**\n * @module ol/webgl/Buffer\n */\nimport { ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER } from '../webgl.js';\nimport { DYNAMIC_DRAW, STATIC_DRAW, STREAM_DRAW } from '../webgl.js';\nimport { assert } from '../asserts.js';\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\nexport var BufferUsage = {\n    STATIC_DRAW: STATIC_DRAW,\n    STREAM_DRAW: STREAM_DRAW,\n    DYNAMIC_DRAW: DYNAMIC_DRAW,\n};\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\nvar WebGLArrayBuffer = /** @class */ (function () {\n    /**\n     * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n     * @param {number} [opt_usage] Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n     * Default is `DYNAMIC_DRAW`.\n     */\n    function WebGLArrayBuffer(type, opt_usage) {\n        /**\n         * @private\n         * @type {Float32Array|Uint32Array}\n         */\n        this.array = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.type = type;\n        assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n    }\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {number} size Array size\n     */\n    WebGLArrayBuffer.prototype.ofSize = function (size) {\n        this.array = new (getArrayClassForType(this.type))(size);\n    };\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {Array<number>} array Numerical array\n     */\n    WebGLArrayBuffer.prototype.fromArray = function (array) {\n        var arrayClass = getArrayClassForType(this.type);\n        this.array = arrayClass.from\n            ? arrayClass.from(array)\n            : new arrayClass(array);\n    };\n    /**\n     * Populates the buffer with a raw binary array buffer.\n     * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n     * initialized for the same typed array class.\n     */\n    WebGLArrayBuffer.prototype.fromArrayBuffer = function (buffer) {\n        this.array = new (getArrayClassForType(this.type))(buffer);\n    };\n    /**\n     * @return {number} Buffer type.\n     */\n    WebGLArrayBuffer.prototype.getType = function () {\n        return this.type;\n    };\n    /**\n     * Will return null if the buffer was not initialized\n     * @return {Float32Array|Uint32Array} Array.\n     */\n    WebGLArrayBuffer.prototype.getArray = function () {\n        return this.array;\n    };\n    /**\n     * @return {number} Usage.\n     */\n    WebGLArrayBuffer.prototype.getUsage = function () {\n        return this.usage;\n    };\n    /**\n     * Will return 0 if the buffer is not initialized\n     * @return {number} Array size\n     */\n    WebGLArrayBuffer.prototype.getSize = function () {\n        return this.array ? this.array.length : 0;\n    };\n    return WebGLArrayBuffer;\n}());\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @return {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\nexport function getArrayClassForType(type) {\n    switch (type) {\n        case ARRAY_BUFFER:\n            return Float32Array;\n        case ELEMENT_ARRAY_BUFFER:\n            return Uint32Array;\n        default:\n            return Float32Array;\n    }\n}\nexport default WebGLArrayBuffer;\n//# sourceMappingURL=Buffer.js.map","/**\n * @module ol/webgl/ContextEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    LOST: 'webglcontextlost',\n    RESTORED: 'webglcontextrestored',\n};\n//# sourceMappingURL=ContextEventType.js.map","/**\n * @module ol/webgl/PostProcessingPass\n */\nimport { getUid } from '../util.js';\nvar DEFAULT_VERTEX_SHADER = \"\\n  precision mediump float;\\n  \\n  attribute vec2 a_position;\\n  varying vec2 v_texCoord;\\n  varying vec2 v_screenCoord;\\n  \\n  uniform vec2 u_screenSize;\\n   \\n  void main() {\\n    v_texCoord = a_position * 0.5 + 0.5;\\n    v_screenCoord = v_texCoord * u_screenSize;\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n  }\\n\";\nvar DEFAULT_FRAGMENT_SHADER = \"\\n  precision mediump float;\\n   \\n  uniform sampler2D u_image;\\n  uniform float u_opacity;\\n   \\n  varying vec2 v_texCoord;\\n   \\n  void main() {\\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n  }\\n\";\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *   uniform float u_opacity;\n *\n *   varying vec2 v_texCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n *   }\n *   ```\n *\n * @api\n */\nvar WebGLPostProcessingPass = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function WebGLPostProcessingPass(options) {\n        this.gl_ = options.webGlContext;\n        var gl = this.gl_;\n        this.scaleRatio_ = options.scaleRatio || 1;\n        this.renderTargetTexture_ = gl.createTexture();\n        this.renderTargetTextureSize_ = null;\n        this.frameBuffer_ = gl.createFramebuffer();\n        // compile the program for the frame buffer\n        // TODO: make compilation errors show up\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n        gl.compileShader(vertexShader);\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n        gl.compileShader(fragmentShader);\n        this.renderTargetProgram_ = gl.createProgram();\n        gl.attachShader(this.renderTargetProgram_, vertexShader);\n        gl.attachShader(this.renderTargetProgram_, fragmentShader);\n        gl.linkProgram(this.renderTargetProgram_);\n        // bind the vertices buffer for the frame buffer\n        this.renderTargetVerticesBuffer_ = gl.createBuffer();\n        var verticesArray = [-1, -1, 1, -1, -1, 1, 1, -1, 1, 1, -1, 1];\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n        this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n        this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n        this.renderTargetOpacityLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_opacity');\n        this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n        /**\n         * Holds info about custom uniforms used in the post processing pass\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        this.uniforms_ = [];\n        options.uniforms &&\n            Object.keys(options.uniforms).forEach(function (name) {\n                this.uniforms_.push({\n                    value: options.uniforms[name],\n                    location: gl.getUniformLocation(this.renderTargetProgram_, name),\n                });\n            }.bind(this));\n    }\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Initialize the render target texture of the post process, make sure it is at the\n     * right size and bind it as a render target for the next draw calls.\n     * The last step to be initialized will be the one where the primitives are rendered.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.init = function (frameState) {\n        var gl = this.getGL();\n        var textureSize = [\n            gl.drawingBufferWidth * this.scaleRatio_,\n            gl.drawingBufferHeight * this.scaleRatio_,\n        ];\n        // rendering goes to my buffer\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n        gl.viewport(0, 0, textureSize[0], textureSize[1]);\n        // if size has changed: adjust canvas & render target texture\n        if (!this.renderTargetTextureSize_ ||\n            this.renderTargetTextureSize_[0] !== textureSize[0] ||\n            this.renderTargetTextureSize_[1] !== textureSize[1]) {\n            this.renderTargetTextureSize_ = textureSize;\n            // create a new texture\n            var level = 0;\n            var internalFormat = gl.RGBA;\n            var border = 0;\n            var format = gl.RGBA;\n            var type = gl.UNSIGNED_BYTE;\n            var data = null;\n            gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, textureSize[0], textureSize[1], border, format, type, data);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            // bind the texture to the framebuffer\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n        }\n    };\n    /**\n     * Render to the next postprocessing pass (or to the canvas if final pass).\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n     * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n     * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.apply = function (frameState, nextPass, preCompose, postCompose) {\n        var gl = this.getGL();\n        var size = frameState.size;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n        if (!nextPass) {\n            // clear the canvas if we are the first to render to it\n            // and preserveDrawingBuffer is true\n            var canvasId = getUid(gl.canvas);\n            if (!frameState.renderTargets[canvasId]) {\n                var attributes = gl.getContextAttributes();\n                if (attributes && attributes.preserveDrawingBuffer) {\n                    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n                    gl.clear(gl.COLOR_BUFFER_BIT);\n                }\n                frameState.renderTargets[canvasId] = true;\n            }\n        }\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.useProgram(this.renderTargetProgram_);\n        gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n        gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n        gl.uniform2f(this.renderTargetUniformLocation_, size[0], size[1]);\n        gl.uniform1i(this.renderTargetTextureLocation_, 0);\n        var opacity = frameState.layerStatesArray[frameState.layerIndex].opacity;\n        gl.uniform1f(this.renderTargetOpacityLocation_, opacity);\n        this.applyUniforms(frameState);\n        if (preCompose) {\n            preCompose(gl, frameState);\n        }\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n        if (postCompose) {\n            postCompose(gl, frameState);\n        }\n    };\n    /**\n     * @return {WebGLFramebuffer} Frame buffer\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getFrameBuffer = function () {\n        return this.frameBuffer_;\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPostProcessingPass.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 1;\n        this.uniforms_.forEach(function (uniform) {\n            value =\n                typeof uniform.value === 'function'\n                    ? uniform.value(frameState)\n                    : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                if (value instanceof ImageData) {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0, gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n                }\n                else {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots\n                gl.uniform1i(uniform.location, textureSlot++);\n            }\n            else if (Array.isArray(value)) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(uniform.location, value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n                        return;\n                    default:\n                        return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(uniform.location, value);\n            }\n        });\n    };\n    return WebGLPostProcessingPass;\n}());\nexport default WebGLPostProcessingPass;\n//# sourceMappingURL=PostProcessingPass.js.map","/**\n * @module ol/vec/mat4\n */\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\nexport function fromTransform(mat4, transform) {\n    mat4[0] = transform[0];\n    mat4[1] = transform[1];\n    mat4[4] = transform[2];\n    mat4[5] = transform[3];\n    mat4[12] = transform[4];\n    mat4[13] = transform[5];\n    return mat4;\n}\n//# sourceMappingURL=mat4.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/webgl/Helper\n */\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport Disposable from '../Disposable.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport { FLOAT, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT, getContext, } from '../webgl.js';\nimport { clear } from '../obj.js';\nimport { compose as composeTransform, create as createTransform, reset as resetTransform, rotate as rotateTransform, scale as scaleTransform, } from '../transform.js';\nimport { create, fromTransform } from '../vec/mat4.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer Buffer.\n * @property {WebGLBuffer} webGlBuffer WebGlBuffer.\n */\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\nexport var ShaderType = {\n    FRAGMENT_SHADER: 0x8b30,\n    VERTEX_SHADER: 0x8b31,\n};\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\nexport var DefaultUniform = {\n    PROJECTION_MATRIX: 'u_projectionMatrix',\n    OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n    OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix',\n    TIME: 'u_time',\n    ZOOM: 'u_zoom',\n    RESOLUTION: 'u_resolution',\n};\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\nexport var AttributeType = {\n    UNSIGNED_BYTE: UNSIGNED_BYTE,\n    UNSIGNED_SHORT: UNSIGNED_SHORT,\n    UNSIGNED_INT: UNSIGNED_INT,\n    FLOAT: FLOAT,\n};\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n * @property {string} [canvasCacheKey] The cache key for the canvas.\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue} [value] Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @typedef {Object} CanvasCacheItem\n * @property {HTMLCanvasElement} canvas Canvas element.\n * @property {number} users The count of users of this canvas.\n */\n/**\n * @type {Object<string,CanvasCacheItem>}\n */\nvar canvasCache = {};\n/**\n * @param {string} key The cache key for the canvas.\n * @return {string} The shared cache key.\n */\nfunction getSharedCanvasCacheKey(key) {\n    return 'shared/' + key;\n}\nvar uniqueCanvasCacheKeyCount = 0;\n/**\n * @return {string} The unique cache key.\n */\nfunction getUniqueCanvasCacheKey() {\n    var key = 'unique/' + uniqueCanvasCacheKeyCount;\n    uniqueCanvasCacheKeyCount += 1;\n    return key;\n}\n/**\n * @param {string} key The cache key for the canvas.\n * @return {HTMLCanvasElement} The canvas.\n */\nfunction getCanvas(key) {\n    var cacheItem = canvasCache[key];\n    if (!cacheItem) {\n        var canvas = document.createElement('canvas');\n        canvas.style.position = 'absolute';\n        canvas.style.left = '0';\n        cacheItem = { users: 0, canvas: canvas };\n        canvasCache[key] = cacheItem;\n    }\n    cacheItem.users += 1;\n    return cacheItem.canvas;\n}\n/**\n * @param {string} key The cache key for the canvas.\n */\nfunction releaseCanvas(key) {\n    var cacheItem = canvasCache[key];\n    if (!cacheItem) {\n        return;\n    }\n    cacheItem.users -= 1;\n    if (cacheItem.users > 0) {\n        return;\n    }\n    var canvas = cacheItem.canvas;\n    var gl = getContext(canvas);\n    var extension = gl.getExtension('WEBGL_lose_context');\n    if (extension) {\n        extension.loseContext();\n    }\n    delete canvasCache[key];\n}\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\nvar WebGLHelper = /** @class */ (function (_super) {\n    __extends(WebGLHelper, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function WebGLHelper(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /** @private */\n        _this.boundHandleWebGLContextLost_ = _this.handleWebGLContextLost.bind(_this);\n        /** @private */\n        _this.boundHandleWebGLContextRestored_ =\n            _this.handleWebGLContextRestored.bind(_this);\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.canvasCacheKey_ = options.canvasCacheKey\n            ? getSharedCanvasCacheKey(options.canvasCacheKey)\n            : getUniqueCanvasCacheKey();\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = getCanvas(_this.canvasCacheKey_);\n        /**\n         * @private\n         * @type {WebGLRenderingContext}\n         */\n        _this.gl_ = getContext(_this.canvas_);\n        /**\n         * @private\n         * @type {!Object<string, BufferCacheEntry>}\n         */\n        _this.bufferCache_ = {};\n        /**\n         * @private\n         * @type {Object<string, Object>}\n         */\n        _this.extensionCache_ = {};\n        /**\n         * @private\n         * @type {WebGLProgram}\n         */\n        _this.currentProgram_ = null;\n        _this.canvas_.addEventListener(ContextEventType.LOST, _this.boundHandleWebGLContextLost_);\n        _this.canvas_.addEventListener(ContextEventType.RESTORED, _this.boundHandleWebGLContextRestored_);\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetRotateMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetScaleMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.tmpMat4_ = create();\n        /**\n         * @private\n         * @type {Object<string, WebGLUniformLocation>}\n         */\n        _this.uniformLocations_ = {};\n        /**\n         * @private\n         * @type {Object<string, number>}\n         */\n        _this.attribLocations_ = {};\n        /**\n         * Holds info about custom uniforms used in the post processing pass.\n         * If the uniform is a texture, the WebGL Texture object will be stored here.\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        _this.uniforms_ = [];\n        if (options.uniforms) {\n            _this.setUniforms(options.uniforms);\n        }\n        var gl = _this.getGL();\n        /**\n         * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n         * options. If no post process was given, a default one is used (so as not to have to make an exception to\n         * the frame buffer logic).\n         * @type {Array<WebGLPostProcessingPass>}\n         * @private\n         */\n        _this.postProcessPasses_ = options.postProcesses\n            ? options.postProcesses.map(function (options) {\n                return new WebGLPostProcessingPass({\n                    webGlContext: gl,\n                    scaleRatio: options.scaleRatio,\n                    vertexShader: options.vertexShader,\n                    fragmentShader: options.fragmentShader,\n                    uniforms: options.uniforms,\n                });\n            })\n            : [new WebGLPostProcessingPass({ webGlContext: gl })];\n        /**\n         * @type {string|null}\n         * @private\n         */\n        _this.shaderCompileErrors_ = null;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.startTime_ = Date.now();\n        return _this;\n    }\n    /**\n     * @param {Object<string, UniformValue>} uniforms Uniform definitions.\n     */\n    WebGLHelper.prototype.setUniforms = function (uniforms) {\n        this.uniforms_ = [];\n        for (var name_1 in uniforms) {\n            this.uniforms_.push({\n                name: name_1,\n                value: uniforms[name_1],\n            });\n        }\n        this.uniformLocations_ = {};\n    };\n    /**\n     * @param {string} canvasCacheKey The canvas cache key.\n     * @return {boolean} The provided key matches the one this helper was constructed with.\n     */\n    WebGLHelper.prototype.canvasCacheKeyMatches = function (canvasCacheKey) {\n        return this.canvasCacheKey_ === getSharedCanvasCacheKey(canvasCacheKey);\n    };\n    /**\n     * Get a WebGL extension.  If the extension is not supported, null is returned.\n     * Extensions are cached after they are enabled for the first time.\n     * @param {string} name The extension name.\n     * @return {Object} The extension or null if not supported.\n     */\n    WebGLHelper.prototype.getExtension = function (name) {\n        if (name in this.extensionCache_) {\n            return this.extensionCache_[name];\n        }\n        var extension = this.gl_.getExtension(name);\n        this.extensionCache_[name] = extension;\n        return extension;\n    };\n    /**\n     * Just bind the buffer if it's in the cache. Otherwise create\n     * the WebGL buffer, bind it, populate it, and add an entry to\n     * the cache.\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.bindBuffer = function (buffer) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buffer);\n        var bufferCache = this.bufferCache_[bufferKey];\n        if (!bufferCache) {\n            var webGlBuffer = gl.createBuffer();\n            bufferCache = {\n                buffer: buffer,\n                webGlBuffer: webGlBuffer,\n            };\n            this.bufferCache_[bufferKey] = bufferCache;\n        }\n        gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n    };\n    /**\n     * Update the data contained in the buffer array; this is required for the\n     * new data to be rendered\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.flushBufferData = function (buffer) {\n        var gl = this.getGL();\n        this.bindBuffer(buffer);\n        gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n    };\n    /**\n     * @param {import(\"./Buffer.js\").default} buf Buffer.\n     */\n    WebGLHelper.prototype.deleteBuffer = function (buf) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buf);\n        var bufferCacheEntry = this.bufferCache_[bufferKey];\n        if (bufferCacheEntry && !gl.isContextLost()) {\n            gl.deleteBuffer(bufferCacheEntry.webGlBuffer);\n        }\n        delete this.bufferCache_[bufferKey];\n    };\n    /**\n     * Clean up.\n     */\n    WebGLHelper.prototype.disposeInternal = function () {\n        this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n        this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n        releaseCanvas(this.canvasCacheKey_);\n        delete this.gl_;\n        delete this.canvas_;\n    };\n    /**\n     * Clear the buffer & set the viewport to draw.\n     * Post process passes will be initialized here, the first one being bound as a render target for\n     * subsequent draw calls.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n     * @api\n     */\n    WebGLHelper.prototype.prepareDraw = function (frameState, opt_disableAlphaBlend) {\n        var gl = this.getGL();\n        var canvas = this.getCanvas();\n        var size = frameState.size;\n        var pixelRatio = frameState.pixelRatio;\n        canvas.width = size[0] * pixelRatio;\n        canvas.height = size[1] * pixelRatio;\n        canvas.style.width = size[0] + 'px';\n        canvas.style.height = size[1] + 'px';\n        gl.useProgram(this.currentProgram_);\n        // loop backwards in post processes list\n        for (var i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n            this.postProcessPasses_[i].init(frameState);\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Clear the render target & bind it for future draw operations.\n     * This is similar to `prepareDraw`, only post processes will not be applied.\n     * Note: the whole viewport will be drawn to the render target, regardless of its size.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n     * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n     */\n    WebGLHelper.prototype.prepareDrawToRenderTarget = function (frameState, renderTarget, opt_disableAlphaBlend) {\n        var gl = this.getGL();\n        var size = renderTarget.getSize();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n     * @param {number} start Start index.\n     * @param {number} end End index.\n     * @api\n     */\n    WebGLHelper.prototype.drawElements = function (start, end) {\n        var gl = this.getGL();\n        this.getExtension('OES_element_index_uint');\n        var elementType = gl.UNSIGNED_INT;\n        var elementSize = 4;\n        var numItems = end - start;\n        var offsetInBytes = start * elementSize;\n        gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n    };\n    /**\n     * Apply the successive post process passes which will eventually render to the actual canvas.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n     * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n     */\n    WebGLHelper.prototype.finalizeDraw = function (frameState, preCompose, postCompose) {\n        // apply post processes using the next one as target\n        for (var i = 0, ii = this.postProcessPasses_.length; i < ii; i++) {\n            if (i === ii - 1) {\n                this.postProcessPasses_[i].apply(frameState, null, preCompose, postCompose);\n            }\n            else {\n                this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1]);\n            }\n        }\n    };\n    /**\n     * @return {HTMLCanvasElement} Canvas.\n     * @api\n     */\n    WebGLHelper.prototype.getCanvas = function () {\n        return this.canvas_;\n    };\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLHelper.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyFrameState = function (frameState) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n        scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n        var offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n        if (rotation !== 0) {\n            rotateTransform(offsetRotateMatrix, -rotation);\n        }\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n        this.setUniformFloatValue(DefaultUniform.TIME, (Date.now() - this.startTime_) * 0.001);\n        this.setUniformFloatValue(DefaultUniform.ZOOM, frameState.viewState.zoom);\n        this.setUniformFloatValue(DefaultUniform.RESOLUTION, frameState.viewState.resolution);\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 0;\n        this.uniforms_.forEach(function (uniform) {\n            value =\n                typeof uniform.value === 'function'\n                    ? uniform.value(frameState)\n                    : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement ||\n                value instanceof HTMLImageElement ||\n                value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.prevValue = undefined;\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                var imageReady = !(value instanceof HTMLImageElement) ||\n                    /** @type {HTMLImageElement} */ (value).complete;\n                if (imageReady && uniform.prevValue !== value) {\n                    uniform.prevValue = value;\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots by increasing index\n                gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n            }\n            else if (Array.isArray(value) && value.length === 6) {\n                this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n            }\n            else if (Array.isArray(value) && value.length <= 4) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n                        return;\n                    default:\n                        return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(this.getUniformLocation(uniform.name), value);\n            }\n        }.bind(this));\n    };\n    /**\n     * Use a program.  If the program is already in use, this will return `false`.\n     * @param {WebGLProgram} program Program.\n     * @return {boolean} Changed.\n     * @api\n     */\n    WebGLHelper.prototype.useProgram = function (program) {\n        if (program == this.currentProgram_) {\n            return false;\n        }\n        else {\n            var gl = this.getGL();\n            gl.useProgram(program);\n            this.currentProgram_ = program;\n            this.uniformLocations_ = {};\n            this.attribLocations_ = {};\n            return true;\n        }\n    };\n    /**\n     * Will attempt to compile a vertex or fragment shader based on source\n     * On error, the shader will be returned but\n     * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n     * Use `gl.getShaderInfoLog(shader)` to have details\n     * @param {string} source Shader source\n     * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n     * @return {WebGLShader} Shader object\n     */\n    WebGLHelper.prototype.compileShader = function (source, type) {\n        var gl = this.getGL();\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        return shader;\n    };\n    /**\n     * Create a program for a vertex and fragment shader.  Throws if shader compilation fails.\n     * @param {string} fragmentShaderSource Fragment shader source.\n     * @param {string} vertexShaderSource Vertex shader source.\n     * @return {WebGLProgram} Program\n     * @api\n     */\n    WebGLHelper.prototype.getProgram = function (fragmentShaderSource, vertexShaderSource) {\n        var gl = this.getGL();\n        var fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n        var vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n        var program = gl.createProgram();\n        gl.attachShader(program, fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.linkProgram(program);\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n            var message = \"Fragment shader compliation failed: \" + gl.getShaderInfoLog(fragmentShader);\n            throw new Error(message);\n        }\n        gl.deleteShader(fragmentShader);\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n            var message = \"Vertex shader compilation failed: \" + gl.getShaderInfoLog(vertexShader);\n            throw new Error(message);\n        }\n        gl.deleteShader(vertexShader);\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n            var message = \"GL program linking failed: \" + gl.getShaderInfoLog(vertexShader);\n            throw new Error(message);\n        }\n        return program;\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Uniform name\n     * @return {WebGLUniformLocation} uniformLocation\n     * @api\n     */\n    WebGLHelper.prototype.getUniformLocation = function (name) {\n        if (this.uniformLocations_[name] === undefined) {\n            this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n        }\n        return this.uniformLocations_[name];\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Attribute name\n     * @return {number} attribLocation\n     * @api\n     */\n    WebGLHelper.prototype.getAttributeLocation = function (name) {\n        if (this.attribLocations_[name] === undefined) {\n            this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n        }\n        return this.attribLocations_[name];\n    };\n    /**\n     * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n     * The resulting transform can be used to convert world space coordinates to view coordinates.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../transform\").Transform} transform Transform to update.\n     * @return {import(\"../transform\").Transform} The updated transform object.\n     * @api\n     */\n    WebGLHelper.prototype.makeProjectionTransform = function (frameState, transform) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var resolution = frameState.viewState.resolution;\n        var center = frameState.viewState.center;\n        resetTransform(transform);\n        composeTransform(transform, 0, 0, 2 / (resolution * size[0]), 2 / (resolution * size[1]), -rotation, -center[0], -center[1]);\n        return transform;\n    };\n    /**\n     * Give a value for a standard float uniform\n     * @param {string} uniform Uniform name\n     * @param {number} value Value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformFloatValue = function (uniform, value) {\n        this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n    };\n    /**\n     * Give a value for a standard matrix4 uniform\n     * @param {string} uniform Uniform name\n     * @param {Array<number>} value Matrix value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformMatrixValue = function (uniform, value) {\n        this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n    };\n    /**\n     * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n     * internally.\n     * @param {string} attribName Attribute name\n     * @param {number} size Number of components per attributes\n     * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n     * @param {number} stride Stride in bytes (0 means attribs are packed)\n     * @param {number} offset Offset in bytes\n     * @private\n     */\n    WebGLHelper.prototype.enableAttributeArray_ = function (attribName, size, type, stride, offset) {\n        var location = this.getAttributeLocation(attribName);\n        // the attribute has not been found in the shaders; do not enable it\n        if (location < 0) {\n            return;\n        }\n        this.getGL().enableVertexAttribArray(location);\n        this.getGL().vertexAttribPointer(location, size, type, false, stride, offset);\n    };\n    /**\n     * Will enable the following attributes to be read from the currently bound buffer,\n     * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n     * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n     * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n     * @api\n     */\n    WebGLHelper.prototype.enableAttributes = function (attributes) {\n        var stride = computeAttributesStride(attributes);\n        var offset = 0;\n        for (var i = 0; i < attributes.length; i++) {\n            var attr = attributes[i];\n            this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n            offset += attr.size * getByteSizeFromType(attr.type);\n        }\n    };\n    /**\n     * WebGL context was lost\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextLost = function () {\n        clear(this.bufferCache_);\n        this.currentProgram_ = null;\n    };\n    /**\n     * WebGL context was restored\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextRestored = function () { };\n    /**\n     * Will create or reuse a given webgl texture and apply the given size. If no image data\n     * specified, the texture will be empty, otherwise image data will be used and the `size`\n     * parameter will be ignored.\n     * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n     * @param {Array<number>} size Expected size of the texture\n     * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n     * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n     * @return {WebGLTexture} The generated texture\n     * @api\n     */\n    WebGLHelper.prototype.createTexture = function (size, opt_data, opt_texture) {\n        var gl = this.getGL();\n        var texture = opt_texture || gl.createTexture();\n        // set params & size\n        var level = 0;\n        var internalFormat = gl.RGBA;\n        var border = 0;\n        var format = gl.RGBA;\n        var type = gl.UNSIGNED_BYTE;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        if (opt_data) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n        }\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        return texture;\n    };\n    return WebGLHelper;\n}(Disposable));\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @return {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\nexport function computeAttributesStride(attributes) {\n    var stride = 0;\n    for (var i = 0; i < attributes.length; i++) {\n        var attr = attributes[i];\n        stride += attr.size * getByteSizeFromType(attr.type);\n    }\n    return stride;\n}\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @return {number} The size in bytes\n */\nfunction getByteSizeFromType(type) {\n    switch (type) {\n        case AttributeType.UNSIGNED_BYTE:\n            return Uint8Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_SHORT:\n            return Uint16Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_INT:\n            return Uint32Array.BYTES_PER_ELEMENT;\n        case AttributeType.FLOAT:\n        default:\n            return Float32Array.BYTES_PER_ELEMENT;\n    }\n}\nexport default WebGLHelper;\n//# sourceMappingURL=Helper.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/Layer\n */\nimport LayerProperty from '../../layer/Property.js';\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLHelper from '../../webgl/Helper.js';\nimport { compose as composeTransform, create as createTransform, } from '../../transform.js';\n/**\n * @enum {string}\n */\nexport var WebGLWorkerMessageType = {\n    GENERATE_BUFFERS: 'GENERATE_BUFFERS',\n};\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\nvar WebGLLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     * @param {Options} [opt_options] Options.\n     */\n    function WebGLLayerRenderer(layer, opt_options) {\n        var _this = _super.call(this, layer) || this;\n        var options = opt_options || {};\n        /**\n         * The transform for viewport CSS pixels to rendered pixels.  This transform is only\n         * set before dispatching rendering events.\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.inversePixelTransform_ = createTransform();\n        /**\n         * @private\n         */\n        _this.postProcesses_ = options.postProcesses;\n        /**\n         * @private\n         */\n        _this.uniforms_ = options.uniforms;\n        /**\n         * @type {WebGLHelper}\n         * @protected\n         */\n        _this.helper;\n        layer.addChangeListener(LayerProperty.MAP, _this.removeHelper_.bind(_this));\n        _this.dispatchPreComposeEvent = _this.dispatchPreComposeEvent.bind(_this);\n        _this.dispatchPostComposeEvent = _this.dispatchPostComposeEvent.bind(_this);\n        return _this;\n    }\n    /**\n     * @param {WebGLRenderingContext} context The WebGL rendering context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.dispatchPreComposeEvent = function (context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(RenderEventType.PRECOMPOSE)) {\n            var event_1 = new RenderEvent(RenderEventType.PRECOMPOSE, undefined, frameState, context);\n            layer.dispatchEvent(event_1);\n        }\n    };\n    /**\n     * @param {WebGLRenderingContext} context The WebGL rendering context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.dispatchPostComposeEvent = function (context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(RenderEventType.POSTCOMPOSE)) {\n            var event_2 = new RenderEvent(RenderEventType.POSTCOMPOSE, undefined, frameState, context);\n            layer.dispatchEvent(event_2);\n        }\n    };\n    /**\n     * Reset options (only handles uniforms).\n     * @param {Options} options Options.\n     */\n    WebGLLayerRenderer.prototype.reset = function (options) {\n        this.uniforms_ = options.uniforms;\n        if (this.helper) {\n            this.helper.setUniforms(this.uniforms_);\n        }\n    };\n    WebGLLayerRenderer.prototype.removeHelper_ = function () {\n        if (this.helper) {\n            this.helper.dispose();\n            delete this.helper;\n        }\n    };\n    /**\n     * Determine whether renderFrame should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    WebGLLayerRenderer.prototype.prepareFrame = function (frameState) {\n        if (this.getLayer().getSource()) {\n            var incrementGroup = true;\n            var groupNumber = -1;\n            var className = void 0;\n            for (var i = 0, ii = frameState.layerStatesArray.length; i < ii; i++) {\n                var layer = frameState.layerStatesArray[i].layer;\n                var renderer = layer.getRenderer();\n                if (!(renderer instanceof WebGLLayerRenderer)) {\n                    incrementGroup = true;\n                    continue;\n                }\n                var layerClassName = layer.getClassName();\n                if (incrementGroup || layerClassName !== className) {\n                    groupNumber += 1;\n                    incrementGroup = false;\n                }\n                className = layerClassName;\n                if (renderer === this) {\n                    break;\n                }\n            }\n            var canvasCacheKey = 'map/' + frameState.mapId + '/group/' + groupNumber;\n            if (!this.helper || !this.helper.canvasCacheKeyMatches(canvasCacheKey)) {\n                if (this.helper) {\n                    this.helper.dispose();\n                }\n                this.helper = new WebGLHelper({\n                    postProcesses: this.postProcesses_,\n                    uniforms: this.uniforms_,\n                    canvasCacheKey: canvasCacheKey,\n                });\n                if (className) {\n                    this.helper.getCanvas().className = className;\n                }\n                this.afterHelperCreated();\n            }\n        }\n        return this.prepareFrameInternal(frameState);\n    };\n    /**\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.afterHelperCreated = function () { };\n    /**\n     * Determine whether renderFrame should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n        return true;\n    };\n    /**\n     * Clean up.\n     */\n    WebGLLayerRenderer.prototype.disposeInternal = function () {\n        this.removeHelper_();\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * @param {import(\"../../render/EventType.js\").default} type Event type.\n     * @param {WebGLRenderingContext} context The rendering context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(type)) {\n            composeTransform(this.inversePixelTransform_, 0, 0, frameState.pixelRatio, -frameState.pixelRatio, 0, 0, -frameState.size[1]);\n            var event_3 = new RenderEvent(type, this.inversePixelTransform_, frameState, context);\n            layer.dispatchEvent(event_3);\n        }\n    };\n    /**\n     * @param {WebGLRenderingContext} context The rendering context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.preRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n    };\n    /**\n     * @param {WebGLRenderingContext} context The rendering context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    WebGLLayerRenderer.prototype.postRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n    };\n    return WebGLLayerRenderer;\n}(LayerRenderer));\nvar tmpArray_ = [];\nvar bufferPositions_ = { vertexPosition: 0, indexPosition: 0 };\nfunction writePointVertex(buffer, pos, x, y, index) {\n    buffer[pos + 0] = x;\n    buffer[pos + 1] = y;\n    buffer[pos + 2] = index;\n}\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n    // This is for x, y and index\n    var baseVertexAttrsCount = 3;\n    var baseInstructionsCount = 2;\n    var stride = baseVertexAttrsCount + customAttributesCount;\n    var x = instructions[elementIndex + 0];\n    var y = instructions[elementIndex + 1];\n    // read custom numerical attributes on the feature\n    var customAttrs = tmpArray_;\n    customAttrs.length = customAttributesCount;\n    for (var i = 0; i < customAttrs.length; i++) {\n        customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n    }\n    var vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n    var iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n    var baseIndex = vPos / stride;\n    // push vertices for each of the four quad corners (first standard then custom attributes)\n    writePointVertex(vertexBuffer, vPos, x, y, 0);\n    customAttrs.length &&\n        vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 1);\n    customAttrs.length &&\n        vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 2);\n    customAttrs.length &&\n        vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 3);\n    customAttrs.length &&\n        vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    indexBuffer[iPos++] = baseIndex;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 3;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 2;\n    indexBuffer[iPos++] = baseIndex + 3;\n    bufferPositions_.vertexPosition = vPos;\n    bufferPositions_.indexPosition = iPos;\n    return bufferPositions_;\n}\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\nexport function getBlankImageData() {\n    var canvas = document.createElement('canvas');\n    var image = canvas.getContext('2d').createImageData(1, 1);\n    image.data[0] = 255;\n    image.data[1] = 255;\n    image.data[2] = 255;\n    image.data[3] = 255;\n    return image;\n}\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\nexport function colorEncodeId(id, opt_array) {\n    var array = opt_array || [];\n    var radix = 256;\n    var divide = radix - 1;\n    array[0] = Math.floor(id / radix / radix / radix) / divide;\n    array[1] = (Math.floor(id / radix / radix) % radix) / divide;\n    array[2] = (Math.floor(id / radix) % radix) / divide;\n    array[3] = (id % radix) / divide;\n    return array;\n}\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\nexport function colorDecodeId(color) {\n    var id = 0;\n    var radix = 256;\n    var mult = radix - 1;\n    id += Math.round(color[0] * radix * radix * radix * mult);\n    id += Math.round(color[1] * radix * radix * mult);\n    id += Math.round(color[2] * radix * mult);\n    id += Math.round(color[3] * mult);\n    return id;\n}\nexport default WebGLLayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * A wrapper class to simplify rendering to a texture instead of the final canvas\n * @module ol/webgl/RenderTarget\n */\nimport { equals } from '../array.js';\n// for pixel color reading\nvar tmpArray4 = new Uint8Array(4);\n/**\n * @classdesc\n * This class is a wrapper around the association of both a `WebGLTexture` and a `WebGLFramebuffer` instances,\n * simplifying initialization and binding for rendering.\n * @api\n */\nvar WebGLRenderTarget = /** @class */ (function () {\n    /**\n     * @param {import(\"./Helper.js\").default} helper WebGL helper; mandatory.\n     * @param {Array<number>} [opt_size] Expected size of the render target texture; note: this can be changed later on.\n     */\n    function WebGLRenderTarget(helper, opt_size) {\n        /**\n         * @private\n         * @type {import(\"./Helper.js\").default}\n         */\n        this.helper_ = helper;\n        var gl = helper.getGL();\n        /**\n         * @private\n         * @type {WebGLTexture}\n         */\n        this.texture_ = gl.createTexture();\n        /**\n         * @private\n         * @type {WebGLFramebuffer}\n         */\n        this.framebuffer_ = gl.createFramebuffer();\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.size_ = opt_size || [1, 1];\n        /**\n         * @type {Uint8Array}\n         * @private\n         */\n        this.data_ = new Uint8Array(0);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.dataCacheDirty_ = true;\n        this.updateSize_();\n    }\n    /**\n     * Changes the size of the render target texture. Note: will do nothing if the size\n     * is already the same.\n     * @param {Array<number>} size Expected size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.setSize = function (size) {\n        if (equals(size, this.size_)) {\n            return;\n        }\n        this.size_[0] = size[0];\n        this.size_[1] = size[1];\n        this.updateSize_();\n    };\n    /**\n     * Returns the size of the render target texture\n     * @return {Array<number>} Size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * This will cause following calls to `#readAll` or `#readPixel` to download the content of the\n     * render target into memory, which is an expensive operation.\n     * This content will be kept in cache but should be cleared after each new render.\n     * @api\n     */\n    WebGLRenderTarget.prototype.clearCachedData = function () {\n        this.dataCacheDirty_ = true;\n    };\n    /**\n     * Returns the full content of the frame buffer as a series of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * @return {Uint8Array} Integer array of color values\n     * @api\n     */\n    WebGLRenderTarget.prototype.readAll = function () {\n        if (this.dataCacheDirty_) {\n            var size = this.size_;\n            var gl = this.helper_.getGL();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n            gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, this.data_);\n            this.dataCacheDirty_ = false;\n        }\n        return this.data_;\n    };\n    /**\n     * Reads one pixel of the frame buffer as an array of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * If x and/or y are outside of existing data, an array filled with 0 is returned.\n     * @param {number} x Pixel coordinate\n     * @param {number} y Pixel coordinate\n     * @return {Uint8Array} Integer array with one color value (4 components)\n     * @api\n     */\n    WebGLRenderTarget.prototype.readPixel = function (x, y) {\n        if (x < 0 || y < 0 || x > this.size_[0] || y >= this.size_[1]) {\n            tmpArray4[0] = 0;\n            tmpArray4[1] = 0;\n            tmpArray4[2] = 0;\n            tmpArray4[3] = 0;\n            return tmpArray4;\n        }\n        this.readAll();\n        var index = Math.floor(x) + (this.size_[1] - Math.floor(y) - 1) * this.size_[0];\n        tmpArray4[0] = this.data_[index * 4];\n        tmpArray4[1] = this.data_[index * 4 + 1];\n        tmpArray4[2] = this.data_[index * 4 + 2];\n        tmpArray4[3] = this.data_[index * 4 + 3];\n        return tmpArray4;\n    };\n    /**\n     * @return {WebGLTexture} Texture to render to\n     */\n    WebGLRenderTarget.prototype.getTexture = function () {\n        return this.texture_;\n    };\n    /**\n     * @return {WebGLFramebuffer} Frame buffer of the render target\n     */\n    WebGLRenderTarget.prototype.getFramebuffer = function () {\n        return this.framebuffer_;\n    };\n    /**\n     * @private\n     */\n    WebGLRenderTarget.prototype.updateSize_ = function () {\n        var size = this.size_;\n        var gl = this.helper_.getGL();\n        this.texture_ = this.helper_.createTexture(size, null, this.texture_);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture_, 0);\n        this.data_ = new Uint8Array(size[0] * size[1] * 4);\n    };\n    return WebGLRenderTarget;\n}());\nexport default WebGLRenderTarget;\n//# sourceMappingURL=RenderTarget.js.map","export function create() {\n    var source = \"var e=\\\"function\\\"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError(\\\"Cannot convert undefined or null to object\\\");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n=\\\"GENERATE_BUFFERS\\\",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};\";\n    var blob = new Blob([source], { type: 'application/javascript' });\n    var url = URL.createObjectURL(blob);\n    return new Worker(url);\n}\n//# sourceMappingURL=webgl.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/PointsLayer\n */\nimport BaseVector from '../../layer/BaseVector.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport VectorEventType from '../../source/VectorEventType.js';\nimport ViewHint from '../../ViewHint.js';\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport WebGLLayerRenderer, { WebGLWorkerMessageType, colorDecodeId, colorEncodeId, } from './Layer.js';\nimport WebGLRenderTarget from '../../webgl/RenderTarget.js';\nimport { ARRAY_BUFFER, DYNAMIC_DRAW, ELEMENT_ARRAY_BUFFER } from '../../webgl.js';\nimport { AttributeType, DefaultUniform } from '../../webgl/Helper.js';\nimport { apply as applyTransform, create as createTransform, makeInverse as makeInverseTransform, multiply as multiplyTransform, } from '../../transform.js';\nimport { assert } from '../../asserts.js';\nimport { buffer, createEmpty, equals } from '../../extent.js';\nimport { create as createWebGLWorker } from '../../worker/webgl.js';\nimport { getUid } from '../../util.js';\nimport { listen, unlistenByKey } from '../../events.js';\n/**\n * @typedef {Object} CustomAttribute A description of a custom attribute to be passed on to the GPU, with a value different\n * for each feature.\n * @property {string} name Attribute name.\n * @property {function(import(\"../../Feature\").default, Object<string, *>):number} callback This callback computes the numerical value of the\n * attribute for a given feature (properties are available as 2nd arg for quicker access).\n */\n/**\n * @typedef {Object} FeatureCacheItem Object that holds a reference to a feature, its geometry and properties. Used to optimize\n * rebuildBuffers by accessing these objects quicker.\n * @property {import(\"../../Feature\").default} feature Feature\n * @property {Object<string, *>} properties Feature properties\n * @property {import(\"../../geom\").Geometry} geometry Feature geometry\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the canvas element.\n * @property {Array<CustomAttribute>} [attributes] These attributes will be read from the features in the source and then\n * passed to the GPU. The `name` property of each attribute will serve as its identifier:\n *  * In the vertex shader as an `attribute` by prefixing it with `a_`\n *  * In the fragment shader as a `varying` by prefixing it with `v_`\n * Please note that these can only be numerical values.\n * @property {string} vertexShader Vertex shader source, mandatory.\n * @property {string} fragmentShader Fragment shader source, mandatory.\n * @property {string} [hitVertexShader] Vertex shader source for hit detection rendering.\n * @property {string} [hitFragmentShader] Fragment shader source for hit detection rendering.\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * Please note that `u_texture` is reserved for the main texture slot and `u_opacity` is reserved for the layer opacity.\n * @property {Array<import(\"./Layer\").PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * WebGL vector renderer optimized for points.\n * All features will be rendered as quads (two triangles forming a square). New data will be flushed to the GPU\n * every time the vector source changes.\n *\n * You need to provide vertex and fragment shaders for rendering. This can be done using\n * {@link module:ol/webgl/ShaderBuilder} utilities. These shaders shall expect a `a_position` attribute\n * containing the screen-space projected center of the quad, as well as a `a_index` attribute\n * whose value (0, 1, 2 or 3) indicates which quad vertex is currently getting processed (see structure below).\n *\n * To include variable attributes in the shaders, you need to declare them using the `attributes` property of\n * the options object like so:\n * ```js\n * new WebGLPointsLayerRenderer(layer, {\n *   attributes: [\n *     {\n *       name: 'size',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *     {\n *       name: 'weight',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *   ],\n *   vertexShader:\n *     // shader using attribute a_weight and a_size\n *   fragmentShader:\n *     // shader using varying v_weight and v_size\n * ```\n *\n * To enable hit detection, you must as well provide dedicated shaders using the `hitVertexShader`\n * and `hitFragmentShader` properties. These shall expect the `a_hitColor` attribute to contain\n * the final color that will have to be output for hit detection to work.\n *\n * The following uniform is used for the main texture: `u_texture`.\n * The following uniform is used for the layer opacity: `u_opacity`.\n *\n * Please note that the main shader output should have premultiplied alpha, otherwise visual anomalies may occur.\n *\n * Points are rendered as quads with the following structure:\n *\n * ```\n *   (u0, v1)      (u1, v1)\n *  [3]----------[2]\n *   |`           |\n *   |  `         |\n *   |    `       |\n *   |      `     |\n *   |        `   |\n *   |          ` |\n *  [0]----------[1]\n *   (u0, v0)      (u1, v0)\n *  ```\n *\n * This uses {@link module:ol/webgl/Helper~WebGLHelper} internally.\n *\n * @api\n */\nvar WebGLPointsLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayerRenderer(layer, options) {\n        var _this = this;\n        var uniforms = options.uniforms || {};\n        var projectionMatrixTransform = createTransform();\n        uniforms[DefaultUniform.PROJECTION_MATRIX] = projectionMatrixTransform;\n        _this = _super.call(this, layer, {\n            uniforms: uniforms,\n            postProcesses: options.postProcesses,\n        }) || this;\n        _this.sourceRevision_ = -1;\n        _this.verticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.hitVerticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.indicesBuffer_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, DYNAMIC_DRAW);\n        /**\n         * @private\n         */\n        _this.vertexShader_ = options.vertexShader;\n        /**\n         * @private\n         */\n        _this.fragmentShader_ = options.fragmentShader;\n        /**\n         * @type {WebGLProgram}\n         * @private\n         */\n        _this.program_;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.hitDetectionEnabled_ =\n            options.hitFragmentShader && options.hitVertexShader ? true : false;\n        /**\n         * @private\n         */\n        _this.hitVertexShader_ = options.hitVertexShader;\n        /**\n         * @private\n         */\n        _this.hitFragmentShader_ = options.hitFragmentShader;\n        /**\n         * @type {WebGLProgram}\n         * @private\n         */\n        _this.hitProgram_;\n        var customAttributes = options.attributes\n            ? options.attributes.map(function (attribute) {\n                return {\n                    name: 'a_' + attribute.name,\n                    size: 1,\n                    type: AttributeType.FLOAT,\n                };\n            })\n            : [];\n        /**\n         * A list of attributes used by the renderer. By default only the position and\n         * index of the vertex (0 to 3) are required.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.attributes = [\n            {\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n        ].concat(customAttributes);\n        /**\n         * A list of attributes used for hit detection.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.hitDetectionAttributes = [\n            {\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_hitColor',\n                size: 4,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_featureUid',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n        ].concat(customAttributes);\n        _this.customAttributes = options.attributes ? options.attributes : [];\n        _this.previousExtent_ = createEmpty();\n        /**\n         * This transform is updated on every frame and is the composition of:\n         * - invert of the world->screen transform that was used when rebuilding buffers (see `this.renderTransform_`)\n         * - current world->screen transform\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.currentTransform_ = projectionMatrixTransform;\n        /**\n         * This transform is updated when buffers are rebuilt and converts world space coordinates to screen space\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.renderTransform_ = createTransform();\n        /**\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.invertRenderTransform_ = createTransform();\n        /**\n         * @type {Float32Array}\n         * @private\n         */\n        _this.renderInstructions_ = new Float32Array(0);\n        /**\n         * These instructions are used for hit detection\n         * @type {Float32Array}\n         * @private\n         */\n        _this.hitRenderInstructions_ = new Float32Array(0);\n        /**\n         * @type {WebGLRenderTarget}\n         * @private\n         */\n        _this.hitRenderTarget_;\n        _this.worker_ = createWebGLWorker();\n        _this.worker_.addEventListener('message', \n        /**\n         * @param {*} event Event.\n         * @this {WebGLPointsLayerRenderer}\n         */\n        function (event) {\n            var received = event.data;\n            if (received.type === WebGLWorkerMessageType.GENERATE_BUFFERS) {\n                var projectionTransform = received.projectionTransform;\n                if (received.hitDetection) {\n                    this.hitVerticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.hitVerticesBuffer_);\n                }\n                else {\n                    this.verticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.verticesBuffer_);\n                }\n                this.indicesBuffer_.fromArrayBuffer(received.indexBuffer);\n                this.helper.flushBufferData(this.indicesBuffer_);\n                this.renderTransform_ = projectionTransform;\n                makeInverseTransform(this.invertRenderTransform_, this.renderTransform_);\n                if (received.hitDetection) {\n                    this.hitRenderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                else {\n                    this.renderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                this.getLayer().changed();\n            }\n        }.bind(_this));\n        /**\n         * This object will be updated when the source changes. Key is uid.\n         * @type {Object<string, FeatureCacheItem>}\n         * @private\n         */\n        _this.featureCache_ = {};\n        /**\n         * Amount of features in the cache.\n         * @type {number}\n         * @private\n         */\n        _this.featureCount_ = 0;\n        var source = _this.getLayer().getSource();\n        _this.sourceListenKeys_ = [\n            listen(source, VectorEventType.ADDFEATURE, _this.handleSourceFeatureAdded_, _this),\n            listen(source, VectorEventType.CHANGEFEATURE, _this.handleSourceFeatureChanged_, _this),\n            listen(source, VectorEventType.REMOVEFEATURE, _this.handleSourceFeatureDelete_, _this),\n            listen(source, VectorEventType.CLEAR, _this.handleSourceFeatureClear_, _this),\n        ];\n        source.forEachFeature(function (feature) {\n            this.featureCache_[getUid(feature)] = {\n                feature: feature,\n                properties: feature.getProperties(),\n                geometry: feature.getGeometry(),\n            };\n            this.featureCount_++;\n        }.bind(_this));\n        return _this;\n    }\n    WebGLPointsLayerRenderer.prototype.afterHelperCreated = function () {\n        this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n        if (this.hitDetectionEnabled_) {\n            this.hitProgram_ = this.helper.getProgram(this.hitFragmentShader_, this.hitVertexShader_);\n            this.hitRenderTarget_ = new WebGLRenderTarget(this.helper);\n        }\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureAdded_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry(),\n        };\n        this.featureCount_++;\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureChanged_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry(),\n        };\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureDelete_ = function (event) {\n        var feature = event.feature;\n        delete this.featureCache_[getUid(feature)];\n        this.featureCount_--;\n    };\n    /**\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureClear_ = function () {\n        this.featureCache_ = {};\n        this.featureCount_ = 0;\n    };\n    /**\n     * Render the layer.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {HTMLElement} The rendered element.\n     */\n    WebGLPointsLayerRenderer.prototype.renderFrame = function (frameState) {\n        var gl = this.helper.getGL();\n        this.preRender(gl, frameState);\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n        this.helper.finalizeDraw(frameState, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent);\n        var canvas = this.helper.getCanvas();\n        if (this.hitDetectionEnabled_) {\n            this.renderHitDetection(frameState);\n            this.hitRenderTarget_.clearCachedData();\n        }\n        this.postRender(gl, frameState);\n        return canvas;\n    };\n    /**\n     * Determine whether renderFrame should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    WebGLPointsLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n        var layer = this.getLayer();\n        var vectorSource = layer.getSource();\n        var viewState = frameState.viewState;\n        var viewNotMoving = !frameState.viewHints[ViewHint.ANIMATING] &&\n            !frameState.viewHints[ViewHint.INTERACTING];\n        var extentChanged = !equals(this.previousExtent_, frameState.extent);\n        var sourceChanged = this.sourceRevision_ < vectorSource.getRevision();\n        if (sourceChanged) {\n            this.sourceRevision_ = vectorSource.getRevision();\n        }\n        if (viewNotMoving && (extentChanged || sourceChanged)) {\n            var projection = viewState.projection;\n            var resolution = viewState.resolution;\n            var renderBuffer = layer instanceof BaseVector ? layer.getRenderBuffer() : 0;\n            var extent = buffer(frameState.extent, renderBuffer * resolution);\n            vectorSource.loadFeatures(extent, resolution, projection);\n            this.rebuildBuffers_(frameState);\n            this.previousExtent_ = frameState.extent.slice();\n        }\n        // apply the current projection transform with the invert of the one used to fill buffers\n        this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n        multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n        this.helper.useProgram(this.program_);\n        this.helper.prepareDraw(frameState);\n        // write new data\n        this.helper.bindBuffer(this.verticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.attributes);\n        return true;\n    };\n    /**\n     * Rebuild internal webgl buffers based on current view extent; costly, should not be called too much\n     * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.rebuildBuffers_ = function (frameState) {\n        // saves the projection transform for the current frame state\n        var projectionTransform = createTransform();\n        this.helper.makeProjectionTransform(frameState, projectionTransform);\n        // here we anticipate the amount of render instructions that we well generate\n        // this can be done since we know that for normal render we only have x, y as base instructions,\n        // and x, y, r, g, b, a and featureUid for hit render instructions\n        // and we also know the amount of custom attributes to append to these\n        var totalInstructionsCount = (2 + this.customAttributes.length) * this.featureCount_;\n        if (!this.renderInstructions_ ||\n            this.renderInstructions_.length !== totalInstructionsCount) {\n            this.renderInstructions_ = new Float32Array(totalInstructionsCount);\n        }\n        if (this.hitDetectionEnabled_) {\n            var totalHitInstructionsCount = (7 + this.customAttributes.length) * this.featureCount_;\n            if (!this.hitRenderInstructions_ ||\n                this.hitRenderInstructions_.length !== totalHitInstructionsCount) {\n                this.hitRenderInstructions_ = new Float32Array(totalHitInstructionsCount);\n            }\n        }\n        // loop on features to fill the buffer\n        var featureCache, geometry;\n        var tmpCoords = [];\n        var tmpColor = [];\n        var renderIndex = 0;\n        var hitIndex = 0;\n        var hitColor;\n        for (var featureUid in this.featureCache_) {\n            featureCache = this.featureCache_[featureUid];\n            geometry = /** @type {import(\"../../geom\").Point} */ (featureCache.geometry);\n            if (!geometry || geometry.getType() !== GeometryType.POINT) {\n                continue;\n            }\n            tmpCoords[0] = geometry.getFlatCoordinates()[0];\n            tmpCoords[1] = geometry.getFlatCoordinates()[1];\n            applyTransform(projectionTransform, tmpCoords);\n            hitColor = colorEncodeId(hitIndex + 6, tmpColor);\n            this.renderInstructions_[renderIndex++] = tmpCoords[0];\n            this.renderInstructions_[renderIndex++] = tmpCoords[1];\n            // for hit detection, the feature uid is saved in the opacity value\n            // and the index of the opacity value is encoded in the color values\n            if (this.hitDetectionEnabled_) {\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[0];\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[0];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[2];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[3];\n                this.hitRenderInstructions_[hitIndex++] = Number(featureUid);\n            }\n            // pushing custom attributes\n            var value = void 0;\n            for (var j = 0; j < this.customAttributes.length; j++) {\n                value = this.customAttributes[j].callback(featureCache.feature, featureCache.properties);\n                this.renderInstructions_[renderIndex++] = value;\n                if (this.hitDetectionEnabled_) {\n                    this.hitRenderInstructions_[hitIndex++] = value;\n                }\n            }\n        }\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        var message = {\n            type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n            renderInstructions: this.renderInstructions_.buffer,\n            customAttributesCount: this.customAttributes.length,\n        };\n        // additional properties will be sent back as-is by the worker\n        message['projectionTransform'] = projectionTransform;\n        this.worker_.postMessage(message, [this.renderInstructions_.buffer]);\n        this.renderInstructions_ = null;\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        if (this.hitDetectionEnabled_) {\n            var hitMessage = {\n                type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n                renderInstructions: this.hitRenderInstructions_.buffer,\n                customAttributesCount: 5 + this.customAttributes.length,\n            };\n            hitMessage['projectionTransform'] = projectionTransform;\n            hitMessage['hitDetection'] = true;\n            this.worker_.postMessage(hitMessage, [\n                this.hitRenderInstructions_.buffer,\n            ]);\n            this.hitRenderInstructions_ = null;\n        }\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    WebGLPointsLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        assert(this.hitDetectionEnabled_, 66);\n        if (!this.hitRenderInstructions_) {\n            return undefined;\n        }\n        var pixel = applyTransform(frameState.coordinateToPixelTransform, coordinate.slice());\n        var data = this.hitRenderTarget_.readPixel(pixel[0] / 2, pixel[1] / 2);\n        var color = [data[0] / 255, data[1] / 255, data[2] / 255, data[3] / 255];\n        var index = colorDecodeId(color);\n        var opacity = this.hitRenderInstructions_[index];\n        var uid = Math.floor(opacity).toString();\n        var source = this.getLayer().getSource();\n        var feature = source.getFeatureByUid(uid);\n        if (feature) {\n            return callback(feature, this.getLayer(), null);\n        }\n        return undefined;\n    };\n    /**\n     * Render the hit detection data to the corresponding render target\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState current frame state\n     */\n    WebGLPointsLayerRenderer.prototype.renderHitDetection = function (frameState) {\n        // skip render entirely if vertex buffers not ready/generated yet\n        if (!this.hitVerticesBuffer_.getSize()) {\n            return;\n        }\n        this.hitRenderTarget_.setSize([\n            Math.floor(frameState.size[0] / 2),\n            Math.floor(frameState.size[1] / 2),\n        ]);\n        this.helper.useProgram(this.hitProgram_);\n        this.helper.prepareDrawToRenderTarget(frameState, this.hitRenderTarget_, true);\n        this.helper.bindBuffer(this.hitVerticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.hitDetectionAttributes);\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n    };\n    /**\n     * Clean up.\n     */\n    WebGLPointsLayerRenderer.prototype.disposeInternal = function () {\n        this.worker_.terminate();\n        this.layer_ = null;\n        this.sourceListenKeys_.forEach(function (key) {\n            unlistenByKey(key);\n        });\n        this.sourceListenKeys_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayerRenderer;\n}(WebGLLayerRenderer));\nexport default WebGLPointsLayerRenderer;\n//# sourceMappingURL=PointsLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Heatmap\n */\nimport BaseVector from './BaseVector.js';\nimport WebGLPointsLayerRenderer from '../renderer/webgl/PointsLayer.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\nimport { createCanvasContext2D } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<string>} [gradient=['#00f', '#0ff', '#0f0', '#ff0', '#f00']] The color gradient\n * of the heatmap, specified as an array of CSS color strings.\n * @property {number} [radius=8] Radius size in pixels.\n * @property {number} [blur=15] Blur size in pixels.\n * @property {string|function(import(\"../Feature.js\").default):number} [weight='weight'] The feature\n * attribute to use for the weight or a function that returns a weight from a feature. Weight values\n * should range from 0 to 1 (and values outside will be clamped to that range).\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    BLUR: 'blur',\n    GRADIENT: 'gradient',\n    RADIUS: 'radius',\n};\n/**\n * @const\n * @type {Array<string>}\n */\nvar DEFAULT_GRADIENT = ['#00f', '#0ff', '#0f0', '#ff0', '#f00'];\n/**\n * @classdesc\n * Layer for rendering vector data as a heatmap.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @extends {BaseVector<import(\"../source/Vector.js\").default, WebGLPointsLayerRenderer>}\n * @api\n */\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Heatmap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.gradient;\n        delete baseOptions.radius;\n        delete baseOptions.blur;\n        delete baseOptions.weight;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.gradient_ = null;\n        _this.addChangeListener(Property.GRADIENT, _this.handleGradientChanged_);\n        _this.setGradient(options.gradient ? options.gradient : DEFAULT_GRADIENT);\n        _this.setBlur(options.blur !== undefined ? options.blur : 15);\n        _this.setRadius(options.radius !== undefined ? options.radius : 8);\n        var weight = options.weight ? options.weight : 'weight';\n        if (typeof weight === 'string') {\n            _this.weightFunction_ = function (feature) {\n                return feature.get(weight);\n            };\n        }\n        else {\n            _this.weightFunction_ = weight;\n        }\n        // For performance reasons, don't sort the features before rendering.\n        // The render order is not relevant for a heatmap representation.\n        _this.setRenderOrder(null);\n        return _this;\n    }\n    /**\n     * Return the blur size in pixels.\n     * @return {number} Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getBlur = function () {\n        return /** @type {number} */ (this.get(Property.BLUR));\n    };\n    /**\n     * Return the gradient colors as array of strings.\n     * @return {Array<string>} Colors.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getGradient = function () {\n        return /** @type {Array<string>} */ (this.get(Property.GRADIENT));\n    };\n    /**\n     * Return the size of the radius in pixels.\n     * @return {number} Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getRadius = function () {\n        return /** @type {number} */ (this.get(Property.RADIUS));\n    };\n    /**\n     * @private\n     */\n    Heatmap.prototype.handleGradientChanged_ = function () {\n        this.gradient_ = createGradient(this.getGradient());\n    };\n    /**\n     * Set the blur size in pixels.\n     * @param {number} blur Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setBlur = function (blur) {\n        this.set(Property.BLUR, blur);\n    };\n    /**\n     * Set the gradient colors as array of strings.\n     * @param {Array<string>} colors Gradient.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setGradient = function (colors) {\n        this.set(Property.GRADIENT, colors);\n    };\n    /**\n     * Set the size of the radius in pixels.\n     * @param {number} radius Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setRadius = function (radius) {\n        this.set(Property.RADIUS, radius);\n    };\n    Heatmap.prototype.createRenderer = function () {\n        return new WebGLPointsLayerRenderer(this, {\n            className: this.getClassName(),\n            attributes: [\n                {\n                    name: 'weight',\n                    callback: function (feature) {\n                        var weight = this.weightFunction_(feature);\n                        return weight !== undefined ? clamp(weight, 0, 1) : 1;\n                    }.bind(this),\n                },\n            ],\n            vertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_weight = a_weight;\\n        }\",\n            fragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\\n        }\",\n            hitVertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n        attribute vec4 a_hitColor;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_hitColor = a_hitColor;\\n          v_weight = a_weight;\\n        }\",\n            hitFragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          if (alpha < 0.05) {\\n            discard;\\n          }\\n\\n          gl_FragColor = v_hitColor;\\n        }\",\n            uniforms: {\n                u_size: function () {\n                    return (this.get(Property.RADIUS) + this.get(Property.BLUR)) * 2;\n                }.bind(this),\n                u_blurSlope: function () {\n                    return (this.get(Property.RADIUS) / Math.max(1, this.get(Property.BLUR)));\n                }.bind(this),\n            },\n            postProcesses: [\n                {\n                    fragmentShader: \"\\n            precision mediump float;\\n\\n            uniform sampler2D u_image;\\n            uniform sampler2D u_gradientTexture;\\n            uniform float u_opacity;\\n\\n            varying vec2 v_texCoord;\\n\\n            void main() {\\n              vec4 color = texture2D(u_image, v_texCoord);\\n              gl_FragColor.a = color.a * u_opacity;\\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\\n              gl_FragColor.rgb *= gl_FragColor.a;\\n            }\",\n                    uniforms: {\n                        u_gradientTexture: function () {\n                            return this.gradient_;\n                        }.bind(this),\n                        u_opacity: function () {\n                            return this.getOpacity();\n                        }.bind(this),\n                    },\n                },\n            ],\n        });\n    };\n    Heatmap.prototype.renderDeclutter = function () { };\n    return Heatmap;\n}(BaseVector));\n/**\n * @param {Array<string>} colors A list of colored.\n * @return {HTMLCanvasElement} canvas with gradient texture.\n */\nfunction createGradient(colors) {\n    var width = 1;\n    var height = 256;\n    var context = createCanvasContext2D(width, height);\n    var gradient = context.createLinearGradient(0, 0, width, height);\n    var step = 1 / (colors.length - 1);\n    for (var i = 0, ii = colors.length; i < ii; ++i) {\n        gradient.addColorStop(i * step, colors[i]);\n    }\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, width, height);\n    return context.canvas;\n}\nexport default Heatmap;\n//# sourceMappingURL=Heatmap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Tile\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport TileState from './TileState.js';\nimport { abstract } from './util.js';\nimport { easeIn } from './easing.js';\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string): void} LoadFunction\n * @api\n */\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @api\n */\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nvar Tile = /** @class */ (function (_super) {\n    __extends(Tile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {Options} [opt_options] Tile options.\n     */\n    function Tile(tileCoord, state, opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"./tilecoord.js\").TileCoord}\n         */\n        _this.tileCoord = tileCoord;\n        /**\n         * @protected\n         * @type {import(\"./TileState.js\").default}\n         */\n        _this.state = state;\n        /**\n         * An \"interim\" tile for this tile. The interim tile may be used while this\n         * one is loading, for \"smooth\" transitions when changing params/dimensions\n         * on the source.\n         * @type {Tile}\n         */\n        _this.interimTile = null;\n        /**\n         * A key assigned to the tile. This is used by the tile source to determine\n         * if this tile can effectively be used, or if a new tile should be created\n         * and this one be used as an interim tile for this new tile.\n         * @type {string}\n         */\n        _this.key = '';\n        /**\n         * The duration for the opacity transition.\n         * @type {number}\n         */\n        _this.transition_ =\n            options.transition === undefined ? 250 : options.transition;\n        /**\n         * Lookup of start times for rendering transitions.  If the start time is\n         * equal to -1, the transition is complete.\n         * @type {Object<string, number>}\n         */\n        _this.transitionStarts_ = {};\n        /**\n         * @type {boolean}\n         */\n        _this.interpolate = !!options.interpolate;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    Tile.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Called by the tile cache when the tile is removed from the cache due to expiry\n     */\n    Tile.prototype.release = function () { };\n    /**\n     * @return {string} Key.\n     */\n    Tile.prototype.getKey = function () {\n        return this.key + '/' + this.tileCoord;\n    };\n    /**\n     * Get the interim tile most suitable for rendering using the chain of interim\n     * tiles. This corresponds to the  most recent tile that has been loaded, if no\n     * such tile exists, the original tile is returned.\n     * @return {!Tile} Best tile for rendering.\n     */\n    Tile.prototype.getInterimTile = function () {\n        if (!this.interimTile) {\n            //empty chain\n            return this;\n        }\n        var tile = this.interimTile;\n        // find the first loaded tile and return it. Since the chain is sorted in\n        // decreasing order of creation time, there is no need to search the remainder\n        // of the list (all those tiles correspond to older requests and will be\n        // cleaned up by refreshInterimChain)\n        do {\n            if (tile.getState() == TileState.LOADED) {\n                // Show tile immediately instead of fading it in after loading, because\n                // the interim tile is in place already\n                this.transition_ = 0;\n                return tile;\n            }\n            tile = tile.interimTile;\n        } while (tile);\n        // we can not find a better tile\n        return this;\n    };\n    /**\n     * Goes through the chain of interim tiles and discards sections of the chain\n     * that are no longer relevant.\n     */\n    Tile.prototype.refreshInterimChain = function () {\n        if (!this.interimTile) {\n            return;\n        }\n        var tile = this.interimTile;\n        /**\n         * @type {Tile}\n         */\n        var prev = this;\n        do {\n            if (tile.getState() == TileState.LOADED) {\n                //we have a loaded tile, we can discard the rest of the list\n                //we would could abort any LOADING tile request\n                //older than this tile (i.e. any LOADING tile following this entry in the chain)\n                tile.interimTile = null;\n                break;\n            }\n            else if (tile.getState() == TileState.LOADING) {\n                //keep this LOADING tile any loaded tiles later in the chain are\n                //older than this tile, so we're still interested in the request\n                prev = tile;\n            }\n            else if (tile.getState() == TileState.IDLE) {\n                //the head of the list is the most current tile, we don't need\n                //to start any other requests for this chain\n                prev.interimTile = tile.interimTile;\n            }\n            else {\n                prev = tile;\n            }\n            tile = prev.interimTile;\n        } while (tile);\n    };\n    /**\n     * Get the tile coordinate for this tile.\n     * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n     * @api\n     */\n    Tile.prototype.getTileCoord = function () {\n        return this.tileCoord;\n    };\n    /**\n     * @return {import(\"./TileState.js\").default} State.\n     */\n    Tile.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n     * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n     * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n     * the tile queue and will block other requests.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @api\n     */\n    Tile.prototype.setState = function (state) {\n        if (this.state !== TileState.ERROR && this.state > state) {\n            throw new Error('Tile load sequence violation');\n        }\n        this.state = state;\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @abstract\n     * @api\n     */\n    Tile.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * Get the alpha value for rendering.\n     * @param {string} id An id for the renderer.\n     * @param {number} time The render frame time.\n     * @return {number} A number between 0 and 1.\n     */\n    Tile.prototype.getAlpha = function (id, time) {\n        if (!this.transition_) {\n            return 1;\n        }\n        var start = this.transitionStarts_[id];\n        if (!start) {\n            start = time;\n            this.transitionStarts_[id] = start;\n        }\n        else if (start === -1) {\n            return 1;\n        }\n        var delta = time - start + 1000 / 60; // avoid rendering at 0\n        if (delta >= this.transition_) {\n            return 1;\n        }\n        return easeIn(delta / this.transition_);\n    };\n    /**\n     * Determine if a tile is in an alpha transition.  A tile is considered in\n     * transition if tile.getAlpha() has not yet been called or has been called\n     * and returned 1.\n     * @param {string} id An id for the renderer.\n     * @return {boolean} The tile is in transition.\n     */\n    Tile.prototype.inTransition = function (id) {\n        if (!this.transition_) {\n            return false;\n        }\n        return this.transitionStarts_[id] !== -1;\n    };\n    /**\n     * Mark a transition as complete.\n     * @param {string} id An id for the renderer.\n     */\n    Tile.prototype.endTransition = function (id) {\n        if (this.transition_) {\n            this.transitionStarts_[id] = -1;\n        }\n    };\n    return Tile;\n}(EventTarget));\nexport default Tile;\n//# sourceMappingURL=Tile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"./TileState.js\").default} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options} [opt_options] Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        _this.key = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n     * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n     */\n    ImageTile.prototype.setImage = function (element) {\n        this.image_ = element;\n        this.state = TileState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","/**\n * @module ol/reproj\n */\nimport { IMAGE_SMOOTHING_DISABLED } from './renderer/canvas/common.js';\nimport { assign } from './obj.js';\nimport { containsCoordinate, createEmpty, extend, forEachCorner, getCenter, getHeight, getTopLeft, getWidth, } from './extent.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { getPointResolution, transform } from './proj.js';\nimport { solveLinearSystem } from './math.js';\nvar brokenDiagonalRendering_;\n/**\n * This draws a small triangle into a canvas by setting the triangle as the clip region\n * and then drawing a (too large) rectangle\n *\n * @param {CanvasRenderingContext2D} ctx The context in which to draw the triangle\n * @param {number} u1 The x-coordinate of the second point. The first point is 0,0.\n * @param {number} v1 The y-coordinate of the second point.\n * @param {number} u2 The x-coordinate of the third point.\n * @param {number} v2 The y-coordinate of the third point.\n */\nfunction drawTestTriangle(ctx, u1, v1, u2, v2) {\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(u1, v1);\n    ctx.lineTo(u2, v2);\n    ctx.closePath();\n    ctx.save();\n    ctx.clip();\n    ctx.fillRect(0, 0, Math.max(u1, u2) + 1, Math.max(v1, v2));\n    ctx.restore();\n}\n/**\n * Given the data from getImageData, see if the right values appear at the provided offset.\n * Returns true if either the color or transparency is off\n *\n * @param {Uint8ClampedArray} data The data returned from getImageData\n * @param {number} offset The pixel offset from the start of data.\n * @return {boolean} true if the diagonal rendering is broken\n */\nfunction verifyBrokenDiagonalRendering(data, offset) {\n    // the values ought to be close to the rgba(210, 0, 0, 0.75)\n    return (Math.abs(data[offset * 4] - 210) > 2 ||\n        Math.abs(data[offset * 4 + 3] - 0.75 * 255) > 2);\n}\n/**\n * Determines if the current browser configuration can render triangular clip regions correctly.\n * This value is cached so the function is only expensive the first time called.\n * Firefox on Windows (as of now) does not if HWA is enabled. See https://bugzilla.mozilla.org/show_bug.cgi?id=1606976\n * IE also doesn't. Chrome works, and everything seems to work on OSX and Android. This function caches the\n * result. I suppose that it is conceivably possible that a browser might flip modes while the app is\n * running, but lets hope not.\n *\n * @return {boolean} true if the Diagonal Rendering is broken.\n */\nfunction isBrokenDiagonalRendering() {\n    if (brokenDiagonalRendering_ === undefined) {\n        var ctx = document.createElement('canvas').getContext('2d');\n        ctx.globalCompositeOperation = 'lighter';\n        ctx.fillStyle = 'rgba(210, 0, 0, 0.75)';\n        drawTestTriangle(ctx, 4, 5, 4, 0);\n        drawTestTriangle(ctx, 4, 5, 0, 5);\n        var data = ctx.getImageData(0, 0, 3, 3).data;\n        brokenDiagonalRendering_ =\n            verifyBrokenDiagonalRendering(data, 0) ||\n                verifyBrokenDiagonalRendering(data, 4) ||\n                verifyBrokenDiagonalRendering(data, 8);\n    }\n    return brokenDiagonalRendering_;\n}\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution) {\n    var sourceCenter = transform(targetCenter, targetProj, sourceProj);\n    // calculate the ideal resolution of the source data\n    var sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n    var targetMetersPerUnit = targetProj.getMetersPerUnit();\n    if (targetMetersPerUnit !== undefined) {\n        sourceResolution *= targetMetersPerUnit;\n    }\n    var sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n    if (sourceMetersPerUnit !== undefined) {\n        sourceResolution /= sourceMetersPerUnit;\n    }\n    // Based on the projection properties, the point resolution at the specified\n    // coordinates may be slightly different. We need to reverse-compensate this\n    // in order to achieve optimal results.\n    var sourceExtent = sourceProj.getExtent();\n    if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n        var compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n            sourceResolution;\n        if (isFinite(compensationFactor) && compensationFactor > 0) {\n            sourceResolution /= compensationFactor;\n        }\n    }\n    return sourceResolution;\n}\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceExtentResolution(sourceProj, targetProj, targetExtent, targetResolution) {\n    var targetCenter = getCenter(targetExtent);\n    var sourceResolution = calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution);\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n        forEachCorner(targetExtent, function (corner) {\n            sourceResolution = calculateSourceResolution(sourceProj, targetProj, corner, targetResolution);\n            return isFinite(sourceResolution) && sourceResolution > 0;\n        });\n    }\n    return sourceResolution;\n}\n/**\n * @typedef {Object} ImageExtent\n * @property {import(\"./extent.js\").Extent} extent Extent.\n * @property {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n */\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation Calculated triangulation.\n * @param {Array<ImageExtent>} sources Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean} [opt_renderEdges] Render reprojection edges.\n * @param {object} [opt_interpolate] Use linear interpolation when resampling.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio, sourceResolution, sourceExtent, targetResolution, targetExtent, triangulation, sources, gutter, opt_renderEdges, opt_interpolate) {\n    var context = createCanvasContext2D(Math.round(pixelRatio * width), Math.round(pixelRatio * height));\n    if (!opt_interpolate) {\n        assign(context, IMAGE_SMOOTHING_DISABLED);\n    }\n    if (sources.length === 0) {\n        return context.canvas;\n    }\n    context.scale(pixelRatio, pixelRatio);\n    function pixelRound(value) {\n        return Math.round(value * pixelRatio) / pixelRatio;\n    }\n    context.globalCompositeOperation = 'lighter';\n    var sourceDataExtent = createEmpty();\n    sources.forEach(function (src, i, arr) {\n        extend(sourceDataExtent, src.extent);\n    });\n    var canvasWidthInUnits = getWidth(sourceDataExtent);\n    var canvasHeightInUnits = getHeight(sourceDataExtent);\n    var stitchContext = createCanvasContext2D(Math.round((pixelRatio * canvasWidthInUnits) / sourceResolution), Math.round((pixelRatio * canvasHeightInUnits) / sourceResolution));\n    if (!opt_interpolate) {\n        assign(stitchContext, IMAGE_SMOOTHING_DISABLED);\n    }\n    var stitchScale = pixelRatio / sourceResolution;\n    sources.forEach(function (src, i, arr) {\n        var xPos = src.extent[0] - sourceDataExtent[0];\n        var yPos = -(src.extent[3] - sourceDataExtent[3]);\n        var srcWidth = getWidth(src.extent);\n        var srcHeight = getHeight(src.extent);\n        // This test should never fail -- but it does. Need to find a fix the upstream condition\n        if (src.image.width > 0 && src.image.height > 0) {\n            stitchContext.drawImage(src.image, gutter, gutter, src.image.width - 2 * gutter, src.image.height - 2 * gutter, xPos * stitchScale, yPos * stitchScale, srcWidth * stitchScale, srcHeight * stitchScale);\n        }\n    });\n    var targetTopLeft = getTopLeft(targetExtent);\n    triangulation.getTriangles().forEach(function (triangle, i, arr) {\n        /* Calculate affine transform (src -> dst)\n         * Resulting matrix can be used to transform coordinate\n         * from `sourceProjection` to destination pixels.\n         *\n         * To optimize number of context calls and increase numerical stability,\n         * we also do the following operations:\n         * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n         * here before solving the linear system so [ui, vi] are pixel coordinates.\n         *\n         * Src points: xi, yi\n         * Dst points: ui, vi\n         * Affine coefficients: aij\n         *\n         * | x0 y0 1  0  0 0 |   |a00|   |u0|\n         * | x1 y1 1  0  0 0 |   |a01|   |u1|\n         * | x2 y2 1  0  0 0 | x |a02| = |u2|\n         * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n         * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n         * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n         */\n        var source = triangle.source;\n        var target = triangle.target;\n        var x0 = source[0][0], y0 = source[0][1];\n        var x1 = source[1][0], y1 = source[1][1];\n        var x2 = source[2][0], y2 = source[2][1];\n        // Make sure that everything is on pixel boundaries\n        var u0 = pixelRound((target[0][0] - targetTopLeft[0]) / targetResolution);\n        var v0 = pixelRound(-(target[0][1] - targetTopLeft[1]) / targetResolution);\n        var u1 = pixelRound((target[1][0] - targetTopLeft[0]) / targetResolution);\n        var v1 = pixelRound(-(target[1][1] - targetTopLeft[1]) / targetResolution);\n        var u2 = pixelRound((target[2][0] - targetTopLeft[0]) / targetResolution);\n        var v2 = pixelRound(-(target[2][1] - targetTopLeft[1]) / targetResolution);\n        // Shift all the source points to improve numerical stability\n        // of all the subsequent calculations. The [x0, y0] is used here.\n        // This is also used to simplify the linear system.\n        var sourceNumericalShiftX = x0;\n        var sourceNumericalShiftY = y0;\n        x0 = 0;\n        y0 = 0;\n        x1 -= sourceNumericalShiftX;\n        y1 -= sourceNumericalShiftY;\n        x2 -= sourceNumericalShiftX;\n        y2 -= sourceNumericalShiftY;\n        var augmentedMatrix = [\n            [x1, y1, 0, 0, u1 - u0],\n            [x2, y2, 0, 0, u2 - u0],\n            [0, 0, x1, y1, v1 - v0],\n            [0, 0, x2, y2, v2 - v0],\n        ];\n        var affineCoefs = solveLinearSystem(augmentedMatrix);\n        if (!affineCoefs) {\n            return;\n        }\n        context.save();\n        context.beginPath();\n        if (isBrokenDiagonalRendering() || !opt_interpolate) {\n            // Make sure that all lines are horizontal or vertical\n            context.moveTo(u1, v1);\n            // This is the diagonal line. Do it in 4 steps\n            var steps = 4;\n            var ud = u0 - u1;\n            var vd = v0 - v1;\n            for (var step = 0; step < steps; step++) {\n                // Go horizontally\n                context.lineTo(u1 + pixelRound(((step + 1) * ud) / steps), v1 + pixelRound((step * vd) / (steps - 1)));\n                // Go vertically\n                if (step != steps - 1) {\n                    context.lineTo(u1 + pixelRound(((step + 1) * ud) / steps), v1 + pixelRound(((step + 1) * vd) / (steps - 1)));\n                }\n            }\n            // We are almost at u0r, v0r\n            context.lineTo(u2, v2);\n        }\n        else {\n            context.moveTo(u1, v1);\n            context.lineTo(u0, v0);\n            context.lineTo(u2, v2);\n        }\n        context.clip();\n        context.transform(affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n        context.translate(sourceDataExtent[0] - sourceNumericalShiftX, sourceDataExtent[3] - sourceNumericalShiftY);\n        context.scale(sourceResolution / pixelRatio, -sourceResolution / pixelRatio);\n        context.drawImage(stitchContext.canvas, 0, 0);\n        context.restore();\n    });\n    if (opt_renderEdges) {\n        context.save();\n        context.globalCompositeOperation = 'source-over';\n        context.strokeStyle = 'black';\n        context.lineWidth = 1;\n        triangulation.getTriangles().forEach(function (triangle, i, arr) {\n            var target = triangle.target;\n            var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n            var v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n            var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n            var v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n            var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n            var v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n            context.beginPath();\n            context.moveTo(u1, v1);\n            context.lineTo(u0, v0);\n            context.lineTo(u2, v2);\n            context.closePath();\n            context.stroke();\n        });\n        context.restore();\n    }\n    return context.canvas;\n}\n//# sourceMappingURL=reproj.js.map","/**\n * @module ol/reproj/common\n */\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport var ERROR_THRESHOLD = 0.5;\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport var ENABLE_RASTER_REPROJECTION = true;\n//# sourceMappingURL=common.js.map","/**\n * @module ol/reproj/Triangulation\n */\nimport { boundingExtent, createEmpty, extendCoordinate, getArea, getBottomLeft, getBottomRight, getTopLeft, getTopRight, getWidth, intersects, } from '../extent.js';\nimport { getTransform } from '../proj.js';\nimport { log2, modulo } from '../math.js';\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source Source.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target Target.\n */\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nvar MAX_SUBDIVISION = 10;\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nvar MAX_TRIANGLE_WIDTH = 0.25;\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nvar Triangulation = /** @class */ (function () {\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n     * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n     * @param {number} errorThreshold Acceptable error (in source units).\n     * @param {?number} opt_destinationResolution The (optional) resolution of the destination.\n     */\n    function Triangulation(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold, opt_destinationResolution) {\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.sourceProj_ = sourceProj;\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.targetProj_ = targetProj;\n        /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n        var transformInvCache = {};\n        var transformInv = getTransform(this.targetProj_, this.sourceProj_);\n        /**\n         * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n         * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n         * @private\n         */\n        this.transformInv_ = function (c) {\n            var key = c[0] + '/' + c[1];\n            if (!transformInvCache[key]) {\n                transformInvCache[key] = transformInv(c);\n            }\n            return transformInvCache[key];\n        };\n        /**\n         * @type {import(\"../extent.js\").Extent}\n         * @private\n         */\n        this.maxSourceExtent_ = maxSourceExtent;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n        /**\n         * @type {Array<Triangle>}\n         * @private\n         */\n        this.triangles_ = [];\n        /**\n         * Indicates that the triangulation crosses edge of the source projection.\n         * @type {boolean}\n         * @private\n         */\n        this.wrapsXInSource_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.canWrapXInSource_ =\n            this.sourceProj_.canWrapX() &&\n                !!maxSourceExtent &&\n                !!this.sourceProj_.getExtent() &&\n                getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent());\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.sourceWorldWidth_ = this.sourceProj_.getExtent()\n            ? getWidth(this.sourceProj_.getExtent())\n            : null;\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.targetWorldWidth_ = this.targetProj_.getExtent()\n            ? getWidth(this.targetProj_.getExtent())\n            : null;\n        var destinationTopLeft = getTopLeft(targetExtent);\n        var destinationTopRight = getTopRight(targetExtent);\n        var destinationBottomRight = getBottomRight(targetExtent);\n        var destinationBottomLeft = getBottomLeft(targetExtent);\n        var sourceTopLeft = this.transformInv_(destinationTopLeft);\n        var sourceTopRight = this.transformInv_(destinationTopRight);\n        var sourceBottomRight = this.transformInv_(destinationBottomRight);\n        var sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n        /*\n         * The maxSubdivision controls how many splittings of the target area can\n         * be done. The idea here is to do a linear mapping of the target areas\n         * but the actual overal reprojection (can be) extremely non-linear. The\n         * default value of MAX_SUBDIVISION was chosen based on mapping a 256x256\n         * tile size. However this function is also called to remap canvas rendered\n         * layers which can be much larger. This calculation increases the maxSubdivision\n         * value by the right factor so that each 256x256 pixel area has\n         * MAX_SUBDIVISION divisions.\n         */\n        var maxSubdivision = MAX_SUBDIVISION +\n            (opt_destinationResolution\n                ? Math.max(0, Math.ceil(log2(getArea(targetExtent) /\n                    (opt_destinationResolution *\n                        opt_destinationResolution *\n                        256 *\n                        256))))\n                : 0);\n        this.addQuad_(destinationTopLeft, destinationTopRight, destinationBottomRight, destinationBottomLeft, sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft, maxSubdivision);\n        if (this.wrapsXInSource_) {\n            var leftBound_1 = Infinity;\n            this.triangles_.forEach(function (triangle, i, arr) {\n                leftBound_1 = Math.min(leftBound_1, triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n            });\n            // Shift triangles to be as close to `leftBound` as possible\n            // (if the distance is more than `worldWidth / 2` it can be closer.\n            this.triangles_.forEach(function (triangle) {\n                if (Math.max(triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]) -\n                    leftBound_1 >\n                    this.sourceWorldWidth_ / 2) {\n                    var newTriangle = [\n                        [triangle.source[0][0], triangle.source[0][1]],\n                        [triangle.source[1][0], triangle.source[1][1]],\n                        [triangle.source[2][0], triangle.source[2][1]],\n                    ];\n                    if (newTriangle[0][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[0][0] -= this.sourceWorldWidth_;\n                    }\n                    if (newTriangle[1][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[1][0] -= this.sourceWorldWidth_;\n                    }\n                    if (newTriangle[2][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[2][0] -= this.sourceWorldWidth_;\n                    }\n                    // Rarely (if the extent contains both the dateline and prime meridian)\n                    // the shift can in turn break some triangles.\n                    // Detect this here and don't shift in such cases.\n                    var minX = Math.min(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    var maxX = Math.max(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    if (maxX - minX < this.sourceWorldWidth_ / 2) {\n                        triangle.source = newTriangle;\n                    }\n                }\n            }.bind(this));\n        }\n        transformInvCache = {};\n    }\n    /**\n     * Adds triangle to the triangulation.\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @private\n     */\n    Triangulation.prototype.addTriangle_ = function (a, b, c, aSrc, bSrc, cSrc) {\n        this.triangles_.push({\n            source: [aSrc, bSrc, cSrc],\n            target: [a, b, c],\n        });\n    };\n    /**\n     * Adds quad (points in clock-wise order) to the triangulation\n     * (and reprojects the vertices) if valid.\n     * Performs quad subdivision if needed to increase precision.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n     * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n     * @private\n     */\n    Triangulation.prototype.addQuad_ = function (a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n        var sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n        var sourceCoverageX = this.sourceWorldWidth_\n            ? getWidth(sourceQuadExtent) / this.sourceWorldWidth_\n            : null;\n        var sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n        // when the quad is wrapped in the source projection\n        // it covers most of the projection extent, but not fully\n        var wrapsX = this.sourceProj_.canWrapX() &&\n            sourceCoverageX > 0.5 &&\n            sourceCoverageX < 1;\n        var needsSubdivision = false;\n        if (maxSubdivision > 0) {\n            if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n                var targetQuadExtent = boundingExtent([a, b, c, d]);\n                var targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n                needsSubdivision =\n                    targetCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n            }\n            if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n                needsSubdivision =\n                    sourceCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n            }\n        }\n        if (!needsSubdivision && this.maxSourceExtent_) {\n            if (isFinite(sourceQuadExtent[0]) &&\n                isFinite(sourceQuadExtent[1]) &&\n                isFinite(sourceQuadExtent[2]) &&\n                isFinite(sourceQuadExtent[3])) {\n                if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n                    // whole quad outside source projection extent -> ignore\n                    return;\n                }\n            }\n        }\n        var isNotFinite = 0;\n        if (!needsSubdivision) {\n            if (!isFinite(aSrc[0]) ||\n                !isFinite(aSrc[1]) ||\n                !isFinite(bSrc[0]) ||\n                !isFinite(bSrc[1]) ||\n                !isFinite(cSrc[0]) ||\n                !isFinite(cSrc[1]) ||\n                !isFinite(dSrc[0]) ||\n                !isFinite(dSrc[1])) {\n                if (maxSubdivision > 0) {\n                    needsSubdivision = true;\n                }\n                else {\n                    // It might be the case that only 1 of the points is infinite. In this case\n                    // we can draw a single triangle with the other three points\n                    isNotFinite =\n                        (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ? 8 : 0) +\n                            (!isFinite(bSrc[0]) || !isFinite(bSrc[1]) ? 4 : 0) +\n                            (!isFinite(cSrc[0]) || !isFinite(cSrc[1]) ? 2 : 0) +\n                            (!isFinite(dSrc[0]) || !isFinite(dSrc[1]) ? 1 : 0);\n                    if (isNotFinite != 1 &&\n                        isNotFinite != 2 &&\n                        isNotFinite != 4 &&\n                        isNotFinite != 8) {\n                        return;\n                    }\n                }\n            }\n        }\n        if (maxSubdivision > 0) {\n            if (!needsSubdivision) {\n                var center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n                var centerSrc = this.transformInv_(center);\n                var dx = void 0;\n                if (wrapsX) {\n                    var centerSrcEstimX = (modulo(aSrc[0], sourceWorldWidth) +\n                        modulo(cSrc[0], sourceWorldWidth)) /\n                        2;\n                    dx = centerSrcEstimX - modulo(centerSrc[0], sourceWorldWidth);\n                }\n                else {\n                    dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n                }\n                var dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n                var centerSrcErrorSquared = dx * dx + dy * dy;\n                needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n            }\n            if (needsSubdivision) {\n                if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n                    // split horizontally (top & bottom)\n                    var bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n                    var bcSrc = this.transformInv_(bc);\n                    var da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n                    var daSrc = this.transformInv_(da);\n                    this.addQuad_(a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n                    this.addQuad_(da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n                }\n                else {\n                    // split vertically (left & right)\n                    var ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n                    var abSrc = this.transformInv_(ab);\n                    var cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n                    var cdSrc = this.transformInv_(cd);\n                    this.addQuad_(a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n                    this.addQuad_(ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n                }\n                return;\n            }\n        }\n        if (wrapsX) {\n            if (!this.canWrapXInSource_) {\n                return;\n            }\n            this.wrapsXInSource_ = true;\n        }\n        // Exactly zero or one of *Src is not finite\n        // The triangles must have the diagonal line as the first side\n        // This is to allow easy code in reproj.s to make it straight for broken\n        // browsers that can't handle diagonal clipping\n        if ((isNotFinite & 0xb) == 0) {\n            this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n        }\n        if ((isNotFinite & 0xe) == 0) {\n            this.addTriangle_(a, c, b, aSrc, cSrc, bSrc);\n        }\n        if (isNotFinite) {\n            // Try the other two triangles\n            if ((isNotFinite & 0xd) == 0) {\n                this.addTriangle_(b, d, a, bSrc, dSrc, aSrc);\n            }\n            if ((isNotFinite & 0x7) == 0) {\n                this.addTriangle_(b, d, c, bSrc, dSrc, cSrc);\n            }\n        }\n    };\n    /**\n     * Calculates extent of the 'source' coordinates from all the triangles.\n     *\n     * @return {import(\"../extent.js\").Extent} Calculated extent.\n     */\n    Triangulation.prototype.calculateSourceExtent = function () {\n        var extent = createEmpty();\n        this.triangles_.forEach(function (triangle, i, arr) {\n            var src = triangle.source;\n            extendCoordinate(extent, src[0]);\n            extendCoordinate(extent, src[1]);\n            extendCoordinate(extent, src[2]);\n        });\n        return extent;\n    };\n    /**\n     * @return {Array<Triangle>} Array of the calculated triangles.\n     */\n    Triangulation.prototype.getTriangles = function () {\n        return this.triangles_;\n    };\n    return Triangulation;\n}());\nexport default Triangulation;\n//# sourceMappingURL=Triangulation.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/reproj/Tile\n */\nimport { ERROR_THRESHOLD } from './common.js';\nimport EventType from '../events/EventType.js';\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport Triangulation from './Triangulation.js';\nimport { calculateSourceExtentResolution, render as renderReprojected, } from '../reproj.js';\nimport { clamp } from '../math.js';\nimport { getArea, getIntersection } from '../extent.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nvar ReprojTile = /** @class */ (function (_super) {\n    __extends(ReprojTile, _super);\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n     * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {number} gutter Gutter of the source tiles.\n     * @param {FunctionType} getTileFunction\n     *     Function returning source tiles (z, x, y, pixelRatio).\n     * @param {number} [opt_errorThreshold] Acceptable reprojection error (in px).\n     * @param {boolean} [opt_renderEdges] Render reprojection edges.\n     * @param {boolean} [opt_interpolate] Use linear interpolation when resampling.\n     */\n    function ReprojTile(sourceProj, sourceTileGrid, targetProj, targetTileGrid, tileCoord, wrappedTileCoord, pixelRatio, gutter, getTileFunction, opt_errorThreshold, opt_renderEdges, opt_interpolate) {\n        var _this = _super.call(this, tileCoord, TileState.IDLE, { interpolate: !!opt_interpolate }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.gutter_ = gutter;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.sourceTileGrid_ = sourceTileGrid;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.targetTileGrid_ = targetTileGrid;\n        /**\n         * @private\n         * @type {import(\"../tilecoord.js\").TileCoord}\n         */\n        _this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n        /**\n         * @private\n         * @type {!Array<import(\"../Tile.js\").default>}\n         */\n        _this.sourceTiles_ = [];\n        /**\n         * @private\n         * @type {?Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.sourcesListenerKeys_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.sourceZ_ = 0;\n        var targetExtent = targetTileGrid.getTileCoordExtent(_this.wrappedTileCoord_);\n        var maxTargetExtent = _this.targetTileGrid_.getExtent();\n        var maxSourceExtent = _this.sourceTileGrid_.getExtent();\n        var limitedTargetExtent = maxTargetExtent\n            ? getIntersection(targetExtent, maxTargetExtent)\n            : targetExtent;\n        if (getArea(limitedTargetExtent) === 0) {\n            // Tile is completely outside range -> EMPTY\n            // TODO: is it actually correct that the source even creates the tile ?\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        var sourceProjExtent = sourceProj.getExtent();\n        if (sourceProjExtent) {\n            if (!maxSourceExtent) {\n                maxSourceExtent = sourceProjExtent;\n            }\n            else {\n                maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n            }\n        }\n        var targetResolution = targetTileGrid.getResolution(_this.wrappedTileCoord_[0]);\n        var sourceResolution = calculateSourceExtentResolution(sourceProj, targetProj, limitedTargetExtent, targetResolution);\n        if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n            // invalid sourceResolution -> EMPTY\n            // probably edges of the projections when no extent is defined\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        var errorThresholdInPixels = opt_errorThreshold !== undefined ? opt_errorThreshold : ERROR_THRESHOLD;\n        /**\n         * @private\n         * @type {!import(\"./Triangulation.js\").default}\n         */\n        _this.triangulation_ = new Triangulation(sourceProj, targetProj, limitedTargetExtent, maxSourceExtent, sourceResolution * errorThresholdInPixels, targetResolution);\n        if (_this.triangulation_.getTriangles().length === 0) {\n            // no valid triangles -> EMPTY\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        _this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n        var sourceExtent = _this.triangulation_.calculateSourceExtent();\n        if (maxSourceExtent) {\n            if (sourceProj.canWrapX()) {\n                sourceExtent[1] = clamp(sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n                sourceExtent[3] = clamp(sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n            }\n            else {\n                sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n            }\n        }\n        if (!getArea(sourceExtent)) {\n            _this.state = TileState.EMPTY;\n        }\n        else {\n            var sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(sourceExtent, _this.sourceZ_);\n            for (var srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n                for (var srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n                    var tile = getTileFunction(_this.sourceZ_, srcX, srcY, pixelRatio);\n                    if (tile) {\n                        _this.sourceTiles_.push(tile);\n                    }\n                }\n            }\n            if (_this.sourceTiles_.length === 0) {\n                _this.state = TileState.EMPTY;\n            }\n        }\n        return _this;\n    }\n    /**\n     * Get the HTML Canvas element for this tile.\n     * @return {HTMLCanvasElement} Canvas.\n     */\n    ReprojTile.prototype.getImage = function () {\n        return this.canvas_;\n    };\n    /**\n     * @private\n     */\n    ReprojTile.prototype.reproject_ = function () {\n        var sources = [];\n        this.sourceTiles_.forEach(function (tile, i, arr) {\n            if (tile && tile.getState() == TileState.LOADED) {\n                sources.push({\n                    extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n                    image: tile.getImage(),\n                });\n            }\n        }.bind(this));\n        this.sourceTiles_.length = 0;\n        if (sources.length === 0) {\n            this.state = TileState.ERROR;\n        }\n        else {\n            var z = this.wrappedTileCoord_[0];\n            var size = this.targetTileGrid_.getTileSize(z);\n            var width = typeof size === 'number' ? size : size[0];\n            var height = typeof size === 'number' ? size : size[1];\n            var targetResolution = this.targetTileGrid_.getResolution(z);\n            var sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n            var targetExtent = this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);\n            this.canvas_ = renderReprojected(width, height, this.pixelRatio_, sourceResolution, this.sourceTileGrid_.getExtent(), targetResolution, targetExtent, this.triangulation_, sources, this.gutter_, this.renderEdges_, this.interpolate);\n            this.state = TileState.LOADED;\n        }\n        this.changed();\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    ReprojTile.prototype.load = function () {\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            var leftToLoad_1 = 0;\n            this.sourcesListenerKeys_ = [];\n            this.sourceTiles_.forEach(function (tile, i, arr) {\n                var state = tile.getState();\n                if (state == TileState.IDLE || state == TileState.LOADING) {\n                    leftToLoad_1++;\n                    var sourceListenKey_1 = listen(tile, EventType.CHANGE, function (e) {\n                        var state = tile.getState();\n                        if (state == TileState.LOADED ||\n                            state == TileState.ERROR ||\n                            state == TileState.EMPTY) {\n                            unlistenByKey(sourceListenKey_1);\n                            leftToLoad_1--;\n                            if (leftToLoad_1 === 0) {\n                                this.unlistenSources_();\n                                this.reproject_();\n                            }\n                        }\n                    }, this);\n                    this.sourcesListenerKeys_.push(sourceListenKey_1);\n                }\n            }.bind(this));\n            if (leftToLoad_1 === 0) {\n                setTimeout(this.reproject_.bind(this), 0);\n            }\n            else {\n                this.sourceTiles_.forEach(function (tile, i, arr) {\n                    var state = tile.getState();\n                    if (state == TileState.IDLE) {\n                        tile.load();\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    ReprojTile.prototype.unlistenSources_ = function () {\n        this.sourcesListenerKeys_.forEach(unlistenByKey);\n        this.sourcesListenerKeys_ = null;\n    };\n    return ReprojTile;\n}(Tile));\nexport default ReprojTile;\n//# sourceMappingURL=Tile.js.map","/**\n * @module ol/structs/LRUCache\n */\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} Entry\n * @property {string} key_ Key.\n * @property {Object} newer Newer.\n * @property {Object} older Older.\n * @property {*} value_ Value.\n */\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").default\n * @template T\n */\nvar LRUCache = /** @class */ (function () {\n    /**\n     * @param {number} [opt_highWaterMark] High water mark.\n     */\n    function LRUCache(opt_highWaterMark) {\n        /**\n         * Desired max cache size after expireCache(). If set to 0, no cache entries\n         * will be pruned at all.\n         * @type {number}\n         */\n        this.highWaterMark =\n            opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.count_ = 0;\n        /**\n         * @private\n         * @type {!Object<string, Entry>}\n         */\n        this.entries_ = {};\n        /**\n         * @private\n         * @type {?Entry}\n         */\n        this.oldest_ = null;\n        /**\n         * @private\n         * @type {?Entry}\n         */\n        this.newest_ = null;\n    }\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    LRUCache.prototype.canExpireCache = function () {\n        return this.highWaterMark > 0 && this.getCount() > this.highWaterMark;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    LRUCache.prototype.clear = function () {\n        this.count_ = 0;\n        this.entries_ = {};\n        this.oldest_ = null;\n        this.newest_ = null;\n    };\n    /**\n     * @param {string} key Key.\n     * @return {boolean} Contains key.\n     */\n    LRUCache.prototype.containsKey = function (key) {\n        return this.entries_.hasOwnProperty(key);\n    };\n    /**\n     * @param {function(T, string, LRUCache<T>): ?} f The function\n     *     to call for every entry from the oldest to the newer. This function takes\n     *     3 arguments (the entry value, the entry key and the LRUCache object).\n     *     The return value is ignored.\n     */\n    LRUCache.prototype.forEach = function (f) {\n        var entry = this.oldest_;\n        while (entry) {\n            f(entry.value_, entry.key_, this);\n            entry = entry.newer;\n        }\n    };\n    /**\n     * @param {string} key Key.\n     * @param {*} [opt_options] Options (reserved for subclasses).\n     * @return {T} Value.\n     */\n    LRUCache.prototype.get = function (key, opt_options) {\n        var entry = this.entries_[key];\n        assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n        if (entry === this.newest_) {\n            return entry.value_;\n        }\n        else if (entry === this.oldest_) {\n            this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n            this.oldest_.older = null;\n        }\n        else {\n            entry.newer.older = entry.older;\n            entry.older.newer = entry.newer;\n        }\n        entry.newer = null;\n        entry.older = this.newest_;\n        this.newest_.newer = entry;\n        this.newest_ = entry;\n        return entry.value_;\n    };\n    /**\n     * Remove an entry from the cache.\n     * @param {string} key The entry key.\n     * @return {T} The removed entry.\n     */\n    LRUCache.prototype.remove = function (key) {\n        var entry = this.entries_[key];\n        assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n        if (entry === this.newest_) {\n            this.newest_ = /** @type {Entry} */ (entry.older);\n            if (this.newest_) {\n                this.newest_.newer = null;\n            }\n        }\n        else if (entry === this.oldest_) {\n            this.oldest_ = /** @type {Entry} */ (entry.newer);\n            if (this.oldest_) {\n                this.oldest_.older = null;\n            }\n        }\n        else {\n            entry.newer.older = entry.older;\n            entry.older.newer = entry.newer;\n        }\n        delete this.entries_[key];\n        --this.count_;\n        return entry.value_;\n    };\n    /**\n     * @return {number} Count.\n     */\n    LRUCache.prototype.getCount = function () {\n        return this.count_;\n    };\n    /**\n     * @return {Array<string>} Keys.\n     */\n    LRUCache.prototype.getKeys = function () {\n        var keys = new Array(this.count_);\n        var i = 0;\n        var entry;\n        for (entry = this.newest_; entry; entry = entry.older) {\n            keys[i++] = entry.key_;\n        }\n        return keys;\n    };\n    /**\n     * @return {Array<T>} Values.\n     */\n    LRUCache.prototype.getValues = function () {\n        var values = new Array(this.count_);\n        var i = 0;\n        var entry;\n        for (entry = this.newest_; entry; entry = entry.older) {\n            values[i++] = entry.value_;\n        }\n        return values;\n    };\n    /**\n     * @return {T} Last value.\n     */\n    LRUCache.prototype.peekLast = function () {\n        return this.oldest_.value_;\n    };\n    /**\n     * @return {string} Last key.\n     */\n    LRUCache.prototype.peekLastKey = function () {\n        return this.oldest_.key_;\n    };\n    /**\n     * Get the key of the newest item in the cache.  Throws if the cache is empty.\n     * @return {string} The newest key.\n     */\n    LRUCache.prototype.peekFirstKey = function () {\n        return this.newest_.key_;\n    };\n    /**\n     * @return {T} value Value.\n     */\n    LRUCache.prototype.pop = function () {\n        var entry = this.oldest_;\n        delete this.entries_[entry.key_];\n        if (entry.newer) {\n            entry.newer.older = null;\n        }\n        this.oldest_ = /** @type {Entry} */ (entry.newer);\n        if (!this.oldest_) {\n            this.newest_ = null;\n        }\n        --this.count_;\n        return entry.value_;\n    };\n    /**\n     * @param {string} key Key.\n     * @param {T} value Value.\n     */\n    LRUCache.prototype.replace = function (key, value) {\n        this.get(key); // update `newest_`\n        this.entries_[key].value_ = value;\n    };\n    /**\n     * @param {string} key Key.\n     * @param {T} value Value.\n     */\n    LRUCache.prototype.set = function (key, value) {\n        assert(!(key in this.entries_), 16); // Tried to set a value for a key that is used already\n        var entry = {\n            key_: key,\n            newer: null,\n            older: this.newest_,\n            value_: value,\n        };\n        if (!this.newest_) {\n            this.oldest_ = entry;\n        }\n        else {\n            this.newest_.newer = entry;\n        }\n        this.newest_ = entry;\n        this.entries_[key] = entry;\n        ++this.count_;\n    };\n    /**\n     * Set a maximum number of entries for the cache.\n     * @param {number} size Cache size.\n     * @api\n     */\n    LRUCache.prototype.setSize = function (size) {\n        this.highWaterMark = size;\n    };\n    return LRUCache;\n}());\nexport default LRUCache;\n//# sourceMappingURL=LRUCache.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport { fromKey, getKey } from './tilecoord.js';\nvar TileCache = /** @class */ (function (_super) {\n    __extends(TileCache, _super);\n    function TileCache() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @param {!Object<string, boolean>} usedTiles Used tiles.\n     */\n    TileCache.prototype.expireCache = function (usedTiles) {\n        while (this.canExpireCache()) {\n            var tile = this.peekLast();\n            if (tile.getKey() in usedTiles) {\n                break;\n            }\n            else {\n                this.pop().release();\n            }\n        }\n    };\n    /**\n     * Prune all tiles from the cache that don't have the same z as the newest tile.\n     */\n    TileCache.prototype.pruneExceptNewestZ = function () {\n        if (this.getCount() === 0) {\n            return;\n        }\n        var key = this.peekFirstKey();\n        var tileCoord = fromKey(key);\n        var z = tileCoord[0];\n        this.forEach(function (tile) {\n            if (tile.tileCoord[0] !== z) {\n                this.remove(getKey(tile.tileCoord));\n                tile.release();\n            }\n        }.bind(this));\n    };\n    return TileCache;\n}(LRUCache));\nexport default TileCache;\n//# sourceMappingURL=TileCache.js.map","/**\n * @module ol/source/TileEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a tile starts loading.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n     * @api\n     */\n    TILELOADSTART: 'tileloadstart',\n    /**\n     * Triggered when a tile finishes loading, either when its data is loaded,\n     * or when loading was aborted because the tile is no longer needed.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n     * @api\n     */\n    TILELOADEND: 'tileloadend',\n    /**\n     * Triggered if tile loading results in an error.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n     * @api\n     */\n    TILELOADERROR: 'tileloaderror',\n};\n/**\n * @typedef {'tileloadstart'|'tileloadend'|'tileloaderror'} TileSourceEventTypes\n */\n//# sourceMappingURL=TileEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Tile\n */\nimport Event from '../events/Event.js';\nimport Source from './Source.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport { abstract } from '../util.js';\nimport { assert } from '../asserts.js';\nimport { equivalent } from '../proj.js';\nimport { getKeyZXY, withinExtentAndZ } from '../tilecoord.js';\nimport { getForProjection as getTileGridForProjection, wrapX, } from '../tilegrid.js';\nimport { scale as scaleSize, toSize } from '../size.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./TileEventType\").TileSourceEventTypes, TileSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./TileEventType\").TileSourceEventTypes, Return>} TileSourceOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] CacheSize.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {number} [tilePixelRatio] TilePixelRatio.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {import(\"./State.js\").default} [state] State.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] TileGrid.\n * @property {boolean} [wrapX=false] WrapX.\n * @property {number} [transition] Transition.\n * @property {string} [key] Key.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0] ZDirection.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nvar TileSource = /** @class */ (function (_super) {\n    __extends(TileSource, _super);\n    /**\n     * @param {Options} options SourceTile source options.\n     */\n    function TileSource(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            attributionsCollapsible: options.attributionsCollapsible,\n            projection: options.projection,\n            state: options.state,\n            wrapX: options.wrapX,\n            interpolate: options.interpolate,\n        }) || this;\n        /***\n         * @type {TileSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {TileSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {TileSourceOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.tilePixelRatio_ =\n            options.tilePixelRatio !== undefined ? options.tilePixelRatio : 1;\n        /**\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n        var tileSize = [256, 256];\n        var tileGrid = options.tileGrid;\n        if (tileGrid) {\n            toSize(tileGrid.getTileSize(tileGrid.getMinZoom()), tileSize);\n        }\n        /**\n         * @protected\n         * @type {import(\"../TileCache.js\").default}\n         */\n        _this.tileCache = new TileCache(options.cacheSize || 0);\n        /**\n         * @protected\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.tmpSize = [0, 0];\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.key_ = options.key || '';\n        /**\n         * @protected\n         * @type {import(\"../Tile.js\").Options}\n         */\n        _this.tileOptions = {\n            transition: options.transition,\n            interpolate: options.interpolate,\n        };\n        /**\n         * zDirection hint, read by the renderer. Indicates which resolution should be used\n         * by a renderer if the views resolution does not match any resolution of the tile source.\n         * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n         * will be used. If -1, the nearest higher resolution will be used.\n         * @type {number|import(\"../array.js\").NearestDirectionFunction}\n         */\n        _this.zDirection = options.zDirection ? options.zDirection : 0;\n        return _this;\n    }\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    TileSource.prototype.canExpireCache = function () {\n        return this.tileCache.canExpireCache();\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {!Object<string, boolean>} usedTiles Used tiles.\n     */\n    TileSource.prototype.expireCache = function (projection, usedTiles) {\n        var tileCache = this.getTileCacheForProjection(projection);\n        if (tileCache) {\n            tileCache.expireCache(usedTiles);\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {number} z Zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n     *     loaded tile.  If the callback returns `false`, the tile will not be\n     *     considered loaded.\n     * @return {boolean} The tile range is fully covered with loaded tiles.\n     */\n    TileSource.prototype.forEachLoadedTile = function (projection, z, tileRange, callback) {\n        var tileCache = this.getTileCacheForProjection(projection);\n        if (!tileCache) {\n            return false;\n        }\n        var covered = true;\n        var tile, tileCoordKey, loaded;\n        for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n            for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                tileCoordKey = getKeyZXY(z, x, y);\n                loaded = false;\n                if (tileCache.containsKey(tileCoordKey)) {\n                    tile = /** @type {!import(\"../Tile.js\").default} */ (tileCache.get(tileCoordKey));\n                    loaded = tile.getState() === TileState.LOADED;\n                    if (loaded) {\n                        loaded = callback(tile) !== false;\n                    }\n                }\n                if (!loaded) {\n                    covered = false;\n                }\n            }\n        }\n        return covered;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {number} Gutter.\n     */\n    TileSource.prototype.getGutterForProjection = function (projection) {\n        return 0;\n    };\n    /**\n     * Return the key to be used for all tiles in the source.\n     * @return {string} The key for all tiles.\n     */\n    TileSource.prototype.getKey = function () {\n        return this.key_;\n    };\n    /**\n     * Set the value to be used as the key for all tiles in the source.\n     * @param {string} key The key for tiles.\n     * @protected\n     */\n    TileSource.prototype.setKey = function (key) {\n        if (this.key_ !== key) {\n            this.key_ = key;\n            this.changed();\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {boolean} Opaque.\n     */\n    TileSource.prototype.getOpaque = function (projection) {\n        return this.opaque_;\n    };\n    /**\n     * @return {Array<number>} Resolutions.\n     */\n    TileSource.prototype.getResolutions = function () {\n        return this.tileGrid.getResolutions();\n    };\n    /**\n     * @abstract\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../Tile.js\").default} Tile.\n     */\n    TileSource.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n        return abstract();\n    };\n    /**\n     * Return the tile grid of the tile source.\n     * @return {import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n     * @api\n     */\n    TileSource.prototype.getTileGrid = function () {\n        return this.tileGrid;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n     */\n    TileSource.prototype.getTileGridForProjection = function (projection) {\n        if (!this.tileGrid) {\n            return getTileGridForProjection(projection);\n        }\n        else {\n            return this.tileGrid;\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../TileCache.js\").default} Tile cache.\n     * @protected\n     */\n    TileSource.prototype.getTileCacheForProjection = function (projection) {\n        assert(equivalent(this.getProjection(), projection), 68 // A VectorTile source can only be rendered if it has a projection compatible with the view projection.\n        );\n        return this.tileCache;\n    };\n    /**\n     * Get the tile pixel ratio for this source. Subclasses may override this\n     * method, which is meant to return a supported pixel ratio that matches the\n     * provided `pixelRatio` as close as possible.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Tile pixel ratio.\n     */\n    TileSource.prototype.getTilePixelRatio = function (pixelRatio) {\n        return this.tilePixelRatio_;\n    };\n    /**\n     * @param {number} z Z.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../size.js\").Size} Tile size.\n     */\n    TileSource.prototype.getTilePixelSize = function (z, pixelRatio, projection) {\n        var tileGrid = this.getTileGridForProjection(projection);\n        var tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n        var tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n        if (tilePixelRatio == 1) {\n            return tileSize;\n        }\n        else {\n            return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n        }\n    };\n    /**\n     * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n     * is outside the resolution and extent range of the tile grid, `null` will be\n     * returned.\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../proj/Projection.js\").default} [opt_projection] Projection.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n     *     null if no tile URL should be created for the passed `tileCoord`.\n     */\n    TileSource.prototype.getTileCoordForTileUrlFunction = function (tileCoord, opt_projection) {\n        var projection = opt_projection !== undefined ? opt_projection : this.getProjection();\n        var tileGrid = this.getTileGridForProjection(projection);\n        if (this.getWrapX() && projection.isGlobal()) {\n            tileCoord = wrapX(tileGrid, tileCoord, projection);\n        }\n        return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n    };\n    /**\n     * Remove all cached tiles from the source. The next render cycle will fetch new tiles.\n     * @api\n     */\n    TileSource.prototype.clear = function () {\n        this.tileCache.clear();\n    };\n    TileSource.prototype.refresh = function () {\n        this.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Increases the cache size if needed\n     * @param {number} tileCount Minimum number of tiles needed.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    TileSource.prototype.updateCacheSize = function (tileCount, projection) {\n        var tileCache = this.getTileCacheForProjection(projection);\n        if (tileCount > tileCache.highWaterMark) {\n            tileCache.highWaterMark = tileCount;\n        }\n    };\n    /**\n     * Marks a tile coord as being used, without triggering a load.\n     * @abstract\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    TileSource.prototype.useTile = function (z, x, y, projection) { };\n    return TileSource;\n}(Source));\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nvar TileSourceEvent = /** @class */ (function (_super) {\n    __extends(TileSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Tile.js\").default} tile The tile.\n     */\n    function TileSourceEvent(type, tile) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The tile related to the event.\n         * @type {import(\"../Tile.js\").default}\n         * @api\n         */\n        _this.tile = tile;\n        return _this;\n    }\n    return TileSourceEvent;\n}(Event));\nexport { TileSourceEvent };\nexport default TileSource;\n//# sourceMappingURL=Tile.js.map","/**\n * @module ol/tileurlfunction\n */\nimport { assert } from './asserts.js';\nimport { modulo } from './math.js';\nimport { hash as tileCoordHash } from './tilecoord.js';\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n    var zRegEx = /\\{z\\}/g;\n    var xRegEx = /\\{x\\}/g;\n    var yRegEx = /\\{y\\}/g;\n    var dashYRegEx = /\\{-y\\}/g;\n    return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n            return undefined;\n        }\n        else {\n            return template\n                .replace(zRegEx, tileCoord[0].toString())\n                .replace(xRegEx, tileCoord[1].toString())\n                .replace(yRegEx, tileCoord[2].toString())\n                .replace(dashYRegEx, function () {\n                var z = tileCoord[0];\n                var range = tileGrid.getFullTileRange(z);\n                assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n                var y = range.getHeight() - tileCoord[2] - 1;\n                return y.toString();\n            });\n        }\n    });\n}\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n    var len = templates.length;\n    var tileUrlFunctions = new Array(len);\n    for (var i = 0; i < len; ++i) {\n        tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n    }\n    return createFromTileUrlFunctions(tileUrlFunctions);\n}\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n    if (tileUrlFunctions.length === 1) {\n        return tileUrlFunctions[0];\n    }\n    return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n            return undefined;\n        }\n        else {\n            var h = tileCoordHash(tileCoord);\n            var index = modulo(h, tileUrlFunctions.length);\n            return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n        }\n    });\n}\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n    return undefined;\n}\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n    var urls = [];\n    var match = /\\{([a-z])-([a-z])\\}/.exec(url);\n    if (match) {\n        // char range\n        var startCharCode = match[1].charCodeAt(0);\n        var stopCharCode = match[2].charCodeAt(0);\n        var charCode = void 0;\n        for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n            urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n        }\n        return urls;\n    }\n    match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n    if (match) {\n        // number range\n        var stop_1 = parseInt(match[2], 10);\n        for (var i = parseInt(match[1], 10); i <= stop_1; i++) {\n            urls.push(url.replace(match[0], i.toString()));\n        }\n        return urls;\n    }\n    urls.push(url);\n    return urls;\n}\n//# sourceMappingURL=tileurlfunction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/UrlTile\n */\nimport TileEventType from './TileEventType.js';\nimport TileSource, { TileSourceEvent } from './Tile.js';\nimport TileState from '../TileState.js';\nimport { createFromTemplates, expandUrl } from '../tileurlfunction.js';\nimport { getKeyZXY } from '../tilecoord.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Cache size.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {import(\"./State.js\").default} [state] State.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] TileGrid.\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction TileLoadFunction.\n * @property {number} [tilePixelRatio] TilePixelRatio.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] TileUrlFunction.\n * @property {string} [url] Url.\n * @property {Array<string>} [urls] Urls.\n * @property {boolean} [wrapX=true] WrapX.\n * @property {number} [transition] Transition.\n * @property {string} [key] Key.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0] ZDirection.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nvar UrlTile = /** @class */ (function (_super) {\n    __extends(UrlTile, _super);\n    /**\n     * @param {Options} options Image tile options.\n     */\n    function UrlTile(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            opaque: options.opaque,\n            projection: options.projection,\n            state: options.state,\n            tileGrid: options.tileGrid,\n            tilePixelRatio: options.tilePixelRatio,\n            wrapX: options.wrapX,\n            transition: options.transition,\n            interpolate: options.interpolate,\n            key: options.key,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.generateTileUrlFunction_ =\n            _this.tileUrlFunction === UrlTile.prototype.tileUrlFunction;\n        /**\n         * @protected\n         * @type {import(\"../Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction = options.tileLoadFunction;\n        if (options.tileUrlFunction) {\n            _this.tileUrlFunction = options.tileUrlFunction;\n        }\n        /**\n         * @protected\n         * @type {!Array<string>|null}\n         */\n        _this.urls = null;\n        if (options.urls) {\n            _this.setUrls(options.urls);\n        }\n        else if (options.url) {\n            _this.setUrl(options.url);\n        }\n        /**\n         * @private\n         * @type {!Object<string, boolean>}\n         */\n        _this.tileLoadingKeys_ = {};\n        return _this;\n    }\n    /**\n     * Return the tile load function of the source.\n     * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n     * @api\n     */\n    UrlTile.prototype.getTileLoadFunction = function () {\n        return this.tileLoadFunction;\n    };\n    /**\n     * Return the tile URL function of the source.\n     * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n     * @api\n     */\n    UrlTile.prototype.getTileUrlFunction = function () {\n        return Object.getPrototypeOf(this).tileUrlFunction === this.tileUrlFunction\n            ? this.tileUrlFunction.bind(this)\n            : this.tileUrlFunction;\n    };\n    /**\n     * Return the URLs used for this source.\n     * When a tileUrlFunction is used instead of url or urls,\n     * null will be returned.\n     * @return {!Array<string>|null} URLs.\n     * @api\n     */\n    UrlTile.prototype.getUrls = function () {\n        return this.urls;\n    };\n    /**\n     * Handle tile change events.\n     * @param {import(\"../events/Event.js\").default} event Event.\n     * @protected\n     */\n    UrlTile.prototype.handleTileChange = function (event) {\n        var tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n        var uid = getUid(tile);\n        var tileState = tile.getState();\n        var type;\n        if (tileState == TileState.LOADING) {\n            this.tileLoadingKeys_[uid] = true;\n            type = TileEventType.TILELOADSTART;\n        }\n        else if (uid in this.tileLoadingKeys_) {\n            delete this.tileLoadingKeys_[uid];\n            type =\n                tileState == TileState.ERROR\n                    ? TileEventType.TILELOADERROR\n                    : tileState == TileState.LOADED\n                        ? TileEventType.TILELOADEND\n                        : undefined;\n        }\n        if (type != undefined) {\n            this.dispatchEvent(new TileSourceEvent(type, tile));\n        }\n    };\n    /**\n     * Set the tile load function of the source.\n     * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @api\n     */\n    UrlTile.prototype.setTileLoadFunction = function (tileLoadFunction) {\n        this.tileCache.clear();\n        this.tileLoadFunction = tileLoadFunction;\n        this.changed();\n    };\n    /**\n     * Set the tile URL function of the source.\n     * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n     * @param {string} [key] Optional new tile key for the source.\n     * @api\n     */\n    UrlTile.prototype.setTileUrlFunction = function (tileUrlFunction, key) {\n        this.tileUrlFunction = tileUrlFunction;\n        this.tileCache.pruneExceptNewestZ();\n        if (typeof key !== 'undefined') {\n            this.setKey(key);\n        }\n        else {\n            this.changed();\n        }\n    };\n    /**\n     * Set the URL to use for requests.\n     * @param {string} url URL.\n     * @api\n     */\n    UrlTile.prototype.setUrl = function (url) {\n        var urls = expandUrl(url);\n        this.urls = urls;\n        this.setUrls(urls);\n    };\n    /**\n     * Set the URLs to use for requests.\n     * @param {Array<string>} urls URLs.\n     * @api\n     */\n    UrlTile.prototype.setUrls = function (urls) {\n        this.urls = urls;\n        var key = urls.join('\\n');\n        if (this.generateTileUrlFunction_) {\n            this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n        }\n        else {\n            this.setKey(key);\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    UrlTile.prototype.tileUrlFunction = function (tileCoord, pixelRatio, projection) {\n        return undefined;\n    };\n    /**\n     * Marks a tile coord as being used, without triggering a load.\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     */\n    UrlTile.prototype.useTile = function (z, x, y) {\n        var tileCoordKey = getKeyZXY(z, x, y);\n        if (this.tileCache.containsKey(tileCoordKey)) {\n            this.tileCache.get(tileCoordKey);\n        }\n    };\n    return UrlTile;\n}(TileSource));\nexport default UrlTile;\n//# sourceMappingURL=UrlTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/TileImage\n */\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport UrlTile from './UrlTile.js';\nimport { ENABLE_RASTER_REPROJECTION } from '../reproj/common.js';\nimport { equivalent, get as getProjection } from '../proj.js';\nimport { getKey, getKeyZXY } from '../tilecoord.js';\nimport { getForProjection as getTileGridForProjection } from '../tilegrid.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [imageSmoothing=true] Deprecated.  Use the `interpolate` option instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nvar TileImage = /** @class */ (function (_super) {\n    __extends(TileImage, _super);\n    /**\n     * @param {!Options} options Image tile options.\n     */\n    function TileImage(options) {\n        var _this = this;\n        var interpolate = options.imageSmoothing !== undefined ? options.imageSmoothing : true;\n        if (options.interpolate !== undefined) {\n            interpolate = options.interpolate;\n        }\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            opaque: options.opaque,\n            projection: options.projection,\n            state: options.state,\n            tileGrid: options.tileGrid,\n            tileLoadFunction: options.tileLoadFunction\n                ? options.tileLoadFunction\n                : defaultTileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX,\n            transition: options.transition,\n            interpolate: interpolate,\n            key: options.key,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @protected\n         * @type {?string}\n         */\n        _this.crossOrigin =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @protected\n         * @type {typeof ImageTile}\n         */\n        _this.tileClass =\n            options.tileClass !== undefined ? options.tileClass : ImageTile;\n        /**\n         * @protected\n         * @type {!Object<string, TileCache>}\n         */\n        _this.tileCacheForProjection = {};\n        /**\n         * @protected\n         * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n         */\n        _this.tileGridForProjection = {};\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderReprojectionEdges_ = false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    TileImage.prototype.canExpireCache = function () {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.canExpireCache.call(this);\n        }\n        if (this.tileCache.canExpireCache()) {\n            return true;\n        }\n        else {\n            for (var key in this.tileCacheForProjection) {\n                if (this.tileCacheForProjection[key].canExpireCache()) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {!Object<string, boolean>} usedTiles Used tiles.\n     */\n    TileImage.prototype.expireCache = function (projection, usedTiles) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            _super.prototype.expireCache.call(this, projection, usedTiles);\n            return;\n        }\n        var usedTileCache = this.getTileCacheForProjection(projection);\n        this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n        for (var id in this.tileCacheForProjection) {\n            var tileCache = this.tileCacheForProjection[id];\n            tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {number} Gutter.\n     */\n    TileImage.prototype.getGutterForProjection = function (projection) {\n        if (ENABLE_RASTER_REPROJECTION &&\n            this.getProjection() &&\n            projection &&\n            !equivalent(this.getProjection(), projection)) {\n            return 0;\n        }\n        else {\n            return this.getGutter();\n        }\n    };\n    /**\n     * @return {number} Gutter.\n     */\n    TileImage.prototype.getGutter = function () {\n        return 0;\n    };\n    /**\n     * Return the key to be used for all tiles in the source.\n     * @return {string} The key for all tiles.\n     */\n    TileImage.prototype.getKey = function () {\n        var key = _super.prototype.getKey.call(this);\n        if (!this.getInterpolate()) {\n            key += ':disable-interpolation';\n        }\n        return key;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {boolean} Opaque.\n     */\n    TileImage.prototype.getOpaque = function (projection) {\n        if (ENABLE_RASTER_REPROJECTION &&\n            this.getProjection() &&\n            projection &&\n            !equivalent(this.getProjection(), projection)) {\n            return false;\n        }\n        else {\n            return _super.prototype.getOpaque.call(this, projection);\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n     */\n    TileImage.prototype.getTileGridForProjection = function (projection) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.getTileGridForProjection.call(this, projection);\n        }\n        var thisProj = this.getProjection();\n        if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n            return this.tileGrid;\n        }\n        else {\n            var projKey = getUid(projection);\n            if (!(projKey in this.tileGridForProjection)) {\n                this.tileGridForProjection[projKey] =\n                    getTileGridForProjection(projection);\n            }\n            return this.tileGridForProjection[projKey];\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../TileCache.js\").default} Tile cache.\n     */\n    TileImage.prototype.getTileCacheForProjection = function (projection) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.getTileCacheForProjection.call(this, projection);\n        }\n        var thisProj = this.getProjection();\n        if (!thisProj || equivalent(thisProj, projection)) {\n            return this.tileCache;\n        }\n        else {\n            var projKey = getUid(projection);\n            if (!(projKey in this.tileCacheForProjection)) {\n                this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n            }\n            return this.tileCacheForProjection[projKey];\n        }\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {string} key The key set on the tile.\n     * @return {!ImageTile} Tile.\n     * @private\n     */\n    TileImage.prototype.createTile_ = function (z, x, y, pixelRatio, projection, key) {\n        var tileCoord = [z, x, y];\n        var urlTileCoord = this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        var tileUrl = urlTileCoord\n            ? this.tileUrlFunction(urlTileCoord, pixelRatio, projection)\n            : undefined;\n        var tile = new this.tileClass(tileCoord, tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY, tileUrl !== undefined ? tileUrl : '', this.crossOrigin, this.tileLoadFunction, this.tileOptions);\n        tile.key = key;\n        tile.addEventListener(EventType.CHANGE, this.handleTileChange.bind(this));\n        return tile;\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!(ImageTile|ReprojTile)} Tile.\n     */\n    TileImage.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n        var sourceProjection = this.getProjection();\n        if (!ENABLE_RASTER_REPROJECTION ||\n            !sourceProjection ||\n            !projection ||\n            equivalent(sourceProjection, projection)) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n        }\n        else {\n            var cache = this.getTileCacheForProjection(projection);\n            var tileCoord = [z, x, y];\n            var tile = void 0;\n            var tileCoordKey = getKey(tileCoord);\n            if (cache.containsKey(tileCoordKey)) {\n                tile = cache.get(tileCoordKey);\n            }\n            var key = this.getKey();\n            if (tile && tile.key == key) {\n                return tile;\n            }\n            else {\n                var sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n                var targetTileGrid = this.getTileGridForProjection(projection);\n                var wrappedTileCoord = this.getTileCoordForTileUrlFunction(tileCoord, projection);\n                var newTile = new ReprojTile(sourceProjection, sourceTileGrid, projection, targetTileGrid, tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio), this.getGutter(), function (z, x, y, pixelRatio) {\n                    return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n                }.bind(this), this.reprojectionErrorThreshold_, this.renderReprojectionEdges_, this.getInterpolate());\n                newTile.key = key;\n                if (tile) {\n                    newTile.interimTile = tile;\n                    newTile.refreshInterimChain();\n                    cache.replace(tileCoordKey, newTile);\n                }\n                else {\n                    cache.set(tileCoordKey, newTile);\n                }\n                return newTile;\n            }\n        }\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!(ImageTile|ReprojTile)} Tile.\n     * @protected\n     */\n    TileImage.prototype.getTileInternal = function (z, x, y, pixelRatio, projection) {\n        var tile = null;\n        var tileCoordKey = getKeyZXY(z, x, y);\n        var key = this.getKey();\n        if (!this.tileCache.containsKey(tileCoordKey)) {\n            tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n            this.tileCache.set(tileCoordKey, tile);\n        }\n        else {\n            tile = this.tileCache.get(tileCoordKey);\n            if (tile.key != key) {\n                // The source's params changed. If the tile has an interim tile and if we\n                // can use it then we use it. Otherwise we create a new tile.  In both\n                // cases we attempt to assign an interim tile to the new tile.\n                var interimTile = tile;\n                tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n                //make the new tile the head of the list,\n                if (interimTile.getState() == TileState.IDLE) {\n                    //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n                    tile.interimTile = interimTile.interimTile;\n                }\n                else {\n                    tile.interimTile = interimTile;\n                }\n                tile.refreshInterimChain();\n                this.tileCache.replace(tileCoordKey, tile);\n            }\n        }\n        return tile;\n    };\n    /**\n     * Sets whether to render reprojection edges or not (usually for debugging).\n     * @param {boolean} render Render the edges.\n     * @api\n     */\n    TileImage.prototype.setRenderReprojectionEdges = function (render) {\n        if (!ENABLE_RASTER_REPROJECTION ||\n            this.renderReprojectionEdges_ == render) {\n            return;\n        }\n        this.renderReprojectionEdges_ = render;\n        for (var id in this.tileCacheForProjection) {\n            this.tileCacheForProjection[id].clear();\n        }\n        this.changed();\n    };\n    /**\n     * Sets the tile grid to use when reprojecting the tiles to the given\n     * projection instead of the default tile grid for the projection.\n     *\n     * This can be useful when the default tile grid cannot be created\n     * (e.g. projection has no extent defined) or\n     * for optimization reasons (custom tile size, resolutions, ...).\n     *\n     * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n     * @api\n     */\n    TileImage.prototype.setTileGridForProjection = function (projection, tilegrid) {\n        if (ENABLE_RASTER_REPROJECTION) {\n            var proj = getProjection(projection);\n            if (proj) {\n                var projKey = getUid(proj);\n                if (!(projKey in this.tileGridForProjection)) {\n                    this.tileGridForProjection[projKey] = tilegrid;\n                }\n            }\n        }\n    };\n    return TileImage;\n}(UrlTile));\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n    /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src =\n        src;\n}\nexport default TileImage;\n//# sourceMappingURL=TileImage.js.map","/**\n * @module ol/source/XYZ\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TileImage from './TileImage.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [imageSmoothing=true] Deprecated.  Use the `interpolate` option instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=42] Optional max zoom level. Not used if `tileGrid` is provided.\n * @property {number} [minZoom=0] Optional min zoom level. Not used if `tileGrid` is provided.\n * @property {number} [maxResolution] Optional tile grid resolution at level zero. Not used if `tileGrid` is provided.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Not used if `tileGrid` is provided.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if `url` or `urls` are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case\n * a `tileUrlFunction` can be used, such as:\n * ```js\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *      coordinate[1] + '/' + (-coordinate[2] - 1) + '.png';\n *  }\n * ```\n * @api\n */\nvar XYZ = /** @class */ (function (_super) {\n    __extends(XYZ, _super);\n    /**\n     * @param {Options} [opt_options] XYZ options.\n     */\n    function XYZ(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var interpolate = options.imageSmoothing !== undefined ? options.imageSmoothing : true;\n        if (options.interpolate !== undefined) {\n            interpolate = options.interpolate;\n        }\n        var projection = options.projection !== undefined ? options.projection : 'EPSG:3857';\n        var tileGrid = options.tileGrid !== undefined\n            ? options.tileGrid\n            : createXYZ({\n                extent: extentFromProjection(projection),\n                maxResolution: options.maxResolution,\n                maxZoom: options.maxZoom,\n                minZoom: options.minZoom,\n                tileSize: options.tileSize,\n            });\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            projection: projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileGrid: tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection,\n        }) || this;\n        return _this;\n    }\n    return XYZ;\n}(TileImage));\nexport default XYZ;\n//# sourceMappingURL=XYZ.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature<import(\"./geom/Geometry.js\").default>|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature<Geometry>} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = /** @type {Feature<Geometry>} */ (new Feature(this.hasProperties() ? this.getProperties() : null));\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","/**\n * @module ol/source/Cluster\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\nimport { add as addCoordinate, scale as scaleCoordinate } from '../coordinate.js';\nimport { assert } from '../asserts.js';\nimport { buffer, createEmpty, createOrUpdateFromCoordinate, getCenter, } from '../extent.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Distance in pixels within which features will\n * be clustered together.\n * @property {number} [minDistance=0] Minimum distance in pixels between clusters.\n * Will be capped at the configured distance.\n * By default no minimum distance is guaranteed. This config can be used to avoid\n * overlapping icons. As a tradoff, the cluster feature's position will no longer be\n * the center of all its features.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underlying source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {function(Point, Array<Feature>):Feature} [createCluster]\n * Function that takes the cluster's center {@link module:ol/geom/Point} and an array\n * of {@link module:ol/Feature} included in this cluster. Must return a\n * {@link module:ol/Feature} that will be used to render. Default implementation is:\n * ```js\n * function(point, features) {\n *   return new Feature({\n *     geometry: point,\n *     features: features\n *   });\n * }\n * ```\n * @property {VectorSource} [source] Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * If the instance is disposed without also disposing the underlying\n * source `setSource(null)` has to be called to remove the listener reference\n * from the wrapped source.\n * @api\n */\nvar Cluster = /** @class */ (function (_super) {\n    __extends(Cluster, _super);\n    /**\n     * @param {Options} options Cluster options.\n     */\n    function Cluster(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            wrapX: options.wrapX,\n        }) || this;\n        /**\n         * @type {number|undefined}\n         * @protected\n         */\n        _this.resolution = undefined;\n        /**\n         * @type {number}\n         * @protected\n         */\n        _this.distance = options.distance !== undefined ? options.distance : 20;\n        /**\n         * @type {number}\n         * @protected\n         */\n        _this.minDistance = options.minDistance || 0;\n        /**\n         * @type {number}\n         * @protected\n         */\n        _this.interpolationRatio = 0;\n        /**\n         * @type {Array<Feature>}\n         * @protected\n         */\n        _this.features = [];\n        /**\n         * @param {Feature} feature Feature.\n         * @return {Point} Cluster calculation point.\n         * @protected\n         */\n        _this.geometryFunction =\n            options.geometryFunction ||\n                function (feature) {\n                    var geometry = feature.getGeometry();\n                    assert(geometry.getType() == GeometryType.POINT, 10); // The default `geometryFunction` can only handle `Point` geometries\n                    return geometry;\n                };\n        /**\n         * @type {function(Point, Array<Feature>):Feature}\n         * @private\n         */\n        _this.createCustomCluster_ = options.createCluster;\n        /**\n         * @type {VectorSource}\n         * @protected\n         */\n        _this.source = null;\n        _this.boundRefresh_ = _this.refresh.bind(_this);\n        _this.updateDistance(_this.distance, _this.minDistance);\n        _this.setSource(options.source || null);\n        return _this;\n    }\n    /**\n     * Remove all features from the source.\n     * @param {boolean} [opt_fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n     * @api\n     */\n    Cluster.prototype.clear = function (opt_fast) {\n        this.features.length = 0;\n        _super.prototype.clear.call(this, opt_fast);\n    };\n    /**\n     * Get the distance in pixels between clusters.\n     * @return {number} Distance.\n     * @api\n     */\n    Cluster.prototype.getDistance = function () {\n        return this.distance;\n    };\n    /**\n     * Get a reference to the wrapped source.\n     * @return {VectorSource} Source.\n     * @api\n     */\n    Cluster.prototype.getSource = function () {\n        return this.source;\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    Cluster.prototype.loadFeatures = function (extent, resolution, projection) {\n        this.source.loadFeatures(extent, resolution, projection);\n        if (resolution !== this.resolution) {\n            this.resolution = resolution;\n            this.refresh();\n        }\n    };\n    /**\n     * Set the distance within which features will be clusterd together.\n     * @param {number} distance The distance in pixels.\n     * @api\n     */\n    Cluster.prototype.setDistance = function (distance) {\n        this.updateDistance(distance, this.minDistance);\n    };\n    /**\n     * Set the minimum distance between clusters. Will be capped at the\n     * configured distance.\n     * @param {number} minDistance The minimum distance in pixels.\n     * @api\n     */\n    Cluster.prototype.setMinDistance = function (minDistance) {\n        this.updateDistance(this.distance, minDistance);\n    };\n    /**\n     * The configured minimum distance between clusters.\n     * @return {number} The minimum distance in pixels.\n     * @api\n     */\n    Cluster.prototype.getMinDistance = function () {\n        return this.minDistance;\n    };\n    /**\n     * Replace the wrapped source.\n     * @param {VectorSource} source The new source for this instance.\n     * @api\n     */\n    Cluster.prototype.setSource = function (source) {\n        if (this.source) {\n            this.source.removeEventListener(EventType.CHANGE, this.boundRefresh_);\n        }\n        this.source = source;\n        if (source) {\n            source.addEventListener(EventType.CHANGE, this.boundRefresh_);\n        }\n        this.refresh();\n    };\n    /**\n     * Handle the source changing.\n     */\n    Cluster.prototype.refresh = function () {\n        this.clear();\n        this.cluster();\n        this.addFeatures(this.features);\n    };\n    /**\n     * Update the distances and refresh the source if necessary.\n     * @param {number} distance The new distance.\n     * @param {number} minDistance The new minimum distance.\n     */\n    Cluster.prototype.updateDistance = function (distance, minDistance) {\n        var ratio = distance === 0 ? 0 : Math.min(minDistance, distance) / distance;\n        var changed = distance !== this.distance || this.interpolationRatio !== ratio;\n        this.distance = distance;\n        this.minDistance = minDistance;\n        this.interpolationRatio = ratio;\n        if (changed) {\n            this.refresh();\n        }\n    };\n    /**\n     * @protected\n     */\n    Cluster.prototype.cluster = function () {\n        if (this.resolution === undefined || !this.source) {\n            return;\n        }\n        var extent = createEmpty();\n        var mapDistance = this.distance * this.resolution;\n        var features = this.source.getFeatures();\n        /** @type {Object<string, true>} */\n        var clustered = {};\n        for (var i = 0, ii = features.length; i < ii; i++) {\n            var feature = features[i];\n            if (!(getUid(feature) in clustered)) {\n                var geometry = this.geometryFunction(feature);\n                if (geometry) {\n                    var coordinates = geometry.getCoordinates();\n                    createOrUpdateFromCoordinate(coordinates, extent);\n                    buffer(extent, mapDistance, extent);\n                    var neighbors = this.source\n                        .getFeaturesInExtent(extent)\n                        .filter(function (neighbor) {\n                        var uid = getUid(neighbor);\n                        if (uid in clustered) {\n                            return false;\n                        }\n                        clustered[uid] = true;\n                        return true;\n                    });\n                    this.features.push(this.createCluster(neighbors, extent));\n                }\n            }\n        }\n    };\n    /**\n     * @param {Array<Feature>} features Features\n     * @param {import(\"../extent.js\").Extent} extent The searched extent for these features.\n     * @return {Feature} The cluster feature.\n     * @protected\n     */\n    Cluster.prototype.createCluster = function (features, extent) {\n        var centroid = [0, 0];\n        for (var i = features.length - 1; i >= 0; --i) {\n            var geometry_1 = this.geometryFunction(features[i]);\n            if (geometry_1) {\n                addCoordinate(centroid, geometry_1.getCoordinates());\n            }\n            else {\n                features.splice(i, 1);\n            }\n        }\n        scaleCoordinate(centroid, 1 / features.length);\n        var searchCenter = getCenter(extent);\n        var ratio = this.interpolationRatio;\n        var geometry = new Point([\n            centroid[0] * (1 - ratio) + searchCenter[0] * ratio,\n            centroid[1] * (1 - ratio) + searchCenter[1] * ratio,\n        ]);\n        if (this.createCustomCluster_) {\n            return this.createCustomCluster_(geometry, features);\n        }\n        else {\n            return new Feature({\n                geometry: geometry,\n                features: features,\n            });\n        }\n    };\n    return Cluster;\n}(VectorSource));\nexport default Cluster;\n//# sourceMappingURL=Cluster.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Circle\n */\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { createOrUpdate, forEachCorner, intersects } from '../extent.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { rotate, translate } from './flat/transform.js';\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    /**\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     *     For internal use, flat coordinates in combination with `opt_layout` and no\n     *     `opt_radius` are also accepted.\n     * @param {number} [opt_radius] Radius.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function Circle(center, opt_radius, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout !== undefined && opt_radius === undefined) {\n            _this.setFlatCoordinates(opt_layout, center);\n        }\n        else {\n            var radius = opt_radius ? opt_radius : 0;\n            _this.setCenterAndRadius(center, radius, opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Circle} Clone.\n     * @api\n     */\n    Circle.prototype.clone = function () {\n        var circle = new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n        circle.applyProperties(this);\n        return circle;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Circle.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        var squaredDistance = dx * dx + dy * dy;\n        if (squaredDistance < minSquaredDistance) {\n            if (squaredDistance === 0) {\n                for (var i = 0; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            else {\n                var delta = this.getRadius() / Math.sqrt(squaredDistance);\n                closestPoint[0] = flatCoordinates[0] + delta * dx;\n                closestPoint[1] = flatCoordinates[1] + delta * dy;\n                for (var i = 2; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            closestPoint.length = this.stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Circle.prototype.containsXY = function (x, y) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        return dx * dx + dy * dy <= this.getRadiusSquared_();\n    };\n    /**\n     * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @return {import(\"../coordinate.js\").Coordinate} Center.\n     * @api\n     */\n    Circle.prototype.getCenter = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Circle.prototype.computeExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var radius = flatCoordinates[this.stride] - flatCoordinates[0];\n        return createOrUpdate(flatCoordinates[0] - radius, flatCoordinates[1] - radius, flatCoordinates[0] + radius, flatCoordinates[1] + radius, extent);\n    };\n    /**\n     * Return the radius of the circle.\n     * @return {number} Radius.\n     * @api\n     */\n    Circle.prototype.getRadius = function () {\n        return Math.sqrt(this.getRadiusSquared_());\n    };\n    /**\n     * @private\n     * @return {number} Radius squared.\n     */\n    Circle.prototype.getRadiusSquared_ = function () {\n        var dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n        var dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n        return dx * dx + dy * dy;\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     * @api\n     */\n    Circle.prototype.getType = function () {\n        return GeometryType.CIRCLE;\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    Circle.prototype.intersectsExtent = function (extent) {\n        var circleExtent = this.getExtent();\n        if (intersects(extent, circleExtent)) {\n            var center = this.getCenter();\n            if (extent[0] <= center[0] && extent[2] >= center[0]) {\n                return true;\n            }\n            if (extent[1] <= center[1] && extent[3] >= center[1]) {\n                return true;\n            }\n            return forEachCorner(extent, this.intersectsCoordinate.bind(this));\n        }\n        return false;\n    };\n    /**\n     * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} center Center.\n     * @api\n     */\n    Circle.prototype.setCenter = function (center) {\n        var stride = this.stride;\n        var radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n        var flatCoordinates = center.slice();\n        flatCoordinates[stride] = flatCoordinates[0] + radius;\n        for (var i = 1; i < stride; ++i) {\n            flatCoordinates[stride + i] = center[i];\n        }\n        this.setFlatCoordinates(this.layout, flatCoordinates);\n        this.changed();\n    };\n    /**\n     * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n     * number) of the circle.\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     * @param {number} radius Radius.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    Circle.prototype.setCenterAndRadius = function (center, radius, opt_layout) {\n        this.setLayout(opt_layout, center, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        /** @type {Array<number>} */\n        var flatCoordinates = this.flatCoordinates;\n        var offset = deflateCoordinate(flatCoordinates, 0, center, this.stride);\n        flatCoordinates[offset++] = flatCoordinates[0] + radius;\n        for (var i = 1, ii = this.stride; i < ii; ++i) {\n            flatCoordinates[offset++] = flatCoordinates[i];\n        }\n        flatCoordinates.length = offset;\n        this.changed();\n    };\n    Circle.prototype.getCoordinates = function () {\n        return null;\n    };\n    Circle.prototype.setCoordinates = function (coordinates, opt_layout) { };\n    /**\n     * Set the radius of the circle. The radius is in the units of the projection.\n     * @param {number} radius Radius.\n     * @api\n     */\n    Circle.prototype.setRadius = function (radius) {\n        this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n        this.changed();\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @param {number} angle Rotation angle in counter-clockwise radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    Circle.prototype.rotate = function (angle, anchor) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(rotate(center, 0, center.length, stride, angle, anchor, center));\n        this.changed();\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    Circle.prototype.translate = function (deltaX, deltaY) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(translate(center, 0, center.length, stride, deltaX, deltaY, center));\n        this.changed();\n    };\n    return Circle;\n}(SimpleGeometry));\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>} [opt_dest] Destination.\n * @param {number} [opt_dimension] Destination dimension (default is `2`)\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest, opt_dimension) {\n    var o, t;\n    var n = (end - offset) / stride;\n    if (n === 1) {\n        o = offset;\n    }\n    else if (n === 2) {\n        o = offset;\n        t = fraction;\n    }\n    else if (n !== 0) {\n        var x1 = flatCoordinates[offset];\n        var y1 = flatCoordinates[offset + 1];\n        var length_1 = 0;\n        var cumulativeLengths = [0];\n        for (var i = offset + stride; i < end; i += stride) {\n            var x2 = flatCoordinates[i];\n            var y2 = flatCoordinates[i + 1];\n            length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n            cumulativeLengths.push(length_1);\n            x1 = x2;\n            y1 = y2;\n        }\n        var target = fraction * length_1;\n        var index = binarySearch(cumulativeLengths, target);\n        if (index < 0) {\n            t =\n                (target - cumulativeLengths[-index - 2]) /\n                    (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n            o = offset + (-index - 2) * stride;\n        }\n        else {\n            o = offset + index * stride;\n        }\n    }\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var dest = opt_dest ? opt_dest : new Array(dimension);\n    for (var i = 0; i < dimension; ++i) {\n        dest[i] =\n            o === undefined\n                ? NaN\n                : t === undefined\n                    ? flatCoordinates[o + i]\n                    : lerp(flatCoordinates[o + i], flatCoordinates[o + stride + i], t);\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n    if (end == offset) {\n        return null;\n    }\n    var coordinate;\n    if (m < flatCoordinates[offset + stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(offset, offset + stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    else if (flatCoordinates[end - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(end - stride, end);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    // FIXME use O(1) search\n    if (m == flatCoordinates[offset + stride - 1]) {\n        return flatCoordinates.slice(offset, offset + stride);\n    }\n    var lo = offset / stride;\n    var hi = end / stride;\n    while (lo < hi) {\n        var mid = (lo + hi) >> 1;\n        if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    var m0 = flatCoordinates[lo * stride - 1];\n    if (m == m0) {\n        return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n    }\n    var m1 = flatCoordinates[(lo + 1) * stride - 1];\n    var t = (m - m0) / (m1 - m0);\n    coordinate = [];\n    for (var i = 0; i < stride - 1; ++i) {\n        coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n    }\n    coordinate.push(m);\n    return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n    if (interpolate) {\n        return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n    }\n    var coordinate;\n    if (m < flatCoordinates[stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(0, stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    if (flatCoordinates[flatCoordinates.length - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        if (offset == end) {\n            continue;\n        }\n        if (m < flatCoordinates[offset + stride - 1]) {\n            return null;\n        }\n        else if (m <= flatCoordinates[end - 1]) {\n            return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n        }\n        offset = end;\n    }\n    return null;\n}\n//# sourceMappingURL=interpolate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LineString\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nvar LineString = /** @class */ (function (_super) {\n    __extends(LineString, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function LineString(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatMidpoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatMidpointRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed coordinate to the coordinates of the linestring.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @api\n     */\n    LineString.prototype.appendCoordinate = function (coordinate) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = coordinate.slice();\n        }\n        else {\n            extend(this.flatCoordinates, coordinate);\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LineString} Clone.\n     * @api\n     */\n    LineString.prototype.clone = function () {\n        var lineString = new LineString(this.flatCoordinates.slice(), this.layout);\n        lineString.applyProperties(this);\n        return lineString;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Iterate over each segment, calling the provided callback.\n     * If the callback returns a truthy value the function returns that\n     * value immediately. Otherwise the function returns `false`.\n     *\n     * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n     *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n     * @return {T|boolean} Value.\n     * @template T,S\n     * @api\n     */\n    LineString.prototype.forEachSegment = function (callback) {\n        return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * @param {number} m M.\n     * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n        if (this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n    };\n    /**\n     * Return the coordinates of the linestring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @api\n     */\n    LineString.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinate at the provided fraction along the linestring.\n     * The `fraction` is a number between 0 and 1, where 0 is the start of the\n     * linestring and 1 is the end.\n     * @param {number} fraction Fraction.\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_dest] Optional coordinate whose values will\n     *     be modified. If not provided, a new coordinate will be returned.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n     * @api\n     */\n    LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n        return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest, this.stride);\n    };\n    /**\n     * Return the length of the linestring on projected plane.\n     * @return {number} Length (on projected plane).\n     * @api\n     */\n    LineString.prototype.getLength = function () {\n        return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat midpoint.\n     */\n    LineString.prototype.getFlatMidpoint = function () {\n        if (this.flatMidpointRevision_ != this.getRevision()) {\n            this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n            this.flatMidpointRevision_ = this.getRevision();\n        }\n        return this.flatMidpoint_;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {LineString} Simplified LineString.\n     * @protected\n     */\n    LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     * @api\n     */\n    LineString.prototype.getType = function () {\n        return GeometryType.LINE_STRING;\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    LineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the linestring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LineString;\n}(SimpleGeometry));\nexport default LineString;\n//# sourceMappingURL=LineString.js.map","import 'ol/ol.css'\nimport { Map, View } from 'ol'\nimport Overlay from 'ol/Overlay'\nimport { Tile as TileLayer, Vector as VectorLayer, Heatmap as HeatmapLayer } from 'ol/layer'\nimport { Cluster, XYZ, Vector as VectorSource } from 'ol/source'\nimport Feature from 'ol/Feature'\nimport { Circle, LineString, Point, Polygon } from 'ol/geom'\nimport { Fill, Icon, Stroke, Style, Text, Circle as CircleStyle } from 'ol/style'\nimport { OverviewMap } from 'ol/control'\n// import { defaults as defaultControls } from 'ol/control'\n\nfunction validObjKey (obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key) && Object.keys(obj).length > 0\n}\n\nfunction panTo (map, center, zoom) {\n  map.getView().animate({ center: center }, { zoom: zoom })\n}\n\nfunction baseTile (option) {\n  let layers = []\n  if (typeof option === 'string') {\n    layers = getBaseTile({ type: option })\n  } else if (typeof option === 'object' && option instanceof Array) {\n    option.forEach(item => {\n      if (typeof item === 'string') {\n        const layer = getBaseTile({ type: item })\n        layers = layers.concat(layer)\n      } else if (typeof item === 'object') {\n        const layer = getBaseTile(item)\n        layers = layers.concat(layer)\n      }\n    })\n  }\n  return layers\n}\n\nfunction getBaseTile (option) {\n  switch (option.type) {\n    case 'td':\n      return getTDMap()\n    case 'td_img':\n      return getTDImg()\n    case 'xyz':\n      return getCustomerTileXYZ(option)\n    default:\n      return getTDMap()\n  }\n}\n\nfunction getTDMap (visible = true, XYZUrl) {\n  const urls = XYZUrl || [\n    'http://t4.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=88e2f1d5ab64a7477a7361edd6b5f68a',\n    'http://t3.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=88e2f1d5ab64a7477a7361edd6b5f68a'\n  ]\n  return getCustomerTileXYZ({\n    url: urls,\n    visible: true,\n    base: true,\n    type: 'td'\n  })\n}\n\nfunction getTDImg (visible = true, XYZUrl) {\n  const urls = XYZUrl || [\n    'http://t4.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=88e2f1d5ab64a7477a7361edd6b5f68a',\n    'http://t3.tianditu.com/DataServer?T=cia_w&x={x}&y={y}&l={z}&tk=88e2f1d5ab64a7477a7361edd6b5f68a'\n  ]\n  return getCustomerTileXYZ({\n    url: urls,\n    visible: true,\n    base: true,\n    type: 'td_img'\n  })\n}\n\nfunction getCustomerTileXYZ (option) {\n  const tiles = []\n  option.url.forEach(val => {\n    const layer = new TileLayer({\n      visible: option.visible,\n      source: new XYZ({\n        url: val\n      })\n    })\n    layer.set('type', option.type || '')\n    layer.set('base', option.base || undefined)\n    tiles.push(layer)\n  })\n  return tiles\n}\n\nfunction restVisibleBaseTile (map, name) {\n  const layers = map.getLayers()\n  layers.forEach(layer => {\n    if (layer.get('base') === true) {\n      layer.setVisible(false)\n      if (layer.get('type') === name) {\n        layer.setVisible(true)\n      }\n    }\n  })\n}\n\nfunction setLayer (option, map) {\n  const layers = map.getLayers()\n  const existLayer = []\n  layers.forEach(item => {\n    if (item.get('id') === option.id) {\n      existLayer.push(item)\n    }\n  })\n  if (existLayer.length > 0) {\n    console.log(existLayer)\n    existLayer.forEach(layer => { map.removeLayer(layer) })\n  }\n  const layer = setVectorLayer(option, map)\n  map.addLayer(layer)\n}\n\nfunction setVectorLayer (option, map) {\n  if (validObjKey(option, 'type') && option.type === 'cluster') {\n    // 聚合图层\n    const layer = addClusterLayer(option)\n    layer.set('id', option.id || '')\n    layer.set('type', option.type)\n    return layer\n  } else if (validObjKey(option, 'type') && option.type === 'heatmap') {\n    // 热力图\n    const layer = addHeatmapLayer(option)\n    layer.set('id', option.id || '')\n    layer.set('type', option.type)\n    return layer\n  } else {\n    // 元素图层\n    const layerOptions = Object.assign({\n      source: addSource(option.features || [], map),\n      visible: true\n    }, option)\n    const layer = new VectorLayer(layerOptions)\n    // 针对不规则图案元素图层\n    layer.setStyle(function (feature) {\n      if (feature.get('style')) {\n        return setStyle(feature.get('style'))\n      } else {\n        if (validObjKey(option, 'style')) {\n          return setStyle(option.style)\n        } else {\n          return setStyle({\n            fill: {\n              color: 'rgba(67,126,255,0.15)'\n            },\n            stroke: {\n              color: 'rgba(67,126,255,1)',\n              width: 1\n              // lineDash: [20, 10, 20, 10]\n            }\n          })\n        }\n      }\n    })\n    layer.set('id', option.id || '')\n    layer.set('type', 'VectorLayer')\n    return layer\n  }\n}\n\nfunction addOverviewMapControl (view, layers) {\n  return new OverviewMap({\n    view: new View(view),\n    collapsed: false,\n    layers: layers\n  })\n}\n\nfunction addOverlay (option) {\n  const overlayOption = Object.assign({\n    id: '',\n    element: document.getElementById(option.target),\n    position: [0, 0],\n    positioning: 'top-left'\n  }, option)\n  return new Overlay(overlayOption)\n}\n\nfunction setText (option) {\n  const textStyle = new Text(option)\n  if (validObjKey(option, 'fill')) {\n    const fillStyle = new Fill(option.fill)\n    textStyle.setFill(fillStyle)\n  }\n  if (validObjKey(option, 'stroke')) {\n    const strokeStyle = new Stroke(option.stroke)\n    textStyle.setStroke(strokeStyle)\n  }\n  return textStyle\n}\n\nfunction setFeature (option, map) {\n  if (validObjKey(option, 'type')) {\n    const type = option.type\n    switch (type) {\n      case 'point':\n        return setPointFeature(option)\n      case 'polygon':\n        return setPolygon(option)\n      case 'polyline':\n        return setPolyline(option)\n      case 'circle':\n        return setCircle(option, map)\n      default:\n        return setPointFeature(option)\n    }\n  } else {\n    return setPointFeature(option)\n  }\n}\n\nfunction setPointFeature (option) {\n  const feature = new Feature({\n    geometry: new Point(option.coordinates)\n  })\n  // newFeaturePrototype(feature)\n  const featureStyle = new Style({})\n  if (validObjKey(option, 'style')) {\n    const optionStyle = option.style\n    if (validObjKey(optionStyle, 'icon')) {\n      const imageStyle = new Icon({\n        src: optionStyle.icon\n      })\n      if (validObjKey(option, 'scale')) {\n        imageStyle.setScale(optionStyle.scale)\n      }\n      featureStyle.setImage(imageStyle)\n    }\n    if (validObjKey(optionStyle, 'text')) {\n      const optionText = optionStyle.text\n      const textStyle = setText(optionText)\n      featureStyle.setText(textStyle)\n    }\n    feature.setStyle(featureStyle)\n  }\n  if (validObjKey(option, 'id')) {\n    feature.setId(option.id)\n  }\n  if (typeof option === 'object') {\n    for (const i in option) {\n      if (Object.prototype.hasOwnProperty.call(option, i)) {\n        feature.set(i, option[i])\n      }\n    }\n  }\n  return feature\n}\n\nfunction setFeatures (features, map) {\n  const output = []\n  features.forEach(val => {\n    output.push(setFeature(val, map))\n  })\n  return output\n}\n\nfunction setCircle (option, map) {\n  const feature = new Feature({\n    geometry: new Circle(option.center, getRadiusByUnit(map, option.radius))\n  })\n  feature.set('style', option.style || null)\n  feature.set('properties', option.properties || null)\n  return feature\n}\n\nfunction getRadiusByUnit (map, radius) {\n  const metersPerUnit = map.getView().getProjection().getMetersPerUnit()\n  return radius / metersPerUnit\n}\n\nfunction setPolyline (option) {\n  const feature = new Feature({\n    geometry: new LineString(option.coordinates)\n  })\n  feature.set('style', option.style || null)\n  feature.set('properties', option.properties || null)\n  return feature\n}\n\nfunction setPolygon (option) {\n  const feature = new Feature({\n    geometry: new Polygon([option.coordinates])\n  })\n  feature.set('style', option.style || null)\n  feature.set('properties', option.properties || null)\n  return feature\n}\n\nfunction setStyle (option) {\n  const style = new Style()\n  if (validObjKey(option, 'fill')) {\n    style.setFill(new Fill(option.fill))\n  }\n  if (validObjKey(option, 'stroke')) {\n    style.setStroke(new Stroke(option.stroke))\n  }\n  return style\n}\n\nfunction addSource (features, map) {\n  return new VectorSource({\n    features: setFeatures(features, map)\n  })\n}\n\nfunction setOverlayPosition (overlay, position) {\n  overlay.setPosition(position)\n}\n\nfunction addClusterLayer (option) {\n  const options = Object.assign({\n    distance: 50,\n    minDistance: 0\n  }, option)\n  const source = addSource(option.features)\n  const clusterSource = new Cluster({\n    distance: parseInt(options.distance, 10),\n    minDistance: parseInt(options.minDistance, 10),\n    source: source\n  })\n  const styleCache = {}\n  const clusterOptions = Object.assign({\n    source: clusterSource,\n    style: function (feature) {\n      const size = feature.get('features').length\n      let style = styleCache[size]\n      if (!style) {\n        let styleOptions = {}\n        if (!validObjKey(options, 'style')) {\n          styleOptions = {\n            image: new CircleStyle({\n              radius: 20,\n              stroke: new Stroke({\n                color: '#fff'\n              }),\n              fill: new Fill({\n                color: '#3399CC'\n              })\n            }),\n            text: new Text({\n              font: '16px sans-serif',\n              text: size.toString(),\n              fill: new Fill({\n                color: '#fff'\n              })\n            })\n          }\n        } else {\n          options.style.forEach(e => {\n            let min = 0\n            let max = 0\n            let textColor = 'white'\n            if (validObjKey(e, 'textColor')) {\n              textColor = e.textColor\n            }\n            if (validObjKey(e, 'min') && validObjKey(e, 'max')) {\n              min = e.min\n              max = e.max\n            } else {\n              const total = source.getFeatures()\n              if (total > 0) {\n                const average = total / options.style.length\n                for (let i = 0; i < options.style.length; i++) {\n                  min = i\n                  max = average * (i + 1)\n                }\n              }\n            }\n            if (min < size && size <= max) {\n              styleOptions = clusterFeatureStyle(e.icon, size.toString(), textColor)\n            }\n          })\n        }\n        style = new Style(styleOptions)\n        styleCache[size] = style\n      }\n      return style\n    }\n  }, options)\n  const clusters = new VectorLayer(clusterOptions)\n  clusters.set('type', 'cluster')\n  clusters.set('id', options.id)\n  clusters.set('minZoom', options.minZoom)\n  clusters.set('maxZoom', options.maxZoom)\n  return clusters\n}\n\nfunction addHeatmapLayer (option) {\n  const options = Object.assign({\n    source: addSource(option.features),\n    blur: 15,\n    radius: 8,\n    weight: function (feature) {\n      return feature.get('weight')\n    }\n  }, option)\n  const vector = new HeatmapLayer(options)\n  vector.set('id', options.id)\n  return vector\n}\n\nfunction clusterFeatureStyle (icon, text, color) {\n  const styleImage = new Icon({\n    src: icon\n  })\n  const styleText = new Text({\n    text: text,\n    fill: new Fill({\n      color: color\n    })\n  })\n  return {\n    image: styleImage,\n    text: styleText\n  }\n}\n\nexport class VMap {\n  static map = VMap\n\n  static setLayer (val) {\n    return setLayer(val, VMap.map.map)\n  }\n\n  static restVisibleBaseTile (name) {\n    return restVisibleBaseTile(VMap.map.map, name)\n  }\n\n  static addOverlay (option) {\n    const overlays = VMap.map.map.getOverlays()\n    if (overlays) {\n      const existOverlays = []\n      overlays.forEach(overlay => {\n        if (overlay.getId() === option.id) {\n          existOverlays.push(overlay)\n        }\n      })\n      if (existOverlays.length > 0) {\n        existOverlays.forEach(overlay => {\n          if (overlay.getId() === option.id) {\n            setOverlayPosition(overlay, option.position)\n          }\n        })\n      } else {\n        return addOverlay(option)\n      }\n    }\n  }\n\n  static setOverlayPosition (option) {\n    const overlays = VMap.map.map.getOverlays()\n    overlays.forEach(overlay => {\n      if (overlay.getId() === option.id) {\n        return setOverlayPosition(overlay, option.position)\n      }\n    })\n  }\n\n  constructor (option = {}) {\n    const viewOption = Object.assign({\n      zoom: 12,\n      center: [0, 0],\n      projection: 'EPSG:4326'\n    }, option.view)\n    const view = new View(viewOption)\n    const baseTiles = Object.assign(['td'], option.baseTile)\n    const visibleTile = option.visibleTile || 'td'\n\n    // 生成地图\n    this.map = new Map({\n      target: option.target || 'map',\n      layers: [],\n      view: view,\n      controls: []\n    })\n\n    // 移动动画\n    if (validObjKey(viewOption, 'animate')) {\n      const animate = Object.assign({\n        center: [0, 0], // 中心点\n        zoom: 12, // 级别\n        resolution: undefined, // zoom设置了，这个被忽略\n        rotation: undefined, // 缩放完成view视图旋转弧度\n        anchor: undefined, // 在旋转或分辨率动画期间保持固定的可选锚点 不需要设置，\n        duration: 1000 // 缩放持续时间，默认不需要设置\n      }, viewOption.animate)\n      view.animate(animate)\n    }\n\n    // 鼠标悬浮\n    this.map.on('pointermove', evt => {\n      const pixel = this.map.getEventPixel(evt.originalEvent)\n      const hit = this.map.hasFeatureAtPixel(pixel)\n      this.map.getTargetElement().style.cursor = hit ? 'pointer' : ''\n    })\n\n    // 基础图层\n    const tileLayer = baseTile(baseTiles)\n\n    // 添加图层\n    const vectorLayersOption = option.layers\n    const vectorLayers = []\n    if (vectorLayersOption && vectorLayersOption.length > 0) {\n      vectorLayersOption.forEach(val => {\n        vectorLayers.push(this.setVectorLayer(val, this.map))\n      })\n    }\n\n    // 所有图层\n    const layers = tileLayer.concat(vectorLayers)\n    layers.forEach(layer => {\n      if (layer.get('base') === true) {\n        layer.setVisible(false)\n        if (layer.get('type') === visibleTile) {\n          layer.setVisible(true)\n        }\n      }\n      this.map.addLayer(layer)\n    })\n\n    // 鹰眼\n    if (option.overview) {\n      this.map.addControl(addOverviewMapControl(viewOption, baseTile(option.overview)))\n    }\n\n    // 弹框\n    const overlays = option.overlays\n    if (overlays && overlays.length > 0) {\n      overlays.forEach(overlay => {\n        const item = addOverlay(overlay)\n        this.map.addOverlay(item)\n      })\n    }\n  }\n\n  getMap () {\n    return VMap.map\n  }\n\n  addSource (features = [], map) {\n    return new VectorSource({\n      features: this.setFeatures(features, map)\n    })\n  }\n\n  setFeature (option) {\n    return setFeature(option)\n  }\n\n  setFeatures (features, map) {\n    return setFeatures(features, map)\n  }\n\n  addLayer (option) {\n    const layer = this.setVectorLayer(option)\n    this.map.addLayer(layer)\n  }\n\n  setVectorLayer (option, map) {\n    return setVectorLayer(option, map)\n  }\n\n  panTo (center, zoom) {\n    panTo(this.map, center, zoom)\n  }\n\n  get getLayers () {\n    return this.map.getLayers()\n  }\n}\n","<template>\n  <div ref=\"map\" id=\"map\" :style=\"{'width':width,'height':height}\"></div>\n</template>\n\n<script>\nimport { VMap } from './VMap.js'\n\nexport default {\n  name: 'v-map',\n  props: {\n    width: {\n      type: [String, Number],\n      default: '1920px'\n    },\n    height: {\n      type: [String, Number],\n      default: '960px'\n    },\n    option: {\n      type: Object,\n      default: () => {\n        return {\n          layers: [],\n          view: {},\n          baseTile: []\n        }\n      }\n    }\n  },\n  computed: {\n    map () {\n      return VMap.map.map\n    }\n  },\n  watch: {\n    option: {\n      handler (value) {\n        console.log('watch option ----> ', value)\n        this.setLayers(value.layers)\n        this.restVisibleBaseTile(value.visibleTile)\n        this.setOverlayPosition(value.overlays)\n      },\n      deep: true,\n      immediate: false\n    }\n  },\n  data () {\n    return {}\n  },\n  mounted () {\n    this.init()\n  },\n  methods: {\n    init () {\n      VMap.map = new VMap(this.option)\n      this.map.on('click', evt => {\n        this.$emit('click', evt, this.map)\n      })\n      // 添加事件\n      if (Object.prototype.hasOwnProperty.call(this.option, 'eventListeners') && this.option.eventListeners && this.option.eventListeners.length > 0) {\n        // 层级变化\n        if (this.option.eventListeners.indexOf('changeZoom') > -1) {\n          this.map.getView().once('change:resolution', () => {\n            this.map.once('moveend', (evt) => {\n              this.zoomEnd(evt)\n            })\n          })\n        }\n      }\n    },\n    zoomEnd (evt) {\n      this.$emit('changeZoom', evt, this.map)\n      evt.map.once('moveend', (evt) => {\n        this.zoomEnd(evt)\n      })\n    },\n    reloadLayer (layers) {\n      layers.forEach(layer => { this.setLayer(layer) })\n    },\n    getMap () {\n      return VMap.map\n    },\n    setLayer (layer) {\n      VMap.setLayer(layer)\n    },\n    setLayers (layers) {\n      layers.forEach(layer => { this.setLayer(layer) })\n    },\n    restVisibleBaseTile (visibleTile) {\n      VMap.restVisibleBaseTile(visibleTile)\n    },\n    setOverlayPosition (overlays) {\n      overlays.forEach(overlay => {\n        VMap.setOverlayPosition(overlay)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2a946bf6&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a946bf6\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VMap from '~/VMap/src/index.vue'\n\nVue.component(VMap.name, VMap)\n// import VMap from '~/VMap/index.js'\nconst components = [VMap]\nconst install = function (Vue) {\n  if (install.installed) return\n  components.map(component => {\n    Vue.use(component)\n  })\n}\n//  全局引用可自动安装\nif (typeof window !== 'undefined' && window.Vue) {\n  install(window.Vue)\n}\nexport default {\n  install,\n  VMap\n}\nexport {\n  VMap\n}\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","/**\n * @module ol/proj/Units\n */\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar Units = {\n    /**\n     * Radians\n     * @api\n     */\n    RADIANS: 'radians',\n    /**\n     * Degrees\n     * @api\n     */\n    DEGREES: 'degrees',\n    /**\n     * Feet\n     * @api\n     */\n    FEET: 'ft',\n    /**\n     * Meters\n     * @api\n     */\n    METERS: 'm',\n    /**\n     * Pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n    /**\n     * Tile Pixels\n     * @api\n     */\n    TILE_PIXELS: 'tile-pixels',\n    /**\n     * US Feet\n     * @api\n     */\n    USFEET: 'us-ft',\n};\n/**\n * See http://duff.ess.washington.edu/data/raster/drg/docs/geotiff.txt\n * @type {Object<number, Units>}\n */\nvar unitByCode = {\n    '9001': Units.METERS,\n    '9002': Units.FEET,\n    '9003': Units.USFEET,\n    '9101': Units.RADIANS,\n    '9102': Units.DEGREES,\n};\n/**\n * @param {number} code Unit code.\n * @return {Units} Units.\n */\nexport function fromCode(code) {\n    return unitByCode[code];\n}\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport var METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.RADIANS] = 6370997 / (2 * Math.PI);\nMETERS_PER_UNIT[Units.DEGREES] = (2 * Math.PI * 6370997) / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\nexport default Units;\n//# sourceMappingURL=Units.js.map","/**\n * @module ol/geom/flat/segments\n */\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n    var ret;\n    offset += stride;\n    for (; offset < end; offset += stride) {\n        ret = callback(flatCoordinates.slice(offset - stride, offset), flatCoordinates.slice(offset, offset + stride));\n        if (ret) {\n            return ret;\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=segments.js.map","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Group\n */\nimport BaseLayer from './Base.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\nimport { assign, clear } from '../obj.js';\nimport { getIntersection } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {'addlayer'|'removelayer'} EventType\n */\n/**\n * @classdesc\n * A layer group triggers 'addlayer' and 'removelayer' events when layers are added to or removed from\n * the group or one of its child groups.  When a layer group is added to or removed from another layer group,\n * a single event will be triggered (instead of one per layer in the group added or removed).\n */\nvar GroupEvent = /** @class */ (function (_super) {\n    __extends(GroupEvent, _super);\n    /**\n     * @param {EventType} type The event type.\n     * @param {BaseLayer} layer The layer.\n     */\n    function GroupEvent(type, layer) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The added or removed layer.\n         * @type {BaseLayer}\n         * @api\n         */\n        _this.layer = layer;\n        return _this;\n    }\n    return GroupEvent;\n}(Event));\nexport { GroupEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:layers', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:layers', Return>} GroupOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LAYERS: 'layers',\n};\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nvar LayerGroup = /** @class */ (function (_super) {\n    __extends(LayerGroup, _super);\n    /**\n     * @param {Options} [opt_options] Layer options.\n     */\n    function LayerGroup(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var baseOptions = /** @type {Options} */ (assign({}, options));\n        delete baseOptions.layers;\n        var layers = options.layers;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {GroupOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.layersListenerKeys_ = [];\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.listenerKeys_ = {};\n        _this.addChangeListener(Property.LAYERS, _this.handleLayersChanged_);\n        if (layers) {\n            if (Array.isArray(layers)) {\n                layers = new Collection(layers.slice(), { unique: true });\n            }\n            else {\n                assert(typeof ( /** @type {?} */(layers).getArray) === 'function', 43); // Expected `layers` to be an array or a `Collection`\n            }\n        }\n        else {\n            layers = new Collection(undefined, { unique: true });\n        }\n        _this.setLayers(layers);\n        return _this;\n    }\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayerChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayersChanged_ = function () {\n        this.layersListenerKeys_.forEach(unlistenByKey);\n        this.layersListenerKeys_.length = 0;\n        var layers = this.getLayers();\n        this.layersListenerKeys_.push(listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this), listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this));\n        for (var id in this.listenerKeys_) {\n            this.listenerKeys_[id].forEach(unlistenByKey);\n        }\n        clear(this.listenerKeys_);\n        var layersArray = layers.getArray();\n        for (var i = 0, ii = layersArray.length; i < ii; i++) {\n            var layer = layersArray[i];\n            this.registerLayerListeners_(layer);\n            this.dispatchEvent(new GroupEvent('addlayer', layer));\n        }\n        this.changed();\n    };\n    /**\n     * @param {BaseLayer} layer The layer.\n     */\n    LayerGroup.prototype.registerLayerListeners_ = function (layer) {\n        var listenerKeys = [\n            listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n            listen(layer, EventType.CHANGE, this.handleLayerChange_, this),\n        ];\n        if (layer instanceof LayerGroup) {\n            listenerKeys.push(listen(layer, 'addlayer', this.handleLayerGroupAdd_, this), listen(layer, 'removelayer', this.handleLayerGroupRemove_, this));\n        }\n        this.listenerKeys_[getUid(layer)] = listenerKeys;\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupAdd_ = function (event) {\n        this.dispatchEvent(new GroupEvent('addlayer', event.layer));\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupRemove_ = function (event) {\n        this.dispatchEvent(new GroupEvent('removelayer', event.layer));\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersAdd_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        this.registerLayerListeners_(layer);\n        this.dispatchEvent(new GroupEvent('addlayer', layer));\n        this.changed();\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersRemove_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        var key = getUid(layer);\n        this.listenerKeys_[key].forEach(unlistenByKey);\n        delete this.listenerKeys_[key];\n        this.dispatchEvent(new GroupEvent('removelayer', layer));\n        this.changed();\n    };\n    /**\n     * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.getLayers = function () {\n        return /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS));\n    };\n    /**\n     * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.setLayers = function (layers) {\n        var collection = this.getLayers();\n        if (collection) {\n            var currentLayers = collection.getArray();\n            for (var i = 0, ii = currentLayers.length; i < ii; ++i) {\n                this.dispatchEvent(new GroupEvent('removelayer', currentLayers[i]));\n            }\n        }\n        this.set(Property.LAYERS, layers);\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    LayerGroup.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array !== undefined ? opt_array : [];\n        this.getLayers().forEach(function (layer) {\n            layer.getLayersArray(array);\n        });\n        return array;\n    };\n    /**\n     * Get the layer states list and use this groups z-index as the default\n     * for all layers in this and nested groups, if it is unset at this point.\n     * If opt_states is not provided and this group's z-index is undefined\n     * 0 is used a the default z-index.\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list\n     * of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    LayerGroup.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states !== undefined ? opt_states : [];\n        var pos = states.length;\n        this.getLayers().forEach(function (layer) {\n            layer.getLayerStatesArray(states);\n        });\n        var ownLayerState = this.getLayerState();\n        var defaultZIndex = ownLayerState.zIndex;\n        if (!opt_states && ownLayerState.zIndex === undefined) {\n            defaultZIndex = 0;\n        }\n        for (var i = pos, ii = states.length; i < ii; i++) {\n            var layerState = states[i];\n            layerState.opacity *= ownLayerState.opacity;\n            layerState.visible = layerState.visible && ownLayerState.visible;\n            layerState.maxResolution = Math.min(layerState.maxResolution, ownLayerState.maxResolution);\n            layerState.minResolution = Math.max(layerState.minResolution, ownLayerState.minResolution);\n            layerState.minZoom = Math.max(layerState.minZoom, ownLayerState.minZoom);\n            layerState.maxZoom = Math.min(layerState.maxZoom, ownLayerState.maxZoom);\n            if (ownLayerState.extent !== undefined) {\n                if (layerState.extent !== undefined) {\n                    layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n                }\n                else {\n                    layerState.extent = ownLayerState.extent;\n                }\n            }\n            if (layerState.zIndex === undefined) {\n                layerState.zIndex = defaultZIndex;\n            }\n        }\n        return states;\n    };\n    /**\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    LayerGroup.prototype.getSourceState = function () {\n        return SourceState.READY;\n    };\n    return LayerGroup;\n}(BaseLayer));\nexport default LayerGroup;\n//# sourceMappingURL=Group.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/pointer/EventType\n */\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.activePointers_ = 0;\n        /**\n         * @type {!Object<number, boolean>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[event.pointerId];\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN) {\n            this.trackedTouches_[event.pointerId] = true;\n        }\n        this.activePointers_ = Object.keys(this.trackedTouches_).length;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_ === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_ === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointer event.  Note that this requires that the type\n     * string for the MapBrowserEvent matches the PointerEvent type.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(pointerEvent.type, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/structs/PriorityQueue\n */\nimport { assert } from '../asserts.js';\nimport { clear } from '../obj.js';\n/**\n * @type {number}\n */\nexport var DROP = Infinity;\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See https://github.com/google/closure-library/blob/master/closure/goog/structs/heap.js\n * and https://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nvar PriorityQueue = /** @class */ (function () {\n    /**\n     * @param {function(T): number} priorityFunction Priority function.\n     * @param {function(T): string} keyFunction Key function.\n     */\n    function PriorityQueue(priorityFunction, keyFunction) {\n        /**\n         * @type {function(T): number}\n         * @private\n         */\n        this.priorityFunction_ = priorityFunction;\n        /**\n         * @type {function(T): string}\n         * @private\n         */\n        this.keyFunction_ = keyFunction;\n        /**\n         * @type {Array<T>}\n         * @private\n         */\n        this.elements_ = [];\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.priorities_ = [];\n        /**\n         * @type {!Object<string, boolean>}\n         * @private\n         */\n        this.queuedElements_ = {};\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.clear = function () {\n        this.elements_.length = 0;\n        this.priorities_.length = 0;\n        clear(this.queuedElements_);\n    };\n    /**\n     * Remove and return the highest-priority element. O(log N).\n     * @return {T} Element.\n     */\n    PriorityQueue.prototype.dequeue = function () {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[0];\n        if (elements.length == 1) {\n            elements.length = 0;\n            priorities.length = 0;\n        }\n        else {\n            elements[0] = elements.pop();\n            priorities[0] = priorities.pop();\n            this.siftUp_(0);\n        }\n        var elementKey = this.keyFunction_(element);\n        delete this.queuedElements_[elementKey];\n        return element;\n    };\n    /**\n     * Enqueue an element. O(log N).\n     * @param {T} element Element.\n     * @return {boolean} The element was added to the queue.\n     */\n    PriorityQueue.prototype.enqueue = function (element) {\n        assert(!(this.keyFunction_(element) in this.queuedElements_), 31); // Tried to enqueue an `element` that was already added to the queue\n        var priority = this.priorityFunction_(element);\n        if (priority != DROP) {\n            this.elements_.push(element);\n            this.priorities_.push(priority);\n            this.queuedElements_[this.keyFunction_(element)] = true;\n            this.siftDown_(0, this.elements_.length - 1);\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @return {number} Count.\n     */\n    PriorityQueue.prototype.getCount = function () {\n        return this.elements_.length;\n    };\n    /**\n     * Gets the index of the left child of the node at the given index.\n     * @param {number} index The index of the node to get the left child for.\n     * @return {number} The index of the left child.\n     * @private\n     */\n    PriorityQueue.prototype.getLeftChildIndex_ = function (index) {\n        return index * 2 + 1;\n    };\n    /**\n     * Gets the index of the right child of the node at the given index.\n     * @param {number} index The index of the node to get the right child for.\n     * @return {number} The index of the right child.\n     * @private\n     */\n    PriorityQueue.prototype.getRightChildIndex_ = function (index) {\n        return index * 2 + 2;\n    };\n    /**\n     * Gets the index of the parent of the node at the given index.\n     * @param {number} index The index of the node to get the parent for.\n     * @return {number} The index of the parent.\n     * @private\n     */\n    PriorityQueue.prototype.getParentIndex_ = function (index) {\n        return (index - 1) >> 1;\n    };\n    /**\n     * Make this a heap. O(N).\n     * @private\n     */\n    PriorityQueue.prototype.heapify_ = function () {\n        var i;\n        for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n            this.siftUp_(i);\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    PriorityQueue.prototype.isEmpty = function () {\n        return this.elements_.length === 0;\n    };\n    /**\n     * @param {string} key Key.\n     * @return {boolean} Is key queued.\n     */\n    PriorityQueue.prototype.isKeyQueued = function (key) {\n        return key in this.queuedElements_;\n    };\n    /**\n     * @param {T} element Element.\n     * @return {boolean} Is queued.\n     */\n    PriorityQueue.prototype.isQueued = function (element) {\n        return this.isKeyQueued(this.keyFunction_(element));\n    };\n    /**\n     * @param {number} index The index of the node to move down.\n     * @private\n     */\n    PriorityQueue.prototype.siftUp_ = function (index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var count = elements.length;\n        var element = elements[index];\n        var priority = priorities[index];\n        var startIndex = index;\n        while (index < count >> 1) {\n            var lIndex = this.getLeftChildIndex_(index);\n            var rIndex = this.getRightChildIndex_(index);\n            var smallerChildIndex = rIndex < count && priorities[rIndex] < priorities[lIndex]\n                ? rIndex\n                : lIndex;\n            elements[index] = elements[smallerChildIndex];\n            priorities[index] = priorities[smallerChildIndex];\n            index = smallerChildIndex;\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n        this.siftDown_(startIndex, index);\n    };\n    /**\n     * @param {number} startIndex The index of the root.\n     * @param {number} index The index of the node to move up.\n     * @private\n     */\n    PriorityQueue.prototype.siftDown_ = function (startIndex, index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[index];\n        var priority = priorities[index];\n        while (index > startIndex) {\n            var parentIndex = this.getParentIndex_(index);\n            if (priorities[parentIndex] > priority) {\n                elements[index] = elements[parentIndex];\n                priorities[index] = priorities[parentIndex];\n                index = parentIndex;\n            }\n            else {\n                break;\n            }\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.reprioritize = function () {\n        var priorityFunction = this.priorityFunction_;\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var index = 0;\n        var n = elements.length;\n        var element, i, priority;\n        for (i = 0; i < n; ++i) {\n            element = elements[i];\n            priority = priorityFunction(element);\n            if (priority == DROP) {\n                delete this.queuedElements_[this.keyFunction_(element)];\n            }\n            else {\n                priorities[index] = priority;\n                elements[index++] = element;\n            }\n        }\n        elements.length = index;\n        priorities.length = index;\n        this.heapify_();\n    };\n    return PriorityQueue;\n}());\nexport default PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/TileQueue\n */\nimport EventType from './events/EventType.js';\nimport PriorityQueue, { DROP } from './structs/PriorityQueue.js';\nimport TileState from './TileState.js';\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\nvar TileQueue = /** @class */ (function (_super) {\n    __extends(TileQueue, _super);\n    /**\n     * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n     * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n     */\n    function TileQueue(tilePriorityFunction, tileChangeCallback) {\n        var _this = _super.call(this, \n        /**\n         * @param {Array} element Element.\n         * @return {number} Priority.\n         */\n        function (element) {\n            return tilePriorityFunction.apply(null, element);\n        }, \n        /**\n         * @param {Array} element Element.\n         * @return {string} Key.\n         */\n        function (element) {\n            return /** @type {import(\"./Tile.js\").default} */ (element[0]).getKey();\n        }) || this;\n        /** @private */\n        _this.boundHandleTileChange_ = _this.handleTileChange.bind(_this);\n        /**\n         * @private\n         * @type {function(): ?}\n         */\n        _this.tileChangeCallback_ = tileChangeCallback;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.tilesLoading_ = 0;\n        /**\n         * @private\n         * @type {!Object<string,boolean>}\n         */\n        _this.tilesLoadingKeys_ = {};\n        return _this;\n    }\n    /**\n     * @param {Array} element Element.\n     * @return {boolean} The element was added to the queue.\n     */\n    TileQueue.prototype.enqueue = function (element) {\n        var added = _super.prototype.enqueue.call(this, element);\n        if (added) {\n            var tile = element[0];\n            tile.addEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n        }\n        return added;\n    };\n    /**\n     * @return {number} Number of tiles loading.\n     */\n    TileQueue.prototype.getTilesLoading = function () {\n        return this.tilesLoading_;\n    };\n    /**\n     * @param {import(\"./events/Event.js\").default} event Event.\n     * @protected\n     */\n    TileQueue.prototype.handleTileChange = function (event) {\n        var tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n        var state = tile.getState();\n        if (state === TileState.LOADED ||\n            state === TileState.ERROR ||\n            state === TileState.EMPTY) {\n            tile.removeEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n            var tileKey = tile.getKey();\n            if (tileKey in this.tilesLoadingKeys_) {\n                delete this.tilesLoadingKeys_[tileKey];\n                --this.tilesLoading_;\n            }\n            this.tileChangeCallback_();\n        }\n    };\n    /**\n     * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n     * @param {number} maxNewLoads Maximum number of new tiles to load.\n     */\n    TileQueue.prototype.loadMoreTiles = function (maxTotalLoading, maxNewLoads) {\n        var newLoads = 0;\n        var state, tile, tileKey;\n        while (this.tilesLoading_ < maxTotalLoading &&\n            newLoads < maxNewLoads &&\n            this.getCount() > 0) {\n            tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n            tileKey = tile.getKey();\n            state = tile.getState();\n            if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n                this.tilesLoadingKeys_[tileKey] = true;\n                ++this.tilesLoading_;\n                ++newLoads;\n                tile.load();\n            }\n        }\n    };\n    return TileQueue;\n}(PriorityQueue));\nexport default TileQueue;\n/**\n * @param {import('./PluggableMap.js').FrameState} frameState Frame state.\n * @param {import(\"./Tile.js\").default} tile Tile.\n * @param {string} tileSourceKey Tile source key.\n * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n * @param {number} tileResolution Tile resolution.\n * @return {number} Tile priority.\n */\nexport function getTilePriority(frameState, tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n        return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n        return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels between\n    // the center of the tile and the center of the viewport.  The factor of 65536\n    // means that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    var center = frameState.viewState.center;\n    var deltaX = tileCenter[0] - center[0];\n    var deltaY = tileCenter[1] - center[1];\n    return (65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution);\n}\n//# sourceMappingURL=TileQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport EventType from './events/EventType.js';\nimport Layer from './layer/Layer.js';\nimport LayerGroup, { GroupEvent } from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, { getTilePriority } from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { TRUE } from './functions.js';\nimport { apply as applyTransform, create as createTransform, } from './transform.js';\nimport { assert } from './asserts.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty, } from './extent.js';\nimport { fromUserCoordinate, toUserCoordinate } from './proj.js';\nimport { getUid } from './util.js';\nimport { hasArea } from './size.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { removeNode } from './dom.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {import(\"./extent.js\").Extent} [nextExtent] Next extent during an animation series.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n * @property {string} mapId The id of the map.\n * @property {Object<string, boolean>} renderTargets Identifiers of previously rendered elements.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} PluggableMapOnSignature\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View|Promise<import(\"./View.js\").ViewOptions>} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n */\nfunction removeLayerMapProperty(layer) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(null);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        layer.getLayers().forEach(removeLayerMapProperty);\n    }\n}\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n * @param {PluggableMap} map Map.\n */\nfunction setLayerMapProperty(layer, map) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(map);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        var layers = layer.getLayers().getArray();\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n            setLayerMapProperty(layers[i], map);\n        }\n    }\n}\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {PluggableMapOnSignature<void>}\n         */\n        _this.un;\n        var optionsInternal = createOptionsInternal(options);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderComplete_;\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ =\n            options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ =\n            options.pixelRatio !== undefined\n                ? options.pixelRatio\n                : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = /** @this {PluggableMap} */ function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className =\n            'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.style.pointerEvents = 'none';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.moveTolerance_ = options.moveTolerance;\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.targetChangeHandlerKeys_ = null;\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addChangeListener(MapProperty.LAYERGROUP, _this.handleLayerGroupChanged_);\n        _this.addChangeListener(MapProperty.VIEW, _this.handleViewChanged_);\n        _this.addChangeListener(MapProperty.SIZE, _this.handleSizeChanged_);\n        _this.addChangeListener(MapProperty.TARGET, _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        var map = _this;\n        if (options.view && !(options.view instanceof View)) {\n            options.view.then(function (viewOptions) {\n                map.setView(new View(viewOptions));\n            });\n        }\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(\n            /** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteraction()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer add event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerAdd_ = function (event) {\n        setLayerMapProperty(event.layer, this);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * Clean up.\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature feature} or\n     *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Get all layers from all layer groups.\n     * @return {Array<import(\"./layer/Layer.js\").default>} Layers.\n     */\n    PluggableMap.prototype.getAllLayers = function () {\n        var layers = [];\n        function addLayersFrom(layerGroup) {\n            layerGroup.forEach(function (layer) {\n                if (layer instanceof LayerGroup) {\n                    addLayersFrom(layer.getLayers());\n                }\n                else {\n                    layers.push(layer);\n                }\n            });\n        }\n        addLayersFrom(this.getLayers());\n        return layers;\n    };\n    /**\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: this may give false positives unless the map layers have had different `className`\n     * properties assigned to them.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions} [opt_options] Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var options = opt_options || {};\n        var hitTolerance = options.hitTolerance !== undefined ? options.hitTolerance : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {UIEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = \n        //FIXME Are we really calling this with a TouchEvent anywhere?\n        'changedTouches' in event\n            ? /** @type {TouchEvent} */ (event).changedTouches[0]\n            : /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top,\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string'\n                ? document.getElementById(target)\n                : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n    };\n    /**\n     * Clear any existing layers and add layers to the map.\n     * @param {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>} layers The layers to be added to the map.\n     * @api\n     */\n    PluggableMap.prototype.setLayers = function (layers) {\n        var group = this.getLayerGroup();\n        if (layers instanceof Collection) {\n            group.setLayers(layers);\n            return;\n        }\n        var collection = group.getLayers();\n        collection.clear();\n        collection.extend(layers);\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoading = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layer = layerStatesArray[i].layer;\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return /** @type {View} */ (this.get(MapProperty.VIEW));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @return {!Document} The document where the map is displayed.\n     */\n    PluggableMap.prototype.getOwnerDocument = function () {\n        var targetElement = this.getTargetElement();\n        return targetElement ? targetElement.ownerDocument : document;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        return getTilePriority(this.frameState_, tile, tileSourceKey, tileCenter, tileResolution);\n    };\n    /**\n     * @param {UIEvent} browserEvent Browser event.\n     * @param {string} [opt_type] Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var originalEvent = /** @type {PointerEvent} */ (mapBrowserEvent.originalEvent);\n        var eventType = originalEvent.type;\n        if (eventType === PointerEventType.POINTERDOWN ||\n            eventType === EventType.WHEEL ||\n            eventType === EventType.KEYDOWN) {\n            var doc = this.getOwnerDocument();\n            var rootNode = this.viewport_.getRootNode\n                ? this.viewport_.getRootNode()\n                : doc;\n            var target = /** @type {Node} */ (originalEvent.target);\n            if (\n            // Abort if the target is a child of the container for elements whose events are not meant\n            // to be handled by map interactions.\n            this.overlayContainerStopEvent_.contains(target) ||\n                // Abort if the event target is a child of the container that is no longer in the page.\n                // It's possible for the target to no longer be in the page if it has been removed in an\n                // event listener, this might happen in a Control that recreates it's content based on\n                // user interaction either manually or via a render in something like https://reactjs.org/\n                !(rootNode === doc ? doc.documentElement : rootNode).contains(target)) {\n                return;\n            }\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            var interactionsArray = this.getInteractions().getArray().slice();\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (interaction.getMap() !== this ||\n                    !interaction.getActive() ||\n                    !this.getTargetElement()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont || mapBrowserEvent.propagationStopped) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState &&\n            this.hasListener(RenderEventType.RENDERCOMPLETE) &&\n            !frameState.animate &&\n            this.renderComplete_) {\n            this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView() && !this.getView().getAnimating()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        if (this.mapBrowserEventHandler_) {\n            for (var i = 0, ii = this.targetChangeHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.targetChangeHandlerKeys_[i]);\n            }\n            this.targetChangeHandlerKeys_ = null;\n            this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n            this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n            this.mapBrowserEventHandler_.dispose();\n            this.mapBrowserEventHandler_ = null;\n            removeNode(this.viewport_);\n        }\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement = this.getTargetElement();\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderTimeoutHandle_ = undefined;\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, this.moveTolerance_);\n            for (var key in MapBrowserEventType) {\n                this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], this.handleMapBrowserEvent.bind(this));\n            }\n            this.viewport_.addEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_, false);\n            this.viewport_.addEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n            var defaultView = this.getOwnerDocument().defaultView;\n            var keyboardEventTarget = !this.keyboardEventTarget_\n                ? targetElement\n                : this.keyboardEventTarget_;\n            this.targetChangeHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this),\n                listen(defaultView, EventType.RESIZE, this.updateSize, this),\n            ];\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.updateViewportSize_();\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.handleLayerAdd_(new GroupEvent('addlayer', layerGroup));\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this),\n                listen(layerGroup, 'addlayer', this.handleLayerAdd_, this),\n                listen(layerGroup, 'removelayer', this.handleLayerRemove_, this),\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer remove event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerRemove_ = function (event) {\n        removeLayerMapProperty(event.layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var _this = this;\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterTree: null,\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {},\n                mapId: getUid(this),\n                renderTargets: {},\n            };\n            if (viewState.nextCenter && viewState.nextResolution) {\n                var rotation = isNaN(viewState.nextRotation)\n                    ? viewState.rotation\n                    : viewState.nextRotation;\n                frameState.nextExtent = getForViewAndSize(viewState.nextCenter, viewState.nextResolution, rotation, size);\n            }\n        }\n        this.frameState_ = frameState;\n        this.renderer_.renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        this.renderComplete_ =\n            !this.tileQueue_.getTilesLoading() &&\n                !this.tileQueue_.getCount() &&\n                !this.getLoading();\n        if (!this.postRenderTimeoutHandle_) {\n            this.postRenderTimeoutHandle_ = setTimeout(function () {\n                _this.postRenderTimeoutHandle_ = undefined;\n                _this.handlePostRender();\n            }, 0);\n        }\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        var oldLayerGroup = this.getLayerGroup();\n        if (oldLayerGroup) {\n            this.handleLayerRemove_(new GroupEvent('removelayer', oldLayerGroup));\n        }\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string} [target] The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View|Promise<import(\"./View.js\").ViewOptions>} view The view that controls this map.\n     * It is also possible to pass a promise that resolves to options for constructing a view.  This\n     * alternative allows view properties to be resolved by sources or other components that load\n     * view-related metadata.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        if (!view || view instanceof View) {\n            this.set(MapProperty.VIEW, view);\n            return;\n        }\n        this.set(MapProperty.VIEW, new View());\n        var map = this;\n        view.then(function (viewOptions) {\n            map.setView(new View(viewOptions));\n        });\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        var size = undefined;\n        if (targetElement) {\n            var computedStyle = getComputedStyle(targetElement);\n            var width = targetElement.offsetWidth -\n                parseFloat(computedStyle['borderLeftWidth']) -\n                parseFloat(computedStyle['paddingLeft']) -\n                parseFloat(computedStyle['paddingRight']) -\n                parseFloat(computedStyle['borderRightWidth']);\n            var height = targetElement.offsetHeight -\n                parseFloat(computedStyle['borderTopWidth']) -\n                parseFloat(computedStyle['paddingTop']) -\n                parseFloat(computedStyle['paddingBottom']) -\n                parseFloat(computedStyle['borderBottomWidth']);\n            if (!isNaN(width) && !isNaN(height)) {\n                size = [width, height];\n                if (!hasArea(size) &&\n                    !!(targetElement.offsetWidth ||\n                        targetElement.offsetHeight ||\n                        targetElement.getClientRects().length)) {\n                    // eslint-disable-next-line\n                    console.warn(\"No map visible because the map container's width or height are 0.\");\n                }\n            }\n        }\n        this.setSize(size);\n        this.updateViewportSize_();\n    };\n    /**\n     * Recomputes the viewport size and save it on the view object (if any)\n     * @private\n     */\n    PluggableMap.prototype.updateViewportSize_ = function () {\n        var view = this.getView();\n        if (view) {\n            var size = undefined;\n            var computedStyle = getComputedStyle(this.viewport_);\n            if (computedStyle.width && computedStyle.height) {\n                size = [\n                    parseInt(computedStyle.width, 10),\n                    parseInt(computedStyle.height, 10),\n                ];\n            }\n            view.setViewportSize(size);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget =\n            typeof options.keyboardEventTarget === 'string'\n                ? document.getElementById(options.keyboardEventTarget)\n                : options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers &&\n        typeof ( /** @type {?} */(options.layers).getLayers) === 'function'\n        ? /** @type {LayerGroup} */ (options.layers)\n        : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] =\n        options.view instanceof View ? options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.controls).getArray) === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.interactions).getArray) ===\n                'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.overlays).getArray) === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values,\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Source\n */\nimport BaseObject from '../Object.js';\nimport SourceState from './State.js';\nimport { abstract } from '../util.js';\nimport { get as getProjection } from '../proj.js';\n/**\n * A function that takes a {@link module:ol/PluggableMap~FrameState} and returns a string or\n * an array of strings representing source attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `'© Acme Inc.'`)\n * * an array of simple strings (e.g. `['© Acme Inc.', '© Bacme Inc.']`)\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {import(\"./State.js\").default} [state='ready'] State.\n * @property {boolean} [wrapX=false] WrapX.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nvar Source = /** @class */ (function (_super) {\n    __extends(Source, _super);\n    /**\n     * @param {Options} options Source options.\n     */\n    function Source(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        _this.projection = getProjection(options.projection);\n        /**\n         * @private\n         * @type {?Attribution}\n         */\n        _this.attributions_ = adaptAttributions(options.attributions);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.attributionsCollapsible_ =\n            options.attributionsCollapsible !== undefined\n                ? options.attributionsCollapsible\n                : true;\n        /**\n         * This source is currently loading data. Sources that defer loading to the\n         * map's tile queue never set this to `true`.\n         * @type {boolean}\n         */\n        _this.loading = false;\n        /**\n         * @private\n         * @type {import(\"./State.js\").default}\n         */\n        _this.state_ =\n            options.state !== undefined ? options.state : SourceState.READY;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.interpolate_ = !!options.interpolate;\n        /**\n         * @protected\n         * @type {function(import(\"../View.js\").ViewOptions):void}\n         */\n        _this.viewResolver = null;\n        /**\n         * @protected\n         * @type {function(Error):void}\n         */\n        _this.viewRejector = null;\n        var self = _this;\n        /**\n         * @private\n         * @type {Promise<import(\"../View.js\").ViewOptions>}\n         */\n        _this.viewPromise_ = new Promise(function (resolve, reject) {\n            self.viewResolver = resolve;\n            self.viewRejector = reject;\n        });\n        return _this;\n    }\n    /**\n     * Get the attribution function for the source.\n     * @return {?Attribution} Attribution function.\n     * @api\n     */\n    Source.prototype.getAttributions = function () {\n        return this.attributions_;\n    };\n    /**\n     * @return {boolean} Attributions are collapsible.\n     * @api\n     */\n    Source.prototype.getAttributionsCollapsible = function () {\n        return this.attributionsCollapsible_;\n    };\n    /**\n     * Get the projection of the source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    Source.prototype.getProjection = function () {\n        return this.projection;\n    };\n    /**\n     * @abstract\n     * @return {Array<number>|undefined} Resolutions.\n     */\n    Source.prototype.getResolutions = function () {\n        return abstract();\n    };\n    /**\n     * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\n     */\n    Source.prototype.getView = function () {\n        return this.viewPromise_;\n    };\n    /**\n     * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n     * @return {import(\"./State.js\").default} State.\n     * @api\n     */\n    Source.prototype.getState = function () {\n        return this.state_;\n    };\n    /**\n     * @return {boolean|undefined} Wrap X.\n     */\n    Source.prototype.getWrapX = function () {\n        return this.wrapX_;\n    };\n    /**\n     * @return {boolean} Use linear interpolation when resampling.\n     */\n    Source.prototype.getInterpolate = function () {\n        return this.interpolate_;\n    };\n    /**\n     * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\n     * @api\n     */\n    Source.prototype.refresh = function () {\n        this.changed();\n    };\n    /**\n     * Set the attributions of the source.\n     * @param {AttributionLike|undefined} attributions Attributions.\n     *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\n     *     or `undefined`.\n     * @api\n     */\n    Source.prototype.setAttributions = function (attributions) {\n        this.attributions_ = adaptAttributions(attributions);\n        this.changed();\n    };\n    /**\n     * Set the state of the source.\n     * @param {import(\"./State.js\").default} state State.\n     */\n    Source.prototype.setState = function (state) {\n        this.state_ = state;\n        this.changed();\n    };\n    return Source;\n}(BaseObject));\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {?Attribution} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n    if (!attributionLike) {\n        return null;\n    }\n    if (Array.isArray(attributionLike)) {\n        return function (frameState) {\n            return attributionLike;\n        };\n    }\n    if (typeof attributionLike === 'function') {\n        return attributionLike;\n    }\n    return function (frameState) {\n        return [attributionLike];\n    };\n}\nexport default Source;\n//# sourceMappingURL=Source.js.map"],"sourceRoot":""}